[
  {
    "_id": "5ebbee7ef83e663c70272e7b",
    "Name": "Page",
    "Title": "",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "url"
      },
      {
        "DataType": "string",
        "PropName": "title"
      },
      {
        "DataType": "string",
        "PropName": "head",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "scripts",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "children",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "master",
        "NullAllowed": false
      }
    ],
    "Created": {
      "DateTime": "2020-05-13T12:56:30.433Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-18T22:35:35.635Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "jsx3",
    "Jsx": "function Favicon() {\r\n  return `<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/apple-touch-icon.png\">\r\n<link rel=\"icon\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/favicon-32x32.png\">\r\n<link rel=\"manifest\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/site.webmanifest\">\r\n<link rel=\"mask-icon\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/safari-pinned-tab.svg\" color=\"#5bbad5\">\r\n<meta name=\"msapplication-TileColor\" content=\"#da532c\">\r\n<meta name=\"msapplication-config\" content=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/browserconfig.xml\">\r\n<meta name=\"theme-color\" content=\"#ffffff\">`;\r\n}\r\nasync function Block({ url = null, title = null, master = null, head = null, scripts = null, children = null, cache = null }) {\r\n  Req.response.header('Cache-Control', `max-age=${cache && cache.ttl && !Req.user ? cache.ttl : 0}`)\r\n  return (<html>\r\n    <head>\r\n      <title>{title}</title>\r\n      <meta charset=\"utf-8\" />\r\n      <base href=\"/\" />\r\n      {Favicon()}\r\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,maximum-scale=5\" />\r\n      {head}\r\n    </head>\r\n    <body>\r\n      {children.join('')}\r\n      <PageLoader />\r\n      {scripts}\r\n    </body>\r\n  </html>);\r\n}\r\n\r\n// render current page as html\r\nlet render = <Block {...data} />;\r\n// if it is ajax request we return html this block, without html wrapper\r\nif (Req.httpMethod && Req.httpMethod === 'POST') {\r\n  render = data.children.join('');\r\n}\r\nelse if (data.master) {\r\n  // if page has a master insert this page into master content slot and render master\r\n  const MasterPage = Mars.blocks[data.master];\r\n  if (!MasterPage)\r\n    throw new Error('Master page doesnt exist: ' + data.master);\r\n  render = <MasterPage {...data}>{data.children.join('')}</MasterPage>;\r\n}\r\nexport default render;\r\n",
    "JsxTranspiled": "function Favicon() {\n  return `<link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/apple-touch-icon.png\">\n<link rel=\"icon\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/favicon-32x32.png\">\n<link rel=\"manifest\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/site.webmanifest\">\n<link rel=\"mask-icon\" href=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/safari-pinned-tab.svg\" color=\"#5bbad5\">\n<meta name=\"msapplication-TileColor\" content=\"#da532c\">\n<meta name=\"msapplication-config\" content=\"https://d1zibq5kp019rb.cloudfront.net/assets/favicon/browserconfig.xml\">\n<meta name=\"theme-color\" content=\"#ffffff\">`;\n}\nasync function Block({ url = null, title = null, master = null, head = null, scripts = null, children = null, cache = null }) {\n  Req.response.header('Cache-Control', `max-age=${cache && cache.ttl && !Req.user ? cache.ttl : 0}`);\n  return executeAppBlock(\n    \"html\",\n    null,\n    executeAppBlock(\n      \"head\",\n      null,\n      executeAppBlock(\n        \"title\",\n        null,\n        title\n      ),\n      executeAppBlock(\"meta\", { charset: \"utf-8\" }),\n      executeAppBlock(\"base\", { href: \"/\" }),\n      Favicon(),\n      executeAppBlock(\"meta\", { name: \"viewport\", content: \"width=device-width, initial-scale=1.0,maximum-scale=5\" }),\n      head\n    ),\n    executeAppBlock(\n      \"body\",\n      null,\n      children.join(''),\n      executeAppBlock(PageLoader, null),\n      scripts\n    )\n  );\n}\n\n// render current page as html\nlet render = executeAppBlock(Block, data);\n// if it is ajax request we return html this block, without html wrapper\nif (Req.httpMethod && Req.httpMethod === 'POST') {\n  render = data.children.join('');\n} else if (data.master) {\n  // if page has a master insert this page into master content slot and render master\n  const MasterPage = Mars.blocks[data.master];\n  if (!MasterPage) throw new Error('Master page doesnt exist: ' + data.master);\n  render = executeAppBlock(\n    MasterPage,\n    data,\n    data.children.join('')\n  );\n}\nexport default render;",
    "Script": "",
    "Html": "",
    "Css": "",
    "BlockFunction": "",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "TestPage": "",
    "isSystem": true
  },
  {
    "_id": "5ebb0d3852aa726e1c08965a",
    "Name": "BlockAlpine",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "list",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "string",
            "PropName": "name2"
          }
        ]
      }
    ],
    "Created": {
      "DateTime": "2020-05-12T20:55:20.978Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-12T21:54:36.710Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nfunction TodoList({ list }) {\r\n  list.forEach(t => t.openMenu = false);\r\n  return <ul x-data={`{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`} x-init={`BLOCKS.container1_props = props`}>\r\n    {list.map(({ name }, i) => (<li x-on-mouseup=\"if($event.button === 2) openMenu = true; return false;\">\r\n      <div class=\"p-4\">\r\n        <span x-text={`BLOCKS.container1_props.list[${i}].name`}></span>\r\n        <input type=\"text\" x-model={`BLOCKS.container1_props.list[${i}].name`} class=\"block border mt-2 rounded px-2\" />\r\n        <This.html />\r\n      </div>\r\n    </li>))}\r\n  </ul>;\r\n}\r\nfunction Block() {\r\n  return (<div>\r\n    <div id={data.Id}>\r\n      <TestCmsBlocks1 editable />\r\n      <Blockjsx3 Id=\"b1\" prop1=\"f1\" />\r\n      <This.style />\r\n      <This.script />\r\n    </div>\r\n\r\n  </div>);\r\n}\r\n/*setTimeout(() => { Alpine.start() }, 100);*/\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\n    \"ul\",\n    { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.container1_props = props` },\n    list.map(({ name }, i) => executeAppBlock(\n      \"li\",\n      { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" },\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"p-4\" },\n        executeAppBlock(\"span\", { \"x-text\": `BLOCKS.container1_props.list[${i}].name` }),\n        executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.container1_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }),\n        executeAppBlock(This.html, null)\n      )\n    ))\n  );\n}\nfunction Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"div\",\n      { id: data.Id },\n      executeAppBlock(TestCmsBlocks1, { editable: true }),\n      executeAppBlock(Blockjsx3, { Id: \"b1\", prop1: \"f1\" }),\n      executeAppBlock(This.style, null),\n      executeAppBlock(This.script, null)\n    )\n  );\n}\n/*setTimeout(() => { Alpine.start() }, 100);*/\nexport default executeAppBlock(Block, null);",
    "Script": "import 'https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js';\r\n\r\nif (!window['BLOCKS']) window['BLOCKS'] = {};\r\n\r\n\r\n\r\n\r\nwindow.XID = new MarsBlock('XID', 'BlockAlpine',data);",
    "Html": "<div class=\"flex items-center justify-end relative\">\r\n\tclick here ‚Üí\r\n\t<button type=\"button\" title=\"Add a tag\" \r\n\tclass=\"flex items-center justify-center text-2xl text-white bg-indigo-600 hover:bg-indigo-500 no-underline rounded-full w-8 h-8 ml-2\" \r\n\t>&vellip;</button>\r\n\r\n\t<div x-show=\"openMenu\" x-cloak @click.away=\"openMenu = false\"\r\n\t\tclass=\"absolute w-48 top-0 right-0 -mt-1 mr-10 grid grid-flow-row bg-indigo-100 border border-indigo-500 shadow-md\">\r\n\r\n\t\t<!-- Edit -->\r\n\t\t<div class=\"flex items-center hover:bg-white\" >\r\n\t\t\t<a href=\"#\" class=\"flex items-center w-full text-base p-2\">\r\n\t\t\t\tEdit<span ></span>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\r\n\t\t<!-- Delete -->\r\n\t\t<div class=\"flex items-center hover:bg-white\">\r\n\r\n\t\t</div>\r\n\r\n\t</div>\r\n</div>",
    "Css": ".testclass{\r\n    border: '${data.w}'px solid red;\r\n }",
    "BlockFunction": "",
    "ShowCompiledJsx": true,
    "TestPage": "admin/test-block/5ebb0d3852aa726e1c08965a--draft",
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "DemoJsxTranspiled": "export default executeAppBlock(BlockAlpine, null);",
    "DemoJsx": "export default <BlockAlpine />",
    "isSystem": true
  },
  {
    "_id": "5ebc4c6f94593e2e8c63fa6b",
    "Name": "FindDinamicPageByPath",
    "Title": "",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "urlPath",
        "SampleValue": "/company/56",
        "Description": "Pass url path from the browser starting with slash. Query params are ignored"
      },
      {
        "DataType": "array",
        "PropName": "blocks",
        "Description": "array of all page blocks"
      }
    ],
    "Created": {
      "DateTime": "2020-05-13T19:37:19.151Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-13T19:39:17.947Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "BlockFunction": "const routePattern = require('route-pattern').fromString;\r\n\r\nconst pageBlocks = Object.values(data.blocks || BLOCKS)\r\n  .filter(t => t && t.Page && t.Page.settings && t.Apps && (t.Apps.length === 0 || t.Apps.includes(APP.AppId)));\r\n\r\nconst requestUrl = data.urlPath.toLowerCase().replace(/\\?.*$/, '');\r\n\r\nfunction getUrlPattern(u) {\r\n  return routePattern(u.replace(/\\?.*$/, ''))\r\n}\r\n\r\nconst page = pageBlocks.find(t => getUrlPattern(t.Page.settings.url).matches(requestUrl));\r\nif (!page) throw new Error('page not found')\r\n\r\nlet pattern = getUrlPattern(page.Page.settings.url);\r\nconst m = pattern.match(data.urlPath);\r\nconst pageProps = { ...m.namedParams, ...m.queryParams, ...m.hashParams };\r\n\r\nreturn {\r\n  Block: page,\r\n  Props: pageProps\r\n};",
    "Jsx": "",
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "service",
    "TestCode": "test('test static url', async () => {\r\n  const urlPath = '/home';\r\n  let b = await EXECUTE('FindDinamicPageByPath')({ urlPath });\r\n  expect(b).toHaveProperty('Block');\r\n  expect(b).toHaveProperty('Props');\r\n  expect(b.Block.Page.settings.url).toBe(urlPath);\r\n})\r\n\r\ntest('test dinamic url', async () => {\r\n  const urlPath = '/home/123';\r\n  let b = await EXECUTE('FindDinamicPageByPath')({ urlPath });\r\n  expect(b).toBeTruthy();\r\n  expect(b.Block.Page.settings.url).toBe('/home/:prop1');\r\n  expect(b.Props).toMatchObject({ prop1: '123' });\r\n})\r\n\r\ntest('test query params dinamic url', async () => {\r\n  const urlPath = '/home/123?p1=hey';\r\n  let b = await EXECUTE('FindDinamicPageByPath')({ urlPath });\r\n  expect(b).toBeTruthy();\r\n  expect(b.Block.Page.settings.url).toBe('/home/:prop1');\r\n  expect(b.Props).toMatchObject({ prop1: '123', p1: 'hey' });\r\n})\r\n\r\ntest('test wrong dinamic url', async () => {\r\n  const urlPath = '/home/123';\r\n  let b = await EXECUTE('FindDinamicPageByPath')({ urlPath });\r\n  expect(b).toBeTruthy();\r\n  expect(b.Block.Page.settings.url).not.toBe('/home/:wrongProp');\r\n})",
    "DataForScriptFunction": "",
    "TestPage": "admin/test-block/5ebc4c6f94593e2e8c63fa6b--draft",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "isSystem": true
  },
  {
    "_id": "5ec724cee7db3641d4d04a7d",
    "Name": "MarsIdeBlockDemoRunner",
    "Title": "",
    "Apps": [],
    "Folder": "ide",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "currentBlockName"
      }
    ],
    "Created": {
      "DateTime": "2020-05-22T01:03:11.174Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-22T01:03:11.174Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "page",
    "BlockFunction": "async function server() {\r\n  let demoBlock = Mars.allBlocks.find(t => t.Name === data.currentBlockName);\r\n  if (!demoBlock) return `Cant find block: ${data.currentBlockName}`\r\n\r\n  if (!demoBlock.DemoJsxTranspiled) return 'There is no demo sample. Please add it in JSX style to demo tab.'\r\n\r\n  this['executeApp' + 'Block'] = Mars['executeAppBlock'];\r\n\r\n  const funStr = 'if(!Mars.blocks) {throw new Error(\"Mars.blocks is null\")} ' +\r\n    'with (Mars.blocks) {' + demoBlock.DemoJsxTranspiled.replace('export ' + 'default', 'return ')\r\n      .replace(/executeAppBlock\\(/g, 'executeAppBlock(Req,')\r\n      .replace('Mars.render', 'return ') +\r\n    '}';\r\n\r\n  if (!funStr.includes('return')) return `You must have \"export${''} default ...\". E.g. <pre><code><textarea readonly>export${''} default <${demoBlock.Name}/></textarea></code></pre>`\r\n\r\n  const f = new Mars.libs.AsyncFunction('Mars', 'data', 'Req', funStr);\r\n\r\n  const result = f(Mars, {}, Req)//await eval(demoBlock.DemoJsxTranspiled.replace('Mars.' + 'render', ' '));\r\n\r\n  return result;\r\n}",
    "Jsx": "const { serverData } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  return await serverData\r\n}\r\n\r\nMars.render(\r\n  <Block />\r\n)\r\n",
    "Css": " [data-target-id=\"XID\"]{\r\n  font-size: 14px;\r\n }\r\n\r\n[data-target-id=\"XID\"] .alert-heading {\r\n  color: inherit;\r\n  font-size: 14px;\r\n}\r\n\r\n.test-failed{\r\n  background: #1e1e1e;\r\n  color: #fefefe;\r\n  font-size: 14px;\r\n  padding: 1rem;\r\n }",
    "Script": "function initXID() {\r\n  const lib = decodeURIComponent(data.JestDefinition)\r\n  monaco.languages.typescript.typescriptDefaults.addExtraLib(lib);\r\n}\r\n\r\ndocument.addEventListener('onMonacoLoad', initXID, { once: true });",
    "TestCode": "test('test 2 good', () => { expect(1).toBe(1) })",
    "JestDefinition": "declare type SyncExpectationResult = {\r\n  pass: boolean;\r\n  message: () => string;\r\n};\r\ndeclare type AsyncExpectationResult = Promise<SyncExpectationResult>;\r\ndeclare type ExpectationResult = SyncExpectationResult | AsyncExpectationResult;\r\ndeclare type RawMatcherFn = {\r\n  (received: any, expected: any, options?: any): ExpectationResult;\r\n\r\n};\r\ndeclare type ThrowingMatcherFn = (actual: any) => void;\r\ndeclare type PromiseMatcherFn = (actual: any) => Promise<void>;\r\ndeclare type Tester = (a: any, b: any) => boolean | undefined;\r\ndeclare type MatcherState = {\r\n  assertionCalls: number;\r\n  currentTestName?: string;\r\n  dontThrow?: () => void;\r\n  error?: Error;\r\n  equals: (a: unknown, b: unknown, customTesters?: Array<Tester>, strictCheck?: boolean) => boolean;\r\n  expand?: boolean;\r\n  expectedAssertionsNumber?: number;\r\n  isExpectingAssertions?: boolean;\r\n  isNot: boolean;\r\n  promise: string;\r\n  suppressedErrors: Array<Error>;\r\n\r\n};\r\ndeclare type AsymmetricMatcher = Record<string, any>;\r\ndeclare type MatchersObject = {\r\n  [id: string]: RawMatcherFn;\r\n};\r\ndeclare type Expect = {\r\n  <T = unknown>(actual: T): Matchers<T>;\r\n  addSnapshotSerializer(arg0: any): void;\r\n  assertions(arg0: number): void;\r\n  extend(arg0: any): void;\r\n  extractExpectedAssertionsErrors: () => Array<{\r\n    actual: string | number;\r\n    error: Error;\r\n    expected: string;\r\n  }>;\r\n  getState(): MatcherState;\r\n  hasAssertions(): void;\r\n  setState(arg0: any): void;\r\n  any(expectedObject: any): AsymmetricMatcher;\r\n  anything(): AsymmetricMatcher;\r\n  arrayContaining(sample: Array<unknown>): AsymmetricMatcher;\r\n  objectContaining(sample: Record<string, unknown>): AsymmetricMatcher;\r\n  stringContaining(expected: string): AsymmetricMatcher;\r\n  stringMatching(expected: string | RegExp): AsymmetricMatcher;\r\n  [id: string]: AsymmetricMatcher;\r\n  not: {\r\n    [id: string]: AsymmetricMatcher;\r\n  };\r\n};\r\ninterface Constructable {\r\n  new(...args: Array<unknown>): unknown;\r\n}\r\ninterface Matchers<R> {\r\n  /**\r\n   * Ensures the last call to a mock function was provided specific args.\r\n   */\r\n  lastCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that the last call to a mock function has returned a specified value.\r\n   */\r\n  lastReturnedWith(value: unknown): R;\r\n  /**\r\n   * If you know how to test something, `.not` lets you test its opposite.\r\n   */\r\n  not: Matchers<R>;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments on an Nth call.\r\n   */\r\n  nthCalledWith(nthCall: number, ...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that the nth call to a mock function has returned a specified value.\r\n   */\r\n  nthReturnedWith(n: number, value: unknown): R;\r\n  /**\r\n   * Use resolves to unwrap the value of a fulfilled promise so any other\r\n   * matcher can be chained. If the promise is rejected the assertion fails.\r\n   */\r\n  resolves: Matchers<Promise<R>>;\r\n  /**\r\n   * Unwraps the reason of a rejected promise so any other matcher can be chained.\r\n   * If the promise is fulfilled the assertion fails.\r\n   */\r\n  rejects: Matchers<Promise<R>>;\r\n  /**\r\n   * Checks that a value is what you expect. It uses `===` to check strict equality.\r\n   * Don't use `toBe` with floating-point numbers.\r\n   */\r\n  toBe(expected: unknown): R;\r\n  /**\r\n   * Ensures that a mock function is called.\r\n   */\r\n  toBeCalled(): R;\r\n  /**\r\n   * Ensures that a mock function is called an exact number of times.\r\n   */\r\n  toBeCalledTimes(expected: number): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments.\r\n   */\r\n  toBeCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Using exact equality with floating point numbers is a bad idea.\r\n   * Rounding means that intuitive things fail.\r\n   * The default for numDigits is 2.\r\n   */\r\n  toBeCloseTo(expected: number, numDigits?: number): R;\r\n  /**\r\n   * Ensure that a variable is not undefined.\r\n   */\r\n  toBeDefined(): R;\r\n  /**\r\n   * When you don't care what a value is, you just want to\r\n   * ensure a value is false in a boolean context.\r\n   */\r\n  toBeFalsy(): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeGreaterThan(expected: number | bigint): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeGreaterThanOrEqual(expected: number | bigint): R;\r\n  /**\r\n   * Ensure that an object is an instance of a class.\r\n   * This matcher uses `instanceof` underneath.\r\n   */\r\n  toBeInstanceOf(expected: Function): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeLessThan(expected: number | bigint): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeLessThanOrEqual(expected: number | bigint): R;\r\n  /**\r\n   * This is the same as `.toBe(null)` but the error messages are a bit nicer.\r\n   * So use `.toBeNull()` when you want to check that something is null.\r\n   */\r\n  toBeNull(): R;\r\n  /**\r\n   * Use when you don't care what a value is, you just want to ensure a value\r\n   * is true in a boolean context. In JavaScript, there are six falsy values:\r\n   * `false`, `0`, `''`, `null`, `undefined`, and `NaN`. Everything else is truthy.\r\n   */\r\n  toBeTruthy(): R;\r\n  /**\r\n   * Used to check that a variable is undefined.\r\n   */\r\n  toBeUndefined(): R;\r\n  /**\r\n   * Used to check that a variable is NaN.\r\n   */\r\n  toBeNaN(): R;\r\n  /**\r\n   * Used when you want to check that an item is in a list.\r\n   * For testing the items in the list, this uses `===`, a strict equality check.\r\n   */\r\n  toContain(expected: unknown): R;\r\n  /**\r\n   * Used when you want to check that an item is in a list.\r\n   * For testing the items in the list, this  matcher recursively checks the\r\n   * equality of all fields, rather than checking for object identity.\r\n   */\r\n  toContainEqual(expected: unknown): R;\r\n  /**\r\n   * Used when you want to check that two objects have the same value.\r\n   * This matcher recursively checks the equality of all fields, rather than checking for object identity.\r\n   */\r\n  toEqual(expected: unknown): R;\r\n  /**\r\n   * Ensures that a mock function is called.\r\n   */\r\n  toHaveBeenCalled(): R;\r\n  /**\r\n   * Ensures that a mock function is called an exact number of times.\r\n   */\r\n  toHaveBeenCalledTimes(expected: number): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments.\r\n   */\r\n  toHaveBeenCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments on an Nth call.\r\n   */\r\n  toHaveBeenNthCalledWith(nthCall: number, ...args: Array<unknown>): R;\r\n  /**\r\n   * If you have a mock function, you can use `.toHaveBeenLastCalledWith`\r\n   * to test what arguments it was last called with.\r\n   */\r\n  toHaveBeenLastCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Use to test the specific value that a mock function last returned.\r\n   * If the last call to the mock function threw an error, then this matcher will fail\r\n   * no matter what value you provided as the expected return value.\r\n   */\r\n  toHaveLastReturnedWith(expected: unknown): R;\r\n  /**\r\n   * Used to check that an object has a `.length` property\r\n   * and it is set to a certain numeric value.\r\n   */\r\n  toHaveLength(expected: number): R;\r\n  /**\r\n   * Use to test the specific value that a mock function returned for the nth call.\r\n   * If the nth call to the mock function threw an error, then this matcher will fail\r\n   * no matter what value you provided as the expected return value.\r\n   */\r\n  toHaveNthReturnedWith(nthCall: number, expected: unknown): R;\r\n  /**\r\n   * Use to check if property at provided reference keyPath exists for an object.\r\n   * For checking deeply nested properties in an object you may use dot notation or an array containing\r\n   * the keyPath for deep references.\r\n   *\r\n   * Optionally, you can provide a value to check if it's equal to the value present at keyPath\r\n   * on the target object. This matcher uses 'deep equality' (like `toEqual()`) and recursively checks\r\n   * the equality of all fields.\r\n   *\r\n   * @example\r\n   *\r\n   * expect(houseForSale).toHaveProperty('kitchen.area', 20);\r\n   */\r\n  toHaveProperty(keyPath: string | Array<string>, value?: unknown): R;\r\n  /**\r\n   * Use to test that the mock function successfully returned (i.e., did not throw an error) at least one time\r\n   */\r\n  toHaveReturned(): R;\r\n  /**\r\n   * Use to ensure that a mock function returned successfully (i.e., did not throw an error) an exact number of times.\r\n   * Any calls to the mock function that throw an error are not counted toward the number of times the function returned.\r\n   */\r\n  toHaveReturnedTimes(expected: number): R;\r\n  /**\r\n   * Use to ensure that a mock function returned a specific value.\r\n   */\r\n  toHaveReturnedWith(expected: unknown): R;\r\n  /**\r\n   * Check that a string matches a regular expression.\r\n   */\r\n  toMatch(expected: string | RegExp): R;\r\n  /**\r\n   * Used to check that a JavaScript object matches a subset of the properties of an object\r\n   */\r\n  toMatchObject(expected: Record<string, unknown> | Array<unknown>): R;\r\n  /**\r\n   * Ensure that a mock function has returned (as opposed to thrown) at least once.\r\n   */\r\n  toReturn(): R;\r\n  /**\r\n   * Ensure that a mock function has returned (as opposed to thrown) a specified number of times.\r\n   */\r\n  toReturnTimes(count: number): R;\r\n  /**\r\n   * Ensure that a mock function has returned a specified value at least once.\r\n   */\r\n  toReturnWith(value: unknown): R;\r\n  /**\r\n   * Use to test that objects have the same types as well as structure.\r\n   */\r\n  toStrictEqual(expected: unknown): R;\r\n  /**\r\n   * Used to test that a function throws when it is called.\r\n   */\r\n  toThrow(error?: string | Constructable | RegExp | Error): R;\r\n  /**\r\n   * If you want to test that a specific error is thrown inside a function.\r\n   */\r\n  toThrowError(error?: string | Constructable | RegExp | Error): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchSnapshot<T extends {\r\n    [P in keyof R]: unknown;\r\n  }>(propertyMatchers: Partial<T>, snapshotName?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchSnapshot(snapshotName?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchInlineSnapshot<T extends {\r\n    [P in keyof R]: unknown;\r\n  }>(propertyMatchers: Partial<T>, snapshot?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchInlineSnapshot(snapshot?: string): R;\r\n  /**\r\n   * Used to test that a function throws a error matching the most recent snapshot when it is called.\r\n   */\r\n  toThrowErrorMatchingSnapshot(): R;\r\n  /**\r\n   * Used to test that a function throws a error matching the most recent snapshot when it is called.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   */\r\n  toThrowErrorMatchingInlineSnapshot(snapshot?: string): R;\r\n}\r\n\r\nlet expect: Expect;",
    "DataForScriptFunction": "return {\r\n  JestDefinition: encodeURIComponent(BLOCKS.MarsTest.JestDefinition)\r\n }",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "JsxTranspiled": "const { serverData } = Mars.initJsx();\n\nasync function Block() {\n  return await serverData;\n}\n\nMars.render(executeAppBlock(Block, null));",
    "Page": {
      "settings": {
        "url": "/mars/demo/:currentBlockName",
        "title": "Demo"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5eacd1054b3d9e41bc3b0056",
    "Name": "PageBlock",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-02T01:46:45.444Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-02T01:48:55.389Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "TestPage": "admin/test-block/5eacd1054b3d9e41bc3b0056--draft",
    "Type": "page",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nasync function CustomParentBlock({ prop1, children = null }) {\r\n  return (\r\n    <div>\r\n      <b>CustomParentBlock:</b>\r\n      <div id={prop1}>\r\n        {children.join('')}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function CustomBlock({ prop1 }) {\r\n  return (\r\n    <div>\r\n      <div id={prop1}>\r\n        <input v-model=\"model\" />\r\n        {`{{ model }}`}\r\n        <input v-model=\"model\" />\r\n      </div>\r\n      <script type=\"module\">\r\n        {`import 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js';`}\r\n        {` new Vue({el: '#${prop1}',data: {model: 'hey'}})`}\r\n      </script>\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function CustomBlockCompostition() {\r\n  return (\r\n    <div>\r\n      <CustomBlock prop1=\"el1\" />\r\n      <CustomBlock prop1=\"el2\" />\r\n      <CustomParentBlock prop1=\"el3\">\r\n        <CustomBlock prop1=\"elsub1\" />\r\n        <CustomBlock prop1=\"elsub2\" />\r\n      </CustomParentBlock>\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function JsonGroup({ children = [] }) {\r\n  return {\r\n    BlockType: 'group',\r\n    Items: children\r\n  }\r\n}\r\n\r\nasync function JsonBlock({ blockType, title }) {\r\n  return {\r\n    BlockType: blockType,\r\n    Title: title\r\n  }\r\n}\r\n\r\n\r\nconst head = <link src=\"some.css\" />;\r\n\r\n/*async function PageProps({ url, title }) {\r\n  await EXECUTE('edit json in mongo service')({\r\n    Collection: 'Blocks',\r\n    ObjectId: data.BlockId.toString(),\r\n    Path: 'Page.Props',\r\n    Payload: { url, title }\r\n  });\r\n  return { ttt: 123 }\r\n}\r\n\r\n<PageSettings>\r\n  <PageProps url='/home' title='home3' />\r\n</PageSettings>*/\r\n\r\nconst h = <div>\r\n  <b>bold text</b>\r\n  <div class=\"text-center px-lg-3\">\r\n    <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n      <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n    </span><div class=\"text-center px-lg-3\">\r\n      <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n        <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n      </span>\r\n      <h3 class=\"h5\">Professional Design</h3>\r\n      <p class=\"mb-md-0\">  <b>bold text</b>\r\n        <div class=\"text-center px-lg-3\">\r\n          <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n            <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n          </span><div class=\"text-center px-lg-3\">\r\n            <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n              <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n            </span>\r\n            <h3 class=\"h5\">Professional Design</h3>\r\n            <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n          </div><b>bold text</b>\r\n          <h3 class=\"h5\">Professional Design</h3>\r\n          <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n        </div><b>bold text</b>Achieve virtually any design and layout from within the one template .</p>\r\n    </div><b>bold text</b>\r\n    <h3 class=\"h5\">Professional Design</h3>\r\n    <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n  </div><b>bold text</b>\r\n</div>\r\n\r\nconst array1 = Array.from({ length: 10 }, () =>\r\n  Math.floor(Math.random() * 40)\r\n)\r\n\r\nasync function Ttable({ children = null }) {\r\n  const sd = await serverData;\r\n  return (\r\n    <div>\r\n      {'reqqq:' + JSON.stringify(sd.Req)}\r\n      <h1>\r\n        {children.find(t => t.SlotName === 'h1').Content}\r\n      </h1>\r\n      <b>{children.find(t => t.SlotName === 'b').Content}</b>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default <Page {...Req} {...thisBlock.Page.settings} head={<script type=\"module\" src=\"https://cdn.jsdelivr.net/npm/vue\"></script>}>\r\n  <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n  <CmsAdminBtn />\r\n  <Modal />\r\n  <Wysiwyg Id=\"Wysiwyg2\" />\r\n  <PageAdminToolbar objectId={thisBlock._id} path=\"Page\" modelName=\"PageModel\"/>\r\n  <PageAdminActions actions={[{\r\n    title: 'edit wisywig block',\r\n    blockId: 'Wysiwyg2'\r\n  }]} />\r\n\r\n  {'Req: ' + JSON.stringify(Req)}\r\n  <BlockAlpine list={[{ name: 'item1' }, { name: 'item2' }]} Id=\"testid3\" />\r\n\r\n  <Ttable>\r\n    <Slot slotName='h1'>\r\n      1423555:\r\n      </Slot>\r\n    <Slot slotName='b'>slot2</Slot>\r\n  </Ttable>\r\n  <JsonBlock blockType=\"card\" title=\"some title\" />\r\n\r\n\r\n  <h1>Inserted blocks jsx3</h1>\r\n\r\n  <h1>---------</h1>\r\n  <br />\r\n\r\n  <h1>CustomBlockCompostition</h1>\r\n  <CustomBlockCompostition />\r\n\r\n  <h1>CustomBlock</h1>\r\n  <CustomBlock prop1=\"el123\" />\r\n\r\n  <h1>Lots of html</h1>\r\n  {array1.map(t => h)}\r\n\r\n  <h1>Test-new-jsx</h1>\r\n  <Test-new-jsx Data={{ Text: 'hey from page' }} />\r\n</Page>",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { serverData, This } = Mars.initJsx();\n\nasync function CustomParentBlock({ prop1, children = null }) {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"b\",\n      null,\n      \"CustomParentBlock:\"\n    ),\n    executeAppBlock(\n      \"div\",\n      { id: prop1 },\n      children.join('')\n    )\n  );\n}\n\nasync function CustomBlock({ prop1 }) {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"div\",\n      { id: prop1 },\n      executeAppBlock(\"input\", { \"v-model\": \"model\" }),\n      `{{ model }}`,\n      executeAppBlock(\"input\", { \"v-model\": \"model\" })\n    ),\n    executeAppBlock(\n      \"script\",\n      { type: \"module\" },\n      `import 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js';`,\n      ` new Vue({el: '#${prop1}',data: {model: 'hey'}})`\n    )\n  );\n}\n\nasync function CustomBlockCompostition() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(CustomBlock, { prop1: \"el1\" }),\n    executeAppBlock(CustomBlock, { prop1: \"el2\" }),\n    executeAppBlock(\n      CustomParentBlock,\n      { prop1: \"el3\" },\n      executeAppBlock(CustomBlock, { prop1: \"elsub1\" }),\n      executeAppBlock(CustomBlock, { prop1: \"elsub2\" })\n    )\n  );\n}\n\nasync function JsonGroup({ children = [] }) {\n  return {\n    BlockType: 'group',\n    Items: children\n  };\n}\n\nasync function JsonBlock({ blockType, title }) {\n  return {\n    BlockType: blockType,\n    Title: title\n  };\n}\n\nconst head = executeAppBlock(\"link\", { src: \"some.css\" });\n\n/*async function PageProps({ url, title }) {\r\n  await EXECUTE('edit json in mongo service')({\r\n    Collection: 'Blocks',\r\n    ObjectId: data.BlockId.toString(),\r\n    Path: 'Page.Props',\r\n    Payload: { url, title }\r\n  });\r\n  return { ttt: 123 }\r\n}\r\n\r\n<PageSettings>\r\n  <PageProps url='/home' title='home3' />\r\n</PageSettings>*/\n\nconst h = executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"b\",\n    null,\n    \"bold text\"\n  ),\n  executeAppBlock(\n    \"div\",\n    { \"class\": \"text-center px-lg-3\" },\n    executeAppBlock(\n      \"span\",\n      { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n      executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n    ),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"text-center px-lg-3\" },\n      executeAppBlock(\n        \"span\",\n        { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n        executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n      ),\n      executeAppBlock(\n        \"h3\",\n        { \"class\": \"h5\" },\n        \"Professional Design\"\n      ),\n      executeAppBlock(\n        \"p\",\n        { \"class\": \"mb-md-0\" },\n        \"  \",\n        executeAppBlock(\n          \"b\",\n          null,\n          \"bold text\"\n        ),\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"text-center px-lg-3\" },\n          executeAppBlock(\n            \"span\",\n            { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n            executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n          ),\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"text-center px-lg-3\" },\n            executeAppBlock(\n              \"span\",\n              { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n              executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n            ),\n            executeAppBlock(\n              \"h3\",\n              { \"class\": \"h5\" },\n              \"Professional Design\"\n            ),\n            executeAppBlock(\n              \"p\",\n              { \"class\": \"mb-md-0\" },\n              \"Achieve virtually any design and layout from within the one template .\"\n            )\n          ),\n          executeAppBlock(\n            \"b\",\n            null,\n            \"bold text\"\n          ),\n          executeAppBlock(\n            \"h3\",\n            { \"class\": \"h5\" },\n            \"Professional Design\"\n          ),\n          executeAppBlock(\n            \"p\",\n            { \"class\": \"mb-md-0\" },\n            \"Achieve virtually any design and layout from within the one template .\"\n          )\n        ),\n        executeAppBlock(\n          \"b\",\n          null,\n          \"bold text\"\n        ),\n        \"Achieve virtually any design and layout from within the one template .\"\n      )\n    ),\n    executeAppBlock(\n      \"b\",\n      null,\n      \"bold text\"\n    ),\n    executeAppBlock(\n      \"h3\",\n      { \"class\": \"h5\" },\n      \"Professional Design\"\n    ),\n    executeAppBlock(\n      \"p\",\n      { \"class\": \"mb-md-0\" },\n      \"Achieve virtually any design and layout from within the one template .\"\n    )\n  ),\n  executeAppBlock(\n    \"b\",\n    null,\n    \"bold text\"\n  )\n);\n\nconst array1 = Array.from({ length: 10 }, () => Math.floor(Math.random() * 40));\n\nasync function Ttable({ children = null }) {\n  const sd = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    'reqqq:' + JSON.stringify(sd.Req),\n    executeAppBlock(\n      \"h1\",\n      null,\n      children.find(t => t.SlotName === 'h1').Content\n    ),\n    executeAppBlock(\n      \"b\",\n      null,\n      children.find(t => t.SlotName === 'b').Content\n    )\n  );\n}\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings, { head: executeAppBlock(\"script\", { type: \"module\", src: \"https://cdn.jsdelivr.net/npm/vue\" }) }),\n  executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" }),\n  executeAppBlock(CmsAdminBtn, null),\n  executeAppBlock(Modal, null),\n  executeAppBlock(Wysiwyg, { Id: \"Wysiwyg2\" }),\n  executeAppBlock(PageAdminToolbar, { objectId: thisBlock._id, path: \"Page\", modelName: \"PageModel\" }),\n  executeAppBlock(PageAdminActions, { actions: [{\n      title: 'edit wisywig block',\n      blockId: 'Wysiwyg2'\n    }] }),\n  'Req: ' + JSON.stringify(Req),\n  executeAppBlock(BlockAlpine, { list: [{ name: 'item1' }, { name: 'item2' }], Id: \"testid3\" }),\n  executeAppBlock(\n    Ttable,\n    null,\n    executeAppBlock(\n      Slot,\n      { slotName: \"h1\" },\n      \"1423555:\"\n    ),\n    executeAppBlock(\n      Slot,\n      { slotName: \"b\" },\n      \"slot2\"\n    )\n  ),\n  executeAppBlock(JsonBlock, { blockType: \"card\", title: \"some title\" }),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Inserted blocks jsx3\"\n  ),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"---------\"\n  ),\n  executeAppBlock(\"br\", null),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"CustomBlockCompostition\"\n  ),\n  executeAppBlock(CustomBlockCompostition, null),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"CustomBlock\"\n  ),\n  executeAppBlock(CustomBlock, { prop1: \"el123\" }),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Lots of html\"\n  ),\n  array1.map(t => h),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Test-new-jsx\"\n  ),\n  executeAppBlock(\"Test-new-jsx\", { Data: { Text: 'hey from page' } })\n);",
    "Page": {
      "settings": {
        "title": "home4",
        "url": "/test",
        "folder": "test"
      }
    },
    "BlockFunction": "async function server() {\r\n  /*const AWS = require('aws-sdk');\r\n  var util = require('util');\r\n  const s3 = new AWS.S3();\r\n\r\n  const res3 = await s3.getObject({\r\n    Bucket: 'marscode',\r\n    Key: 'system/README.md'\r\n  }).promise();\r\n\r\n  const res4 = await s3.getObject({\r\n    Bucket: 'marscode',\r\n    Key: 'users/.gitignore'\r\n  }).promise();\r\n  */\r\n\r\n  /*const c = await Mars.services.GetUserByToken({ token: \"caxFqFzk8F4Nee6rLiqU6OmR4awu47NCu3m+8rheAKthyfx1LGd6EioKgEx7sl8yXgSc76zESmpbv+UPSdY17ip0mIM26gqtIExtNSCcmPB6vEcrG5uRiYGhsFjRdUwBn4wF0HYvtwiVeQfwHOo+PflOzmyavQgMCkyFOQf5H6Y=\" }, Req);\r\n  console.log(c);*/\r\n  return {\r\n    //res3: 'hey: ' + res3.Body.toString('utf-8') + '||| ' + res4.Body.toString('utf-8'),\r\n    res3: '',\r\n    anotherProp: 1,\r\n    Req\r\n  };\r\n}\r\nreturn server();",
    "updatedAt": "2020-09-08T00:31:19.178Z",
    "blocks": {
      "Wysiwyg1": {
        "content": [
          {
            "type": "paragraph",
            "data": {
              "text": "sdfsdfss"
            }
          }
        ]
      },
      "Wysiwyg2": {
        "content": [
          {
            "type": "paragraph",
            "data": {
              "text": "ssdfs"
            }
          }
        ]
      }
    },
    "isSystem": true
  },
  {
    "_id": "5ebc1932b5273631202774b9",
    "Name": "Slot",
    "Title": "",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "slotName"
      },
      {
        "DataType": "string",
        "PropName": "children"
      }
    ],
    "Created": {
      "DateTime": "2020-05-13T15:58:43.082Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-13T15:58:43.082Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "jsx3",
    "Jsx": "async function Block({ slotName, children = null }) {\r\n  return {\r\n    SlotName: slotName,\r\n    Content: children.join('')\r\n  }\r\n}\r\n\r\nexport default <Block {...data} />",
    "JsxTranspiled": "async function Block({ slotName, children = null }) {\n  return {\n    SlotName: slotName,\n    Content: children.join('')\n  };\n}\n\nexport default executeAppBlock(Block, data);",
    "Script": "",
    "Html": "",
    "Css": "",
    "BlockFunction": "",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "isSystem": true
  },
  {
    "_id": "5ebc885299d5b26ce8e7ee99",
    "Name": "GetUserByToken",
    "Title": "",
    "Apps": [],
    "Folder": "auth",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "token"
      }
    ],
    "Created": {
      "DateTime": "2020-05-13T23:52:50.143Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-13T23:55:07.570Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "BlockFunction": "const jwt = Mars.libs.require('jsonwebtoken');\r\n\r\nasync function server() {\r\n  if (data.token) {\r\n    const decodedUser = jwt.verify(data.token, Mars.config.secret).data;\r\n    if (!decodedUser) throw new Error('Your token is not valid');\r\n    return decodedUser\r\n  }\r\n  throw new Error('No token provided');\r\n}",
    "Jsx": "",
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "service",
    "TestCode": "test('test static url', async () => {\r\n  let u = await EXECUTE('GetUserByToken')({ token: 'caxFqFzk8F4Nee6rLiqU6OmR4awu47NCu3m+8rheAKthyfx1LGd6EioKgEx7sl8yXgSc76zESmpbv+UPSdY17ip0mIM26gqtIExtNSCcmPB6vEcrG5uRiYGhsFjRdUwBn4wF0HYvtwiVeQfwHOo+PflOzmyavQgMCkyFOQf5H6Y=' });\r\n  expect(u).toMatchObject({\r\n    \"Email\": \"rashid.lepshokov@gmail.com\",\r\n    \"Phone\": \"92407928\",\r\n    \"Name\": \"John Rush üèÖ \",\r\n    \"UserId\": 20,\r\n    \"Avatar\": \"https://imagesdev.filmgrail.com/user/20/25042018225908/\"\r\n  });\r\n})",
    "DataForScriptFunction": "",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "TestPage": "admin/test-block/5ebc885299d5b26ce8e7ee99--draft",
    "isSystem": true
  },
  {
    "_id": "5ec99893592a6f4edc6f48d5",
    "Name": "ExecuteApiMethod",
    "Title": "",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [
      {
        "PropName": "blockName",
        "DataType": "string"
      },
      {
        "PropName": "methodName",
        "DataType": "string"
      },
      {
        "PropName": "methodData",
        "DataType": "array"
      },
      {
        "PropName": "blockData",
        "DataType": "array"
      }
    ],
    "Created": {
      "DateTime": "2020-05-23T21:41:39.457Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-23T21:41:39.457Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "service",
    "BlockFunction": "async function server() {\r\n  const b = Mars.allBlocks.find(t => t.Name === data.blockName);\r\n\r\n  const fParams = ['Mars', 'data', 'Req', 'thisBlock'];\r\n  const apiFun = b.BlockFunction + '\\n' + 'return api()';\r\n  const f = new Mars.libs.AsyncFunction(...fParams, apiFun);\r\n  const result = await f(Mars, data.blockData, Req, b);\r\n  console.log(result)\r\n  return data.methodData ? result[data.methodName](...data.methodData) :\r\n    result[data.methodName]();\r\n}",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nasync function Block() {\n    return '123';\n}\nMars.render(executeAppBlock(Block, null));",
    "DemoJsx": "\"use strict\";\r\nasync function Block() {\r\n    return '123';\r\n}\r\nMars.render(<Block />);\r\n",
    "Script": "",
    "isSystem": true
  },
  {
    "_id": "5eb35ce51315ae64b9e03189",
    "Name": "Blockjsx3",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "listsss",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          }
        ]
      }
    ],
    "Created": {
      "DateTime": "2020-05-02T01:46:45.444Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-12T19:56:22.800Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "TestPage": "admin/test-block/5eb35ce51315ae64b9e03189--draft",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n    const sd = await serverData;\r\n    const prop1 = data.prop1;\r\n    data.w = 50;\r\n    function getId(id) {\r\n        return id;\r\n    }\r\n    return (<div id={data.Id} class=\"testclass\">\r\n    <div>\r\n      11111111111111111111111111{prop1}\r\n        s3: {sd.res3}\r\n      <div Id={`${data.Id}vue`}>\r\n        <This.children />\r\n        <This.html />\r\n        </div>\r\n        <TestCmsBlocks1 editable />\r\n      <This.style />\r\n      <This.script />\r\n    </div>\r\n\r\n  </div>);\r\n}\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const sd = await serverData;\n  const prop1 = data.prop1;\n  data.w = 50;\n  function getId(id) {\n    return id;\n  }\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"testclass\" },\n    executeAppBlock(\n      \"div\",\n      null,\n      \"11111111111111111111111111\",\n      prop1,\n      \"s3: \",\n      sd.res3,\n      executeAppBlock(\n        \"div\",\n        { Id: `${data.Id}vue` },\n        executeAppBlock(This.children, null),\n        executeAppBlock(This.html, null)\n      ),\n      executeAppBlock(TestCmsBlocks1, { editable: true }),\n      executeAppBlock(This.style, null),\n      executeAppBlock(This.script, null)\n    )\n  );\n}\nexport default executeAppBlock(Block, null);",
    "Script": "import 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.6.11/vue.min.js';\r\n\r\nnew Vue({\r\n  el: '#XIDvue',\r\n  data: {\r\n    model: data.hey,\r\n  },\r\n  methods: {\r\n    async loadLodash() {\r\n      await import('https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.min.js');\r\n      this.model = _.add(1, 2);\r\n    }\r\n  }\r\n});\r\n\r\n\r\nwindow._XID = new MarsBlock('XID', 'Blockjsx3', data);",
    "Html": "<input v-model=\"model\" />\r\n<b>{{ model }}</b>\r\n<i>aaaa${123}a</i>\r\n<input v-model=\"model\" />\r\n<button v-on:click=\"loadLodash()\">test</button>",
    "Css": ".testclass{\r\n   border: '${data.w}'px solid red;\r\n }",
    "BlockFunction": "async function server() {\r\n  /*const AWS = require('aws-sdk');\r\n  var util = require('util');\r\n  const s3 = new AWS.S3();\r\n\r\n  const res3 = await s3.getObject({\r\n    Bucket: 'marscode',\r\n    Key: 'system/README.md'\r\n  }).promise();\r\n\r\n  const res4 = await s3.getObject({\r\n    Bucket: 'marscode',\r\n    Key: 'users/.gitignore'\r\n  }).promise();\r\n  */\r\n  /*const c = await Mars.services.GetUserByToken({ token: \"caxFqFzk8F4Nee6rLiqU6OmR4awu47NCu3m+8rheAKthyfx1LGd6EioKgEx7sl8yXgSc76zESmpbv+UPSdY17ip0mIM26gqtIExtNSCcmPB6vEcrG5uRiYGhsFjRdUwBn4wF0HYvtwiVeQfwHOo+PflOzmyavQgMCkyFOQf5H6Y=\" }, Req);\r\n  console.log(c);*/\r\n  return {\r\n    //res3: 'hey: ' + res3.Body.toString('utf-8') + '||| ' + res4.Body.toString('utf-8'),\r\n    res3: '',\r\n    anotherProp: 1\r\n  };\r\n}\r\nreturn server();",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "updatedAt": "2020-06-24T01:57:33.191Z",
    "isSystem": true
  },
  {
    "_id": "5ec3017ba00abf524cd5f2a4",
    "Name": "BlockPage",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "blockName"
      }
    ],
    "Created": {
      "DateTime": "2020-05-18T21:43:23.974Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T01:49:00.476Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "page",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  const s = await serverData;\r\n\r\n  if (s && s.login) return <div>You are not logged in. Please <a href=\"/mars/auth\">Log In or Register</a></div>\r\n\r\n  async function BlockFilesCode() {\r\n    return (s.Type === 'settings') ?\r\n      (<SettingsRawCode Id=\"BlockFiles1\" block={s} />) :\r\n      (<BlockFiles Id=\"BlockFiles1\" block={s} />)\r\n  }\r\n\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <BlockTabs Id=\"BlockTabs1\" block={s} />\r\n    {s ? <BlockFilesCode /> : `<p class=\"p-2\" style=\"color:red\">Block <b>${data.blockName}</b> does not exist...</p>`}\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { serverData, This } = Mars.initJsx();\n\nasync function Block() {\n  const s = await serverData;\n\n  if (s && s.login) return executeAppBlock(\n    \"div\",\n    null,\n    \"You are not logged in. Please \",\n    executeAppBlock(\n      \"a\",\n      { href: \"/mars/auth\" },\n      \"Log In or Register\"\n    )\n  );\n\n  async function BlockFilesCode() {\n    return s.Type === 'settings' ? executeAppBlock(SettingsRawCode, { Id: \"BlockFiles1\", block: s }) : executeAppBlock(BlockFiles, { Id: \"BlockFiles1\", block: s });\n  }\n\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(BlockTabs, { Id: \"BlockTabs1\", block: s }),\n    s ? executeAppBlock(BlockFilesCode, null) : `<p class=\"p-2\" style=\"color:red\">Block <b>${data.blockName}</b> does not exist...</p>`\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Page": {
      "settings": {
        "url": "/mars/ide/:blockName",
        "title": "mars-ide-block-page",
        "master": "MarsIdeMasterPage"
      }
    },
    "BlockFunction": "async function server() {\r\n  if (!Req.user) return { login: true }\r\n\r\n  /*if (!Req.user.roles || !Req.user.roles.length || (!Req.user.roles.includes('super-admin') && !Req.user.roles.includes('admin') && !Req.user.roles.includes('developer')))\r\n    throw new Error('You do not have enought permissions to view this page. Please contact admins so that they add needed roles to your account.')*/\r\n\r\n  let currentBlock = Mars.allBlocks.find(t => t.Name === data.blockName);\r\n  return currentBlock;\r\n}",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "Script": "",
    "isSystem": true
  },
  {
    "_id": "5ec5c35d2696444e483610b0",
    "Name": "BlockFiles",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "PropName": "block",
        "DataType": "object"
      }
    ],
    "Created": {
      "DateTime": "2020-05-20T23:55:09.640Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T23:55:09.640Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const sData = await serverData\r\n  return (<div style=\"background-color: #212122!important;\">\r\n    <This.html id={data.Id} />\r\n    <div class=\"pt-1\">\r\n      {sData.codeFiles.filter(t => !t.divider).map((t, i) =>\r\n        <MonacoCode Id={`container${t.title}`} code={t.code} fileName={t.title} blockId={sData.blockId} lang={t.lang} propNameToSave={t.propNameToSave} transpileTs={t.transpileTs} transpileJsx={t.transpileJsx} />)}\r\n    </div>\r\n    <This.script {...sData} block={sData.block}\r\n      blockName={sData.block.name} />\r\n    <This.style />\r\n  </div>);\r\n}\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const sData = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { style: \"background-color: #212122!important;\" },\n    executeAppBlock(This.html, { id: data.Id }),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"pt-1\" },\n      sData.codeFiles.filter(t => !t.divider).map((t, i) => executeAppBlock(MonacoCode, { Id: `container${t.title}`, code: t.code, fileName: t.title, blockId: sData.blockId, lang: t.lang, propNameToSave: t.propNameToSave, transpileTs: t.transpileTs, transpileJsx: t.transpileJsx }))\n    ),\n    executeAppBlock(This.script, _extends({}, sData, { block: sData.block,\n      blockName: sData.block.name })),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default executeAppBlock(Block, null);",
    "Script": "new MarsVue(\"XID\", {\r\n  ...data, methods: [{ name: 'getTestResults', block: 'BlockFiles' },\r\n  { name: 'getDemoResults', block: 'BlockFiles' },\r\n  { name: 'updateBlock', block: 'BlockFiles' },\r\n  { name: 'deleteBlock', block: 'BlockFiles' }]\r\n},\r\n  {\r\n    data: {\r\n      group: '',\r\n      invoke: '',\r\n      ...data,\r\n      blockTypeOptions: [{\r\n        value: 'jsx3', text: 'ui block'\r\n      }, {\r\n        value: 'service', text: 'service'\r\n      }, {\r\n        value: 'page', text: 'page'\r\n      }, {\r\n        value: 'model', text: 'model'\r\n      }, {\r\n        value: 'settings', text: 'settings'\r\n      }],\r\n      folderOptions: [],\r\n      saving: false,\r\n      newFolder: false,\r\n      invokeOptions: [{\r\n        value: 'cache', text: 'On cache initialization'\r\n      }, {\r\n        value: 'queue', text: 'On queue message'\r\n      }, {\r\n        value: 'schedule', text: 'Based on time schedule'\r\n      }, {\r\n        value: 'trigger', text: 'Based on trigger'\r\n      }]\r\n    },\r\n    mounted() {\r\n      // if there was activetab saved earlier\r\n      function initTab() {\r\n        if (window[`_active_tab_title_${data.blockName}`]) XID.setActiveTab(XID.codeFiles.find(t => t.title === window[`_active_tab_title_${data.blockName}`]))\r\n        else XID.setActiveTab(XID.codeFiles.find(t => t.active))\r\n      }\r\n      Vue.nextTick(function () {\r\n        if (window['monaco']) initTab()\r\n        else document.addEventListener('onMonacoLoad', function () {\r\n          initTab()\r\n        }, false);\r\n      })\r\n\r\n      setTimeout(() => {\r\n        this.folderOptions.push(...flatten(NestedTree1.treeData).map(t => t.name));\r\n        this.folderOptions.push('+ new')\r\n      }, 300)\r\n    },\r\n    methods: {\r\n      clearStorage() {\r\n        let localBlocks = JSON.parse(localStorage.getItem(\"localBlocks\"));\r\n        localBlocks = localBlocks.filter(t => t.name !== data.blockName);\r\n        localStorage.setItem(\"localBlocks\", JSON.stringify(localBlocks));\r\n      },\r\n      async deleteBlock() {\r\n        const r = await XID.api.deleteBlock(data.blockId);\r\n\r\n        this.clearStorage();\r\n\r\n        this.$bvToast.toast(`Block has been deleted`, {\r\n          title: 'Navigate to another page now.',\r\n          autoHideDelay: 2000,\r\n          variant: 'success',\r\n          solid: true\r\n        })\r\n\r\n        location.reload();\r\n      },\r\n      async updateBlock() {\r\n        try {\r\n          const r = await XID.api.updateBlock({ ...data.block, blockId: data.blockId });\r\n\r\n          this.clearStorage();\r\n\r\n          this.$bvToast.toast(`Block has been updated`, {\r\n            title: 'The old block is still valid. You need to reset cache to completely delete it.',\r\n            autoHideDelay: 2000,\r\n            variant: 'success',\r\n            solid: true\r\n          })\r\n\r\n          location.href = r;\r\n        } catch (e) {\r\n          this.$bvToast.toast(e.response ? e.response.data : e, {\r\n            title: 'Failed to update the block',\r\n            autoHideDelay: 2000,\r\n            variant: 'danger',\r\n            solid: true\r\n          })\r\n        }\r\n      },\r\n      setActiveTab(tab) {\r\n        this.codeFiles.filter(t => !t.divider).forEach(t => {\r\n          window[`container${t.title}container`].hidden = t.title !== tab.title\r\n          t.active = t.title === tab.title\r\n        });\r\n\r\n        // we save active tab so that if user goes away and back the active tab is pesistent\r\n        window[`_active_tab_title_${data.blockName}`] = tab.title;\r\n      },\r\n      async loadDemo() {\r\n        const testDemoHtml = await XID.api.getDemoResults(data.blockName);\r\n        if ($('#IdeBlockDemoRunner_root').html())\r\n          $('#IdeBlockDemoRunner_root').replaceWith(testDemoHtml)\r\n        else $('body').append(testDemoHtml)\r\n      },\r\n      async runTests() {\r\n        const testResHtml = await XID.api.getTestResults(data.blockName);\r\n        if ($('#IdeUnitTestRunner_root').html())\r\n          $('#IdeUnitTestRunner_root').replaceWith(testResHtml)\r\n        else $('body').append(testResHtml)\r\n      },\r\n      editProps() {\r\n        const editUrl = `/mars/edit-data-args/${data.blockName}`;\r\n        console.log('editUrl', editUrl)\r\n        Modal.open(`/api/RenderFormByModel?Id=RenderDataByModel1&modelName=${this.block.name}&path=DataArgs&collectionName=blocks&objectId=${data.blockId || ''}&iframeUrl=${encodeURIComponent(editUrl)}`,\r\n          { width: '800px', noPadding: true, title: `Edit model: ${this.block.name}` })\r\n      },\r\n      editPageSettings() {\r\n        const editUrl = `/mars/edit-data/PageModel/blocks?objectId=${this.blockId || ''}&path=Page`;\r\n        console.log('editUrl', editUrl)\r\n        Modal.open(`/api/RenderFormByModel?Id=RenderDataByModel1&modelName=PageModel&path=Page&collectionName=blocks&objectId=${this.blockId || ''}&iframeUrl=${encodeURIComponent(editUrl)}`,\r\n          { width: '550px', noPadding: true, title: `Edit ${this.block.name}` })\r\n      }\r\n    }\r\n  });",
    "Html": "<div id=\"XID\" v-cloak>\r\n\t<ul class=\"nav nav-classic float-left\">\r\n\t\t<li v-for=\"(codeFile, index3) in codeFiles\" class=\"nav-item changed\">\r\n\t\t\t<a v-if=\"!codeFile.divider\" class=\"nav-link noselect\" @click=\"setActiveTab(codeFile)\"\r\n\t\t\t\t:class=\"{'active': codeFile.active, 'font-italic font-weight-light text-muted': codeFile.empty, 'no-icon-slot': codeFile.changed || codeFile.saved}\">\r\n\t\t\t\t{{codeFile.title}}\r\n\t\t\t\t<i v-show=\"codeFile.changed\" class=\"fas fa-xs fa-circle icon-slot\"></i>\r\n\t\t\t\t<i v-show=\"codeFile.saved\" class=\"text-success fas fa-xs fa-check icon-slot\"></i>\r\n\t\t\t\t<b-spinner v-if=\"codeFile.saving\" type=\"grow\" small></b-spinner>\r\n\t\t\t</a>\r\n\t\t\t<i v-if=\"codeFile.divider\" class=\"code-file-divider\"></i>\r\n\t\t</li>\r\n\t</ul>\r\n\t<ul class=\"nav nav-classic float-right\">\r\n\t\t<!--<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"runTests()\">\r\n\t\t\t\t<i class=\"text-white fas fa-xs fa-server icon-slot\"></i>\r\n\t\t\t\t<span class=\"text-white\">props</span>\r\n\t\t\t</a>\r\n\t\t</li>-->\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"runTests()\">\r\n\t\t\t\t<i class=\"text-success fas fa-xs fa-play icon-slot\"></i>\r\n\t\t\t\ttest\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"loadDemo()\">\r\n\t\t\t\t<i class=\"text fas fa-xs fa-desktop icon-slot\"></i>\r\n\t\t\t\tdemo\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a id=\"popover-target-1\" class=\"nav-link noselect\">\r\n\t\t\t\t<i class=\"fas fa-xs fa-ellipsis-v icon-slot\"></i>\r\n\t\t\t\tmore\r\n\t\t\t</a>\r\n\t\t\t<b-popover target=\"popover-target-1\" triggers=\"click\">\r\n\t\t\t\t<template v-slot:title>More Actions</template>\r\n\t\t\t\t<b-button class=\"my-2\" variant=\"dark\" block size=\"md\" v-if=\"block.type === 'page'\" @click=\"editPageSettings\">\r\n\t\t\t\t\tEdit page settings\r\n\t\t\t\t</b-button>\r\n\t\t\t\t<b-button class=\"my-2\" variant=\"dark\" block size=\"md\" v-if=\"block.type !== 'page'\"  @click=\"editProps\">\r\n\t\t\t\t\tEdit props\r\n\t\t\t\t</b-button>\r\n\t\t\t\t<b-dropdown variant=\"dark\" text=\"Edit block\">\r\n\t\t\t\t\t<div class=\"p-2\">\r\n\t\t\t\t\t\t<b-form-group label=\"Block Name\" @submit.stop.prevent>\r\n\t\t\t\t\t\t\t<b-form-input @blur=\"block.name=toCamelCase(block.name)\" type=\"text\" size=\"sm\"\r\n\t\t\t\t\t\t\t\tv-model=\"block.name\" placeholder=\"e.g. MyBlock\">\r\n\t\t\t\t\t\t\t</b-form-input>\r\n\t\t\t\t\t\t</b-form-group>\r\n\r\n\t\t\t\t\t\t<b-form-group label=\"Type\">\r\n\t\t\t\t\t\t\t<b-form-select v-model=\"block.type\" :options=\"blockTypeOptions\"></b-form-select>\r\n\t\t\t\t\t\t</b-form-group>\r\n\r\n\t\t\t\t\t\t<b-form-group label=\"Invoke\">\r\n\t\t\t\t\t\t\t<b-form-select v-model=\"block.invoke\" :options=\"invokeOptions\"></b-form-select>\r\n\t\t\t\t\t\t</b-form-group>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tFolder <a class=\"mt-1\" @click=\"newFolder=!newFolder\">{{newFolder ? '-' : '+'}}</a>\r\n\t\t\t\t\t\t\t<b-form-input v-if=\"newFolder\" type=\"text\" size=\"sm\" v-model=\"block.folder\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"e.g. Folder1\">\r\n\t\t\t\t\t\t\t</b-form-input>\r\n\t\t\t\t\t\t\t<b-form-select v-if=\"!newFolder\" v-model=\"block.folder\" :options=\"folderOptions\">\r\n\t\t\t\t\t\t\t</b-form-select>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<b-button class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"updateBlock\">\r\n\t\t\t\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\t\t\t\tUpdate\r\n\t\t\t\t\t\t</b-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</b-dropdown>\r\n\t\t\t\t<b-dropdown variant=\"dark\" text=\"Delete\">\r\n\t\t\t\t\t<b-dropdown-item variant=\"danger\" @click=\"deleteBlock()\">Confirm deleting</b-dropdown-item>\r\n\t\t\t\t</b-dropdown>\r\n\t\t\t</b-popover>\r\n\t\t</li>\r\n\t</ul>\r\n</div>",
    "Css": ".code-file-divider{\r\n    color: #616161;\r\n  padding: 7px 10px;\r\n  border-right: 1px solid #3a3a3a;\r\n  margin: 10px;\r\n  display: block;\r\n}\r\n\r\n.monaco-container {\r\n\twidth: 100%;\r\n\theight: calc(100vh - 70px);\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\toverflow: hidden;\r\n}\r\n\r\n.monaco-editor{\r\n  padding-top: 8px;\r\n}\r\n\r\n.code-container {\r\n\tleft: 0;\r\n\ttop: 50px;\r\n\twidth: 100%;\r\n  max-width: 100%;\r\n\theight: 1000px;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n  padding-top: 3px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.code-status-line{\r\nposition: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n  background: #415a5ac2;\r\n  width: 100%;\r\n}\r\n\r\n.editor-monaco-editor .attr-name, .mtk1 {\r\n  color: #8ad3ff;\r\n}\r\n\r\n.editor-monaco-editor .as-keyword, .editor-monaco-editor .await-keyword, .editor-monaco-editor .catch-keyword, .editor-monaco-editor .default-keyword, .editor-monaco-editor .else-keyword, .editor-monaco-editor .export-keyword, .editor-monaco-editor .from-keyword, .editor-monaco-editor .if-keyword, .editor-monaco-editor .import-keyword, .editor-monaco-editor .return-keyword, .editor-monaco-editor .static-keyword, .editor-monaco-editor .try-keyword {\r\n  color: #b86cb4;\r\n}\r\n\r\n.editor-monaco-editor .function, .editor-monaco-editor .function-variable {\r\n  color: #d4d797;\r\n}\r\n\r\n#XID a{\r\n\tcursor: pointer;\r\n}\r\n\r\n#XID .text-muted{\r\n color: #6a6a6a!important;\r\n}\r\n \r\n#XID .nav .nav-link{\r\n  padding: 0.3rem 1rem;\r\n  font-size: 13px;\r\n  color: #a0a0a0;\r\n} \r\n#XID .nav .nav-link.active{\r\n  color: #ffffff!important;\r\n  transition: none;\r\n}\r\n\r\n#XID .nav-classic .nav-link.active {\r\n  border-bottom: 2px solid #4b4b4b;\r\n}\r\n\r\n#XID .nav{\r\n  border-bottom: none;\r\n}\r\n\r\n#XID .custom-control-label:before {\r\n  background-color: #4b4b4b;\r\n  border: 1px solid #97a4af;\r\n  border-radius: none!important;\r\n  left: -1.1rem;\r\n  width: 0.8rem;\r\n  height: 0.8rem;\r\n}\r\n\r\n#XID .custom-control-inline{\r\n  padding-top: 0.3rem!important;\r\n  margin-right: 0.6rem!important;\r\n}\r\n\r\n#XID .unsaved {\r\n  margin-left: 2px;\r\n}\r\n\r\n#XID .no-icon-slot {\r\n  padding-right: 2px!important;\r\n}\r\n\r\n#XID .icon-slot {\r\n  width: 10px;\r\n  margin-left: 1px;\r\n}\r\n\r\n.noselect {\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}",
    "BlockFunction": "function server() {\r\n  const b = data.block;\r\n  const codeFiles = [{\r\n    title: 'props', code: JSON.stringify(b.DataArgs, null, 2), lang: 'json', propNameToSave: 'DataArgs', index: 0, active: false, saving: false, saved: false, changed: false, empty: true, transpileJsx: false, transpileTs: false\r\n  }, {\r\n    title: 'server', code: b.BlockFunction, lang: 'typescript', propNameToSave: 'BlockFunction'\r\n  }, {\r\n    title: 'jsx', code: b.Jsx, lang: 'javascript', propNameToSave: 'Jsx', transpileJsx: true, transpileTs: true\r\n  }, {\r\n    title: 'html', code: b.Html, lang: 'html', propNameToSave: 'Html'\r\n  }, {\r\n    title: 'client', code: b.Script, lang: 'javascript', propNameToSave: 'Script'\r\n  }, {\r\n    title: 'css', code: b.Css, lang: 'css', propNameToSave: 'Css'\r\n  }, {\r\n    divider: true,\r\n  }, {\r\n    title: 'tests', code: b.TestCode, lang: 'javascript', propNameToSave: 'TestCode'\r\n  }, {\r\n    title: 'demo', code: b.DemoJsx, lang: 'javascript', propNameToSave: 'DemoJsx', transpileJsx: true, transpileTs: true\r\n  }];\r\n\r\n  if (b.Type === 'page') codeFiles.unshift({\r\n    title: 'page',\r\n    code: JSON.stringify(b.Page, null, 2),\r\n    index: 0,\r\n    lang: 'json',\r\n    propNameToSave: 'Page',\r\n    active: false,\r\n    saving: false,\r\n    changed: false,\r\n    empty: false,\r\n    transpileJsx: false,\r\n    transpileTs: false\r\n  })\r\n\r\n\r\n  codeFiles.forEach((c, ii) => {\r\n    c.changed = false;\r\n    c.empty = !c.code;\r\n    c.index = ii;\r\n    c.active = false;\r\n    c.saved = false;\r\n    c.saving = false;\r\n  });\r\n\r\n  switch (b.Type) {\r\n    case 'model':\r\n      codeFiles.find(t => t.title === 'props').active = true;\r\n      break;\r\n\r\n    case 'service':\r\n      codeFiles.find(t => t.title === 'server').active = true;\r\n      break;\r\n\r\n    case 'settings':\r\n      codeFiles[0].active = true;\r\n      break;\r\n\r\n    default:\r\n      codeFiles.find(t => t.title === 'jsx').active = true;\r\n      break;\r\n  }\r\n\r\n  return {\r\n    blockId: b._id.toString(),\r\n    block: {\r\n      name: b.Name,\r\n      type: b.Type,\r\n      folder: b.Folder\r\n    },\r\n    codeFiles\r\n  };\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    getTestResults(testBlockName) {\r\n      return Mars.blocks.DemoIframe(Mars,\r\n        {\r\n          url: `/api/MarsIdeUnitTestRunner?currentBlockName=${testBlockName}`,\r\n          Id: 'IdeUnitTestRunner',\r\n          background: '#212122!important'\r\n        }, Req)\r\n    },\r\n    getDemoResults(testBlockName) {\r\n      return Mars.blocks.DemoIframe(Mars,\r\n        { url: `/mars/demo/${testBlockName}`, Id: 'IdeBlockDemoRunner' }, Req)\r\n    },\r\n    async deleteBlock(blockId) {\r\n      const dbClient = await Mars.mongoDb;\r\n      await dbClient.collection('blocks').deleteOne({ _id: new Mars.libs.ObjectID(blockId) });\r\n      const b = Mars.allBlocks.find(t => t._id.toString() === blockId);\r\n      b.Name = `Deleted (${b.Name})`;\r\n      return true;\r\n    },\r\n    async updateBlock(updatedBlock) {\r\n      const ub = Mars.allBlocks.find(t => t && t.Name && t.Name.toLowerCase() === updatedBlock.name.toLowerCase());\r\n      if (ub && ub._id.toString() !== data.blockId) throw new Error('The block with this name already exists')\r\n\r\n      if (!updatedBlock.name || !updatedBlock.type) throw new Error('Block names cant be empty')\r\n      \r\n      const dbClient = await Mars.mongoDb;\r\n      const result = await dbClient.collection('blocks').\r\n        findOneAndUpdate({ _id: new Mars.libs.ObjectID(data.blockId) }, {\r\n          $set: {\r\n            Name: updatedBlock.name,\r\n            Type: updatedBlock.type,\r\n            Folder: updatedBlock.folder\r\n          }\r\n        }, { returnOriginal: false });\r\n\r\n      const b = Mars.allBlocks.find(t => t.Name === updatedBlock.name);\r\n\r\n      if (b) {\r\n        Object.assign(b, {\r\n          Name: updatedBlock.name,\r\n          Type: updatedBlock.type,\r\n          Folder: updatedBlock.folder\r\n        })\r\n      }\r\n      else {\r\n        Mars.allBlocks.push(result.value)\r\n      }\r\n\r\n      await Mars.services.InitBlocks({ blocksArr: Mars.allBlocks.filter(t => t.Type !== 'service' && t.JsxTranspiled) });\r\n      await Mars.initServices(Mars.allBlocks.filter(t => t.BlockFunction));\r\n\r\n      return `/mars/ide/${updatedBlock.name}`\r\n    }\r\n  }\r\n}",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "DataForScriptFunction": "",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(BlockFiles, { block: Mars.allBlocks[0] }));",
    "DemoJsx": "Mars.render(<BlockFiles block={Mars.allBlocks[0]}/>)",
    "isSystem": true
  },
  {
    "_id": "5ec48ed496037940244ceede",
    "Name": "MonacoCode",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "code"
      },
      {
        "DataType": "string",
        "PropName": "fileName"
      },
      {
        "DataType": "string",
        "PropName": "lang"
      },
      {
        "DataType": "string",
        "PropName": "propNameToSave"
      },
      {
        "DataType": "string",
        "PropName": "blockId"
      },
      {
        "DataType": "string",
        "PropName": "transpileTs"
      },
      {
        "DataType": "string",
        "PropName": "transpileJsx"
      }
    ],
    "Created": {
      "DateTime": "2020-05-20T01:58:45.027Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T01:58:45.027Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n    return (<div>\r\n      <div class=\"monaco-container\" id={`${data.Id}container`}></div>\r\n      <This.script {...data}/>\r\n    </div>);\r\n}\r\n\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\"div\", { \"class\": \"monaco-container\", id: `${data.Id}container` }),\n    executeAppBlock(This.script, data)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Script": "if (window.monaco) {\r\n  initMonaco();\r\n} else {\r\n  require.config({ paths: { 'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs' } });\r\n  window.MonacoEnvironment = { getWorkerUrl: () => proxy };\r\n\r\n  let proxy = URL.createObjectURL(new Blob([`\r\n\tself.MonacoEnvironment = {\r\n\t\tbaseUrl: 'https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/'\r\n\t};\r\n\timportScripts('https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/base/worker/workerMain.js');\r\n`], { type: 'text/javascript' }));\r\n\r\n  document.addEventListener('onMonacoLoad', function () {\r\n    initMonaco()\r\n  }, false);\r\n\r\n  if (!window.monaco && !window.monacoInitiated) {\r\n    window.monacoInitiated = true;\r\n    require([\"vs/editor/editor.main\"], function () {\r\n      document.dispatchEvent(new Event('onMonacoLoad'));\r\n    });\r\n  } else if (window.monacoInitiated && window.monaco) {\r\n    document.dispatchEvent(new Event('onMonacoLoad'));\r\n  }\r\n\r\n}\r\n\r\nfunction initMonaco() {\r\n  const editorOptions = {\r\n    theme: \"vs-dark\",\r\n    formatOnPaste: true,\r\n    formatOnType: true,\r\n    autoIndent: true,\r\n    tabSize: 2,\r\n    minimap: { enabled: false },\r\n    quickSuggestions: true,\r\n    value: data.code,\r\n    language: data.lang\r\n  };\r\n  const mEditor = window[`monaco${data.fileName}`] = monaco.editor.create(document.getElementById('XIDcontainer'), editorOptions);\r\n  handleSaveCode();\r\n  handleCodeChange();\r\n  // restor cached code changes if there are any 1234\r\n\r\n  const cacheCodeValue = window[`_monaco_persistcode_${data.blockId}${(getCurrentFile() || {}).title}`];\r\n  if (cacheCodeValue && cacheCodeValue !== mEditor.getValue()) {\r\n    setTimeout(() => {\r\n      mEditor.setValue(cacheCodeValue);\r\n      (getCurrentFile() || {}).changed = true;\r\n    }, 150)\r\n  }\r\n\r\n  // MacOS users can trigger editor suggest (IntelliSense) by pressing Option+Space.\r\n  mEditor.addCommand(monaco.KeyMod.Alt | monaco.KeyCode.Space, () => mEditor.trigger('', 'editor.action.triggerSuggest', ''));\r\n}\r\n\r\nfunction thisMonaco() {\r\n  return window[`monaco${data.fileName}`];\r\n}\r\n\r\nfunction getCurrentFile() {\r\n  if(!BlockFiles1.codeFiles) return null\r\n  return BlockFiles1.codeFiles.find(t => t.title === data.fileName)\r\n}\r\n\r\nfunction handleCodeChange() {\r\n  thisMonaco().onDidChangeModelContent(function (e) {\r\n    if (e.isFlush) return;\r\n    const thisCodeTab = getCurrentFile();\r\n    thisCodeTab.saved = false;\r\n    thisCodeTab.changed = true;\r\n    // save into memory to persist in case user navigated away and back here\r\n    window[`_monaco_persistcode_${data.blockId}${thisCodeTab.title}`] = thisMonaco().getValue();\r\n  });\r\n}\r\n\r\nfunction handleSaveCode() {\r\n  thisMonaco().addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KEY_S, function () {\r\n\r\n    const mEditor = thisMonaco();\r\n    const payload = { Path: data.propNameToSave, TranspileTs: data.transpileTs, TranspileJsx: data.transpileJsx, BlockId: data.blockId, Payload: mEditor.getValue() };\r\n\r\n    const thisCodeTab = getCurrentFile();\r\n    thisCodeTab.saving = true;\r\n    thisCodeTab.saved = false;\r\n    postRequest('/api/SaveBlockFileToDb', payload)\r\n      .then(function () {\r\n        thisCodeTab.saving = false;\r\n        thisCodeTab.changed = false;\r\n        thisCodeTab.saved = true;\r\n\r\n        if (window['IdeBlockDemoRunner']) window['IdeBlockDemoRunner'].refresh();\r\n\r\n      })\r\n      .catch(function (error) {\r\n        data.FailedToSave = true;\r\n        data.IsSaving = false;\r\n        alert('Failed to save code. Please open browser console to view the error');\r\n        console.error(error);\r\n        console.error(error.response.data.error);\r\n\r\n      });\r\n  });\r\n}\r\n\r\n",
    "Html": "",
    "Css": "",
    "BlockFunction": "",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "DataForScriptFunction": "",
    "isSystem": true
  },
  {
    "_id": "5ebc1e9ab5273631202774c6",
    "Name": "Fragment",
    "Title": "",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "children"
      }
    ],
    "Created": {
      "DateTime": "2020-05-13T16:21:47.107Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-13T16:21:47.107Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "jsx3",
    "Jsx": "export default data.children.join('');",
    "JsxTranspiled": "export default data.children.join('');",
    "Script": "",
    "Html": "",
    "Css": "",
    "BlockFunction": "",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "isSystem": true
  },
  {
    "_id": "5ebcac77ad748b4d740cb769",
    "Name": "Favicon",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-14T02:27:03.980Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-14T02:27:03.980Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "page",
    "Jsx": "function Block() {\r\n  return 'hey'\r\n}\r\nMars.render(<Block />)",
    "JsxTranspiled": "function Block() {\n  return 'hey';\n}\nMars.render(executeAppBlock(Block, null));",
    "Script": "",
    "Html": "",
    "Css": "",
    "BlockFunction": "",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "ServerTypeScript": "",
    "TestPage": "",
    "Page": {
      "settings": {
        "url": "/favicon.ico",
        "title": "favicon.ico"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5ecdbfaa760185477c41f029",
    "Name": "CreateNewBlock",
    "BlockFunction": "const { _ } = Mars.libs;\n\nfunction getBlockIcon(blockType) {\n\tif (blockType === 'model') return 'mars-icon json'; // fa fa-list-alt\n\tif (blockType === 'page') return 'mars-icon page'; // fa fa-list-alt\n\tif (blockType === 'app') return 'mars-icon app'; // fa fa-list-alt\n\tif (!blockType || blockType === 'block' || blockType === '') return 'mars-icon module'; // fab fa-html5\n\tif (blockType.includes('jsx')) return 'mars-icon box'; // fab fa-js-square\n\tif (blockType === 'service') return 'mars-icon js'; //fab fa-node\n\tif (blockType === 'prompter') return 'fab fa-searchengin';\n}\n\nasync function server() {\n\treturn {\n\t\tgetBlockIconFun: getBlockIcon.toString(),\n\t\ttoCamelCaseFun: Mars.libs.toCamelCase.toString(),\n\t}\n}\n\nasync function createNewBlock(data) {\n\tif (!data.Name || !data.Type) throw new Error('You must give name to the new block')\n\n\tconst dbClient = await Mars.mongoDb;\n\tconst blockExists = await dbClient.collection('blocks').findOne({ Name: data.Name });\n\tif (blockExists || Mars.allBlocks.some(t => t.Name.toLowerCase() === data.Name.toLowerCase())) throw Error('The block with this name already exists')\n\n\tconst newBlock = (await dbClient.collection('blocks').insertOne({\n\t\tName: data.Name,\n\t\tType: data.Type,\n\t\tApps: [],\n\t\tFolder: data.Folder || 'default',\n\t\tDataArgs: [],\n\t\tDemoJsx: `export default <${data.Name} />`,\n\t\tDemoJsxTranspiled: `export default executeAppBlock(${data.Name}, null);`\n\t})).ops[0];\n\n\tnewBlock._id = newBlock._id.toString();\n\n\tawait Mars.services.ResetCache({\n\t\tblockObj: newBlock\n\t})\n\n\treturn newBlock;\n}\n\nasync function api() {\n\treturn {\n\t\tasync createNewBlock(model) {\n\t\t\tconst newBlock = await createNewBlock({ Name: model.newBlockName, Type: model.blockType, Folder: model.folder });\n\t\t\tconsole.log(newBlock);\n\n\t\t\treturn newBlock;\n\t\t}\n\t}\n}",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "Name"
      },
      {
        "DataType": "string",
        "PropName": "Type"
      },
      {
        "DataType": "string",
        "PropName": "Folder"
      }
    ],
    "LastChanged": {
      "DateTime": "2020-05-27T01:19:15.490Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "Note": "",
    "Created": {
      "DateTime": "2020-05-27T01:17:30.854Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "Type": "jsx3",
    "ClientTypeScript": "",
    "Description": "",
    "Folder": "block",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Placement": "",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "TestPage": "",
    "Title": "",
    "Apps": [],
    "TestCode": "test('create new block', async () => {\r\n  const sampleBlock = { Name: 'testname2', Type: 'service', Folder: 'folder1' };\r\n  const { Name, Type, Folder } = await Mars.services.CreateNewBlock(sampleBlock);\r\n  expect(sampleBlock).toMatchObject({ Name, Type, Folder })\r\n})\r\n",
    "Html": "<div class=\"row\">\r\n\t<div class=\"col-12\" id=\"XID\" v-cloak>\r\n\t\t<div v-cloak>\r\n\t\t\t<b-form-group @submit.stop.prevent>\r\n\t\t\t\t<b-form-input @blur=\"formatName\" type=\"text\" size=\"sm\"\r\n\t\t\t\t\tv-model=\"newBlockName\" placeholder=\"e.g. MyBlock\">\r\n\t\t\t\t</b-form-input>\r\n\t\t\t</b-form-group>\r\n\r\n\t\t\t<b-form-group label=\"Type\">\r\n\t\t\t\t<b-form-select v-model=\"blockType\" :options=\"blockTypeOptions\"></b-form-select>\r\n\t\t\t</b-form-group>\r\n\r\n\t\t\t<div>\r\n\t\t\t\tFolder <a class=\"mt-1\" @click=\"newFolder=!newFolder\">{{newFolder ? '-' : '+'}}</a>\r\n\t\t\t\t<b-form-input v-if=\"newFolder\" type=\"text\" size=\"sm\" v-model=\"folder\" placeholder=\"e.g. Folder1\">\r\n\t\t\t\t</b-form-input>\r\n\t\t\t\t<b-form-select v-if=\"!newFolder\" v-model=\"folder\" :options=\"folderOptions\">\r\n\t\t\t\t</b-form-select>\r\n\t\t\t</div>\r\n\r\n\t\t\t<b-button :disabled=\"saving || !newBlockName\" class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"newBlock\">\r\n\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\tCreate\r\n\t\t\t</b-button>\r\n\t\t</div>\r\n\t</div>\r\n</div>",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null),\n    executeAppBlock(\n      \"script\",\n      null,\n      s.getBlockIconFun\n    ),\n    executeAppBlock(\n      \"script\",\n      null,\n      s.toCamelCaseFun\n    ),\n    executeAppBlock(This.script, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <This.html />\r\n      <This.style />\r\n      <script>{s.getBlockIconFun}</script>\r\n      <script>{s.toCamelCaseFun}</script>\r\n      <This.script />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"div\",\n    { style: \"display:none\" },\n    executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n  ),\n  executeAppBlock(CreateNewBlock, { Id: \"CreateNewBlock2\" })\n);",
    "DemoJsx": "export default <div>\r\n  <div style=\"display:none\">\r\n    <MarsIdeMasterPage url=\"someurl\" />\r\n  </div>\r\n  <CreateNewBlock Id=\"CreateNewBlock2\" />\r\n</div>",
    "Css": "#XID{\r\n  color: #bbb;\r\n}\r\n\r\n#XID input,  #XID select{\r\n  background-color: inherit;\r\n  border: 1px solid rgb(49, 49, 49);\r\n  color: white;\r\n}\r\n\r\n#XID option{\r\n  background-color: rgb(49, 49, 49);\r\n  border: 1px solid rgb(49, 49, 49);\r\n  color: white;\r\n}",
    "Script": "new MarsVue('XID', { methods: [{ name: 'createNewBlock', block: 'CreateNewBlock' }] },\r\n  {\r\n    data: {\r\n      newBlockName: '',\r\n      blockType: 'service',\r\n      blockTypeOptions: [{\r\n        value: 'jsx3', text: 'ui block'\r\n      }, {\r\n        value: 'service', text: 'service'\r\n      }, {\r\n        value: 'page', text: 'page'\r\n      }, {\r\n        value: 'model', text: 'model'\r\n      }, {\r\n        value: 'settings', text: 'settings'\r\n      }],\r\n      folder: '',\r\n      folderOptions: [],\r\n      saving: false,\r\n      newFolder: false\r\n    },\r\n    mounted() {\r\n      setTimeout(() => {\r\n        this.folderOptions.push(...flatten(NestedTree1.treeData).map(t => t.name));\r\n      }, 300)\r\n    },\r\n    methods: {\r\n      formatName() {\r\n        this.newBlockName = toCamelCase(this.newBlockName)\r\n      },\r\n      async newBlock() {\r\n        try {\r\n          this.saving = true;\r\n\r\n          const r = await this.api.createNewBlock({\r\n            newBlockName: this.newBlockName,\r\n            blockType: this.blockType,\r\n            folder: this.folder\r\n          })\r\n\r\n          const blockItem = { name: r.Name, url: `mars/ide/${r.Name}`, icon: getBlockIcon(this.blockType) };\r\n          const cFolder = NestedTree1.treeData[0].children.find(t => t.name.toLowerCase() === r.Folder.toLowerCase())\r\n\r\n          NestedTree1.treeData[0].isOpenByDefault = true;\r\n\r\n          if (cFolder) cFolder.children.push(blockItem)\r\n          else NestedTree1.treeData[0].children.push({\r\n            name: blockItem.folder,\r\n            icon: 'fas fa-th-large',\r\n            isOpenByDefault: true,\r\n            children: [blockItem]\r\n          })\r\n\r\n          this.$bvToast.toast(`Successfully created new block. Click here to navigate to it`, {\r\n            title: 'Successfully created new block: ' + this.newBlockName,\r\n            href: `/mars/ide/${this.newBlockName}`,\r\n            autoHideDelay: 10000,\r\n            variant: 'success',\r\n            solid: true\r\n          })\r\n\r\n          this.saving = false;\r\n          this.$refs.dropdown.hide(true)\r\n          this.newBlockName = '';\r\n\r\n          //window.open(blockItem.Page, '_blank');\r\n        } catch (e) {\r\n          this.saving = false;\r\n          alert(e.response.data)\r\n        }\r\n      }\r\n    }\r\n  })",
    "isSystem": true
  },
  {
    "_id": "5ec5a2667c3d6b2fa41384dc",
    "Name": "DemoIframe",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "url"
      }
    ],
    "Created": {
      "DateTime": "2020-05-20T21:34:30.773Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T21:34:30.773Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n    return (<div id={`${data.Id}_root`} style={`background: ${data.background || 'white'}`}>\r\n      <This.html />\r\n      <iframe id={`${data.Id}_iframe`} style=\"height: calc(100vh - 70px);border:none\" width=\"100%\" src={data.url} onload={`${data.Id}.testUrl = this.contentWindow.location.pathname+this.contentWindow.location.search`}></iframe>\r\n      <This.script url={data.url}/>\r\n      <This.style />\r\n    </div>);\r\n}\r\n\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { id: `${data.Id}_root`, style: `background: ${data.background || 'white'}` },\n    executeAppBlock(This.html, null),\n    executeAppBlock(\"iframe\", { id: `${data.Id}_iframe`, style: \"height: calc(100vh - 70px);border:none\", width: \"100%\", src: data.url, onload: `${data.Id}.testUrl = this.contentWindow.location.pathname+this.contentWindow.location.search` }),\n    executeAppBlock(This.script, { url: data.url }),\n    executeAppBlock(This.style, null)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Script": "import '/api/MarsJs';\r\n\r\nwindow.define = null;\r\nwindow.AMDLoader = null;\r\n\r\nimport('https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js').then(() => {\r\n  const position = { x: 0, y: 0 }\r\n  interact('#XID_root')\r\n    .draggable({\r\n      listeners: {\r\n        start(event) {\r\n          console.log(event.type, event.target)\r\n        },\r\n        move(event) {\r\n          position.x += event.dx\r\n          position.y += event.dy\r\n\r\n          event.target.style.transform =\r\n            `translate(${position.x}px, ${position.y}px)`\r\n        },\r\n      }\r\n    })\r\n    .resizable({\r\n      // resize from all edges and corners\r\n      edges: {\r\n        left: true,\r\n        right: false,\r\n        bottom: false,\r\n        top: false\r\n      },\r\n\r\n      listeners: {\r\n        move(event) {\r\n          var target = event.target\r\n\r\n          // update the element's style\r\n          target.style.width = event.rect.width + 'px'\r\n          target.style.height = event.rect.height + 'px'\r\n          target.style['max-width'] = event.rect.width + 'px'\r\n          target.style['max-height'] = event.rect.height + 'px'\r\n\r\n        }\r\n      }\r\n    })\r\n})\r\n\r\n\r\nfunction getIframe() {\r\n  return (document.getElementById('XID_iframe') || {})['contentWindow'];\r\n}\r\n\r\nnew MarsVue('XID', data, {\r\n  data: {\r\n    testUrl: data.url,\r\n    isLoading: false,\r\n    autoReload: true\r\n  },\r\n  methods: {\r\n    goToNewUrl(e) {\r\n      if (e.keyCode === 13) {\r\n        getIframe().location.href = this.testUrl;\r\n      }\r\n    },\r\n    refresh: function (force) {\r\n      if ((getIframe() && this.autoReload) || force) getIframe().location.reload();\r\n    },\r\n    back() {\r\n      getIframe().history.back();\r\n    },\r\n    forward() {\r\n      getIframe().history.forward();\r\n    },\r\n    close() {\r\n      XID_root.remove()\r\n    }\r\n  }\r\n});",
    "Html": "<div id=\"XID\">\r\n\t<div class=\"sc-bsbRJL koLnqx flying-container-handler\">\r\n\t\t<div class=\"v-cloak sc-hZSUBg kQnGot\">\r\n\t\t\t<button aria-label=\"Go Back\" @click=\"back()\" class=\"sc-cMhqgX gIfoKl\">\r\n                <svg fill=\"none\" preserveAspectRatio=\"xMidYMid meet\" height=\"1em\" width=\"1em\" viewBox=\"0 0 24 24\"\r\n                    style=\"vertical-align: middle;\">\r\n                    <path fill=\"#757575\" d=\"M9.728 12.5l5.855-5.664L14.72 6 8 12.5l6.72 6.5.863-.886z\">\r\n                    </path>\r\n                </svg>\r\n            </button>\r\n\t\t\t<button aria-label=\"Go Forward\" @click=\"forward()\" class=\"sc-cMhqgX gIfoKl\">\r\n                <svg fill=\"none\" preserveAspectRatio=\"xMidYMid meet\" height=\"1em\" width=\"1em\" viewBox=\"0 0 24 24\"\r\n                    style=\"vertical-align: middle;\">\r\n                    <path fill=\"#757575\" d=\"M13.855 12.5L8 18.164l.864.836 6.719-6.5L8.863 6 8 6.886z\">\r\n                    </path>\r\n                </svg>\r\n            </button>\r\n\r\n\t\t\t<button aria-label=\"Refresh\" v-on:click=\"refresh(true)\" class=\"sc-cMhqgX crlJUV\"\r\n                v-bind:class=\"{ spin: isLoading }\">\r\n                <svg fill=\"none\" preserveAspectRatio=\"xMidYMid meet\" height=\"1em\" width=\"1em\" viewBox=\"0 0 24 24\"\r\n                    style=\"vertical-align: middle;\">\r\n                    <path fill=\"#757575\"\r\n                        d=\"M16.972 15.829a5.566 5.566 0 01-4.33 2.04c-3.048 0-5.52-2.404-5.52-5.369 0-2.966 2.472-5.37 5.52-5.37 2.587 0 4.758 1.733 5.356 4.07H12.72v1.3h6.752V6h-1.345v2.788A6.728 6.728 0 0012.642 6C8.952 6 5.96 8.91 5.96 12.5S8.952 19 12.64 19c2.064 0 3.91-.91 5.135-2.34z\">\r\n                    </path>\r\n                </svg>\r\n            </button>\r\n\t\t\t<input type=\"checkbox\" class=\"auto-reload-checkbox\" title=\"auto reload on code save\" v-model=\"autoReload\">\r\n\t\t</div>\r\n\t\t\t<div class=\"sc-esOvli gDGacr\">\r\n\t\t\t\t<div class=\"sc-epnACN cCZFGj\">\r\n\t\t\t\t\t<div class=\"sc-iQNlJl fLtvIK\">\r\n\t\t\t\t\t\t<input aria-label=\"Address Bar Input\" style=\"color: #a0a0a0;\" v-on:keyup=\"goToNewUrl\" value=\"loading...\" v-model=\"testUrl\" />\r\n                </div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a class=\"sc-cMhqgX sc-iuJeZd fRKJpM\" :href=\"testUrl\" target=\"_blank\">\r\n\t\t\t\t\t<span style=\"outline-color: transparent;\">\r\n                <svg fill=\"none\" preserveAspectRatio=\"xMidYMid meet\" height=\"1em\" width=\"1em\" viewBox=\"0 0 24 24\"\r\n                    style=\"vertical-align: middle;\">\r\n                    <path fill=\"#757575\" fill-rule=\"evenodd\"\r\n                        d=\"M19.454 6H15.5c-.301 0-.5.199-.5.5s.199.5.5.5H18l-3.5 3.5 1 1L19 8v2.5c0 .301.199.5.5.5s.5-.199.5-.5V6.545A.545.545 0 0019.455 6zM6.734 7H13v.867H6.733a.867.867 0 00-.866.866v6.587c0 .479.388.867.866.867h10.4A.867.867 0 0018 15.32V13h.867v2.32c0 .957-.776 1.733-1.734 1.733h-10.4A1.733 1.733 0 015 15.32V8.733C5 7.776 5.776 7 6.733 7z\"\r\n                        clip-rule=\"evenodd\">\r\n                    </path>\r\n                </svg>\r\n            </span>\r\n\t\t\t\t</a>\r\n\r\n\t\t\t\t<button class=\"close-iframe\" @click=\"close\">\r\n        </button>\r\n\r\n\t\t\t</div>\r\n\t\t</div>",
    "Css": "#XID_root{\r\n\tposition: absolute;\r\n  top: 70px;\r\n  right: 0;\r\n  width: 500px;\r\n  overflow: hidden;\r\n  height: calc(100vh - 70px);\r\n  box-shadow: 1px -1px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\r\n}\r\n\r\n.auto-reload-checkbox{\r\n  margin-top: 6px;\r\n  opacity: 0.5;\r\n}\r\n\r\n.koLnqx svg {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.koLnqx {\r\n  display: flex;\r\n  background-color: rgb(21, 21, 21);\r\n  -webkit-box-align: center;\r\n  align-items: center;\r\n  line-height: 1;\r\n  height: 40px;\r\n  min-height: 40px;\r\n  box-sizing: border-box;\r\n  z-index: 2;\r\n  padding: 0.25rem;\r\n}\r\n\r\n.kQnGot {\r\n  display: flex;\r\n}\r\n\r\n.gIfoKl {\r\n  display: inline-block;\r\n  background-color: transparent;\r\n  font-size: 1.5rem;\r\n  line-height: 0.5;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  cursor: default;\r\n  opacity: 0.6;\r\n  border-width: initial;\r\n  border-style: none;\r\n  border-color: initial;\r\n  border-image: initial;\r\n  margin: 0px 0.25rem;\r\n  padding: 0px;\r\n  outline: none;\r\n}\r\n.gDGacr {\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  margin: 0px 0.25rem;\r\n}\r\n.cCZFGj {\r\n  position: relative;\r\n  color: rgb(153, 153, 153);\r\n  vertical-align: middle;\r\n  font-size: 1rem;\r\n}\r\n\r\n.crlJUV {\r\n  display: inline-block;\r\n  background-color: transparent;\r\n  font-size: 1.5rem;\r\n  line-height: 0.5;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  border-width: initial;\r\n  border-style: none;\r\n  border-color: initial;\r\n  border-image: initial;\r\n  margin: 0px 0.25rem;\r\n  padding: 0px;\r\n  outline: none;\r\n}\r\n\r\n.fLtvIK input {\r\n  width: 100%;\r\n  height: 26px;\r\n  font-size: 12px;\r\n  color: rgb(255, 255, 255);\r\n  box-sizing: border-box;\r\n  background-color: rgb(36, 36, 36);\r\n  border-radius: 2px;\r\n  outline: none;\r\n  border-width: 0px;\r\n  border-style: solid;\r\n  border-color: transparent;\r\n  border-image: initial;\r\n  padding: 0.2rem 0.5rem;\r\n  \r\n}\r\n\r\n.fRKJpM {\r\n  display: inline-block;\r\n  font-size: 1.5rem;\r\n  line-height: 0.5;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  cursor: pointer;\r\n  background-color: rgb(36, 36, 36);\r\n  border-width: initial;\r\n  border-style: none;\r\n  border-color: initial;\r\n  border-image: initial;\r\n  margin: 0px 0.25rem;\r\n  padding: 0px;\r\n  outline: none;\r\n  border-radius: 2px;\r\n}\r\n\r\n.sc-cMhqgX.spin {\r\n\r\n  height: 100px;\r\n  -webkit-animation-name: spin;\r\n  -webkit-animation-duration: 1000ms;\r\n  -webkit-animation-iteration-count: infinite;\r\n  -webkit-animation-timing-function: linear;\r\n  -moz-animation-name: spin;\r\n  -moz-animation-duration: 1000ms;\r\n  -moz-animation-iteration-count: infinite;\r\n  -moz-animation-timing-function: linear;\r\n  -ms-animation-name: spin;\r\n  -ms-animation-duration: 1000ms;\r\n  -ms-animation-iteration-count: infinite;\r\n  -ms-animation-timing-function: linear;\r\n  animation-name: spin;\r\n  animation-duration: 1000ms;\r\n  animation-iteration-count: infinite;\r\n  animation-timing-function: linear;\r\n}\r\n\r\n@-ms-keyframes spin {\r\n  from {\r\n    -ms-transform: rotate(0deg);\r\n  }\r\n  to {\r\n    -ms-transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@-moz-keyframes spin {\r\n  from {\r\n    -moz-transform: rotate(0deg);\r\n  }\r\n  to {\r\n    -moz-transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@-webkit-keyframes spin {\r\n  from {\r\n    -webkit-transform: rotate(0deg);\r\n  }\r\n  to {\r\n    -webkit-transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n@keyframes spin {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n#XID .close-iframe{\r\n  display: block;\r\n  height: 16px;\r\n  width: 16px;\r\n  background-size: 16px;\r\n  background-position: 50%;\r\n  background-repeat: no-repeat;\r\n  margin-right: 0.5em;\r\n  background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS40MjggOEwxMiAxMC41NzMgMTAuNTcyIDEyIDggOS40MjggNS40MjggMTIgNCAxMC41NzMgNi41NzIgOCA0IDUuNDI4IDUuNDI3IDQgOCA2LjU3MiAxMC41NzMgNCAxMiA1LjQyOCA5LjQyOCA4eiIgZmlsbD0iI0U4RThFOCIvPjwvc3ZnPg==) 50% no-repeat;\r\n  border: 1px solid #242424;\r\n  margin-left: 0.5em;\r\n}",
    "BlockFunction": "function server() {\r\n  const b = Mars.allBlocks.find(t => t.Name === data.blockName);\r\n  return {\r\n    block: b,\r\n    codeFiles: [b.BlockFunction, b.Jsx, b.Html, b.Css]\r\n  };\r\n}\r\nreturn server();",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "DataForScriptFunction": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nMars.render(executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(MarsIdeDemoIframe, { url: \"/mars/ide/TestApiMethods\" })\n));",
    "DemoJsx": "\"use strict\";\r\nMars.render(<div>\r\n  <MarsIdeDemoIframe url=\"/mars/ide/TestApiMethods\"/>\r\n</div>);\r\n",
    "TestCode": "test('test 2 good', () => { expect(1).toBe(1) })",
    "isSystem": true
  },
  {
    "_id": "5ebc502294593e2e8c63fab7",
    "Name": "DinamicPageBlock",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-13T19:53:06.979Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-13T19:53:06.979Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "page",
    "Jsx": "async function CustomParentBlock({ prop1, children = null }) {\r\n  return (\r\n    <div>\r\n      <b>CustomParentBlock:</b>\r\n      <div id={prop1}>\r\n        {children.join('')}\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function CustomBlock({ prop1 }) {\r\n  return (\r\n    <div>\r\n      <div id={prop1}>\r\n        <input v-model=\"model\" />\r\n        {`{{ model }}`}\r\n        <input v-model=\"model\" />\r\n      </div>\r\n      <script type=\"application/javascript\">\r\n        {` new Vue({el: '#${prop1}',data: {model: 'hey'}})`}\r\n      </script>\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function CustomBlockCompostition() {\r\n  return (\r\n    <div>\r\n      <CustomBlock prop1=\"el1\" />\r\n      <CustomBlock prop1=\"el2\" />\r\n      <CustomParentBlock prop1=\"el3\">\r\n        <CustomBlock prop1=\"elsub1\" />\r\n        <CustomBlock prop1=\"elsub2\" />\r\n      </CustomParentBlock>\r\n    </div>\r\n  )\r\n}\r\n\r\nasync function JsonGroup({ children = [] }) {\r\n  return {\r\n    BlockType: 'group',\r\n    Items: children\r\n  }\r\n}\r\n\r\nasync function JsonBlock({ blockType, title }) {\r\n  return {\r\n    BlockType: blockType,\r\n    Title: title\r\n  }\r\n}\r\n\r\n\r\nconst head = <link src=\"some.css\" />;\r\n\r\n/*async function PageProps({ url, title }) {\r\n  await EXECUTE('edit json in mongo service')({\r\n    Collection: 'Blocks',\r\n    ObjectId: data.BlockId.toString(),\r\n    Path: 'Page.Props',\r\n    Payload: { url, title }\r\n  });\r\n  return { ttt: 123 }\r\n}\r\n\r\n<PageSettings>\r\n  <PageProps url='/home' title='home3' />\r\n</PageSettings>*/\r\n\r\nconst h = <div>\r\n  <b>bold text</b>\r\n  <div class=\"text-center px-lg-3\">\r\n    <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n      <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n    </span><div class=\"text-center px-lg-3\">\r\n      <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n        <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n      </span>\r\n      <h3 class=\"h5\">Professional Design</h3>\r\n      <p class=\"mb-md-0\">  <b>bold text</b>\r\n        <div class=\"text-center px-lg-3\">\r\n          <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n            <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n          </span><div class=\"text-center px-lg-3\">\r\n            <span class=\"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\">\r\n              <span class=\"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\"></span>\r\n            </span>\r\n            <h3 class=\"h5\">Professional Design</h3>\r\n            <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n          </div><b>bold text</b>\r\n          <h3 class=\"h5\">Professional Design</h3>\r\n          <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n        </div><b>bold text</b>Achieve virtually any design and layout from within the one template .</p>\r\n    </div><b>bold text</b>\r\n    <h3 class=\"h5\">Professional Design</h3>\r\n    <p class=\"mb-md-0\">Achieve virtually any design and layout from within the one template .</p>\r\n  </div><b>bold text</b>\r\n</div>\r\n\r\nconst array1 = Array.from({ length: 10 }, () =>\r\n  Math.floor(Math.random() * 40)\r\n)\r\n\r\nasync function Ttable({ children = null }) {\r\n  return (\r\n    <div>\r\n      <h1>\r\n        {children.find(t => t.SlotName === 'h1').Content}\r\n      </h1>\r\n      <b>{children.find(t => t.SlotName === 'b').Content}</b>\r\n    </div>\r\n  )\r\n}\r\n\r\n// <script src=\"https://cdn.jsdelivr.net/npm/vue\"></script>\r\nMars.render(\r\n  <Page Data={{\r\n    scripts: (\r\n      <Fragment><script src=\"https://cdn.jsdelivr.net/npm/vue\"></script>\r\n        <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script></Fragment>)\r\n  }}>\r\n\r\n    <BlockAlpine list={[{ name: 'item1' }, { name: 'item2' }]} Id=\"testid3\" />\r\n\r\n    <Ttable>\r\n      <Slot slotName='h1'>\r\n        1423\r\n      </Slot>\r\n      <Slot slotName='b'>slot2</Slot>\r\n    </Ttable>\r\n    <JsonBlock blockType=\"card\" title=\"some title\" />\r\n\r\n\r\n    <h1>Inserted blocks jsx3</h1>\r\n\r\n    <h1>---------</h1>\r\n    <br />\r\n\r\n    <h1>CustomBlockCompostition</h1>\r\n    <CustomBlockCompostition />\r\n\r\n    <h1>CustomBlock</h1>\r\n    <CustomBlock prop1=\"el123\" />\r\n\r\n    <h1>Lots of html</h1>\r\n    {array1.map(t => h)}\r\n\r\n    <h1>Test-new-jsx</h1>\r\n    <Test-new-jsx Data={{ Text: 'hey from page' }} />\r\n  </Page>\r\n)",
    "JsxTranspiled": "async function CustomParentBlock({ prop1, children = null }) {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"b\",\n      null,\n      \"CustomParentBlock:\"\n    ),\n    executeAppBlock(\n      \"div\",\n      { id: prop1 },\n      children.join('')\n    )\n  );\n}\n\nasync function CustomBlock({ prop1 }) {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"div\",\n      { id: prop1 },\n      executeAppBlock(\"input\", { \"v-model\": \"model\" }),\n      `{{ model }}`,\n      executeAppBlock(\"input\", { \"v-model\": \"model\" })\n    ),\n    executeAppBlock(\n      \"script\",\n      { type: \"application/javascript\" },\n      ` new Vue({el: '#${prop1}',data: {model: 'hey'}})`\n    )\n  );\n}\n\nasync function CustomBlockCompostition() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(CustomBlock, { prop1: \"el1\" }),\n    executeAppBlock(CustomBlock, { prop1: \"el2\" }),\n    executeAppBlock(\n      CustomParentBlock,\n      { prop1: \"el3\" },\n      executeAppBlock(CustomBlock, { prop1: \"elsub1\" }),\n      executeAppBlock(CustomBlock, { prop1: \"elsub2\" })\n    )\n  );\n}\n\nasync function JsonGroup({ children = [] }) {\n  return {\n    BlockType: 'group',\n    Items: children\n  };\n}\n\nasync function JsonBlock({ blockType, title }) {\n  return {\n    BlockType: blockType,\n    Title: title\n  };\n}\n\nconst head = executeAppBlock(\"link\", { src: \"some.css\" });\n\n/*async function PageProps({ url, title }) {\r\n  await EXECUTE('edit json in mongo service')({\r\n    Collection: 'Blocks',\r\n    ObjectId: data.BlockId.toString(),\r\n    Path: 'Page.Props',\r\n    Payload: { url, title }\r\n  });\r\n  return { ttt: 123 }\r\n}\r\n\r\n<PageSettings>\r\n  <PageProps url='/home' title='home3' />\r\n</PageSettings>*/\n\nconst h = executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"b\",\n    null,\n    \"bold text\"\n  ),\n  executeAppBlock(\n    \"div\",\n    { \"class\": \"text-center px-lg-3\" },\n    executeAppBlock(\n      \"span\",\n      { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n      executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n    ),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"text-center px-lg-3\" },\n      executeAppBlock(\n        \"span\",\n        { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n        executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n      ),\n      executeAppBlock(\n        \"h3\",\n        { \"class\": \"h5\" },\n        \"Professional Design\"\n      ),\n      executeAppBlock(\n        \"p\",\n        { \"class\": \"mb-md-0\" },\n        \"  \",\n        executeAppBlock(\n          \"b\",\n          null,\n          \"bold text\"\n        ),\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"text-center px-lg-3\" },\n          executeAppBlock(\n            \"span\",\n            { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n            executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n          ),\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"text-center px-lg-3\" },\n            executeAppBlock(\n              \"span\",\n              { \"class\": \"btn btn-icon btn-lg btn-soft-danger rounded-circle mb-5\" },\n              executeAppBlock(\"span\", { \"class\": \"fab fa-yelp fa-2x btn-icon__inner btn-icon__inner-bottom-minus\" })\n            ),\n            executeAppBlock(\n              \"h3\",\n              { \"class\": \"h5\" },\n              \"Professional Design\"\n            ),\n            executeAppBlock(\n              \"p\",\n              { \"class\": \"mb-md-0\" },\n              \"Achieve virtually any design and layout from within the one template .\"\n            )\n          ),\n          executeAppBlock(\n            \"b\",\n            null,\n            \"bold text\"\n          ),\n          executeAppBlock(\n            \"h3\",\n            { \"class\": \"h5\" },\n            \"Professional Design\"\n          ),\n          executeAppBlock(\n            \"p\",\n            { \"class\": \"mb-md-0\" },\n            \"Achieve virtually any design and layout from within the one template .\"\n          )\n        ),\n        executeAppBlock(\n          \"b\",\n          null,\n          \"bold text\"\n        ),\n        \"Achieve virtually any design and layout from within the one template .\"\n      )\n    ),\n    executeAppBlock(\n      \"b\",\n      null,\n      \"bold text\"\n    ),\n    executeAppBlock(\n      \"h3\",\n      { \"class\": \"h5\" },\n      \"Professional Design\"\n    ),\n    executeAppBlock(\n      \"p\",\n      { \"class\": \"mb-md-0\" },\n      \"Achieve virtually any design and layout from within the one template .\"\n    )\n  ),\n  executeAppBlock(\n    \"b\",\n    null,\n    \"bold text\"\n  )\n);\n\nconst array1 = Array.from({ length: 10 }, () => Math.floor(Math.random() * 40));\n\nasync function Ttable({ children = null }) {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"h1\",\n      null,\n      children.find(t => t.SlotName === 'h1').Content\n    ),\n    executeAppBlock(\n      \"b\",\n      null,\n      children.find(t => t.SlotName === 'b').Content\n    )\n  );\n}\n\n// <script src=\"https://cdn.jsdelivr.net/npm/vue\"></script>\nMars.render(executeAppBlock(\n  Page,\n  { Data: {\n      scripts: executeAppBlock(\n        Fragment,\n        null,\n        executeAppBlock(\"script\", { src: \"https://cdn.jsdelivr.net/npm/vue\" }),\n        executeAppBlock(\"script\", { src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" })\n      )\n    } },\n  executeAppBlock(BlockAlpine, { list: [{ name: 'item1' }, { name: 'item2' }], Id: \"testid3\" }),\n  executeAppBlock(\n    Ttable,\n    null,\n    executeAppBlock(\n      Slot,\n      { slotName: \"h1\" },\n      \"1423\"\n    ),\n    executeAppBlock(\n      Slot,\n      { slotName: \"b\" },\n      \"slot2\"\n    )\n  ),\n  executeAppBlock(JsonBlock, { blockType: \"card\", title: \"some title\" }),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Inserted blocks jsx3\"\n  ),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"---------\"\n  ),\n  executeAppBlock(\"br\", null),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"CustomBlockCompostition\"\n  ),\n  executeAppBlock(CustomBlockCompostition, null),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"CustomBlock\"\n  ),\n  executeAppBlock(CustomBlock, { prop1: \"el123\" }),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Lots of html\"\n  ),\n  array1.map(t => h),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"Test-new-jsx\"\n  ),\n  executeAppBlock(\"Test-new-jsx\", { Data: { Text: 'hey from page' } })\n));",
    "Page": {
      "settings": {
        "url": "/home/:prop1",
        "title": "dinamic home /home/:prop1"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5ec321d6aa5df53ab037057b",
    "Name": "NavBlocks",
    "Title": "",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-19T00:01:27.379Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-19T00:01:43.403Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n    const s = await serverData;\r\n    return (<div data-block-name={thisBlock.Name}>\r\n      <NestedTree Id=\"NestedTree1\" Searchable Tree={s.tree}/>\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { \"data-block-name\": thisBlock.Name },\n    executeAppBlock(NestedTree, { Id: \"NestedTree1\", Searchable: true, Tree: s.tree }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Script": "",
    "Html": "",
    "Css": " .cms-tree a{\r\n   text-decoration: none;\r\n }\r\n\r\n .mars-icon {\r\n  background-size: 16px;\r\n  width: 16px;\r\n  height: 16px;\r\n  display: inline-block;\r\n  -webkit-font-smoothing: antialiased;\r\n  vertical-align: top;\r\n  flex-shrink: 0;\r\n  background-position: 0px center;\r\n  background-repeat: no-repeat;\r\n  margin-top: 3px;\r\n  margin-left: 14px;\r\n}\r\n\r\n.mars-icon.app {\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/file_type_applescript.svg);\r\n}\r\n\r\n.mars-icon.page {\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/default_file.svg);\r\n}\r\n\r\n.mars-icon.folder {\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/default_folder.svg);\r\n}\r\n\r\n.mars-icon.folderopen {\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/default_folder_open.svg);\r\n}\r\n\r\n.mars-icon.box {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/3d.svg);\r\n}\r\n\r\n.mars-icon.js {\r\n  /* background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/javascript.svg); */\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/file_type_js.svg);\r\n}\r\n\r\n.mars-icon.code {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/xml.svg);\r\n}\r\n\r\n.mars-icon.html {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/html.svg);\r\n}\r\n\r\n.mars-icon.node {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/nodejs.svg);\r\n}\r\n\r\n.mars-icon.json {\r\n  /* background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/json.svg); */\r\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/file_type_json.svg);\r\n}\r\n\r\n.mars-icon.log {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/log.svg);\r\n}\r\n\r\n.mars-icon.file {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/file.svg);\r\n}\r\n\r\n.mars-icon.document {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/document.svg);\r\n}\r\n\r\n.mars-icon.master {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/mjml.svg);\r\n}\r\n\r\n.mars-icon.module {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/verilog.svg);\r\n}\r\n\r\n.mars-icon.settings {\r\n  background-image: url(https://cdn.jsdelivr.net/gh/PKief/vscode-material-icon-theme@master/icons/settings.svg);\r\n}\r\n",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction getBlockIcon(blockType) {\r\n  if (blockType === 'model') return 'mars-icon json'; // fa fa-list-alt\r\n  if (blockType === 'page') return 'mars-icon page'; // fa fa-list-alt\r\n  if (blockType === 'app') return 'mars-icon app'; // fa fa-list-alt\r\n  if (blockType === 'settings') return 'mars-icon settings'; // fa fa-list-alt\r\n  if (!blockType || blockType === 'block' || blockType === '') return 'mars-icon module'; // fab fa-html5\r\n  if (blockType && blockType.includes('jsx')) return 'mars-icon box'; // fab fa-js-square\r\n  if (blockType === 'service') return 'mars-icon js'; //fab fa-node\r\n  if (blockType === 'prompter') return 'fab fa-searchengin';\r\n}\r\n\r\nfunction getName(n) {\r\n  if (n && n.Page && n.Page.settings && n.Page.settings.url) return n.Page.settings.url;\r\n  return n.Name\r\n}\r\n\r\nasync function server() {\r\n  const tree = generateTree(Mars.allBlocks.filter(t => !t.isSystem && t.Type !== 'settings').map(t => ({\r\n    name: getName(t),\r\n    folder: t.Folder,\r\n    url: `mars/ide/${t.Name}`,\r\n    icon: getBlockIcon(t.Type)\r\n  })))\r\n\r\n  /*tree.push({\r\n    name: '_external',\r\n    children: generateTree(Mars.allBlocks.filter(t => t.isSystem && t.Type !== 'settings').map(t => ({\r\n      name: getName(t),\r\n      folder: t.Folder,\r\n      url: `mars/ide/${t.Name}`,\r\n      icon: getBlockIcon(t.Type)\r\n    })))\r\n  })*/\r\n  return {\r\n    tree\r\n  }\r\n}\r\n\r\nfunction generateBranch(file, tree) {\r\n  let mainFolder, subFolder;\r\n\r\n  if (!file.folder || !file.folder.includes('/')) {\r\n    mainFolder = file.folder;\r\n    subFolder = null;\r\n    if (tree.every((e) => e.name !== mainFolder)) {\r\n      tree.push({ name: mainFolder, children: [file] })\r\n    } else {\r\n      tree.forEach((e) => {\r\n        if (e.name === mainFolder) e.children.push(file)\r\n      })\r\n    }\r\n  } else {\r\n    mainFolder = file.folder.slice(0, file.folder.indexOf('/'));\r\n    subFolder = file.folder.slice(file.folder.indexOf('/') + 1, file.folder.length);\r\n    let newFile = { ...file, folder: subFolder };\r\n    if (tree.every((e) => e.name !== mainFolder)) {\r\n      if (subFolder === mainFolder) {\r\n        tree.push({ name: mainFolder, children: [file] })\r\n      } else {\r\n        tree.push({ name: mainFolder, children: [] })\r\n      }\r\n    }\r\n    tree.forEach((e) => {\r\n      if (e.name === mainFolder) {\r\n        generateBranch(newFile, e.children);\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction generateTree(files) {\r\n  // todo implement it\r\n  const generatedTreeData = [];\r\n  _.orderBy(files, [ss => ss.name], ['asc'])\r\n    .forEach((element) => {\r\n      generateBranch(element, generatedTreeData);\r\n    })\r\n\r\n  return _.orderBy(generatedTreeData, [ss => ss.name], ['asc']);\r\n}",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "ServerTypeScript": "",
    "TestPage": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nMars.render(executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" }));",
    "DemoJsx": "\"use strict\";\r\nMars.render(<MarsIdeMasterPage url=\"someurl\"/>);\r\n",
    "TestCode": "test('test 2 good', () => {\r\n  console.log(Mars.services.sdf)\r\n})",
    "isSystem": true
  },
  {
    "_id": "5ec5db19556d2228e4208df2",
    "Name": "GetBlock",
    "Title": "",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [
      {
        "PropName": "blockName",
        "DataType": "string"
      }
    ],
    "Created": {
      "DateTime": "2020-05-21T01:36:25.587Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-21T01:36:25.587Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "service",
    "BlockFunction": "const b = Mars.allBlocks.find(t => t.Name === data.blockName);\r\nreturn b;",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "TestPage": "",
    "isSystem": true
  },
  {
    "_id": "5ec97ba192e90e32ac41ea6d",
    "Name": "MarsJs",
    "Title": "",
    "Apps": [],
    "Folder": "client js",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-23T19:38:09.997Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-23T19:38:09.997Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "export default (\r\n  <JsFile>\r\n    {thisBlock.Script}\r\n    <HelpersJs />\r\n    <MarsNavJs />\r\n  </JsFile>\r\n);\r\n",
    "JsxTranspiled": "export default executeAppBlock(\n  JsFile,\n  null,\n  thisBlock.Script,\n  executeAppBlock(HelpersJs, null),\n  executeAppBlock(MarsNavJs, null)\n);",
    "Script": "import 'https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js';\r\nimport 'https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js';\r\n// import 'https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js';\r\n\r\nwindow.getHeaders = () => ({ 'Token': getCookie('Token'), 'SubAppId': getCookie('SubAppId'), 'Content-Type': 'application/json;charset=UTF-8', 'Accept': 'application/json' });\r\nwindow.flatten = (arr) => { return arr.reduce((flat, toFlatten) => flat.concat(Array.isArray(toFlatten) ? window.flatten(toFlatten) : toFlatten), []); };\r\nwindow.AsyncFunction = Object.getPrototypeOf(async () => { }).constructor;\r\nwindow.deleteCookie = function (name) { setCookie(name, '', -1); };\r\n\r\nwindow.getCookie = function (cname) {\r\n  var name = cname + '=';\r\n  var decodedCookie = decodeURIComponent(document.cookie);\r\n  var ca = decodedCookie.split(';');\r\n  for (var i = 0; i < ca.length; i++) {\r\n    var c = ca[i];\r\n    while (c.charAt(0) == ' ') {\r\n      c = c.substring(1);\r\n    }\r\n\r\n    if (c.indexOf(name) == 0) {\r\n      return c.substring(name.length, c.length);\r\n    }\r\n  }\r\n\r\n  return '';\r\n};\r\n\r\nwindow.setCookie = function (name, value, days) {\r\n  const d = new Date();\r\n  d.setTime(d.getTime() + 24 * 60 * 60 * 1000 * (days || 7));\r\n  document.cookie = name + \"=\" + value + \";path=/;expires=\" + d.toGMTString();\r\n};\r\n\r\nwindow.postRequest = async function (url = '', data = {}, headers = { 'Content-Type': 'application/json;charset=UTF-8' }, cache = 'no-cache') {\r\n  const response = await fetch(url, {\r\n    method: 'POST',\r\n    headers,\r\n    cache,\r\n    body: JSON.stringify(data),\r\n  });\r\n\r\n  const contentType = response.headers.get('content-type');\r\n  const responseData = await (contentType && contentType.includes('application/json') ? response.json() : response.text());\r\n  if (!response.ok) {\r\n    throw {\r\n      message: response.statusText,\r\n      response: {\r\n        status: response.status,\r\n        data: responseData,\r\n        headers: Object.fromEntries(response.headers.entries()),\r\n      },\r\n    };\r\n  }\r\n\r\n  return { data: responseData };\r\n};\r\n\r\nwindow.debounce = function debounce(func, wait, immediate) {\r\n  let timeout, args, context, timestamp, result;\r\n  if (null == wait) wait = 100;\r\n\r\n  function later() {\r\n    const last = Date.now() - timestamp;\r\n\r\n    if (last < wait && last >= 0) {\r\n      timeout = setTimeout(later, wait - last);\r\n    } else {\r\n      timeout = null;\r\n      if (!immediate) {\r\n        result = func.apply(context, args);\r\n        context = args = null;\r\n      }\r\n    }\r\n  };\r\n\r\n  const debounced = function () {\r\n    context = this;\r\n    args = arguments;\r\n    timestamp = Date.now();\r\n    const callNow = immediate && !timeout;\r\n    if (!timeout) timeout = setTimeout(later, wait);\r\n    if (callNow) {\r\n      result = func.apply(context, args);\r\n      context = args = null;\r\n    }\r\n\r\n    return result;\r\n  };\r\n\r\n  debounced.clear = function () {\r\n    if (timeout) {\r\n      clearTimeout(timeout);\r\n      timeout = null;\r\n    }\r\n  };\r\n\r\n  debounced.flush = function () {\r\n    if (timeout) {\r\n      result = func.apply(context, args);\r\n      context = args = null;\r\n\r\n      clearTimeout(timeout);\r\n      timeout = null;\r\n    }\r\n  };\r\n\r\n  return debounced;\r\n};\r\n\r\nclass MarsBase {\r\n  constructor(id, serverData) {\r\n    this._marsId = id;\r\n    this._marsEl = document.getElementById(id);\r\n    this._marsData = serverData;\r\n\r\n    this.initApi();\r\n    this.initEvents();\r\n\r\n    window[this._marsId] = this;\r\n  }\r\n\r\n  initApi() {\r\n    this.api = {\r\n      _hidden: false,\r\n      hide: () => { this._marsEl.classList.add('d-none') },\r\n      show: () => { this._marsEl.classList.remove('d-none') },\r\n      get hidden() { return this._hidden; },\r\n      set hidden(val) {\r\n        val ? this.hide() : this.show();\r\n        this._hidden = val;\r\n      },\r\n    };\r\n\r\n    const defaultMethods = [{ name: 'reRender', block: 'MarsJs' }];\r\n    if (!this._marsData) { this._marsData = {}; }\r\n    if (!this._marsData.methods) { this._marsData.methods = []; }\r\n\r\n    [...this._marsData.methods, ...defaultMethods].forEach(i => {\r\n      this.api[i.name] = (...args) => {\r\n        return new Promise((resolve, reject) => {\r\n          window.postRequest(`/api/ExecuteApiMethod?blockName=${i.block}&methodName=${i.name}`, { \"blockData\": this._marsData, \"methodData\": args }, window.getHeaders())\r\n            .then((response) => {\r\n              resolve(response.data);\r\n            })\r\n            .catch((error) => {\r\n              reject(error);\r\n            });\r\n        });\r\n      }\r\n    });\r\n\r\n    this.api.reload = async (optionalData) => {\r\n      const r = await this.api.reRender(this._marsData._blockName, { Id: this._marsId, ...this._marsData, ...(optionalData || {}) })\r\n      $(`#${this._marsId}`).replaceWith(r)\r\n      return r\r\n    }\r\n  }\r\n\r\n\r\n\r\n  initEvents() {\r\n    this._marsEvents = {\r\n      initEvent: (eventName) => {\r\n        if (!this[eventName]) {\r\n          const eventHandlersKey = `${eventName}_Handlers`;\r\n          this._marsEvents[eventHandlersKey] = [];\r\n          Object.defineProperty(this, eventName, {\r\n            set: (handler) => {\r\n              if (!this._marsEvents[eventHandlersKey].find(t => t.toString() === handler.toString())) {\r\n                this._marsEvents[eventHandlersKey].push(handler);\r\n              }\r\n            },\r\n            // get: () => {\r\n            //   return this._marsEvents[eventHandlersKey];\r\n            // },\r\n          });\r\n        }\r\n      },\r\n      fireEvent: (eventName, ...eventData) => {\r\n        const eventHandlersKey = `${eventName}_Handlers`;\r\n        if (this._marsEvents[eventHandlersKey] && this._marsEvents[eventHandlersKey].length) {\r\n          this._marsEvents[eventHandlersKey].forEach(t => t(...eventData));\r\n        }\r\n      },\r\n    };\r\n\r\n    this.fire = {};\r\n    if (this._marsData.events) {\r\n      for (let eventName in this._marsData.events) {\r\n        this._marsEvents.initEvent(eventName);\r\n        this.fire[eventName] = (...eventData) => {\r\n          this._marsEvents.fireEvent(eventName, ...eventData);\r\n        };\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nclass MarsBlock extends MarsBase {\r\n  constructor(id, serverData, app) {\r\n    super(id, { ...serverData, events: app.events });\r\n\r\n    Object.getOwnPropertyNames(app).map(property => {\r\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(app, property);\r\n      Object.defineProperty(this, property, propertyDescriptor);\r\n    });\r\n  }\r\n}\r\n\r\nclass MarsVue extends MarsBase {\r\n  constructor(id, serverData, app) {\r\n    if (!id) {\r\n      return;\r\n    }\r\n\r\n    super(id, { ...serverData, events: app.events });\r\n    const vue = new Vue(Object.assign(app, { el: `#${id}` }));\r\n\r\n    Object.getOwnPropertyNames(this).map(property => {\r\n      const propertyDescriptor = Object.getOwnPropertyDescriptor(this, property);\r\n      Object.defineProperty(vue, property, propertyDescriptor);\r\n    });\r\n\r\n    window[id] = vue;\r\n    this.vue = vue;\r\n    setTimeout(async function () { if (app.init) await app.init() }, 100)\r\n  }\r\n}\r\n\r\n/*\r\nclass MarsAlpine extends MarsBase {\r\n  init() {\r\n    return this._marsData;\r\n  }\r\n\r\n  get data() {\r\n    return this._marsData.$el.__x.$data;\r\n  }\r\n\r\n  constructor(instanceId, serverData, app) {\r\n    if (!instanceId) {\r\n      return;\r\n    }\r\n\r\n    super(instanceId, { ...serverData, ...app });\r\n    this._marsData.fire = this.fire;\r\n\r\n    const el = document.getElementById(instanceId);\r\n    el.setAttribute('x-data', instanceId + '.init()');\r\n    Alpine.initializeComponent(el);\r\n  }\r\n}\r\n*/\r\n\r\nwindow['MarsBlock'] = MarsBlock;\r\nwindow['MarsVue'] = MarsVue;\r\n// window['MarsAlpine'] = MarsAlpine;\r\n\r\n\r\nwindow.executeAppBlock = async function executeAppBlock(f, props, ...children) {\r\n  // regular html tags\r\n  if (typeof (f) === 'string') {\r\n    const htmlProps = props ? Object.entries(props).map(([key, value]) => `${key}=\"${value}\"`).join(' ') : null;\r\n    return `<${f} ${htmlProps || ''}>${(await Promise.all(flatten(children))).join('')}</${f}>`\r\n  }\r\n\r\n  // function block\r\n  if (children && children.length > 0) {\r\n    props = props || {};\r\n    props.children = await Promise.all(flatten(children));\r\n    /*props.children = await Promise.all(props.children.map(t => {\r\n        const r = t.render ? t.render() : t;\r\n        return r;\r\n    }));*/\r\n  }\r\n\r\n  return f.name === 'anonymous' ? f(Mars, props) : f(props);\r\n};\r\n\r\nwindow.Mars = {\r\n  executeAppBlock,\r\n  initJsx(thisBlock, data) {\r\n    return {\r\n      serverData: {},\r\n      This: {\r\n        style: () => { return ('<style>' + eval('`' + thisBlock.Css.replace(/\\'\\${/g, '${').replace(/\\}\\'/g, '}') + '`') + '</style>').replace(/container5/g, data.Id); },\r\n        script: (props) => {\r\n          const clientJs = props && props.clientJs ? `\\n ${props.clientJs.replace(/export default/g, 'return')}` : '';\r\n          return (`<script v-pre type=\"module\">` +\r\n            `const data = JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(Object.assign({}, data, { children: null })))}'));` +\r\n            thisBlock.Script + clientJs + '</script>').replace(/container5/g, data.Id);\r\n        },\r\n        html() { return thisBlock.Html; },\r\n        children: () => { return data && data.children ? children.join(' ') : ''; },\r\n      }\r\n    }\r\n  }\r\n};\r\n",
    "Html": "",
    "Css": "",
    "BlockFunction": "function api() {\r\n  return {\r\n    reRender(blockName, blockData) {\r\n      return Mars.blocks[blockName](Mars, blockData, Req);\r\n    }\r\n  }\r\n}",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "ServerTypeScript": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nasync function Block() {\n    const res = await executeAppBlock(MarsJs, null);\n    return JSON.stringify(res, null, 2);\n}\nMars.render(executeAppBlock(\n    \"pre\",\n    null,\n    executeAppBlock(Block, null)\n));",
    "DemoJsx": "\"use strict\";\r\nasync function Block() {\r\n    const res = await (<MarsJs />);\r\n    return JSON.stringify(res, null, 2);\r\n}\r\nMars.render(<pre>\r\n  <Block />\r\n</pre>);\r\n",
    "isSystem": true
  },
  {
    "_id": "5ec5bb172696444e48361082",
    "Name": "BlockTabs",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "currentBlockName"
      }
    ],
    "Created": {
      "DateTime": "2020-05-20T23:19:51.509Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T23:19:51.509Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div>\r\n      <This.html id={data.Id}/>\r\n      <This.script currentBlock={serverData.currentBlock}/>\r\n      <This.style />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, { id: data.Id }),\n    executeAppBlock(This.script, { currentBlock: serverData.currentBlock }),\n    executeAppBlock(This.style, null)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Script": "let localBlocks = localStorage.getItem('localBlocks');\r\nif (localBlocks) {\r\n  localBlocks = JSON.parse(localBlocks);\r\n} else {\r\n  localBlocks = [];\r\n}\r\n\r\nif (data.currentBlock && !localBlocks.some(t => t.id === data.currentBlock.id)) {\r\n  localBlocks.unshift(data.currentBlock);\r\n  localStorage.setItem('localBlocks', JSON.stringify(localBlocks));\r\n}\r\n\r\n// if current block is null on page full reload\r\nif (!data.currentBlock) {\r\n  data.currentBlock = localBlocks[0];\r\n}\r\n\r\nnew MarsVue('XID', data, {\r\n  data: {\r\n    ...data,\r\n    localBlocks: localBlocks,\r\n    reorderedBlocks: [...localBlocks],\r\n    draggableIndex: -1,\r\n    dragOverIndex: -1,\r\n    dragTop: 0,\r\n    dragLeft: 0,\r\n    layerX: 0,\r\n    layerY: 0,\r\n    pressTimer: null,\r\n    platform: window.navigator.platform,\r\n  },\r\n  mounted: function () {\r\n    this.$nextTick(function () {\r\n      document.addEventListener(\"mouseup\", this.hideDraggable);\r\n      document.title = this.currentBlock.name;\r\n      this.initScrollPosition();\r\n    });\r\n  },\r\n  methods: {\r\n    getWrapper() {\r\n      return document.querySelector('#XID .tab-wrapper');\r\n    },\r\n    saveTabs(tabs) {\r\n      localStorage.setItem('localBlocks', JSON.stringify(tabs));\r\n      this.localBlocks = tabs;\r\n      this.reorderedBlocks = [...tabs];\r\n      this.saveScrollPosition();\r\n    },\r\n    initScrollPosition() {\r\n      let position = parseInt(localStorage.getItem('tabScrollPosition')) || 0;\r\n\r\n      // make sure that selected tab is visible\r\n      const selectedTabRect = document.querySelector('#XID .tab.selected').getBoundingClientRect();\r\n      const wrapperRect = this.getWrapper().getBoundingClientRect();\r\n      if (selectedTabRect.right > (wrapperRect.left + wrapperRect.width + position)) {\r\n        position = selectedTabRect.right - (wrapperRect.width + wrapperRect.left);\r\n      } else if (selectedTabRect.left < (position + wrapperRect.left)) {\r\n        position = selectedTabRect.left - wrapperRect.left;\r\n      }\r\n\r\n      this.getWrapper().scrollLeft = position < 0 ? 0 : position;\r\n    },\r\n    saveScrollPosition() {\r\n      localStorage.setItem('tabScrollPosition', this.getWrapper().scrollLeft);\r\n    },\r\n    closeTab(tabBlockId) {\r\n      this.hideDraggable();\r\n\r\n      const tabIndex = this.localBlocks.findIndex(i => i.id === tabBlockId);\r\n      this.localBlocks = this.localBlocks.filter(t => t.id !== tabBlockId);\r\n      this.saveTabs(this.localBlocks);\r\n\r\n      if (data.currentBlock.id === tabBlockId && this.localBlocks.length) {\r\n        if (this.localBlocks[tabIndex]) {\r\n          window.location.href = this.localBlocks[tabIndex].url;  // take next tab\r\n          return;\r\n        } else if (tabIndex) {\r\n          window.location.href = this.localBlocks[tabIndex - 1].url;  // take prev tab\r\n        }\r\n      }\r\n    },\r\n    closeTabToTheRight(tabBlockId) {\r\n      this.hideDraggable();\r\n      this.localBlocks = this.localBlocks.filter(t => t.id === tabBlockId);\r\n      this.saveTabs(this.localBlocks);\r\n    },\r\n    onClickTab() {\r\n      this.hideDraggable();\r\n      this.saveScrollPosition();\r\n    },\r\n    onMouseDown(key, event) {\r\n      this.pressTimer = setTimeout(() => this.showDraggable(key, event), 100);\r\n    },\r\n    showDraggable(key, event) {\r\n      if (this.pressTimer) {\r\n        clearTimeout(this.pressTimer);\r\n        this.pressTimer = null;\r\n      }\r\n\r\n      if (this.isDragging) {\r\n        return;\r\n      }\r\n\r\n      this.layerY = event.layerY;\r\n      this.layerX = event.layerX;\r\n      this.draggableIndex = key;\r\n      this.reorderedBlocks = [...this.localBlocks];\r\n      this.initDraggablePosition(event);\r\n    },\r\n    initDraggablePosition(event) {\r\n      if (!this.isDragging) {\r\n        return;\r\n      }\r\n\r\n      const rect = this.getWrapper().getBoundingClientRect();\r\n      this.dragTop = event.pageY - rect.top - this.layerY - 1;\r\n      this.dragLeft = event.pageX - rect.left - this.layerX;\r\n    },\r\n    hideDraggable() {\r\n      if (this.pressTimer) {\r\n        clearTimeout(this.pressTimer);\r\n        this.pressTimer = null;\r\n      }\r\n\r\n      if (!this.isDragging) {\r\n        return;\r\n      }\r\n\r\n      this.draggableIndex = -1;\r\n      this.dragOverIndex = -1;\r\n      this.dragTop = 0;\r\n      this.dragLeft = 0;\r\n      this.layerY = 0;\r\n      this.layerX = 0;\r\n      this.localBlocks = [...this.reorderedBlocks];\r\n    },\r\n    onDragStart(event) {\r\n      event.dataTransfer.setData('text', '');\r\n      event.target.style.opacity = 0.5;\r\n    },\r\n    onDragEnd() {\r\n      this.hideDraggable();\r\n    },\r\n    onDragOver(index, event) {\r\n      event.preventDefault();\r\n      this.dragOverIndex = index;\r\n    },\r\n    onDragLeave(index) {\r\n      if (this.dragOverIndex === index) {\r\n        this.dragOverIndex = -1;\r\n      }\r\n    },\r\n    onDrop(index, event) {\r\n      event.preventDefault();\r\n      this.moveTab(index);\r\n    },\r\n    moveTab(index) {\r\n      const tab = this.reorderedBlocks.splice(this.draggableIndex, 1)[0];\r\n      this.reorderedBlocks.splice(index, 0, tab);\r\n      this.draggableIndex = index;\r\n      this.hideDraggable();\r\n      this.saveTabs(this.reorderedBlocks);\r\n    },\r\n    onMouseWheel(event) {\r\n      if (this.platform === 'MacIntel') {\r\n        return;\r\n      }\r\n\r\n      this.getWrapper().scrollLeft -= event.deltaY;\r\n      event.preventDefault();\r\n    },\r\n  },\r\n  computed: {\r\n    isDragging() {\r\n      return this.draggableIndex > -1;\r\n    },\r\n    draggingTabTitle() {\r\n      return this.isDragging ? this.reorderedBlocks[this.draggableIndex].name : '';\r\n    },\r\n    draggingTabIcon() {\r\n      return this.isDragging ? this.reorderedBlocks[this.draggableIndex].icon : '';\r\n    },\r\n  },\r\n});\r\n",
    "Html": "<div id=\"XID\" v-cloak>\r\n\t<div class=\"tab-wrapper\">\r\n\r\n\t\t<div\r\n\t\t\tdraggable=\"true\"\r\n\t\t\tv-on:dragstart=\"onDragStart\"\r\n\t\t\tv-on:dragend=\"onDragEnd\"\r\n\t\t\tclass=\"tab draggable\"\r\n\t\t\tv-show=\"isDragging\"\r\n\t\t\tv-bind:style=\"{ top: dragTop + 'px', left: dragLeft + 'px' }\">\r\n\t\t\t<a class=\"nav-link noselect active\">\r\n\t\t\t\t<i class=\"fa-sm pl-1\" style=\"margin-left: 0\" v-bind:class=\"[draggingTabIcon]\"></i>\r\n\t\t\t\t{{draggingTabTitle}}\r\n\t\t\t\t<span data-role=\"remove\"></span>\r\n\t\t\t</a>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"tab-container\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"tab\"\r\n\t\t\t\tv-bind:class=\"{'drag-target': dragOverIndex === index, 'selected': tabBlock.id === currentBlock.id}\"\r\n\t\t\t\tv-for=\"(tabBlock, index) in reorderedBlocks\"\r\n\t\t\t\tv-on:mousedown=\"onMouseDown(index, $event)\"\r\n\t\t\t\tv-on:dragover=\"onDragOver(index, $event)\"\r\n\t\t\t\tv-on:dragleave=\"onDragLeave(index)\"\r\n\t\t\t\tv-on:drop=\"onDrop(index, $event)\"\r\n\t\t\t\tv-on:mousewheel=\"onMouseWheel\"\r\n\t\t\t>\r\n\t\t\t\t<hsc-menu-style-white>\r\n\t\t\t\t\t<hsc-menu-context-menu>\r\n\t\t\t\t\t\t<a :href=\"tabBlock.url\" :title=\"tabBlock.type\" @click=\"onClickTab\" data-target-partial class=\"nav-link noselect\"\r\n\t\t\t\t\t\t\tv-bind:class=\"{'active': tabBlock.id === currentBlock.id}\">\r\n\t\t\t\t\t\t\t<i v-bind:class=\"[tabBlock.icon]\" class=\"fa-sm pl-1\" style=\"margin-left: 0\"></i>\r\n\t\t\t\t\t\t\t{{tabBlock.name}}\r\n\t\t\t\t\t\t\t<span data-role=\"remove\" v-on:click.stop.prevent=\"closeTab(tabBlock.id)\"></span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<template slot=\"contextmenu\">\r\n\t\t\t\t\t\t\t<hsc-menu-item @click=\"closeTabToTheRight(tabBlock.id)\" label=\"Close other tabs\">\r\n\t\t\t\t\t\t\t</hsc-menu-item>\r\n\t\t\t\t\t\t\t<hsc-menu-item @click=\"window.open(tabBlock.url, '_blank');\" label=\"Open in new tab\">\r\n\t\t\t\t\t\t\t</hsc-menu-item>\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t</hsc-menu-context-menu>\r\n\t\t\t\t</hsc-menu-style-white>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t</div>\r\n</div>\r\n",
    "Css": "#XID {\r\n  height: 35px;\r\n  overscroll-behavior-x: contain;\r\n}\r\n\r\n#XID .tab-wrapper {\r\n  display: flex;\r\n  overflow: hidden;\r\n  overflow-x: auto;\r\n  height: 35px;\r\n  overscroll-behavior-x: contain;\r\n}\r\n\r\n#XID .tab-wrapper::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n#XID .tab-wrapper .nav-link.active {\r\n  color: #ffffff!important;\r\n}\r\n\r\n#XID .tab-container {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n#XID .tab-container {\r\n  position: relative;\r\n}\r\n\r\n#XID .tab-container .tab {\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  white-space: nowrap;\r\n  cursor: pointer;\r\n  height: 35px;\r\n  box-sizing: border-box;\r\n  width: 120px;\r\n  min-width: fit-content;\r\n}\r\n\r\n#XID .tab.draggable {\r\n  position: absolute;\r\n  opacity: 0.5;\r\n  z-index: 999;\r\n  border-bottom: 2px solid #2ab3f3;\r\n}\r\n\r\n#XID .tab.drag-target .nav-link {\r\n  background-color: #555 !important;\r\n}\r\n\r\n#XID .tab-container .tab:not(:last-child), #XID .tab-container .tab:not(:first-child){\r\n margin: 0!important;\r\n}\r\n\r\n#XID .tab-wrapper, #XID .tab-wrapper .nav-link:focus, #XID .tab-wrapper .nav-link:hover{\r\n  background-color: #313131;\r\n  border: none;\r\n}\r\n\r\n#XID .tab-wrapper .nav-link.active {  \r\n  color: #ffffff!important;\r\n  background: #212022;\r\n  border: none;\r\n}\r\n\r\n#XID .tab-wrapper .tab {\r\n  margin-bottom: -2px;\r\n}\r\n\r\n#XID .tab-wrapper .nav-link {\r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\r\n  border: none;\r\n  padding: 0.5rem 0.6rem;\r\n  font-size: 14px;\r\n  border-top-left-radius: 0;\r\n  border-top-right-radius: 0;\r\n  border-right: 1px solid #242424!important;\r\n  border-bottom: 1px solid #212022!important;\r\n  background: #313131;\r\n  text-decoration: none;\r\n}\r\n\r\n#XID .tab-wrapper .nav-link, #XID .dropdown-item {\r\n  font-family: \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\r\n  border: none;\r\n  padding: 0.5rem 0.6rem;\r\n  color: #a0a0a0!important;\r\n  font-size: 14px;\r\n}\r\n\r\n#XID .dropdown-item:focus, #XID .dropdown-item:hover, #XID .dropdown-toggle:empty::after {\r\n  color: white;\r\n  text-decoration: none;\r\n  background-color: inherit;\r\n}\r\n\r\n#XID .menu{\r\n  background: #313131!important;\r\n  color: #a0a0a0!important;\r\n  font-size: 13px!important;\r\n  padding: 0.5rem 0.6rem!important;\r\n}\r\n\r\n#XID .tab-wrapper .dropdown-menu {\r\n  background: #313131;\r\n}\r\n\r\n#XID [data-role=\"remove\"] {\r\n  float: right;\r\n  padding-top: 5px;\r\n  display: contents;\r\n}\r\n\r\n#XID [data-role=\"remove\"]:after {\r\n  content: ' ';\r\n  padding-left: 5px;\r\n  padding-top: 1px;\r\n  text-align: right;\r\n  width: 14px;\r\n  display: inline-block;\r\n  opacity: 0.7;\r\n}\r\n\r\n#XID .tab-wrapper .tab:hover [data-role=\"remove\"]:after, #XID .tab-wrapper .nav-link.active [data-role=\"remove\"]:after {\r\n  content: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTUuNzY1NzU5LDUuMDAwMDkxbDMuNDA0ODk4LC0zLjQwNDg5OGMwLjIxMTU0MywtMC4yMTEzNjIgMC4yMTE1NDMsLTAuNTU0MzA3IDAsLTAuNzY1NjY5Yy0wLjIxMTU0MywtMC4yMTE1NDMgLTAuNTU0MTI2LC0wLjIxMTU0MyAtMC43NjU2NjksMGwtMy40MDQ4OTgsMy40MDQ4OThsLTMuNDA1MDc5LC0zLjQwNDg5OGMtMC4yMTE1NDMsLTAuMjExNTQzIC0wLjU1NDEyNiwtMC4yMTE1NDMgLTAuNzY1NjY5LDBjLTAuMjExNTQzLDAuMjExMzYyIC0wLjIxMTU0MywwLjU1NDMwNyAwLDAuNzY1NjY5bDMuNDA1MDc5LDMuNDA0ODk4bC0zLjQwNTA3OSwzLjQwNDg5OGMtMC4yMTE1NDMsMC4yMTEzNjIgLTAuMjExNTQzLDAuNTU0MzA3IDAsMC43NjU2NjljMC4xMDU3NzEsMC4xMDU1OTEgMC4yNDQzOTMsMC4xNTg0NzcgMC4zODI4MzQsMC4xNTg0NzdzMC4yNzcwNjMsLTAuMDUyODg2IDAuMzgyODM0LC0wLjE1ODY1N2wzLjQwNTA3OSwtMy40MDQ4OThsMy40MDQ4OTgsMy40MDQ4OThjMC4xMDU3NzEsMC4xMDU3NzEgMC4yNDQzOTMsMC4xNTg2NTcgMC4zODI4MzQsMC4xNTg2NTdzMC4yNzcwNjMsLTAuMDUyODg2IDAuMzgyODM0LC0wLjE1ODY1N2MwLjIxMTU0MywtMC4yMTEzNjIgMC4yMTE1NDMsLTAuNTU0MzA3IDAsLTAuNzY1NjY5bC0zLjQwNDg5OCwtMy40MDQ3MTh6IiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvc3ZnPg==);\r\n}\r\n\r\n.noselect {\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}\r\n\r\n#right-click-menu{\r\n    background: #FAFAFA;\r\n    border: 1px solid #BDBDBD;\r\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12);\r\n    display: block;\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    position: absolute;\r\n    width: 250px;\r\n    z-index: 999999;\r\n}\r\n\r\n#right-click-menu li {\r\n    border-bottom: 1px solid #E0E0E0;\r\n    margin: 0;\r\n    padding: 5px 35px;\r\n}\r\n\r\n#right-click-menu li:last-child {\r\n    border-bottom: none;\r\n}\r\n\r\n#right-click-menu li:hover {\r\n    background: #1E88E5;\r\n    color: #FAFAFA;\r\n}\r\n\r\n#XID .fixed{\r\n  z-index: 88888\r\n}\r\n\r\n.noselect {\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}",
    "BlockFunction": "function server() {\r\n  let currentBlock = data.block;\r\n\r\n  if (!currentBlock) return { currentBlock: null }\r\n\r\n  let theUrl = `mars/ide/${currentBlock.Name}`;\r\n\r\n  function getBlockIcon(blockType) {\r\n    if (blockType === 'app') return 'mars-icon app'; // fa fa-list-alt\r\n    if (blockType === 'page') return 'mars-icon page'; // fa fa-list-alt\r\n    if (blockType === 'model') return 'mars-icon json'; // fa fa-list-alt\r\n    if (blockType === 'settings') return 'mars-icon settings'; // fa fa-list-alt\r\n    if (!blockType || blockType === 'block' || blockType === '') return 'mars-icon module'; // fab fa-html5\r\n    if (blockType.includes('jsx')) return 'mars-icon box'; // fab fa-js-square\r\n    if (blockType === 'service') return 'mars-icon js'; //fab fa-node\r\n    if (blockType === 'prompter') return 'fab fa-searchengin';\r\n  }\r\n\r\n  let name = currentBlock.Name || currentBlock.Title;\r\n  if (currentBlock.Page && currentBlock.Page.settings && currentBlock.Page.settings.url) name = currentBlock.Page.settings.url;\r\n\r\n  return {\r\n    currentBlock: {\r\n      name,\r\n      id: currentBlock._id.toString(),\r\n      url: theUrl,\r\n      icon: getBlockIcon(currentBlock.Type),\r\n      type: currentBlock.Type\r\n    },\r\n  };\r\n}\r\n\r\nreturn server();\r\n",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "DataForScriptFunction": "",
    "DemoJsxTranspiled": "\nMars.render(executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\"script\", { type: \"module\", src: \"https://cdn.jsdelivr.net/npm/vue\" }),\n  executeAppBlock(\"script\", { type: \"module\", src: \"/api/MarsJs\" }),\n  executeAppBlock(BlockTabs, { currentBlockName: \"BlockTabs\" })\n));",
    "DemoJsx": "\nMars.render(\n  <div>\n    <script type=\"module\" src=\"https://cdn.jsdelivr.net/npm/vue\"></script>\n    <script type=\"module\" src=\"/api/MarsJs\"></script>\n    <BlockTabs currentBlockName=\"BlockTabs\" />\n  </div>\n);\n",
    "isSystem": true
  },
  {
    "_id": "5ec2fd8ea00abf524cd5f28a",
    "Name": "MarsIdeMasterPage",
    "Title": "",
    "Apps": [],
    "Folder": "master",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-18T21:26:38.471Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-18T21:26:38.471Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "page",
    "Jsx": "const { This } = Mars.initJsx();\r\nconst _head = <Fragment>\r\n  <This.style />\r\n  <script type=\"module\" src=\"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\" defer></script>{data.head}\r\n  <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\" type=\"module\"></script>\r\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" defer></script>\r\n  <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\" defer></script>\r\n  <script src=\"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\" defer></script>\r\n  <script src=\"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\" defer></script>\r\n  <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n</Fragment>;\r\n\r\nMars.render(<Page {...thisBlock.Page.settings} title={data.title} head={_head}>\r\n \r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div id=\"IdeNavPanel\" class=\"col-sm-12 col-md-2\">\r\n        <div class=\"row\">\r\n          <MainNav Id=\"MainNav1\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"col-sm-12 col-md-10 p-0\">\r\n        <div id=\"PageContent\">{This.children()}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <Modal />\r\n  <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" />\r\n  <link href=\"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\" rel=\"stylesheet\" />\r\n  <link rel=\"stylesheet\" href=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" />\r\n  \r\n</Page>);\r\n",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\nconst _head = executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.style, null),\n  executeAppBlock(\"script\", { type: \"module\", src: \"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\", defer: true }),\n  data.head,\n  executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\", type: \"module\" }),\n  executeAppBlock(\"script\", { src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" })\n);\n\nMars.render(executeAppBlock(\n  Page,\n  _extends({}, thisBlock.Page.settings, { title: data.title, head: _head }),\n  executeAppBlock(\n    \"div\",\n    { \"class\": \"container-fluid\" },\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"row\" },\n      executeAppBlock(\n        \"div\",\n        { id: \"IdeNavPanel\", \"class\": \"col-sm-12 col-md-2\" },\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"row\" },\n          executeAppBlock(MainNav, { Id: \"MainNav1\" })\n        )\n      ),\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"col-sm-12 col-md-10 p-0\" },\n        executeAppBlock(\n          \"div\",\n          { id: \"PageContent\" },\n          This.children()\n        )\n      )\n    )\n  ),\n  executeAppBlock(Modal, null),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\", integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", crossorigin: \"anonymous\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(\"link\", { href: \"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\", rel: \"stylesheet\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" })\n));",
    "Page": {
      "settings": {
        "url": "/mars-ide-master-page",
        "title": "mars-ide-master-page"
      }
    },
    "BlockFunction": "",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "TestPage": "",
    "Css": "body{\r\n  padding: 0!important;\r\n  margin: 0!important;\r\n  background-color: #212122;\r\n  overflow: hidden;\r\n}\r\n\r\nbody{\r\n  background-color: black!important;\r\n}\r\n\r\nbutton,\r\na {\r\n  cursor: pointer !important;\r\n}\r\n\r\n[v-cloak] {\r\n  opacity: 0;\r\n}\r\n\r\n#IdeNavPanel{\r\n  color: #afafaf!important;\r\n  background-color: #212122!important;\r\n  overflow: auto;\r\n  height: 100vh;\r\n}\r\n\r\n@media (min-width: 640px){\r\n  .xmodal-header {\r\n    padding: 12px 16px!important;\r\n  }\r\n}\r\n",
    "Script": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nMars.render(executeAppBlock(\n  MarsIdeMasterPage,\n  { title: \"MarsIdeMasterPage\" },\n  executeAppBlock(\n    \"h1\",\n    { \"class\": \"text-center pt-5\" },\n    \"Children go here\"\n  )\n));",
    "DemoJsx": "\"use strict\";\r\nMars.render(<MarsIdeMasterPage title=\"MarsIdeMasterPage\">\r\n  <h1 class=\"text-center pt-5\">Children go here</h1>\r\n</MarsIdeMasterPage>);\r\n",
    "TestCode": "test('test 2 good', async () => {\r\n  const r = await Mars.blocks.MarsIdeMasterPage(Mars, {\r\n    id: 'MarsIdeMasterPage', title: 'MarsIdeMasterPage'\r\n  }, Req)\r\n\r\n  expect(r).toContain('MARS')\r\n  expect(r).toContain('Blocks')\r\n})\r\n",
    "isSystem": true
  },
  {
    "_id": "5ec3167bcbbafe4cd4be21d7",
    "Name": "GetAllV2AppBlocks",
    "Title": "",
    "Apps": [],
    "Folder": "common",
    "DataArgs": [],
    "Created": {
      "DateTime": "2020-05-18T23:12:59.552Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-18T23:12:59.552Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "service",
    "BlockFunction": "return Object.values(BLOCKS).filter(t =>\r\n  t.Apps &&\r\n  (t.Apps.length === 0 || t.Apps.includes(parseInt(APP.AppId))) &&\r\n  t.Type !== 'page' && t.Type !== 'jsx3'\r\n).filter(t => t && t.Name && t.Name === 'nested tree');",
    "isSystem": true
  },
  {
    "_id": "5ec71f22e7db3641d4d04a62",
    "Name": "MarsIdeUnitTestRunner",
    "Title": "",
    "Apps": [],
    "Folder": "ide",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "currentBlockName"
      }
    ],
    "Created": {
      "DateTime": "2020-05-22T00:38:59.050Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-22T00:38:59.050Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": true,
    "Type": "jsx3",
    "BlockFunction": "async function server() {\r\n  let blockTestCode = Mars.allBlocks.find(t => t.Name === data.currentBlockName).TestCode;\r\n\r\n  if (!blockTestCode) return null\r\n\r\n  const expect = require(\"expect\");\r\n\r\n  const Diff = require('diff');\r\n  const Diff2html = require('diff2html');\r\n  \r\n  \r\n  \r\n  const testArr = {};\r\n  function test(title, testCode) {\r\n    testArr[title] = testCode;\r\n  }\r\n  await eval(`(async () => { ${blockTestCode} })()`);\r\n\r\n  let testResArr = [];\r\n  for (let t in testArr) {\r\n    try {\r\n      await eval(`(async () => { await (${testArr[t].toString()})() })()`);\r\n      testResArr.push({ title: t, testResultsHtml: '' })\r\n    } catch (testError) {\r\n      var Convert = require('ansi-to-html');\r\n      \r\n      var convert = new Convert({\r\n        bg: '#1e1e1e',\r\n        newline: true,\r\n        escapeXML: false,\r\n        stream: false\r\n      });\r\n\r\n      testResArr.push({ title: t, testResultsHtml: convert.toHtml(testError.message) })\r\n\r\n\r\n    }\r\n  }\r\n\r\n  if (!testResArr.find(t => t.testResultsHtml)) testResArr = [{ title: 'All tests ', testResultsHtml: '', allPassed: true }];\r\n\r\n  return { testResArr };\r\n}",
    "Jsx": "\"use strict\";\r\nconst { serverData, This } = Mars.initJsx();\r\nconst getHtml = (test) => {\r\n    return test.testResultsHtml === '' ? `\r\n  <div class=\"alert alert-success\" role=\"alert\">\r\n  <h4 class=\"alert-heading\"><i class=\"fa fa-check\"></i> ${test.title} passed!</h4>\r\n  ${test.allPassed ? `<p class=\"alert-text\">Good job. You earned another point to get your ticket to the marsship when earth collapses...</p>` : ''}\r\n  </div>\r\n` : `\r\n  <div class=\"alert alert-danger\" role=\"alert\">\r\n  <h4 class=\"alert-heading\"><i class=\"fa fa-exclamation-circle\"></i> ${test.title} failed! <a \r\n      data-toggle=\"collapse\" href=\"#collapseExample\" class=\"float-right\" onclick=\"\">expand +</a></h4>\r\n  <div class=\"alert-text test-failed collapse\" class=\"collapse\" id=\"collapseExample\">${test.testResultsHtml}</div>\r\n  </div>\r\n`;\r\n};\r\nasync function Block() {\r\n    const d = await serverData;\r\n    if (!d)\r\n        return This.html();\r\n    return (<div Id={data.Id} class=\"pt-2\">\r\n      {d.testResArr.map(t => getHtml(t))}\r\n      <This.style />\r\n    </div>);\r\n}\r\nMars.render(<Block />);\r\n",
    "Css": " [data-target-id=\"XID\"]{\r\n  font-size: 14px;\r\n }\r\n\r\n[data-target-id=\"XID\"] .alert-heading {\r\n  color: inherit;\r\n  font-size: 14px;\r\n}\r\n\r\n.test-failed{\r\n  background: #1e1e1e;\r\n  color: #fefefe;\r\n  font-size: 14px;\r\n  padding: 1rem;\r\n }\r\n\r\n #XID{\r\n   color: white;\r\n }",
    "Script": "function initXID() {\r\n  const lib = decodeURIComponent(data.JestDefinition)\r\n  monaco.languages.typescript.typescriptDefaults.addExtraLib(lib);\r\n}\r\n\r\ndocument.addEventListener('onMonacoLoad', initXID, { once: true });",
    "TestCode": "test('test 2 good', () => { expect(1).toBe(1) })\r\n\r\ntest('test 2 bad', () => { expect({ t: 123 }).toBe({ t: 1234}) })\r\n",
    "JestDefinition": "declare type SyncExpectationResult = {\r\n  pass: boolean;\r\n  message: () => string;\r\n};\r\ndeclare type AsyncExpectationResult = Promise<SyncExpectationResult>;\r\ndeclare type ExpectationResult = SyncExpectationResult | AsyncExpectationResult;\r\ndeclare type RawMatcherFn = {\r\n  (received: any, expected: any, options?: any): ExpectationResult;\r\n\r\n};\r\ndeclare type ThrowingMatcherFn = (actual: any) => void;\r\ndeclare type PromiseMatcherFn = (actual: any) => Promise<void>;\r\ndeclare type Tester = (a: any, b: any) => boolean | undefined;\r\ndeclare type MatcherState = {\r\n  assertionCalls: number;\r\n  currentTestName?: string;\r\n  dontThrow?: () => void;\r\n  error?: Error;\r\n  equals: (a: unknown, b: unknown, customTesters?: Array<Tester>, strictCheck?: boolean) => boolean;\r\n  expand?: boolean;\r\n  expectedAssertionsNumber?: number;\r\n  isExpectingAssertions?: boolean;\r\n  isNot: boolean;\r\n  promise: string;\r\n  suppressedErrors: Array<Error>;\r\n\r\n};\r\ndeclare type AsymmetricMatcher = Record<string, any>;\r\ndeclare type MatchersObject = {\r\n  [id: string]: RawMatcherFn;\r\n};\r\ndeclare type Expect = {\r\n  <T = unknown>(actual: T): Matchers<T>;\r\n  addSnapshotSerializer(arg0: any): void;\r\n  assertions(arg0: number): void;\r\n  extend(arg0: any): void;\r\n  extractExpectedAssertionsErrors: () => Array<{\r\n    actual: string | number;\r\n    error: Error;\r\n    expected: string;\r\n  }>;\r\n  getState(): MatcherState;\r\n  hasAssertions(): void;\r\n  setState(arg0: any): void;\r\n  any(expectedObject: any): AsymmetricMatcher;\r\n  anything(): AsymmetricMatcher;\r\n  arrayContaining(sample: Array<unknown>): AsymmetricMatcher;\r\n  objectContaining(sample: Record<string, unknown>): AsymmetricMatcher;\r\n  stringContaining(expected: string): AsymmetricMatcher;\r\n  stringMatching(expected: string | RegExp): AsymmetricMatcher;\r\n  [id: string]: AsymmetricMatcher;\r\n  not: {\r\n    [id: string]: AsymmetricMatcher;\r\n  };\r\n};\r\ninterface Constructable {\r\n  new(...args: Array<unknown>): unknown;\r\n}\r\ninterface Matchers<R> {\r\n  /**\r\n   * Ensures the last call to a mock function was provided specific args.\r\n   */\r\n  lastCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that the last call to a mock function has returned a specified value.\r\n   */\r\n  lastReturnedWith(value: unknown): R;\r\n  /**\r\n   * If you know how to test something, `.not` lets you test its opposite.\r\n   */\r\n  not: Matchers<R>;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments on an Nth call.\r\n   */\r\n  nthCalledWith(nthCall: number, ...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that the nth call to a mock function has returned a specified value.\r\n   */\r\n  nthReturnedWith(n: number, value: unknown): R;\r\n  /**\r\n   * Use resolves to unwrap the value of a fulfilled promise so any other\r\n   * matcher can be chained. If the promise is rejected the assertion fails.\r\n   */\r\n  resolves: Matchers<Promise<R>>;\r\n  /**\r\n   * Unwraps the reason of a rejected promise so any other matcher can be chained.\r\n   * If the promise is fulfilled the assertion fails.\r\n   */\r\n  rejects: Matchers<Promise<R>>;\r\n  /**\r\n   * Checks that a value is what you expect. It uses `===` to check strict equality.\r\n   * Don't use `toBe` with floating-point numbers.\r\n   */\r\n  toBe(expected: unknown): R;\r\n  /**\r\n   * Ensures that a mock function is called.\r\n   */\r\n  toBeCalled(): R;\r\n  /**\r\n   * Ensures that a mock function is called an exact number of times.\r\n   */\r\n  toBeCalledTimes(expected: number): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments.\r\n   */\r\n  toBeCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Using exact equality with floating point numbers is a bad idea.\r\n   * Rounding means that intuitive things fail.\r\n   * The default for numDigits is 2.\r\n   */\r\n  toBeCloseTo(expected: number, numDigits?: number): R;\r\n  /**\r\n   * Ensure that a variable is not undefined.\r\n   */\r\n  toBeDefined(): R;\r\n  /**\r\n   * When you don't care what a value is, you just want to\r\n   * ensure a value is false in a boolean context.\r\n   */\r\n  toBeFalsy(): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeGreaterThan(expected: number | bigint): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeGreaterThanOrEqual(expected: number | bigint): R;\r\n  /**\r\n   * Ensure that an object is an instance of a class.\r\n   * This matcher uses `instanceof` underneath.\r\n   */\r\n  toBeInstanceOf(expected: Function): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeLessThan(expected: number | bigint): R;\r\n  /**\r\n   * For comparing floating point numbers.\r\n   */\r\n  toBeLessThanOrEqual(expected: number | bigint): R;\r\n  /**\r\n   * This is the same as `.toBe(null)` but the error messages are a bit nicer.\r\n   * So use `.toBeNull()` when you want to check that something is null.\r\n   */\r\n  toBeNull(): R;\r\n  /**\r\n   * Use when you don't care what a value is, you just want to ensure a value\r\n   * is true in a boolean context. In JavaScript, there are six falsy values:\r\n   * `false`, `0`, `''`, `null`, `undefined`, and `NaN`. Everything else is truthy.\r\n   */\r\n  toBeTruthy(): R;\r\n  /**\r\n   * Used to check that a variable is undefined.\r\n   */\r\n  toBeUndefined(): R;\r\n  /**\r\n   * Used to check that a variable is NaN.\r\n   */\r\n  toBeNaN(): R;\r\n  /**\r\n   * Used when you want to check that an item is in a list.\r\n   * For testing the items in the list, this uses `===`, a strict equality check.\r\n   */\r\n  toContain(expected: unknown): R;\r\n  /**\r\n   * Used when you want to check that an item is in a list.\r\n   * For testing the items in the list, this  matcher recursively checks the\r\n   * equality of all fields, rather than checking for object identity.\r\n   */\r\n  toContainEqual(expected: unknown): R;\r\n  /**\r\n   * Used when you want to check that two objects have the same value.\r\n   * This matcher recursively checks the equality of all fields, rather than checking for object identity.\r\n   */\r\n  toEqual(expected: unknown): R;\r\n  /**\r\n   * Ensures that a mock function is called.\r\n   */\r\n  toHaveBeenCalled(): R;\r\n  /**\r\n   * Ensures that a mock function is called an exact number of times.\r\n   */\r\n  toHaveBeenCalledTimes(expected: number): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments.\r\n   */\r\n  toHaveBeenCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Ensure that a mock function is called with specific arguments on an Nth call.\r\n   */\r\n  toHaveBeenNthCalledWith(nthCall: number, ...args: Array<unknown>): R;\r\n  /**\r\n   * If you have a mock function, you can use `.toHaveBeenLastCalledWith`\r\n   * to test what arguments it was last called with.\r\n   */\r\n  toHaveBeenLastCalledWith(...args: Array<unknown>): R;\r\n  /**\r\n   * Use to test the specific value that a mock function last returned.\r\n   * If the last call to the mock function threw an error, then this matcher will fail\r\n   * no matter what value you provided as the expected return value.\r\n   */\r\n  toHaveLastReturnedWith(expected: unknown): R;\r\n  /**\r\n   * Used to check that an object has a `.length` property\r\n   * and it is set to a certain numeric value.\r\n   */\r\n  toHaveLength(expected: number): R;\r\n  /**\r\n   * Use to test the specific value that a mock function returned for the nth call.\r\n   * If the nth call to the mock function threw an error, then this matcher will fail\r\n   * no matter what value you provided as the expected return value.\r\n   */\r\n  toHaveNthReturnedWith(nthCall: number, expected: unknown): R;\r\n  /**\r\n   * Use to check if property at provided reference keyPath exists for an object.\r\n   * For checking deeply nested properties in an object you may use dot notation or an array containing\r\n   * the keyPath for deep references.\r\n   *\r\n   * Optionally, you can provide a value to check if it's equal to the value present at keyPath\r\n   * on the target object. This matcher uses 'deep equality' (like `toEqual()`) and recursively checks\r\n   * the equality of all fields.\r\n   *\r\n   * @example\r\n   *\r\n   * expect(houseForSale).toHaveProperty('kitchen.area', 20);\r\n   */\r\n  toHaveProperty(keyPath: string | Array<string>, value?: unknown): R;\r\n  /**\r\n   * Use to test that the mock function successfully returned (i.e., did not throw an error) at least one time\r\n   */\r\n  toHaveReturned(): R;\r\n  /**\r\n   * Use to ensure that a mock function returned successfully (i.e., did not throw an error) an exact number of times.\r\n   * Any calls to the mock function that throw an error are not counted toward the number of times the function returned.\r\n   */\r\n  toHaveReturnedTimes(expected: number): R;\r\n  /**\r\n   * Use to ensure that a mock function returned a specific value.\r\n   */\r\n  toHaveReturnedWith(expected: unknown): R;\r\n  /**\r\n   * Check that a string matches a regular expression.\r\n   */\r\n  toMatch(expected: string | RegExp): R;\r\n  /**\r\n   * Used to check that a JavaScript object matches a subset of the properties of an object\r\n   */\r\n  toMatchObject(expected: Record<string, unknown> | Array<unknown>): R;\r\n  /**\r\n   * Ensure that a mock function has returned (as opposed to thrown) at least once.\r\n   */\r\n  toReturn(): R;\r\n  /**\r\n   * Ensure that a mock function has returned (as opposed to thrown) a specified number of times.\r\n   */\r\n  toReturnTimes(count: number): R;\r\n  /**\r\n   * Ensure that a mock function has returned a specified value at least once.\r\n   */\r\n  toReturnWith(value: unknown): R;\r\n  /**\r\n   * Use to test that objects have the same types as well as structure.\r\n   */\r\n  toStrictEqual(expected: unknown): R;\r\n  /**\r\n   * Used to test that a function throws when it is called.\r\n   */\r\n  toThrow(error?: string | Constructable | RegExp | Error): R;\r\n  /**\r\n   * If you want to test that a specific error is thrown inside a function.\r\n   */\r\n  toThrowError(error?: string | Constructable | RegExp | Error): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchSnapshot<T extends {\r\n    [P in keyof R]: unknown;\r\n  }>(propertyMatchers: Partial<T>, snapshotName?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchSnapshot(snapshotName?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchInlineSnapshot<T extends {\r\n    [P in keyof R]: unknown;\r\n  }>(propertyMatchers: Partial<T>, snapshot?: string): R;\r\n  /**\r\n   * This ensures that a value matches the most recent snapshot with property matchers.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   * Check out [the Snapshot Testing guide](https://jestjs.io/docs/en/snapshot-testing) for more information.\r\n   */\r\n  toMatchInlineSnapshot(snapshot?: string): R;\r\n  /**\r\n   * Used to test that a function throws a error matching the most recent snapshot when it is called.\r\n   */\r\n  toThrowErrorMatchingSnapshot(): R;\r\n  /**\r\n   * Used to test that a function throws a error matching the most recent snapshot when it is called.\r\n   * Instead of writing the snapshot value to a .snap file, it will be written into the source code automatically.\r\n   */\r\n  toThrowErrorMatchingInlineSnapshot(snapshot?: string): R;\r\n}\r\n\r\nlet expect: Expect;",
    "DataForScriptFunction": "return {\r\n  JestDefinition: encodeURIComponent(BLOCKS.MarsTest.JestDefinition)\r\n }",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "TestPage": "",
    "JsxTranspiled": "\"use strict\";\n\nconst { serverData, This } = Mars.initJsx();\nconst getHtml = test => {\n    return test.testResultsHtml === '' ? `\n  <div class=\"alert alert-success\" role=\"alert\">\n  <h4 class=\"alert-heading\"><i class=\"fa fa-check\"></i> ${test.title} passed!</h4>\n  ${test.allPassed ? `<p class=\"alert-text\">Good job. You earned another point to get your ticket to the marsship when earth collapses...</p>` : ''}\n  </div>\n` : `\n  <div class=\"alert alert-danger\" role=\"alert\">\n  <h4 class=\"alert-heading\"><i class=\"fa fa-exclamation-circle\"></i> ${test.title} failed! <a \n      data-toggle=\"collapse\" href=\"#collapseExample\" class=\"float-right\" onclick=\"\">expand +</a></h4>\n  <div class=\"alert-text test-failed collapse\" class=\"collapse\" id=\"collapseExample\">${test.testResultsHtml}</div>\n  </div>\n`;\n};\nasync function Block() {\n    const d = await serverData;\n    if (!d) return This.html();\n    return executeAppBlock(\n        'div',\n        { Id: data.Id, 'class': 'pt-2' },\n        d.testResArr.map(t => getHtml(t)),\n        executeAppBlock(This.style, null)\n    );\n}\nMars.render(executeAppBlock(Block, null));",
    "DemoJsxTranspiled": "\"use strict\";\n\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { \"class\": \"col-12\" },\n    \"hello demo runner 12\",\n    executeAppBlock(MarsIdeUnitTestRunner, { currentBlockName: \"MarsIdeUnitTestRunner\" })\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "DemoJsx": "\"use strict\";\r\nasync function Block() {\r\n    return (<div class=\"col-12\">\r\n      hello demo runner 12\r\n      <MarsIdeUnitTestRunner currentBlockName=\"MarsIdeUnitTestRunner\"/>\r\n    </div>);\r\n}\r\nMars.render(<Block />);\r\n",
    "Html": "<div>\r\n\t<link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/railscasts.min.css\" />\r\n\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js\" defer></script>\r\n\r\n\r\n\t<script type=\"module\">\r\n\t\tdocument.querySelectorAll('code').forEach((block) => {\r\nhljs.highlightBlock(block);\r\n});</script>\r\n\t<div style=\"color:white\" class=\"p-3\">\r\n\t\tThere are no tests.\r\n\t\tHere is an example on how to make one:\r\n\t</div>\r\n\t<pre>\r\n        <code>\r\n\t\ttest('test 2 good', () => {expect(1).toBe(1)})\r\n        </code>\r\n      </pre>\r\n</div>",
    "isSystem": true
  },
  {
    "_id": "5ec9b3126e213617bc3baecb",
    "Name": "TestApiMethods",
    "Title": "",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [
      {
        "PropName": "testProp",
        "DataType": "string"
      }
    ],
    "Created": {
      "DateTime": "2020-05-23T23:34:42.804Z",
      "UserId": 20,
      "UserName": "John Rush"
    },
    "LastChanged": {
      "DateTime": "2020-05-23T23:34:42.804Z",
      "UserId": 20,
      "UserName": "John Rush"
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { This } = Mars.initJsx();\r\nfunction Block() {\r\n    return (<div>\r\n        <This.html />\r\n        <This.script />\r\n    </div>);\r\n}\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nfunction Block() {\n    return executeAppBlock(\n        \"div\",\n        null,\n        executeAppBlock(This.html, null),\n        executeAppBlock(This.script, null)\n    );\n}\nexport default executeAppBlock(Block, null);",
    "Script": "import '/api/MarsJs';\r\nimport 'https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js'\r\n\r\nnew MarsVue('XID', {\r\n  ...data, methods: [{ name: 'method1', block: 'TestApiMethods' }]\r\n}, {\r\n  data: {\r\n    result: '...'\r\n  },\r\n  mounted() {\r\n    setTimeout(async function () {\r\n      await XID.test()\r\n    }, 300)\r\n  },\r\n  methods: {\r\n    async test() {\r\n      this.result = await this.api.method1(123, 4)\r\n    }\r\n  }\r\n})",
    "Html": "<link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\r\n\tintegrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n<link rel=\"stylesheet\" href=\"//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css\" />\r\n\r\n<div id=\"XID\">\r\n\t<button @click=\"test\">Test method1</button>\r\n  result: {{result}}\r\n\r\n<div>\r\n\t<div class=\"mb-3\">\r\n\t\t<b-button v-b-toggle.my-collapse>Toggle Collapse</b-button>\r\n\t\t<b-button v-b-toggle.my-sidebar>Toggle Sidebar</b-button>\r\n\t</div>\r\n\r\n\t<b-collapse id=\"my-collapse\">\r\n\t\t<b-card title=\"Collapsible card\">\r\n\t\t\tHello world!\r\n\t\t</b-card>\r\n\t</b-collapse>\r\n\r\n\t<b-sidebar id=\"my-sidebar\" title=\"Sidebar\" shadow>\r\n\t\t<div class=\"px-3 py-2\">\r\n\t\t\tCras mattis consectetur purus sit amet fermentum. Cras justo odio, dapibus ac facilisis\r\n\t\t\tin, egestas eget quam. Morbi leo risus, porta ac consectetur ac, vestibulum at eros.\r\n\t\t</div>\r\n\t</b-sidebar>\r\n</div>\r\n</div>",
    "Css": "",
    "BlockFunction": "function api() {\r\n  return {\r\n    method1(p1, p2) {\r\n      return 'hey from methodd1 ' + p1 + p2 + '\\n' + JSON.stringify(data)\r\n    }\r\n  }\r\n}",
    "ShowCompiledJsx": false,
    "JsxTranspiledTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction TodoList({ list }) {\n  list.forEach(t => t.openMenu = false);\n  return executeAppBlock(\"ul\", { \"x-data\": `{ props: {list: JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(list))}')) }}`, \"x-init\": `BLOCKS.XID_props = props` }, list.map(({ name }, i) => executeAppBlock(\"li\", { \"x-on-mouseup\": \"if($event.button === 2) openMenu = true; return false;\" }, executeAppBlock(\"div\", { \"class\": \"p-4\" }, executeAppBlock(\"span\", { \"x-text\": `BLOCKS.XID_props.list[${i}].name` }), executeAppBlock(\"input\", { type: \"text\", \"x-model\": `BLOCKS.XID_props.list[${i}].name`, \"class\": \"block border mt-2 rounded px-2\" }), executeAppBlock(This.html, null)))));\n}\n\nfunction Block() {\n  return executeAppBlock(\"div\", null, executeAppBlock(\"div\", { id: data.Id }, executeAppBlock(TodoList, { list: data.list })), executeAppBlock(This.style, null), executeAppBlock(This.script, { clientJs: `${data.Id}.render = () => { ${thisBlock.JsxTranspiled.replace('export default', 'return ')} }` }));\n}\n\nexport default executeAppBlock(Block, null);",
    "ServerTypeScript": "",
    "DemoJsxTranspiled": "\"use strict\";\n\nMars.render(executeAppBlock(TestApiMethods, { Id: \"Obj1\", testProp: \"testProp1\" }));",
    "DemoJsx": "\"use strict\";\r\nMars.render(<TestApiMethods Id=\"Obj1\" testProp=\"testProp1\"/>);\r\n",
    "isSystem": true
  },
  {
    "_id": "5eced576298e3d0be87aa35c",
    "Name": "ResetCache",
    "Title": "ResetCache",
    "Type": "service",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "blockObj"
      }
    ],
    "BlockFunction": "function resetLambdaInstances() {\r\n  var params = {\r\n    FunctionName: 'content-service-dev-cms',\r\n    Description: new Date().toString(),\r\n  };\r\n\r\n  try {\r\n    var lambda = new require('aws-sdk').Lambda();\r\n\r\n    return new Promise((resolve) => {\r\n      lambda.updateFunctionConfiguration(params, function (err) {\r\n        if (err) {\r\n          Req.response.statusCode = 400;\r\n          resolve('reset has failed')\r\n        }\r\n        else {\r\n          resolve('reset is done');\r\n        }\r\n      })\r\n    })\r\n  } catch (e) {\r\n    return 'aws error: ' + e\r\n  }\r\n}\r\n\r\nasync function server() {\r\n  // granular cache update. Only one block\r\n\r\n  if (data.blockObj) {\r\n    data.blockObj._id = data.blockObj._id.toString();\r\n    const b = Mars.allBlocks.find(t => t.Name === data.blockObj.Name);\r\n    if (b) Object.assign(b, data.blockObj)\r\n    else Mars.allBlocks.push(data.blockObj)\r\n\r\n    //await Mars.libs.axios.post('http://localhost:3333/api/ResetCache', { blockObj: data.blockObj })\r\n\r\n    await Mars.services.InitBlocks({ blocksArr: Mars.allBlocks.filter(t => t.JsxTranspiled) });\r\n    await Mars.initServices(Mars.allBlocks.filter(t => t.BlockFunction));\r\n\r\n    return true\r\n  } else {\r\n    // update entire cache\r\n    Mars.status.ready = false;\r\n\r\n    await Mars.init();\r\n    return 'done'\r\n  }\r\n}",
    "DemoJsxTranspiled": "Mars.render('12345');",
    "DemoJsx": "Mars.render('12345')",
    "isSystem": true
  },
  {
    "_id": "5ecec58c6dc69d45c8d04331",
    "Name": "SaveBlockFileToDb",
    "BlockFunction": "const compilerOptions = {\n  noImplicitAny: true,\n  strictNullChecks: false,\n  strictFunctionTypes: true,\n  strictPropertyInitialization: true,\n  strictBindCallApply: true,\n  noImplicitThis: true,\n  noImplicitReturns: true,\n\n  // 3.7 off, 3.8 on I think\n  useDefineForClassFields: false,\n\n  alwaysStrict: true,\n  allowUnreachableCode: false,\n  allowUnusedLabels: false,\n\n  downlevelIteration: false,\n  noEmitHelpers: false,\n  noLib: false,\n  noStrictGenericChecks: false,\n  noUnusedLocals: false,\n  noUnusedParameters: false,\n\n  esModuleInterop: true,\n  preserveConstEnums: false,\n  removeComments: false,\n  skipLibCheck: false,\n\n  checkJs: true,\n  allowJs: true,\n  declaration: true,\n\n  experimentalDecorators: false,\n  emitDecoratorMetadata: false,\n\n  target: 4,\n  jsx: 1,\n  module: 99,\n};\nconst { _, ObjectID } = Mars.libs;\n\nlet code = _.clone(data.Payload);\n\nasync function server() {\n  // transpile ts to js\n  if (code && data.TranspileTs && data.TranspileJsx) {\n    //code = require('../helpers/typescriptServices').transpile(code, compilerOptions)\n  }\n\n  const dbClient = await Mars.mongoDb;\n\n  const b = Mars.allBlocks.find(t => t._id === data.BlockId);\n\n  async function savePropToBlock(prop, val) {\n    const r = await dbClient.collection('blocks').\n      findOneAndUpdate({ _id: new ObjectID(data.BlockId) }, { $set: { [prop]: val } }, { returnOriginal: false });\n    // if we havent found the block it means someone is trying to edit block imported from another app. lets create it\n    if (!r.value) {\n      const newBlock = (await dbClient.collection('blocks').insertOne({\n        ...b,\n        _id: new ObjectID(data.BlockId),\n        isSystem: false,\n        cloned: {\n          timestamp: new Date()\n        }\n      })).ops[0];\n\n    }\n    b[prop] = val;\n    b.isSystem = false;\n    return true;\n  }\n\n  // handle jsx transpile if defined\n  if (data.TranspileJsx) {\n    try {\n      require(\"babel-plugin-transform-react-jsx\");\n      const c = require(\"babel-core\").transform(code, {\n        plugins: [[\"transform-react-jsx\", { \"pragma\": \"executeAppBlock\" }]]\n      });\n      await savePropToBlock(`${data.Path}Transpiled`, c.code)\n    } catch (e) {\n      throw new Error(e)\n      debugger\n    }\n  }\n\n  try {\n    code = JSON.parse(code);\n  } catch (ex) { }\n\n  await savePropToBlock(data.Path, code);\n\n  await Mars.services.ResetCache({\n    blockObj: b\n  })\n\n  return true;\n}",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "BlockId"
      },
      {
        "DataType": "string",
        "PropName": "Path"
      },
      {
        "DataType": "string",
        "PropName": "Code",
        "Description": "JSON object or simple object such as int, string"
      },
      {
        "DataType": "boolean",
        "PropName": "TranspileJsx",
        "RegExp": ""
      },
      {
        "DataType": "boolean",
        "PropName": "TranspileTs",
        "RegExp": ""
      }
    ],
    "LastChanged": {
      "DateTime": "2020-05-27T19:54:59.512Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "Note": "",
    "Created": {
      "DateTime": "2020-05-27T19:54:52.459Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "Type": "service",
    "TestPage": "admin/test-block/5ecec58c6dc69d45c8d04331--draft",
    "Apps": "",
    "ClientTypeScript": "",
    "Description": "",
    "Folder": "services",
    "Icon": "",
    "Image": "",
    "JsxVersion": 1,
    "LoaderHtml": "",
    "Placement": "",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Title": "",
    "isSystem": true
  },
  {
    "_id": "5e72a63d10de370660754bc0",
    "Name": "NestedTree",
    "BlockFunction": "",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "Tree",
        "RegExp": "",
        "CollapseField": "name",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "array",
            "PropName": "children",
            "RegExp": "",
            "SubArgs": [
              {
                "DataType": "string",
                "PropName": "name"
              },
              {
                "DataType": "array",
                "PropName": "children",
                "RegExp": "",
                "SubArgs": [
                  {
                    "DataType": "string",
                    "PropName": "name"
                  },
                  {
                    "DataType": "string",
                    "PropName": "icon"
                  },
                  {
                    "DataType": "boolean",
                    "PropName": "isOpenByDefault",
                    "RegExp": ""
                  }
                ],
                "CollapseField": "name"
              },
              {
                "DataType": "string",
                "PropName": "icon"
              },
              {
                "DataType": "boolean",
                "PropName": "isOpenByDefault",
                "RegExp": ""
              }
            ],
            "CollapseField": "name"
          },
          {
            "DataType": "string",
            "PropName": "icon"
          },
          {
            "DataType": "boolean",
            "PropName": "isOpenByDefault",
            "RegExp": ""
          }
        ]
      },
      {
        "DataType": "boolean",
        "PropName": "Searchable",
        "RegExp": "",
        "Description": "show the search input to filter the tree",
        "NullAllowed": true
      }
    ],
    "Apps": [],
    "Created": {
      "DateTime": "2020-03-18T22:52:45.705Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-02T21:21:49.332Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "DataForScriptFunction": "data.Tree.forEach(t => t.FirstLevel = true);\r\nreturn { treeData: data.Tree, searchable: data.Searchable }",
    "Note": "",
    "Folder": "common",
    "Html": "<!-- item template -->\n<XTEMPLATE v-pre id=\"item-template\">\n\n\t<li :title=\"item.name\">\n\t\t<hsc-menu-style-black class=\"contex-menu\">\n\t\t\t<hsc-menu-context-menu>\n\t\t\t\t<div v-if=\"isFolder\" class=\"bold folder\" @click=\"isOpen=!isOpen\"\n\t\t\t\t\t:class=\"{'first-level': item.FirstLevel}\">\n\t\t\t\t\t<span v-show=\"isOpen || (filterterm && filterterm.length > 0)\" class=\"fa fa-xs tree-arrow-down\"></span>\n\t\t\t\t\t<span v-show=\"!isOpen && (!filterterm || filterterm.length === 0)\" class=\"fa fa-xs tree-arrow-right\"></span>\n\t\t\t\t\t<div v-bind:class=\"['tree-icon', { open: isOpen }]\">\n\t\t\t\t\t\t<span width=\"16\" height=\"16\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<a :href=\"item.url\" v-bind:data-target-partial=\"item.url\"\n\t\t\t\t\t\tv-bind:class=\"{'cursor-default': !item.url}\">\n\t\t\t\t\t\t<span v-html=\"shortName\"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\n\t\t\t\t<a v-if=\"!isFolder\" :href=\"item.url\" @mousedown.stop v-bind:data-target-partial=\"item.url\"\n\t\t\t\t\tclass=\"cursor-pointer\" @click=\"eval(item.OnClick)\">\n\t\t\t\t\t<span class=\"fa-sm pl-1\" v-bind:class=\"icon\"></span>\n\t\t\t\t\t<span v-html=\"shortName\"></span>\n\t\t\t\t</a>\n\t\t\t\t<template slot=\"contextmenu\">\n\t\t\t\t\t<hsc-menu-item v-for=\"(mAction, index3) in item.contextMenuActions\" :label=\"mAction.title\"\n\t\t\t\t\t\t@click=\"eval(mAction.onClick)\">\n\t\t\t\t\t</hsc-menu-item>\n\t\t\t\t</template>\n\t\t\t</hsc-menu-context-menu>\n\t\t</hsc-menu-style-black>\n\t\t<ul v-show=\"isOpen || (filterterm && filterterm.length > 0)\" v-if=\"isFolder\" class=\"cms-tree\">\n\t\t\t<tree-item class=\"item\" v-for=\"(child, index) in filterlist\" :key=\"index\" :item=\"child\"\n\t\t\t\t:filterterm=\"filterterm\" @make-folder=\"$emit('make-folder', $event)\"\n\t\t\t\t@add-item=\"$emit('add-item', $event)\"></tree-item>\n\t\t\t<!--<li class=\"add\" @click=\"$emit('add-item', item)\">+</li>-->\n\t\t</ul>\n\n\t</li>\n\n\n</XTEMPLATE>\n\n<!-- the demo root element -->\n<div id=\"XID\" style=\"overflow-x: auto\">\n\t<input type=\"search\" v-if=\"searchable\" class=\"form-control form-control-sm mb-2\" style=\"background-color: inherit; border: 1px solid #313131;color: inherit\" placeholder=\"Search...\" v-on:input=\"filterterm = $event.target.value\"/>\n\t<ul class=\"cms-tree pl-0\">\n\t\t<tree-item v-for=\"(treeItem, index2) in treeData\" class=\"item cms-tree\" :item=\"treeItem\"\n\t\t\t@make-folder=\"makeFolder\" @add-item=\"addItem\" :filterterm=\"filterterm\">\n\t\t</tree-item>\n\t</ul>\n</div>",
    "Script": "// define the tree-item component\nVue.component(\"tree-item\", {\n\ttemplate: \"#item-template\",\n\tprops: {\n\t\titem: Object,\n\t\tfilterterm: String\n\t},\n\tdata: function () {\n\t\treturn {\n\t\t\tisOpen: this.item.isOpenByDefault,\n\t\t\tkey: this.key\n\t\t};\n\t},\n\tcomputed: {\n\t\tisFolder: function () {\n\t\t\treturn this.item.children && this.item.children.length;\n\t\t},\n\t\tshortName() {\n\t\t\treturn this.item.name;\n\t\t\treturn this.item.name.length > 20 ? this.item.name.slice(0, 20) + '...' : this.item.name\n\t\t},\n\t\ticon: function () { \n\t\t\tconst cl = {};\n\t\t\tlet pName = this.item.icon || (this.item.children && this.item.children.length ? 'fa-folder' : '');\n\t\t\tif(!pName) return null\n\t\t\tif (pName.indexOf(' ') === -1) pName = 'fa ' + pName;\n\t\t\tcl[pName] = true;\n\t\t\treturn cl;\n\t\t},\n\t\tfilterlist: function () {\n\t\t\tvar self = this;\n\t\t\tvar exp = new RegExp(self.filterterm, 'i');\n\n\t\t\tfunction deepFilter(children) {\n\t\t\t\t// return _.filter(children, function(item){\n\t\t\t\t//   return item.children ? deepFilter(item.children) : exp.test(item.name);\n\t\t\t\t// }); \n\t\t\t\treturn children.filter(function (item) {\n\t\t\t\t\tlet c = item.children ? deepFilter(item.children) : exp.test(item.name)\n\t\t\t\t\tif (c.length == 0) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn c;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tvar filtering = deepFilter(this.item.children)\n\t\t\treturn filtering;\n\t\t}\n\t},\n\tmethods: {\n\t\ttoggle: function () {\n\t\t\tif (this.isFolder) {\n\t\t\t\tthis.isOpen = !this.isOpen;\n\t\t\t} else {\n\t\t\t\tSITE.OpenPage(this.page)\n\t\t\t}\n\t\t},\n\t\tmakeFolder: function () {\n\t\t\tif (!this.isFolder) {\n\t\t\t\tthis.$emit(\"make-folder\", this.item);\n\t\t\t\tthis.isOpen = true;\n\t\t\t}\n\t\t}\n\t}\n});\n\nif (data.treeData.some(t => !t)) console.warn('there is null in data.Tree in nested-tree block');\n\nnew MarsVue(\"XID\", data, {\n  events: {\n    OnSelect: {\n      value: 'object'\n    },\n  },\n\tdata: {\n\t\ttreeData: data.treeData.filter(t => t),\n\t\tsearchable: data.searchable,\n\t\tfilterterm: ''\n\t},\n\tcomputed: {\n\t\tflatTreeData: function () {\n\t\t\tfunction flatTree(props) {\n\t\t\t\tconst result = [...props];\n\t\t\t\tprops.forEach(function (p) {\n\t\t\t\t\tif (p.children) {\n\t\t\t\t\t\tresult.push(...flatTree(p.children));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (props.children) {\n\t\t\t\t\tresult.push(...flatTree(props.children));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\treturn flatTree(this.treeData);\n\t\t},\n\t},\n\tmethods: {\n\t\tmakeFolder: function (item) {\n\t\t\tVue.set(item, \"children\", []);\n\t\t\tthis.addItem(item);\n\t\t},\n\t\taddItem: function (item) {\n\t\t\talert('not implemented yet..');\n\t\t\treturn;\n\t\t\titem.children.push({\n\t\t\t\tname: \"new stuff\"\n\t\t\t});\n\t\t},\n    moveUpHandler: function (e) {\n      // TODO: force props raw updating\n      const eventData = e.detail;\n\t\t\tconst prop = this.flatTreeData.find(function (t) {\n\t\t\t\treturn t.PropertyPath === eventData.PropertyPath;\n      });\n\t\t\tif (prop) {\n\t\t\t\tconst lodashPath = [...prop.PropertyPathLodash];\n\t\t\t\tconst index = lodashPath[lodashPath.length - 1];\n\t\t\t\tif (index > 0) {\n\t\t\t\t\tconst previousElementLodashPath = [...lodashPath.slice(0, -1), lodashPath[lodashPath.length - 1] - 1];\n          const previousElement = _.cloneDeep(_.get(this.treeData, previousElementLodashPath));\n          const treeData = _.cloneDeep(this.treeData);\n\t\t\t\t\t_.set(treeData, previousElementLodashPath, { ...prop, PropertyPathLodash: previousElementLodashPath });\n          _.set(treeData, lodashPath, { ...previousElement, PropertyPathLodash: lodashPath });\n          this.$set(this, 'treeData', treeData);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmoveDownHandler: function (e) {\n\t\t\tconsole.log('handled: ', e.detail);\n\t\t},\n\t\tdeleteHandler: function (e) {\n\t\t\tconsole.log('handled: ', e.detail);\n\t\t},\n\t\tsaveHandler: function (e) {\n\t\t\tconsole.log('handled: ', e.detail);\n\t\t}\n\t},\n\tmounted: function () {\n\t\tconst self = this;\n\t\tdocument.addEventListener('movePropUp', self.moveUpHandler);\n\t\tdocument.addEventListener('movePropDown', self.moveDownHandler);\n\t\tdocument.addEventListener('deleteProp', self.deleteHandler);\n\t\tdocument.addEventListener('saveProp', self.saveHandler);\n\t}\n});",
    "LoaderHtml": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Title": "",
    "Type": "jsx3",
    "Css": "ul.cms-tree{\n\tlist-style-type: none;\n  padding-left: 16px;\n  font-weight: lighter;\n}\n\n.cms-tree .btn-link, .cms-tree a {\n  font-weight: normal;\n  color: #bbb!important;\n  word-break: break-all;\n\n  font-family: \"Helvetica Neue\", Helvetica, Arial, \"Lucida Grande\", sans-serif;\n  font-size: 14px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  max-width: 100%;\n  display: inline-block;\n  vertical-align: top;\n  padding-left: 3px;\n}\n\n.cms-tree .btn-link:hover, .cms-tree a:hover {\n  color: #ffffff !important;\n}\n\n.cms-tree .fa, .cms-tree .fas, .cms-tree .fab{\n  font-size: 13px;\n}\n\n.cms-tree .fa-caret-right, .cms-tree .fa-caret-down{\n  font-size: 11px;\n}\n\n.cms-tree .item{\n  line-height: 22px;\n}\n\n.cms-tree .folder{\n  line-height: 18px;\n  white-space: nowrap;\n}\n\n.cms-tree .folder.first-level{\n  font-size: 15px;\n  line-height: 24px;\n}    \n.cms-tree .folder.first-level .fa-sm {\n  width: 17px;\n}\n\n.cursor-default{\n  cursor: default!important;\n}\n\n.tree-arrow-right, .tree-arrow-down {\n  margin-right: 3px;\n  cursor: pointer;\n}\n\n.tree-arrow-right:before {\n  content: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTguMjMwNDI3LDUuMTg5MDU3bC00LjgzODg1MSwtNC44Mzg4NTFjLTAuMTcxOTkyLC0wLjE3MTk5MiAtMC40NTAwMTMsLTAuMTcxOTkyIC0wLjYyMjAwNSwwcy0wLjE3MTk5MiwwLjQ1MDAxMyAwLDAuNjIyMDA1bDQuNTI3ODM5LDQuNTI3ODM5bC00LjUyNzgzOSw0LjUyNzgzOWMtMC4xNzE5OTIsMC4xNzE5OTIgLTAuMTcxOTkyLDAuNDUwMDEzIDAsMC42MjIwMDVjMC4wODU3OCwwLjA4NTc4IDAuMTk4Mzg2LDAuMTI4ODk2IDAuMzExMDEzLDAuMTI4ODk2YzAuMTEyNjA2LDAgMC4yMjUyMzMsLTAuMDQzMTE3IDAuMzExMDEzLC0wLjEyODg5Nmw0LjgzODg1MSwtNC44Mzg4NTFjMC4xNzE5NzEsLTAuMTcxOTcxIDAuMTcxOTcxLC0wLjQ0OTk5MiAtMC4wMDAwMjEsLTAuNjIxOTg0eiIgZmlsbD0iI2EwYTBhMCIvPjwvc3ZnPg==);\n}\n\n.tree-arrow-down:before {\n  content: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMTEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggdHJhbnNmb3JtPSJyb3RhdGUoOTAgNS41LDUuNTAwMDAwMDAwMDAwMDAxKSAiIGQ9Im04LjIzMDQyNiw1LjE4OTA1N2wtNC44Mzg4NTEsLTQuODM4ODUxYy0wLjE3MTk5MiwtMC4xNzE5OTIgLTAuNDUwMDEzLC0wLjE3MTk5MiAtMC42MjIwMDUsMHMtMC4xNzE5OTIsMC40NTAwMTMgMCwwLjYyMjAwNWw0LjUyNzgzOSw0LjUyNzgzOWwtNC41Mjc4MzksNC41Mjc4MzljLTAuMTcxOTkyLDAuMTcxOTkyIC0wLjE3MTk5MiwwLjQ1MDAxMyAwLDAuNjIyMDA1YzAuMDg1NzgsMC4wODU3OCAwLjE5ODM4NiwwLjEyODg5NiAwLjMxMTAxMywwLjEyODg5NmMwLjExMjYwNiwwIDAuMjI1MjMzLC0wLjA0MzExNyAwLjMxMTAxMywtMC4xMjg4OTZsNC44Mzg4NTEsLTQuODM4ODUxYzAuMTcxOTcxLC0wLjE3MTk3MSAwLjE3MTk3MSwtMC40NDk5OTIgLTAuMDAwMDIxLC0wLjYyMTk4NHoiIGZpbGw9IiNhMGEwYTAiLz48L3N2Zz4=);\n}\n\n.tree-icon{\n  display: inline-block; \n  vertical-align: middle;\n}\n\n.tree-icon span {\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/default_folder.svg);\n  background-size: 16px;\n  width: 16px;\n  height: 16px;\n  display: inline-block;\n  -webkit-font-smoothing: antialiased;\n  flex-shrink: 0;\n  background-position: 0px center;\n  background-repeat: no-repeat;\n}\n\n.tree-icon.open span {\n  background-image: url(https://cdn-dev.filmgrail.com/web-files/icons/vscode-icons/default_folder_opened.svg);\n}\n",
    "Jsx": "const { This } = Mars.initJsx();\r\nfunction Block() {\r\n  return (\r\n    <div>\r\n      <This.html />\r\n      <This.script searchable={data.Searchable} treeData={data.Tree} />\r\n      <This.style />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Block()",
    "TestPage": "admin/test-block/5e72a63d10de370660754bc0--draft",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nfunction Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.script, { searchable: data.Searchable, treeData: data.Tree }),\n    executeAppBlock(This.style, null)\n  );\n}\n\nexport default Block();",
    "DemoJsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst sampleData = {\n    \"Tree\": [{\n        \"name\": \"My Tree 11\",\n        \"isOpenByDefault\": true,\n        \"icon\": \"mars-icon page\",\n        \"children\": [{\n            \"name\": \"hello\"\n        }, {\n            \"name\": \"hello2\"\n        }, {\n            \"name\": \"wat\"\n        }, {\n            \"name\": \"child folder\",\n            \"children\": [{\n                \"name\": \"child folder\",\n                \"children\": [{\n                    \"name\": \"hello\"\n                }, {\n                    \"name\": \"wat\"\n                }]\n            }, {\n                \"name\": \"hello\"\n            }, {\n                \"name\": \"wat\"\n            }, {\n                \"name\": \"child folder\",\n                \"children\": [{\n                    \"name\": \"hello\"\n                }, {\n                    \"name\": \"wat\"\n                }]\n            }]\n        }]\n    }, {\n        \"name\": \"Tree2\",\n        \"children\": [{\n            \"children\": [{}]\n        }],\n        \"isOpenByDefault\": true\n    }]\n};\n\nasync function Block() {\n    return executeAppBlock(\n        \"div\",\n        { style: \"background: black;padding: 10px;color:white\" },\n        executeAppBlock(\n            \"div\",\n            { style: \"display:none\" },\n            executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n        ),\n        executeAppBlock(\n            \"h3\",\n            null,\n            \"Searchable Tree\"\n        ),\n        executeAppBlock(NestedTree, _extends({ Id: \"SearchableTree\", Searchable: true }, sampleData)),\n        executeAppBlock(\n            \"h3\",\n            null,\n            \"Not Searchable Tree\"\n        ),\n        executeAppBlock(NestedTree, _extends({ Id: \"NotSearchableTree\" }, sampleData))\n    );\n}\nMars.render(executeAppBlock(Block, null));",
    "DemoJsx": "const sampleData = {\r\n    \"Tree\": [\r\n        {\r\n            \"name\": \"My Tree 11\",\r\n            \"isOpenByDefault\": true,\r\n            \"icon\": \"mars-icon page\",\r\n            \"children\": [\r\n                {\r\n                    \"name\": \"hello\"\r\n                },\r\n                {\r\n                    \"name\": \"hello2\"\r\n                },\r\n                {\r\n                    \"name\": \"wat\"\r\n                },\r\n                {\r\n                    \"name\": \"child folder\",\r\n                    \"children\": [\r\n                        {\r\n                            \"name\": \"child folder\",\r\n                            \"children\": [\r\n                                {\r\n                                    \"name\": \"hello\"\r\n                                },\r\n                                {\r\n                                    \"name\": \"wat\"\r\n                                }\r\n                            ]\r\n                        },\r\n                        {\r\n                            \"name\": \"hello\"\r\n                        },\r\n                        {\r\n                            \"name\": \"wat\"\r\n                        },\r\n                        {\r\n                            \"name\": \"child folder\",\r\n                            \"children\": [\r\n                                {\r\n                                    \"name\": \"hello\"\r\n                                },\r\n                                {\r\n                                    \"name\": \"wat\"\r\n                                }\r\n                            ]\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"name\": \"Tree2\",\r\n            \"children\": [\r\n                {\r\n                    \"children\": [\r\n                        {}\r\n                    ]\r\n                }\r\n            ],\r\n            \"isOpenByDefault\": true\r\n        }\r\n    ]\r\n};\r\n\r\nasync function Block() {\r\n    return (\r\n        <div style=\"background: black;padding: 10px;color:white\">\r\n            <div style=\"display:none\">\r\n                <MarsIdeMasterPage url=\"someurl\" />\r\n            </div>\r\n            <h3>Searchable Tree</h3>\r\n            <NestedTree Id=\"SearchableTree\" Searchable {...sampleData} />\r\n\r\n            <h3>Not Searchable Tree</h3>\r\n            <NestedTree Id=\"NotSearchableTree\" {...sampleData} />\r\n        </div >\r\n    )\r\n}\r\nMars.render(<Block />)\r\n",
    "TestCode": "",
    "isSystem": true
  },
  {
    "_id": "5ed19c25991dab3010434416",
    "Name": "SearchCode",
    "Title": "SearchCode",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "BlockFunction": "function allIndexOf(str, toSearch) {\r\n  var indices = [];\r\n  for (var pos = str.indexOf(toSearch); pos !== -1; pos = str.indexOf(toSearch, pos + 1)) {\r\n    indices.push(pos);\r\n  }\r\n  return indices;\r\n}\r\n\r\nfunction getBlockIcon(blockType) {\r\n  if (blockType === 'model') return 'mars-icon json'; // fa fa-list-alt\r\n  if (blockType === 'page') return 'mars-icon page'; // fa fa-list-alt\r\n  if (blockType === 'app') return 'mars-icon app'; // fa fa-list-alt\r\n  if (!blockType || blockType === 'block' || blockType === '') return 'mars-icon module'; // fab fa-html5\r\n  if (blockType.includes('jsx')) return 'mars-icon box'; // fab fa-js-square\r\n  if (blockType === 'service') return 'mars-icon js'; //fab fa-node\r\n  if (blockType === 'prompter') return 'fab fa-searchengin';\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    search(query, matchCase) {\r\n      if (!query) return []\r\n      const blocks = Mars.allBlocks.filter(t => !t.isSystem).map(t => {\r\n        const settingsText = t.Type === 'settings'\r\n        let c = `${JSON.stringify(t.DataArgs)}\\n${t.BlockFunction}\\n${t.Jsx}\\n${t.Html}\\n${t.Script}\\n${t.Css}\\n`;\r\n        if (t.Type === 'settings') {\r\n          c += JSON.stringify(t)\r\n        }\r\n\r\n        if (t.Type === 'page') {\r\n          c += JSON.stringify(t.Page)\r\n        }\r\n        return {\r\n          name: t.Name,\r\n          icon: getBlockIcon(t.Type),\r\n          id: t._id.toString(),\r\n          code: c,\r\n          lowerCaseCode: c.toLowerCase()\r\n        }\r\n      })\r\n\r\n      if (!matchCase) query = query.toLowerCase();\r\n\r\n      function getCode(t) {\r\n        return matchCase ? t.code : t.lowerCaseCode\r\n      }\r\n\r\n      const filteredBlocks = blocks.filter(t => getCode(t).includes(query));\r\n\r\n      return filteredBlocks.map(t => {\r\n        const children = allIndexOf(getCode(t), query).map(tt => {\r\n          const a = 20 - query.length;\r\n          const start = tt - a;\r\n          const name = t.code.substring((start > 0 ? start : 0), tt + query.length + a);\r\n          var myRegExp = new RegExp(`(${query})`, 'i');\r\n          return {\r\n            name: name.replace(myRegExp, '<b class=\"str-found\">$1</b>'),\r\n            icon: t.icon,\r\n            url: '/mars/ide/' + t.name\r\n          }\r\n        });\r\n        return {\r\n          icon: t.icon,\r\n          name: `${t.name} (${children.length})`,\r\n          children\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nfunction server() {\r\n  return {}\r\n}",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"color:white\" },\n    executeAppBlock(This.html, null),\n    executeAppBlock(NestedTree, { Id: \"SearchResults\", Tree: [] }),\n    executeAppBlock(This.script, null),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div style=\"color:white\">\r\n      <This.html/>\r\n      <NestedTree Id=\"SearchResults\" Tree={[]} />\r\n      <This.script />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" }));",
    "DemoJsx": "Mars.render(<MarsIdeMasterPage url=\"someurl\" />)",
    "Html": "<div id=\"XID_VUE\">\r\n\t<div>\r\n\t\t<b-input-group class=\"mb-3\">\r\n\t\t\t<b-form-input type=\"search\" v-model=\"query\" @keyup=\"search\" class=\"search-input text-white\"></b-form-input>\r\n\t\t\t<template v-slot:prepend>\r\n\t\t\t\t\r\n\t\t\t\t<b-input-group-text class=\"search-input\"><i class=\"fas fa-search\"></i></b-input-group-text>\r\n\t\t\t</template>\r\n\t\t\t</b-input-group-append>\r\n\t\t\t<b-input-group-append>\r\n\t\t\t\t<b-button variant=\"outline-secondary\" :pressed.sync=\"matchCase\"\r\n\t\t\t\t\tv-b-popover.hover.bottom=\"'Match case!'\">\r\n\t\t\t\t\t<i class=\"fas  fa-text-height\"></i>\r\n\t\t\t\t</b-button>\r\n\t\t\t</b-input-group-append>\r\n\t\t</b-input-group>\r\n\t</div>\r\n\t<p class=\"pt-1 text-muted\" v-if=\"noResults\">No results</p>\r\n</div>",
    "Script": "new MarsVue('XID_VUE', { methods: [{ name: 'search', block: 'SearchCode' }] }, {\r\n  data: {\r\n    query: '',\r\n    noResults: false,\r\n    matchCase: false\r\n  },\r\n  methods: {\r\n    async search(e) {\r\n      if (e.keyCode === 13) {\r\n        const results = await this.api.search(this.query, this.matchCase);\r\n        Vue.set(SearchResults, 'treeData', results);\r\n        this.noResults = results.length === 0;\r\n      }\r\n    }\r\n  }\r\n})",
    "Css": ".str-found{\r\n  background-color: #585858!important;\r\n}\r\n\r\n#XID_VUE .search-input, #XID_VUE button{\r\n  background-color: transparent;\r\n  border: 1px solid #313131;\r\n  font-size: 13px;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ed282c1f47e872408870073",
    "Name": "Tabs",
    "Title": "Tabs",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "tabs",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "tabs"
      }
    ],
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background: black;padding: 10px;color:white\" },\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(\n      Tabs,\n      { Id: \"Tabs2\", vertical: true, cssClasses: { tabItemActive: 'text-danger' } },\n      executeAppBlock(\n        Tab,\n        { title: \"tab1\" },\n        \"conten1\"\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"tab2\", active: true },\n        \"content2\"\n      )\n    )\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background: black;padding: 10px;color:white\">\r\n      <div style=\"display:none\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n      <Tabs Id=\"Tabs2\" vertical cssClasses={{tabItemActive: 'text-danger'}}>\r\n        <Tab title=\"tab1\" >\r\n          conten1\r\n        </Tab>\r\n        <Tab title=\"tab2\" active>\r\n          content2\r\n        </Tab>\r\n      </Tabs>\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\nconst activeTabIndex = data.children.indexOf(data.children.find(t => t.active));\nasync function Block() {\n  const tabsOptions = {};\n  if (data.vertical) tabsOptions.vertical = true;\n  const TitleWithContextMenu = async ({ title }) => await title; /*`<hsc-menu-style-black class=\"contex-menu\">\r\n                                                                 <hsc-menu-context-menu>\r\n                                                                 ${await title}\r\n                                                                 <template slot=\"contextmenu\">\r\n                                                                 <hsc-menu-item label=\"action 1\">\r\n                                                                 </hsc-menu-item>\r\n                                                                 <hsc-menu-item label=\"actiom 2\">\r\n                                                                 </hsc-menu-item>\r\n                                                                 </template>\r\n                                                                 </hsc-menu-context-menu>\r\n                                                                 </hsc-menu-style-black>`;*/\n\n  return executeAppBlock(\n    'div',\n    { 'class': 'row' },\n    executeAppBlock(\n      'div',\n      { 'v-slot--title': true, 'class': `col-${data.vertical ? 'auto' : '12'} ${data.cssClasses.tabItems}` },\n      executeAppBlock(\n        'b-tabs',\n        _extends({ 'no-nav-style': 'true',\n          'content-class': 'd-none',\n          'active-nav-item-class': data.cssClasses.tabItemActive\n        }, tabsOptions, { 'v-model': 'tabIndex', id: `${data.Id}` }),\n        data.children.map((t, i) => executeAppBlock(\n          'b-tab',\n          { 'title-item-class': data.cssClasses.tabItem },\n          executeAppBlock(\n            'template',\n            { 'v-slot--title': '' },\n            executeAppBlock(TitleWithContextMenu, { title: t.title })\n          )\n        ))\n      )\n    ),\n    executeAppBlock(\n      'div',\n      { 'class': `${data.vertical ? 'col' : 'col-12'} ${data.cssClasses.content}`, style: 'overflow: hidden;' },\n      data.children.map((t, i) => executeAppBlock(\n        'div',\n        { 'mars-tab-group': data.Id,\n          style: \"display:none\" },\n        t.content\n      ))\n    ),\n    executeAppBlock(This.script, { activeTabIndex: activeTabIndex, totalTabs: data.children.length }),\n    executeAppBlock(This.style, null)\n  );\n}\n\nexport default Block();",
    "Jsx": "const { This } = Mars.initJsx();\r\nconst activeTabIndex = data.children.indexOf(data.children.find(t => t.active))\r\nasync function Block() {\r\n  const tabsOptions = {};\r\n  if (data.vertical) tabsOptions.vertical = true;\r\n  const TitleWithContextMenu = async ({ title }) => await title/*`<hsc-menu-style-black class=\"contex-menu\">\r\n                        <hsc-menu-context-menu>\r\n                          ${await title}\r\n                          <template slot=\"contextmenu\">\r\n                            <hsc-menu-item label=\"action 1\">\r\n                            </hsc-menu-item>\r\n                            <hsc-menu-item label=\"actiom 2\">\r\n                            </hsc-menu-item>\r\n                          </template>\r\n                        </hsc-menu-context-menu>\r\n                      </hsc-menu-style-black>`;*/\r\n\r\n  return (\r\n    <div class=\"row\">\r\n      <div v-slot--title class={`col-${data.vertical ? 'auto' : '12'} ${data.cssClasses.tabItems}`}>\r\n        <b-tabs no-nav-style=\"true\"\r\n          content-class=\"d-none\"\r\n          active-nav-item-class={data.cssClasses.tabItemActive}\r\n          {...tabsOptions} v-model=\"tabIndex\" id={`${data.Id}`}>\r\n          {data.children.map((t, i) => (\r\n            <b-tab title-item-class={data.cssClasses.tabItem} >\r\n              <template v-slot--title=\"\">\r\n                <TitleWithContextMenu title={t.title} />\r\n              </template>\r\n            </b-tab>))}\r\n        </b-tabs>\r\n      </div>\r\n      <div class={`${data.vertical ? 'col' : 'col-12'} ${data.cssClasses.content}`} style=\"overflow: hidden;\">\r\n        {data.children.map((t, i) => <div mars-tab-group={data.Id}\r\n          style={\"display:none\"}>\r\n          {t.content}\r\n        </div>)}\r\n      </div>\r\n      <This.script activeTabIndex={activeTabIndex} totalTabs={data.children.length} />\r\n      <This.style />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Block()",
    "Script": "import 'https://michitaro.github.io/vue-menu/vue-menu-standalone.js';\r\n\r\nfunction setActiveTab(newTabIndex, prevTabIndex) {\r\n  console.log(newTabIndex, prevTabIndex);\r\n  $('[mars-tab-group=\"XID\"]').each((i, t) => {\r\n    t.style.display = newTabIndex === i ? 'block' : 'none';\r\n  })\r\n}\r\n\r\nnew MarsVue('XID', { }, {\r\n  data: {\r\n    tabIndex: 0,\r\n    totalTabs: data.totalTabs\r\n  },\r\n  mounted() {\r\n    this.tabIndex = data.activeTabIndex;\r\n    setActiveTab(0, data.activeTabIndex)\r\n  },\r\n  watch: {\r\n    tabIndex: setActiveTab\r\n  }\r\n})",
    "Html": "",
    "Css": "#XID a{\r\n  color: inherit\r\n}\r\n\r\n.contex-menu .menu {\r\n  background: #313131!important;\r\n  color: #a0a0a0!important;\r\n  font-size: 13px!important;\r\n  padding: 0.5rem;\r\n}\r\n\r\n.contex-menu .fixed{\r\n  z-index: 999999;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ed288f53b88fd2230c4f429",
    "Name": "Tab",
    "Title": "Tab",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "tabs",
    "DataArgs": [],
    "JsxTranspiled": "function Block() {\n  return {\n    title: data.title,\n    active: data.active,\n    content: data.children.join('')\n  };\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "function Block() {\r\n  return {\r\n    title: data.title,\r\n    active: data.active,\r\n    content: data.children.join('')\r\n  }\r\n}\r\n\r\nexport default <Block/>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  Tab,\n  { title: \"tab1\" },\n  \"tabcontent12\"\n);",
    "DemoJsx": "export default <Tab title=\"tab1\">\r\n  tabcontent12\r\n</Tab>",
    "isSystem": true
  },
  {
    "_id": "5ed2f78b3b88fd2230c4f42a",
    "Name": "MainNav",
    "Title": "MainNav",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nasync function Block() {\n  const appName = (Mars.settings.AppSettings || {}).name;\n\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"col-12\" },\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"row ide-project\", id: \"XID_VUE\" },\n      executeAppBlock(\n        \"h6\",\n        { onclick: \"Tabs1.tabIndex = parseInt(Tabs1.totalTabs-1)\" },\n        executeAppBlock(\n          \"a\",\n          { style: \"color: inherit\", href: \"/mars-ide-master-page\" },\n          appName\n        )\n      )\n    ),\n    executeAppBlock(\n      Tabs,\n      { Id: \"Tabs1\", vertical: true,\n        cssClasses: { tabItems: 'mr-2 bg', content: 'pl-1', tabItem: 'text-muted pt-2', tabItemActive: \"text-white\" } },\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"New block\\\" class=\\\"fas fa-lg fa-plus\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"New block\"\n        ),\n        executeAppBlock(CreateNewBlock, { Id: \"CreateNewBlock1\" })\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Blocks\\\" ondblclick=\\\"NestedTree1.api.reload()\\\" class=\\\"fas fa-lg fa-th-large\\\"></i>\", active: true },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Blocks\"\n        ),\n        executeAppBlock(NavBlocks, { Id: \"NavPanel1\" })\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Search in code\\\" class=\\\"fas fa-lg fa-search\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Search\"\n        ),\n        executeAppBlock(SearchCode, { Id: \"SearchCode1\" })\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Features\\\" class=\\\"fas fa-lg fa-sitemap\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Features\"\n        ),\n        executeAppBlock(NavAppTree, null)\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Data\\\" class=\\\"fas fa-lg fa-database\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Data\"\n        ),\n        executeAppBlock(NavData, null)\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Settings\\\" class=\\\"fas fa-lg fa-cog\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Settings\"\n        ),\n        executeAppBlock(NavSettings, null)\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"<i v-b-tooltip.right title=\\\"Help center\\\" class=\\\"fas fa-lg fa-question-circle\\\"></i>\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Help center\"\n        ),\n        executeAppBlock(NavDocumentation, null)\n      ),\n      executeAppBlock(\n        Tab,\n        { title: \"\" },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          \"Projects\"\n        ),\n        executeAppBlock(Projects, null)\n      )\n    ),\n    executeAppBlock(This.style, null),\n    executeAppBlock(This.script, null)\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  const appName = (Mars.settings.AppSettings || {}).name;\r\n\r\n  return (\r\n    <div id={data.Id} class=\"col-12\">\r\n      <div class=\"row ide-project\" id=\"XID_VUE\">\r\n        <h6 onclick=\"Tabs1.tabIndex = parseInt(Tabs1.totalTabs-1)\"><a style=\"color: inherit\" href=\"/mars-ide-master-page\">{appName}</a></h6>\r\n      </div>\r\n      <Tabs Id=\"Tabs1\" vertical\r\n        cssClasses={{ tabItems: 'mr-2 bg', content: 'pl-1', tabItem: 'text-muted pt-2', tabItemActive: \"text-white\" }}>\r\n        <Tab title='<i v-b-tooltip.right title=\"New block\" class=\"fas fa-lg fa-plus\"></i>' >\r\n          <p class=\"panel--title\">New block</p>\r\n          <CreateNewBlock Id=\"CreateNewBlock1\" />\r\n        </Tab>\r\n        <Tab title='<i v-b-tooltip.right title=\"Blocks\" ondblclick=\"NestedTree1.api.reload()\" class=\"fas fa-lg fa-th-large\"></i>' active>\r\n          <p class=\"panel--title\">Blocks</p>\r\n          <NavBlocks Id=\"NavPanel1\" />\r\n        </Tab>\r\n        <Tab title='<i v-b-tooltip.right title=\"Search in code\" class=\"fas fa-lg fa-search\"></i>' >\r\n          <p class=\"panel--title\">Search</p>\r\n          <SearchCode Id=\"SearchCode1\" />\r\n        </Tab>\r\n        <Tab title='<i v-b-tooltip.right title=\"Features\" class=\"fas fa-lg fa-sitemap\"></i>' >\r\n          <p class=\"panel--title\">Features</p>\r\n          <NavAppTree />\r\n        </Tab>\r\n        <Tab title='<i v-b-tooltip.right title=\"Data\" class=\"fas fa-lg fa-database\"></i>' >\r\n          <p class=\"panel--title\">Data</p>\r\n          <NavData />\r\n        </Tab>\r\n        <Tab title='<i v-b-tooltip.right title=\"Settings\" class=\"fas fa-lg fa-cog\"></i>' >\r\n          <p class=\"panel--title\">Settings</p>\r\n          <NavSettings />\r\n        </Tab>\r\n\r\n        <Tab title='<i v-b-tooltip.right title=\"Help center\" class=\"fas fa-lg fa-question-circle\"></i>' >\r\n          <p class=\"panel--title\">Help center</p>\r\n          <NavDocumentation />\r\n        </Tab>\r\n\r\n        <Tab title='' >\r\n          <p class=\"panel--title\">Projects</p>\r\n          <Projects />\r\n        </Tab>\r\n      </Tabs>\r\n      <This.style />\r\n      <This.script />\r\n     \r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)",
    "DemoJsxTranspiled": "export default executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" });",
    "DemoJsx": "export default <MarsIdeMasterPage url=\"someurl\" />",
    "Css": ".ide-project{\r\n  height: 42px;\r\n  background-color: #262626!important;\r\n  padding: 9px;\r\n  padding-bottom: 0;\r\n  cursor: pointer;\r\n}\r\n\r\n#XID .bg{\r\n  background-color: #262626!important;\r\n  text-align: center;\r\n  height: calc(100vh - 42px);\r\n  padding-left: 6px;\r\n  padding-right: 6px;\r\n}\r\n\r\n#XID .nav-link{\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n\r\n#XID .panel--title{\r\n  text-transform: uppercase;\r\n  padding-top: 10px;\r\n  margin-bottom: 7px;\r\n  font-size: 12px;\r\n}\r\n\r\n#XID .fa-lg {\r\n  font-size: 1.123333em;\r\n}",
    "Script": "new MarsVue(\"XID_VUE\", data, {});",
    "isSystem": true
  },
  {
    "_id": "5ed3210a8df7664aac96a311",
    "Name": "NavData",
    "Title": "NavData",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "BlockFunction": "async function server() {\r\n  const items = Mars.settings.MongoConfig.collections.map(t => ({\r\n    name: t.title || t.name,\r\n    url: `/mars/data/${t.name}`,\r\n    folder: t.folder\r\n  }))\r\n\r\n  return {\r\n    tree: await Mars.services.GenereateNestedTree({ items })\r\n  }\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(NestedTree, { Id: \"NestedTreeData\", Searchable: true, Tree: s.tree }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <NestedTree Id=\"NestedTreeData\" Searchable Tree={s.tree} />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" }));",
    "DemoJsx": "Mars.render(<MarsIdeMasterPage url=\"someurl\" />);",
    "Css": "",
    "isSystem": true
  },
  {
    "_id": "5ed55b88609c9a36f4dc6834",
    "Name": "NavSettings",
    "Title": "NavSettings",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(NestedTree, { Id: \"NestedTreeSetting\", Searchable: true, Tree: s.tree }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <NestedTree Id=\"NestedTreeSetting\" Searchable Tree={s.tree} />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction getTree(items) {\r\n  const sections = items.map(t => {\r\n\r\n    let url = 'mars/ide/' + t.Name;\r\n    let icon = 'mars-icon settings';\r\n    let name = t.Name;\r\n    if (t.Page && t.Page.settings) {\r\n      url = t.Page.settings.url;\r\n      icon = t.Page.settings.icon;\r\n      name = t.Page.settings.title;\r\n    }\r\n    return {\r\n      name,\r\n      url,\r\n      icon,\r\n      folder: t.Folder\r\n    }\r\n  })\r\n\r\n  return Mars.services.GenereateNestedTree({\r\n    items: _.orderBy(sections, [ss => ss.name], ['asc'])\r\n  })\r\n}\r\n\r\nconst tree = getTree(Mars.allBlocks.filter(t => !t.isSystem && (t.Type === 'settings' || (t.Page && t.Page.settings && t.Page.settings.group === 'settings'))));\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst externalTree = getTree(Mars.allBlocks.filter(t => t.isSystem && (t.Type === 'settings' || (t.Page && t.Page.settings && t.Page.settings.group === 'settings'))));\r\ntree.push({\r\n  name: '_external',\r\n  children: externalTree\r\n})\r\n\r\nasync function server() {\r\n  return {\r\n    tree\r\n  }\r\n}",
    "Html": "",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" }));",
    "DemoJsx": "Mars.render(<MarsIdeMasterPage url=\"someurl\" />);",
    "Css": "",
    "isSystem": true
  },
  {
    "_id": "5ed5a48a063d2309bcb3d583",
    "Name": "Projects",
    "Title": "Projects",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "default",
    "DataArgs": [],
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(NestedTree, { Id: \"NestedTreeProjects\", Searchable: true, Tree: s.tree })\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <NestedTree Id=\"NestedTreeProjects\" Searchable Tree={s.tree} />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "BlockFunction": "async function server() {\r\n  return {\r\n    tree: [{\r\n      name: \"Project1\",\r\n      icon: 'fas fa-',\r\n    }, {\r\n      name: \"Project2\",\r\n      icon: 'fas fa-',\r\n    }\r\n    ]\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ed7637a76bfe4045871fc2d",
    "Name": "GetIdeBlocks",
    "Title": "GetIdeBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [],
    "BlockFunction": "function server() {\r\n  return Mars.allBlocks.map(t => ({ ...t, isSystem: true }))\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ed783d0b514da3aae176201",
    "Name": "SettingsRawCode",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "PropName": "block",
        "DataType": "object"
      }
    ],
    "Created": {
      "DateTime": "2020-05-20T23:55:09.640Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T23:55:09.640Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": true,
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "jsx3",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const sData = await serverData\r\n  return (<div style=\"background-color: #212122!important;\">\r\n    <This.html id={data.Id} />\r\n    <div class=\"pt-1\">\r\n      {sData.codeFiles.filter(t => !t.divider).map((t, i) =>\r\n        <MonacoCode Id={`container${t.title}`} code={t.code} fileName={t.title} blockId={sData.blockId} lang={t.lang} propNameToSave={t.propNameToSave} transpileTs={t.transpileTs} transpileJsx={t.transpileJsx} />)}\r\n    </div>\r\n    <This.script {...sData} block={sData.block}\r\n      blockName={sData.block.name} />\r\n    <This.style />\r\n  </div>);\r\n}\r\nexport default <Block />;\r\n",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const sData = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { style: \"background-color: #212122!important;\" },\n    executeAppBlock(This.html, { id: data.Id }),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"pt-1\" },\n      sData.codeFiles.filter(t => !t.divider).map((t, i) => executeAppBlock(MonacoCode, { Id: `container${t.title}`, code: t.code, fileName: t.title, blockId: sData.blockId, lang: t.lang, propNameToSave: t.propNameToSave, transpileTs: t.transpileTs, transpileJsx: t.transpileJsx }))\n    ),\n    executeAppBlock(This.script, _extends({}, sData, { block: sData.block,\n      blockName: sData.block.name })),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default executeAppBlock(Block, null);",
    "Script": "new MarsVue(\"XID\", {\r\n  ...data, methods: [{ name: 'getTestResults', block: 'BlockFiles' },\r\n  { name: 'getDemoResults', block: 'BlockFiles' },\r\n  { name: 'updateBlock', block: 'BlockFiles' },\r\n  { name: 'deleteBlock', block: 'BlockFiles' }]\r\n},\r\n  {\r\n    data: {\r\n      ...data,\r\n      blockTypeOptions: [{\r\n        value: 'jsx3', text: 'ui block'\r\n      }, {\r\n        value: 'service', text: 'service'\r\n      }, {\r\n        value: 'settings', text: 'settings'\r\n      }, {\r\n        value: 'page', text: 'page'\r\n      }, {\r\n        value: 'model', text: 'model'\r\n      }],\r\n      folderOptions: [],\r\n      saving: false,\r\n      newFolder: false\r\n    },\r\n    mounted() {\r\n      // if there was activetab saved earlier\r\n      function initTab() {\r\n        if (window[`_active_tab_title_${data.blockName}`]) XID.setActiveTab(XID.codeFiles.find(t => t.title === window[`_active_tab_title_${data.blockName}`]))\r\n        else XID.setActiveTab(XID.codeFiles.find(t => t.active))\r\n      }\r\n      Vue.nextTick(function () {\r\n        if (window['monaco']) initTab()\r\n        else document.addEventListener('onMonacoLoad', function () {\r\n          initTab()\r\n        }, false);\r\n      })\r\n\r\n      setTimeout(() => {\r\n        this.folderOptions.push(...flatten(NestedTree1.treeData).map(t => t.name));\r\n        this.folderOptions.push('+ new')\r\n      }, 300)\r\n    },\r\n    methods: {\r\n      clearStorage() {\r\n        let localBlocks = JSON.parse(localStorage.getItem(\"localBlocks\"));\r\n        localBlocks = localBlocks.filter(t => t.name !== data.blockName);\r\n        localStorage.setItem(\"localBlocks\", JSON.stringify(localBlocks));\r\n      },\r\n      async deleteBlock() {\r\n        const r = await XID.api.deleteBlock(data.blockId);\r\n\r\n        this.clearStorage();\r\n\r\n        this.$bvToast.toast(`Block has been deleted`, {\r\n          title: 'Navigate to another page now.',\r\n          autoHideDelay: 2000,\r\n          variant: 'success',\r\n          solid: true\r\n        })\r\n\r\n        location.reload();\r\n      },\r\n      async updateBlock() {\r\n        const r = await XID.api.updateBlock({ ...data.block, blockId: data.blockId });\r\n\r\n        this.clearStorage();\r\n\r\n        this.$bvToast.toast(`Block has been updated`, {\r\n          title: 'The old block is still valid. You need to reset cache to completely delete it.',\r\n          autoHideDelay: 2000,\r\n          variant: 'success',\r\n          solid: true\r\n        })\r\n\r\n        location.href = r;\r\n      },\r\n      setActiveTab(tab) {\r\n        this.codeFiles.filter(t => !t.divider).forEach(t => {\r\n          window[`container${t.title}container`].hidden = t.title !== tab.title\r\n          t.active = t.title === tab.title\r\n        });\r\n\r\n        // we save active tab so that if user goes away and back the active tab is pesistent\r\n        window[`_active_tab_title_${data.blockName}`] = tab.title;\r\n      },\r\n      async openForm() {\r\n        const editUrl = `/mars/edit-data/${this.block.name}/blocks?objectId=${this.blockId || ''}&path=Config`;\r\n        console.log('editUrl', editUrl)\r\n        Modal.open(`/api/RenderFormByModel?Id=RenderDataByModel1&modelName=${this.block.name}&path=Config&collectionName=blocks&objectId=${this.blockId || ''}&iframeUrl=${encodeURIComponent(editUrl)}`,\r\n          { width: '550px', noPadding: true, title: `Edit ${this.block.name}` })\r\n      },\r\n      async editModel() {\r\n        const editUrl = `/mars/edit-data-args/${data.blockName}`;\r\n        console.log('editUrl', editUrl)\r\n        Modal.open(`/api/RenderFormByModel?height=900px&Id=RenderDataByModel1&modelName=${this.block.name}&path=DataArgs&collectionName=blocks&objectId=${data.blockId || ''}&iframeUrl=${encodeURIComponent(editUrl)}`,\r\n          { width: '800px', height:'100%', noPadding: true, title: `Edit model: ${this.block.name}` })\r\n      }\r\n\r\n    }\r\n  });",
    "Html": "<div id=\"XID\" v-cloak>\r\n\t<ul class=\"nav nav-classic float-left\">\r\n\t\t<li v-for=\"(codeFile, index3) in codeFiles\" class=\"nav-item changed\">\r\n\t\t\t<a v-if=\"!codeFile.divider\" class=\"nav-link noselect\" @click=\"setActiveTab(codeFile)\"\r\n\t\t\t\t:class=\"{'active': codeFile.active, 'font-italic font-weight-light text-muted': codeFile.empty, 'no-icon-slot': codeFile.changed || codeFile.saved}\">\r\n\t\t\t\t{{codeFile.title}}\r\n\t\t\t\t<i v-show=\"codeFile.changed\" class=\"fas fa-xs fa-circle icon-slot\"></i>\r\n\t\t\t\t<i v-show=\"codeFile.saved\" class=\"text-success fas fa-xs fa-check icon-slot\"></i>\r\n\t\t\t\t<b-spinner v-if=\"codeFile.saving\" type=\"grow\" small></b-spinner>\r\n\t\t\t</a>\r\n\t\t\t<i v-if=\"codeFile.divider\" class=\"code-file-divider\"></i>\r\n\t\t</li>\r\n\t</ul>\r\n\t<ul class=\"nav nav-classic float-right\">\r\n\t\t<!--<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"runTests()\">\r\n\t\t\t\t<i class=\"text-white fas fa-xs fa-server icon-slot\"></i>\r\n\t\t\t\t<span class=\"text-white\">props</span>\r\n\t\t\t</a>\r\n\t\t</li>-->\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"openForm()\">\r\n\t\t\t\t<i class=\"text-success fas fa-xs fa-align-center icon-slot\"></i>\r\n\t\t\t\tedit config\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a class=\"nav-link noselect\" @click=\"editModel()\">\r\n\t\t\t\t<i class=\"text fas fa-xs fa-desktop icon-slot\"></i>\r\n\t\t\t\tedit model\r\n\t\t\t</a>\r\n\t\t</li>\r\n\t\t<li class=\"nav-item changed\">\r\n\t\t\t<a id=\"popover-target-1\" class=\"nav-link noselect\">\r\n\t\t\t\t<i class=\"fas fa-xs fa-edit icon-slot\"></i>\r\n\t\t\t\tmore\r\n\t\t\t</a>\r\n\t\t\t<b-popover target=\"popover-target-1\" triggers=\"click\">\r\n\t\t\t\t<template v-slot:title>More Actions</template>\r\n\t\t\t\t<b-dropdown variant=\"dark\" text=\"Edit block\">\r\n\t\t\t\t\t<div class=\"p-2\">\r\n\t\t\t\t\t\t<b-form-group label=\"Block Name\" @submit.stop.prevent>\r\n\t\t\t\t\t\t\t<b-form-input @blur=\"block.name=toCamelCase(block.name)\" type=\"text\" size=\"sm\" v-model=\"block.name\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"e.g. MyBlock\">\r\n\t\t\t\t\t\t\t</b-form-input>\r\n\t\t\t\t\t\t</b-form-group>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<b-form-group label=\"Type\">\r\n\t\t\t\t\t\t\t<b-form-select v-model=\"block.type\" :options=\"blockTypeOptions\"></b-form-select>\r\n\t\t\t\t\t\t</b-form-group>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\tFolder <a class=\"mt-1\" @click=\"newFolder=!newFolder\">{{newFolder ? '-' : '+'}}</a>\r\n\t\t\t\t\t\t\t<b-form-input v-if=\"newFolder\" type=\"text\" size=\"sm\" v-model=\"block.folder\" placeholder=\"e.g. Folder1\">\r\n\t\t\t\t\t\t\t</b-form-input>\r\n\t\t\t\t\t\t\t<b-form-select v-if=\"!newFolder\" v-model=\"block.folder\" :options=\"folderOptions\">\r\n\t\t\t\t\t\t\t</b-form-select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<b-button class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"updateBlock\">\r\n\t\t\t\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\t\t\t\tUpdate\r\n\t\t\t\t\t\t</b-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</b-dropdown>\r\n\t\t\t\t<b-dropdown variant=\"dark\" text=\"Delete\">\r\n\t\t\t\t\t<b-dropdown-item variant=\"danger\" @click=\"deleteBlock()\">Confirm deleting</b-dropdown-item>\r\n\t\t\t\t</b-dropdown>\r\n\t\t\t</b-popover>\r\n\t\t</li>\r\n\t</ul>\r\n</div>",
    "Css": ".code-file-divider{\r\n    color: #616161;\r\n  padding: 7px 10px;\r\n  border-right: 1px solid #3a3a3a;\r\n  margin: 10px;\r\n  display: block;\r\n}\r\n\r\n.monaco-container {\r\n\twidth: 100%;\r\n\theight: calc(100vh - 70px);\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\toverflow: hidden;\r\n}\r\n\r\n.monaco-editor{\r\n  padding-top: 8px;\r\n}\r\n\r\n.code-container {\r\n\tleft: 0;\r\n\ttop: 50px;\r\n\twidth: 100%;\r\n  max-width: 100%;\r\n\theight: 1000px;\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n  padding-top: 3px;\r\n\toverflow: hidden;\r\n}\r\n\r\n.code-status-line{\r\nposition: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 1;\r\n  background: #415a5ac2;\r\n  width: 100%;\r\n}\r\n\r\n.editor-monaco-editor .attr-name, .mtk1 {\r\n  color: #8ad3ff;\r\n}\r\n\r\n.editor-monaco-editor .as-keyword, .editor-monaco-editor .await-keyword, .editor-monaco-editor .catch-keyword, .editor-monaco-editor .default-keyword, .editor-monaco-editor .else-keyword, .editor-monaco-editor .export-keyword, .editor-monaco-editor .from-keyword, .editor-monaco-editor .if-keyword, .editor-monaco-editor .import-keyword, .editor-monaco-editor .return-keyword, .editor-monaco-editor .static-keyword, .editor-monaco-editor .try-keyword {\r\n  color: #b86cb4;\r\n}\r\n\r\n.editor-monaco-editor .function, .editor-monaco-editor .function-variable {\r\n  color: #d4d797;\r\n}\r\n\r\n#XID a{\r\n\tcursor: pointer;\r\n}\r\n\r\n#XID .text-muted{\r\n color: #6a6a6a!important;\r\n}\r\n \r\n#XID .nav .nav-link{\r\n  padding: 0.3rem 1rem;\r\n  font-size: 13px;\r\n  color: #a0a0a0;\r\n} \r\n#XID .nav .nav-link.active{\r\n  color: #ffffff!important;\r\n  transition: none;\r\n}\r\n\r\n#XID .nav-classic .nav-link.active {\r\n  border-bottom: 2px solid #4b4b4b;\r\n}\r\n\r\n#XID .nav{\r\n  border-bottom: none;\r\n}\r\n\r\n#XID .custom-control-label:before {\r\n  background-color: #4b4b4b;\r\n  border: 1px solid #97a4af;\r\n  border-radius: none!important;\r\n  left: -1.1rem;\r\n  width: 0.8rem;\r\n  height: 0.8rem;\r\n}\r\n\r\n#XID .custom-control-inline{\r\n  padding-top: 0.3rem!important;\r\n  margin-right: 0.6rem!important;\r\n}\r\n\r\n#XID .unsaved {\r\n  margin-left: 2px;\r\n}\r\n\r\n#XID .no-icon-slot {\r\n  padding-right: 2px!important;\r\n}\r\n\r\n#XID .icon-slot {\r\n  width: 10px;\r\n  margin-left: 1px;\r\n}\r\n\r\n.noselect {\r\n  -webkit-touch-callout: none;\r\n  -webkit-user-select: none;\r\n  -khtml-user-select: none;\r\n  -moz-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n}",
    "BlockFunction": "function server() {\r\n  const b = data.block;\r\n  const codeFiles = [{\r\n    title: 'Json', code: JSON.stringify(b.Config, null, 2), lang: 'json', propNameToSave: 'Config', index: 0, active: true, saving: false, saved: false, changed: false, empty: true, transpileJsx: false, transpileTs: false,\r\n  },\r\n  {\r\n    title: 'Model', code: JSON.stringify(b.DataArgs, null, 2), lang: 'json', propNameToSave: 'DataArgs', index: 1, active: false, saving: false, saved: false, changed: false, empty: true, transpileJsx: false, transpileTs: false\r\n  }\r\n  ];\r\n\r\n  codeFiles.forEach((c, ii) => {\r\n    c.changed = false;\r\n    c.empty = !c.code;\r\n    c.index = ii;\r\n    c.saved = false;\r\n    c.saving = false;\r\n  });\r\n\r\n  return {\r\n    blockId: b._id.toString(),\r\n    block: {\r\n      name: b.Name,\r\n      type: b.Type,\r\n      folder: b.Folder\r\n    },\r\n    codeFiles\r\n  };\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    async deleteBlock(blockId) {\r\n      const dbClient = await Mars.mongoDb;\r\n      await dbClient.collection('blocks').deleteOne({ _id: new Mars.libs.ObjectID(blockId) });\r\n      const b = Mars.allBlocks.find(t => t._id.toString() === blockId);\r\n      b.Name = 'Deleted';\r\n      return true;\r\n    },\r\n    async updateBlock(updatedBlock) {\r\n      const dbClient = await Mars.mongoDb;\r\n      const result = await dbClient.collection('blocks').\r\n        findOneAndUpdate({ _id: new Mars.libs.ObjectID(data.blockId) }, {\r\n          $set: {\r\n            Name: updatedBlock.name,\r\n            Type: updatedBlock.type,\r\n            Folder: updatedBlock.folder\r\n          }\r\n        }, { returnOriginal: false });\r\n\r\n      const b = Mars.allBlocks.find(t => t.Name === updatedBlock.name);\r\n\r\n      if (b) {\r\n        Object.assign(b, {\r\n          Name: updatedBlock.name,\r\n          Type: updatedBlock.type,\r\n          Folder: updatedBlock.folder,\r\n        })\r\n      }\r\n      else {\r\n        Mars.allBlocks.push(result.value)\r\n      }\r\n\r\n      await Mars.services.InitBlocks({ blocksArr: Mars.allBlocks.filter(t => t.Type !== 'service' && t.JsxTranspiled) });\r\n      await Mars.initServices(Mars.allBlocks.filter(t => t.BlockFunction));\r\n\r\n      return `/mars/ide/${updatedBlock.name}`\r\n    }\r\n  }\r\n}",
    "ShowCompiledJsx": false,
    "ServerTypeScript": true,
    "DataForScriptFunction": "",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(BlockFiles, { blockName: \"MarsIdeBlockFiles\" }));",
    "DemoJsx": "Mars.render(<BlockFiles blockName=\"MarsIdeBlockFiles\"/>)",
    "isSystem": true
  },
  {
    "_id": "5ed818ed41eb584e74314d17",
    "Name": "ChangeLambdaConfig",
    "Title": "ChangeLambdaConfig",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "test"
      }
    ],
    "BlockFunction": "async function server() {\r\n  try {\r\n    var params = {\r\n      FunctionName: 'content-service-dev-cms',\r\n      Description: data.test || '',\r\n    };\r\n\r\n    var AWS = require(\"aws-sdk\");\r\n    var lambda = new AWS.Lambda();\r\n\r\n    return new Promise((resolve) => {\r\n      lambda.updateFunctionConfiguration(params, function (err) {\r\n        if (err) resolve('reset has failed: ' + err)\r\n        else resolve('reset is done');\r\n      })\r\n    })\r\n  } catch (e) {\r\n    return ({\r\n      statusCode: 200,\r\n      body: e\r\n    })\r\n  }\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return s;\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return s;\r\n}\r\n\r\nexport default <Block />",
    "isSystem": true
  },
  {
    "_id": "5ed8202e41eb584e74314d18",
    "Name": "SomeFile",
    "Title": "SomeFile",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "Page": {
      "settings": {
        "url": "/somefile.text",
        "title": "somefile.text"
      },
      "caching": {
        "ttl": 20
      }
    },
    "JsxTranspiled": "Req.response.contentType('text/plain; charset=utf-8');\nexport default executeAppBlock(\n  'h1',\n  null,\n  'somefile.text'\n);",
    "Jsx": "Req.response.contentType('text/plain; charset=utf-8');\r\nexport default <h1>somefile.text</h1>",
    "isSystem": true
  },
  {
    "_id": "5ed837e9a6ce0d0007da93f8",
    "Name": "CreateNewAwsLambda",
    "Title": "CreateNewAwsLambda",
    "Type": "service",
    "Apps": [],
    "Folder": "aws",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "appId"
      }
    ],
    "BlockFunction": "async function server() {\r\n  try {\r\n    var params = {\r\n      FunctionName: data.appId + \"-function\",\r\n      Code: {\r\n        S3Bucket: \"marscode\",\r\n        S3Key: \"node_modules/app.zip\"\r\n      },\r\n      Description: \"hey there\",\r\n      Environment: {\r\n        Variables: {\r\n          \"NODE_ENV\": \"dev\",\r\n          \"mongoDbName\": `${data.appId}-db-dev`\r\n        }\r\n      },\r\n      Layers: [\r\n        'arn:aws:lambda:eu-north-1:094815356060:layer:ide_layer:10',\r\n      ],\r\n      Role: \"arn:aws:iam::094815356060:role/content-service-dev-eu-north-1-lambdaRole\",\r\n      Handler: \"main.handleRequest\",\r\n      MemorySize: 256,\r\n      Runtime: \"nodejs12.x\",\r\n      Timeout: 30\r\n    };\r\n\r\n    var AWS = require(\"aws-sdk\");\r\n    var lambda = new AWS.Lambda({ region: 'eu-north-1' });\r\n\r\n    return new Promise((resolve) => {\r\n      lambda.createFunction(params, function (err, data) {\r\n        if (err) resolve('create aws labda has failed: ' + err)\r\n        else setTimeout(() => {\r\n          resolve(data);\r\n        }, 1000 * 5)\r\n      })\r\n    })\r\n  } catch (e) {\r\n    return ({\r\n      statusCode: 200,\r\n      body: e\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5edd86f64c62ba39949d48e5",
    "Name": "TestEmptyDemo",
    "Title": "TestEmptyDemo",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": " export default <TestEmptyDemo />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestEmptyDemo, null);",
    "JsxTranspiled": "Req.response.cookie('mars_token_test', 'fsdfds');\nReq.response.cookie('mars_token_test2', 'tersd');\n\nexport default executeAppBlock(\n  'h1',\n  null,\n  '1'\n);",
    "Jsx": "Req.response.cookie('mars_token_test', 'fsdfds')\r\nReq.response.cookie('mars_token_test2', 'tersd')\r\n\r\nexport default <h1>1</h1>",
    "isSystem": true
  },
  {
    "_id": "5ede6a7ad38dea0008c93472",
    "Name": "CreateAwsApi",
    "Title": "CreateAwsApi",
    "Type": "service",
    "Apps": [],
    "Folder": "aws",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "appId"
      },
      {
        "DataType": "string",
        "PropName": "lambdaArn"
      }
    ],
    "DemoJsx": "export default <CreateAwsApi />",
    "DemoJsxTranspiled": "export default executeAppBlock(CreateAwsApi, null);",
    "BlockFunction": "const jsonBody = {\r\n  \"openapi\": \"3.0.1\",\r\n  \"info\": {\r\n    \"title\": data.appId + \"-function-api\",\r\n    \"description\": \"Created by mars\",\r\n    \"version\": \"2020-06-11T13:33:28Z\"\r\n  },\r\n  \"paths\": {\r\n    \"/{proxy+}\": {\r\n      \"options\": {\r\n        \"responses\": {\r\n          \"200\": {\r\n            \"description\": \"200 response\",\r\n            \"headers\": {\r\n              \"Access-Control-Allow-Origin\": {\r\n                \"schema\": {\r\n                  \"type\": \"string\"\r\n                }\r\n              },\r\n              \"Access-Control-Allow-Methods\": {\r\n                \"schema\": {\r\n                  \"type\": \"string\"\r\n                }\r\n              },\r\n              \"Access-Control-Allow-Headers\": {\r\n                \"schema\": {\r\n                  \"type\": \"string\"\r\n                }\r\n              }\r\n            },\r\n            \"content\": {\r\n              \"application/json\": {\r\n                \"schema\": {\r\n                  \"$ref\": \"#/components/schemas/Empty\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n        \"x-amazon-apigateway-integration\": {\r\n          \"responses\": {\r\n            \"default\": {\r\n              \"statusCode\": \"200\",\r\n              \"responseParameters\": {\r\n                \"method.response.header.Access-Control-Allow-Methods\": \"'DELETE,GET,HEAD,OPTIONS,PATCH,POST,PUT'\",\r\n                \"method.response.header.Access-Control-Allow-Headers\": \"'Content-Type,Authorization,X-Amz-Date,X-Api-Key,X-Amz-Security-Token'\",\r\n                \"method.response.header.Access-Control-Allow-Origin\": \"'*'\"\r\n              }\r\n            }\r\n          },\r\n          \"requestTemplates\": {\r\n            \"application/json\": \"{\\\"statusCode\\\": 200}\"\r\n          },\r\n          \"passthroughBehavior\": \"when_no_match\",\r\n          \"type\": \"mock\"\r\n        }\r\n      },\r\n      \"x-amazon-apigateway-any-method\": {\r\n        \"parameters\": [\r\n          {\r\n            \"name\": \"proxy\",\r\n            \"in\": \"path\",\r\n            \"required\": true,\r\n            \"schema\": {\r\n              \"type\": \"string\"\r\n            }\r\n          }\r\n        ],\r\n        \"x-amazon-apigateway-integration\": {\r\n          \"uri\": `arn:aws:apigateway:eu-north-1:lambda:path/2015-03-31/functions/${data.lambdaArn}/invocations`,\r\n          \"responses\": {\r\n            \"default\": {\r\n              \"statusCode\": \"200\"\r\n            }\r\n          },\r\n          \"passthroughBehavior\": \"when_no_match\",\r\n          \"httpMethod\": \"POST\",\r\n          \"cacheNamespace\": \"hthe67\",\r\n          \"cacheKeyParameters\": [\r\n            \"method.request.path.proxy\"\r\n          ],\r\n          \"contentHandling\": \"CONVERT_TO_TEXT\",\r\n          \"type\": \"aws_proxy\"\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"components\": {\r\n    \"schemas\": {\r\n      \"Empty\": {\r\n        \"title\": \"Empty Schema\",\r\n        \"type\": \"object\"\r\n      }\r\n    }\r\n  },\r\n  \"x-amazon-apigateway-minimum-compression-size\": 10000\r\n}\r\n\r\nfunction importRestApi(apig) {\r\n  return new Promise((resolve, reject) => {\r\n    var params = {\r\n      body: JSON.stringify(jsonBody)\r\n    };\r\n\r\n    apig.importRestApi(params, function (err, data) {\r\n      if (err) {\r\n        console.log(err, err.stack); // an error occurred\r\n        reject(err)\r\n      } else {\r\n        console.log(data);           // successful response\r\n        resolve(data)\r\n      }\r\n    });\r\n  })\r\n}\r\n\r\nfunction deployStage(apig, restApiId) {\r\n  return new Promise((resolve, reject) => {\r\n    var params = {\r\n      restApiId,\r\n      stageName: 'dev'\r\n    };\r\n    apig.createDeployment(params, function (err, data) {\r\n      if (err) {\r\n        console.log(err, err.stack); // an error occurred\r\n        reject(err)\r\n      }\r\n      else {\r\n        console.log(data);           // successful response\r\n        resolve(data)\r\n      }\r\n    });\r\n  })\r\n}\r\n\r\nfunction getAws() {\r\n  var AWS = require(\"aws-sdk\");\r\n  AWS.config.region = 'eu-north-1';\r\n  return AWS;\r\n}\r\n\r\nasync function server() {\r\n  try {\r\n    var AWS = getAws();\r\n    var apig = new AWS.APIGateway({ apiVersion: '2015/07/09' });\r\n\r\n    const apigRes = await importRestApi(apig)\r\n    const stage = await deployStage(apig, apigRes.id)\r\n\r\n    return {\r\n      apigRes,\r\n      stage\r\n    }\r\n  } catch (e1) {\r\n    return ({\r\n      statusCode: 400,\r\n      body: e1\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee0eb151f27144edcfb0e97",
    "Name": "AuthRegister",
    "Title": "AuthRegister",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "auth",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background: black;padding: 10px;color:white\">\r\n      <div style=\"display:none\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n      <h3>Register</h3>\r\n      <AuthRegister Id=\"AuthRegister1\" />\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)\r\n",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background: black;padding: 10px;color:white\" },\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(\n      \"h3\",\n      null,\n      \"Register\"\n    ),\n    executeAppBlock(AuthRegister, { Id: \"AuthRegister1\" })\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null),\n    executeAppBlock(This.script, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div>\r\n      <This.html />\r\n      <This.style />\r\n      <This.script />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Html": "<div class=\"row\">\r\n\t<div class=\"col-12\" id=\"XID\" v-cloak>\r\n\t\t<div>\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"Your name\">\r\n\t\t\t\t<b-form-input type=\"text\" size=\"sm\" v-model=\"name\" placeholder=\"e.g. John Doe\"></b-form-input>\r\n\t\t\t</b-form-group>\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"Email\">\r\n\t\t\t\t<b-form-input type=\"email\" size=\"sm\" v-model=\"email\" placeholder=\"e.g. john@email.com\"></b-form-input>\r\n\t\t\t</b-form-group>\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"Password\">\r\n\t\t\t\t<b-form-input type=\"password\" size=\"sm\" v-model=\"password\"></b-form-input>\r\n\t\t\t</b-form-group>\r\n\r\n\t\t\t<b-button :disabled=\"saving || !name || !email || !password\" class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"register\">\r\n\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\tRegister\r\n\t\t\t</b-button>\r\n\t\t</div>\r\n\t</div>\r\n</div>",
    "Script": "import '/api/MarsJs';\r\n\r\nnew MarsVue('XID', { methods: [{ name: 'register', block: 'AuthRegister' }, { name: 'signIn', block: 'AuthSignIn' }] },\r\n  {\r\n    data: {\r\n      name: '',\r\n      email: '',\r\n      password: '',\r\n      saving: false\r\n    },\r\n    methods: {\r\n      async register() {\r\n        try {\r\n          this.saving = true;\r\n\r\n          // register\r\n          const { name, email, password } = this;\r\n          const r = await this.api.register(name, email, password);\r\n\r\n          // sign in\r\n          const user = await this.api.signIn(email, password)\r\n\r\n          this.saving = false;\r\n          this.$bvToast.toast('Siging in...', {\r\n            title: `Success`,\r\n            autoHideDelay: 2000,\r\n            variant: 'success',\r\n            solid: true\r\n          })\r\n\r\n          setCookie('mars_token', user.token)\r\n          location.href = '/mars-ide-master-page'\r\n        } catch (e) {\r\n          this.saving = false;\r\n          this.$bvToast.toast(e.response.data, {\r\n            title: `Error`,\r\n            autoHideDelay: 2000,\r\n            variant: 'danger',\r\n            solid: true\r\n          })\r\n        }\r\n      }\r\n    }\r\n  })",
    "BlockFunction": "function api() {\r\n  return {\r\n    async register(name, email, password) {\r\n      console.log(name, email, password)\r\n      const dbClient = await Mars.mongoDb;\r\n      const userExists = await dbClient.collection('users')\r\n        .findOne({ email: email });\r\n      if (userExists) throw Error('The user with this email already exists. Try signing in instead of registering.');\r\n\r\n      const hashedPassword = Mars.services.HashPasswords({ password });\r\n\r\n      const newUser = (await dbClient.collection('users')\r\n        .insertOne({\r\n          userId: (await Mars.Db.getIncrementedId('users')),\r\n          name,\r\n          email,\r\n          password: hashedPassword,\r\n          registeredAt: new Date()\r\n        })).ops[0];\r\n\r\n      /*const u = Mars.data.users.find(t => t.userId === newUser.userId);\r\n      if (u) Object.assign(u, newUser)\r\n      else Mars.data.users.push(newUser);*/\r\n\r\n      return 'Registration is done. Please sign in'\r\n\r\n    }\r\n  }\r\n}",
    "Css": " ",
    "isSystem": true
  },
  {
    "_id": "5ee100d19d8c091540bb2277",
    "Name": "AuthSignIn",
    "Title": "AuthSignIn",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "auth",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background: black;padding: 10px;color:white\">\r\n      <div style=\"display:none\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n      <h3>AuthSignIn</h3>\r\n      <AuthSignIn Id=\"AuthSignIn1\" />\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)\r\n",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background: black;padding: 10px;color:white\" },\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(\n      \"h3\",\n      null,\n      \"AuthSignIn\"\n    ),\n    executeAppBlock(AuthSignIn, { Id: \"AuthSignIn1\" })\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null),\n    executeAppBlock(This.script, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div>\r\n      <This.html />\r\n      <This.style />\r\n      <This.script />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "BlockFunction": "const jwt = Mars.libs.require('jsonwebtoken');\r\n\r\nfunction omitPassword(user) {\r\n  const { password, ...userWithoutPassword } = user;\r\n  return userWithoutPassword;\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    async signIn(email, password) {\r\n\r\n      const hashedPassword = Mars.services.HashPasswords({ password });\r\n\r\n      const dbClient = await Mars.mongoDb;\r\n      const userFromDb = await dbClient.collection('users')\r\n        .findOne({ email: email });\r\n      if (!userFromDb) throw Error('There is no user with this email')\r\n\r\n      if (userFromDb.password !== hashedPassword) throw Error('Wrong password')\r\n\r\n      /*const u = Mars.users.find(t => t.userId === userFromDb.userId);\r\n      if (u) Object.assign(u, userFromDb)\r\n      else Mars.users.push(userFromDb);*/\r\n\r\n      const token = jwt.sign({ data: omitPassword(userFromDb) }, Mars.config.secret, { expiresIn: '1y' });\r\n\r\n      return {\r\n        ...omitPassword(userFromDb),\r\n        token\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction server() {\r\n  return jwt.sign({ data: omitPassword(data.userJson) }, Mars.config.secret, { expiresIn: '1y' });\r\n}",
    "Html": "<div class=\"row\">\r\n\t<div class=\"col-12\" id=\"XID\" v-cloak>\r\n\t\t<div>\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"Email\">\r\n\t\t\t\t<b-form-input type=\"email\" size=\"sm\" v-model=\"email\" placeholder=\"e.g. john@email.com\"></b-form-input>\r\n\t\t\t</b-form-group>\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"Password\">\r\n\t\t\t\t<b-form-input type=\"password\" size=\"sm\" v-model=\"password\"></b-form-input>\r\n\t\t\t</b-form-group>\r\n\r\n\t\t\t<b-button :disabled=\"saving || !email || !password\" class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"signIn\">\r\n\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\tSign In\r\n\t\t\t</b-button>\r\n\t\t</div>\r\n\t</div>\r\n</div>",
    "Script": "import '/api/MarsJs';\r\n\r\nnew MarsVue('XID', { methods: [{ name: 'signIn', block: 'AuthSignIn' }] },\r\n  {\r\n    data: {\r\n      email: '',\r\n      password: '',\r\n      saving: false,\r\n    },\r\n    methods: {\r\n      async signIn() {\r\n        try {\r\n          this.saving = true;\r\n          const { email, password } = this;\r\n          const user = await this.api.signIn(email, password);\r\n          this.saving = false;\r\n          this.$bvToast.toast('Redirecting...', {\r\n            title: `Success`,\r\n            autoHideDelay: 2000,\r\n            variant: 'success',\r\n            solid: true\r\n          });\r\n\r\n          setCookie('mars_token', user.token);\r\n          location.href = '/mars-ide-master-page';\r\n        } catch (e) {\r\n          this.saving = false;\r\n\r\n          this.$bvToast.toast(e.response.data, {\r\n            title: `Error`,\r\n            autoHideDelay: 2000,\r\n            variant: 'danger',\r\n            solid: true,\r\n          });\r\n        }\r\n      },\r\n    },\r\n  },\r\n);\r\n",
    "Css": " ",
    "isSystem": true
  },
  {
    "_id": "5ee10b8bd5db6c55240ec72a",
    "Name": "AuthPage",
    "Title": "AuthPage",
    "Type": "page",
    "Apps": [],
    "Folder": "auth",
    "DataArgs": [],
    "DemoJsx": "export default <AuthPage />",
    "DemoJsxTranspiled": "export default executeAppBlock(AuthPage, null);",
    "Page": {
      "settings": {
        "url": "/mars/auth",
        "title": "Mars auth"
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"padding: 10px;color:white;padding-top:50px\" },\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null),\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none;height:0;padding:0\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"d-flex justify-content-center h-100 align-middle\", style: \"z-index: 100;\" },\n      executeAppBlock(\n        \"div\",\n        { style: \"min-width: 300px;\" },\n        executeAppBlock(\n          Tabs,\n          { Id: \"Tabs2\", cssClasses: {\n              tabItems: 'p-0 bg h3',\n              content: 'pt-4', tabItem: 'text-muted pt-2',\n              tabItemActive: \"text-white\"\n            } },\n          executeAppBlock(\n            Tab,\n            { title: \"Sign In\", active: true },\n            executeAppBlock(AuthSignIn, { Id: \"AuthSignIn1\" })\n          ),\n          executeAppBlock(\n            Tab,\n            { title: \"Register\" },\n            executeAppBlock(AuthRegister, { Id: \"AuthRegister1\" })\n          )\n        )\n      )\n    )\n  );\n}\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings),\n  executeAppBlock(Block, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  return (\r\n    <div style=\"padding: 10px;color:white;padding-top:50px\">\r\n      <This.html />\r\n      <This.style />\r\n      <div style=\"display:none;height:0;padding:0\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n\r\n      <div class=\"d-flex justify-content-center h-100 align-middle\" style=\"z-index: 100;\">\r\n        <div style=\"min-width: 300px;\">\r\n          <Tabs Id=\"Tabs2\" cssClasses={{\r\n            tabItems: 'p-0 bg h3',\r\n            content: 'pt-4', tabItem: 'text-muted pt-2',\r\n            tabItemActive: \"text-white\"\r\n          }}>\r\n            <Tab title=\"Sign In\" active>\r\n              <AuthSignIn Id=\"AuthSignIn1\" />\r\n            </Tab>\r\n            <Tab title=\"Register\">\r\n              <AuthRegister Id=\"AuthRegister1\" />\r\n            </Tab>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default <Page {...Req} {...thisBlock.Page.settings}>\r\n  <Block />\r\n</Page>",
    "Css": "@import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');\r\n\r\nhtml,body{\r\n  background-image: url('http://getwallpapers.com/wallpaper/full/a/5/d/544750.jpg');\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  height: 100%;\r\n  font-family: Roboto,sans-serif;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.logo{\r\n  font-size: 32px;\r\n  color: white;\r\n}\r\n\r\n\r\n.m-video__wrapper {\r\n  position: absolute;\r\n  overflow: hidden;\r\n  height: 120%;\r\n  max-height: 900px;\r\n  min-height: 870px;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  z-index: 0;\r\n  margin: auto;\r\n  background: #ff925c;\r\n}\r\n\r\n.m-video__bg {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 10px;\r\n  height: 100%;\r\n  width: 200px;\r\n  background: #ff925c;\r\n  background: linear-gradient(180deg,#ff925c,#ff925c 19%,#ff925c 37%,#ff965b 50%,#ff955d 60%,#ff985f 61%,#ffad6f 67%,#ffaa6f 68%,#ffa86a 69%,#ffad6f 69.5%,#ffb979 72%,#ffc583 80%,#ffca85)\r\n}\r\n\r\n#hero-video {\r\n  z-index: 2;\r\n  height: 66.66%\r\n}\r\n\r\n#hero-video,.m-video__first-frame-sole {\r\n  position: absolute;\r\n  top: 75%;\r\n  left: 50%;\r\n  -webkit-mask-box-image: url(https://yurko-personal-page.s3.eu-central-1.amazonaws.com/video-mask.svg);\r\n  transform: translate(-50%,-50%);\r\n}\r\n\r\n.m-video__first-frame-sole {\r\n  -webkit-user-select: none;\r\n  -ms-user-select: none;\r\n  user-select: none;\r\n  height: 66.6%;\r\n  width: auto\r\n}",
    "Html": "<div class=\"m-video__wrapper\">\r\n\t<video autoplay=\"\" muted=\"\" loop=\"\" id=\"hero-video\">\r\n\t\t<source src=\"https://yurko-personal-page.s3.eu-central-1.amazonaws.com/HeroVideo-FullHD-4-bitrate.mp4\"\r\n\t\t\ttype=\"video/mp4\" />Sorry, your browser doesn't support embedded\r\n\t\tvideos.\r\n\t</video>\r\n\t<img alt=\"Dancing spaceman character and alien snake\" src=\"https://yurko-personal-page.s3.eu-central-1.amazonaws.com/FirstFrame.jpg\"\r\n    class=\"m-video__first-frame-sole\">\r\n    </div>",
    "isSystem": true
  },
  {
    "_id": "5ee2360ffcc91127788eefa1",
    "Name": "LandingPage",
    "Title": "LandingPage",
    "Type": "page",
    "Apps": [],
    "Folder": "landing",
    "DataArgs": [],
    "DemoJsx": "export default <LandingPage />",
    "DemoJsxTranspiled": "export default executeAppBlock(LandingPage, null);",
    "Page": {
      "settings": {
        "url": "/home",
        "title": "Mars Cloud"
      }
    },
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nconst ide = executeAppBlock(\n  \"a\",\n  { href: \"/mars-ide-master-page\" },\n  \"Open IDE\"\n);\n\nconst signIn = executeAppBlock(\n  \"div\",\n  null,\n  \"You are not logged in. Please \",\n  executeAppBlock(\n    \"a\",\n    { href: \"/mars/auth\" },\n    \"Log In or Register\"\n  )\n);\n\nfunction Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, null),\n    Req.user ? ide : signIn\n  );\n}\n\nexport default Block();",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nconst ide = <a href=\"/mars-ide-master-page\">Open IDE</a>\r\n\r\nconst signIn = <div>You are not logged in. Please <a href=\"/mars/auth\">Log In or Register</a></div>\r\n\r\nfunction Block() {\r\n  return <div>\r\n    <This.html />\r\n    {Req.user ? ide : signIn}\r\n  </div>\r\n}\r\n\r\nexport default Block()",
    "Html": "<h1>Mars Cloud</h1>",
    "isSystem": true
  },
  {
    "_id": "5ee2bd30ea06de000807b032",
    "Name": "CreateAwsCdn",
    "Title": "CreateAwsCdn",
    "Type": "service",
    "Apps": [],
    "Folder": "aws",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "appId"
      },
      {
        "DataType": "string",
        "PropName": "domainName"
      },
      {
        "DataType": "string",
        "PropName": "testApp"
      }
    ],
    "DemoJsx": "export default <CreateAwsCdn />",
    "DemoJsxTranspiled": "export default executeAppBlock(CreateAwsCdn, null);",
    "BlockFunction": "const { appId, domainName, appName } = data;\r\nconst originId = 'originid-' + appId;\r\n\r\nvar params = {\r\n  DistributionConfig: { /* required */\r\n    CallerReference: appId, /* required */\r\n    Comment: appName, /* required */\r\n    DefaultCacheBehavior: { /* required */\r\n      ForwardedValues: { /* required */\r\n        Cookies: { /* required */\r\n          Forward: 'whitelist', /* required */\r\n          WhitelistedNames: {\r\n            Quantity: 4, /* required */\r\n            Items: [\r\n              'AppId',\r\n              'SessionId',\r\n              'SubAppId',\r\n              'mars_token'\r\n            ]\r\n          }\r\n        },\r\n        QueryString: true, /* required */\r\n        Headers: {\r\n          Quantity: 7, /* required */\r\n          Items: [\r\n            'AppId',\r\n            'CloudFront-Is-Desktop-Viewer',\r\n            'CloudFront-Is-Mobile-Viewer',\r\n            'CloudFront-Is-Tablet-Viewer',\r\n            'mars_token',\r\n            'SessionId',\r\n            'SubAppId',\r\n          ]\r\n        }\r\n      },\r\n      MinTTL: 0, /* required */\r\n      TargetOriginId: originId, /* required */\r\n      TrustedSigners: { /* required */\r\n        Enabled: false, /* required */\r\n        Quantity: 0, /* required */\r\n      },\r\n      ViewerProtocolPolicy: 'redirect-to-https', /* required */\r\n      AllowedMethods: {\r\n        Items: [ /* required */\r\n          'GET', 'HEAD', 'POST', 'PUT', 'PATCH', 'OPTIONS', 'DELETE',\r\n          /* more items */\r\n        ],\r\n        Quantity: 7, /* required */\r\n        CachedMethods: {\r\n          Items: [ /* required */\r\n            'GET', 'HEAD', 'OPTIONS'\r\n            /* more items */\r\n          ],\r\n          Quantity: 3 /* required */\r\n        }\r\n      },\r\n      Compress: true,\r\n      DefaultTTL: 86400,\r\n      MaxTTL: 31536000,\r\n      SmoothStreaming: false\r\n    },\r\n    Enabled: true, /* required */\r\n    Origins: { /* required */\r\n      Items: [ /* required */\r\n        {\r\n          DomainName: domainName, /* required */\r\n          Id: originId, /* required */\r\n          CustomOriginConfig: {\r\n            HTTPPort: 80, /* required */\r\n            HTTPSPort: 443, /* required */\r\n            OriginProtocolPolicy: 'https-only', /* required */\r\n            OriginSslProtocols: {\r\n              Items: [ /* required */\r\n                'TLSv1.2',\r\n              ],\r\n              Quantity: 1 /* required */\r\n            }\r\n          },\r\n          OriginPath: '/dev',\r\n        },\r\n      ],\r\n      Quantity: 1 /* required */\r\n    },\r\n    DefaultRootObject: '/home',\r\n    HttpVersion: 'http2',\r\n    IsIPV6Enabled: true,\r\n    PriceClass: 'PriceClass_100',\r\n    CustomErrorResponses: {\r\n      Quantity: 1, /* required */\r\n      Items: [\r\n        {\r\n          ErrorCode: 400, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        },\r\n        {\r\n          ErrorCode: 403, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        }, {\r\n          ErrorCode: 404, /* required */\r\n          ErrorCachingMinTTL: 30\r\n        }, {\r\n          ErrorCode: 500, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        }, {\r\n          ErrorCode: 502, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        }, {\r\n          ErrorCode: 503, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        }, {\r\n          ErrorCode: 504, /* required */\r\n          ErrorCachingMinTTL: 0\r\n        },\r\n      ]\r\n    },\r\n    Restrictions: {\r\n      GeoRestriction: { /* required */\r\n        Quantity: 0, /* required */\r\n        RestrictionType: 'none', /* required */\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nfunction createCdn(cloudfront) {\r\n  return new Promise((resolve, reject) => {\r\n    cloudfront.createDistribution(params, function (err, data) {\r\n      if (!err) {\r\n        console.log(data);\r\n        resolve(data)\r\n      } else {\r\n        reject(err)\r\n        console.log('Create API failed:\\n', err);\r\n      }\r\n    });\r\n  })\r\n}\r\n\r\nfunction getAws() {\r\n  var AWS = require(\"aws-sdk\");\r\n  AWS.config.region = 'eu-north-1';\r\n  return AWS;\r\n}\r\n\r\nasync function server() {\r\n  try {\r\n    var AWS = getAws();\r\n    var cloudfront = new AWS.CloudFront({ apiVersion: '2015/07/09' });\r\n    const r = await createCdn(cloudfront)\r\n    return r.Distribution\r\n  } catch (e1) {\r\n    return ({\r\n      statusCode: 400,\r\n      body: e1\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee2c9b3ea06de000807b033",
    "Name": "CreateMarsAppOnAws",
    "Title": "CreateMarsAppOnAws",
    "Type": "service",
    "Apps": [],
    "Folder": "aws",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "appId"
      },
      {
        "DataType": "string",
        "PropName": "appName"
      }
    ],
    "DemoJsx": "export default <CreateMarsAppOnAws />",
    "DemoJsxTranspiled": "export default executeAppBlock(CreateMarsAppOnAws, null);",
    "BlockFunction": "async function server() {\r\n  try {\r\n    const { appId, appName } = data;\r\n    const lambda = await Mars.services.CreateNewAwsLambda({ appId });\r\n    console.log('lambda.FunctionArn: ', lambda.FunctionArn)\r\n    const apiGateway = await Mars.services.CreateAwsApi({ appId, lambdaArn: lambda.FunctionArn });\r\n    console.log('rush start: ', apiGateway)\r\n    const cdn = await Mars.services.CreateAwsCdn({ appId, domainName: `${apiGateway.apigRes.id}.execute-api.eu-north-1.amazonaws.com`, appName });\r\n    console.log('rush cdn: ', cdn)\r\n    return cdn.DomainName;\r\n  } catch (e) {\r\n    console.error(e)\r\n    return {\r\n      statusCode: 400,\r\n      body: e\r\n    }\r\n  }\r\n\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee2d2beea06de000807b034",
    "Name": "TestService",
    "Title": "TestService",
    "Type": "service",
    "Apps": [],
    "Folder": "test/subfolder",
    "DataArgs": [],
    "DemoJsx": "export default JSON.stringify(Mars.services.TestService({},Req))",
    "DemoJsxTranspiled": "export default JSON.stringify(Mars.services.TestService({}, Req));",
    "BlockFunction": "function server() {\r\n  return Req\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee2d3dfea06de000807b035",
    "Name": "CreateMarsAppPage",
    "Type": "page",
    "Apps": [],
    "Folder": "app management",
    "DataArgs": [],
    "DemoJsx": "export default <div>\r\n  <div style=\"display:none\">\r\n    <MarsIdeMasterPage url=\"someurl1\" />\r\n  </div>\r\n  <CreateMarsAppPage Id=\"CreateMarsApp1\" />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"div\",\n    { style: \"display:none\" },\n    executeAppBlock(MarsIdeMasterPage, { url: \"someurl1\" })\n  ),\n  executeAppBlock(CreateMarsAppPage, { Id: \"CreateMarsApp1\" })\n);",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nasync function Block() {\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"p-3\" },\n      executeAppBlock(\n        \"h3\",\n        { \"class\": \"pb-3\" },\n        \"Create New App\"\n      ),\n      executeAppBlock(This.html, null),\n      executeAppBlock(This.style, null),\n      executeAppBlock(This.script, null)\n    )\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <div class=\"p-3\">\r\n      <h3 class=\"pb-3\">Create New App</h3>\r\n      <This.html />\r\n      <This.style />\r\n      <This.script />\r\n    </div>\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "BlockFunction": "async function api() {\r\n  return {\r\n    async createApp(model) {\r\n      const newApp = await Mars.services.CreateMarsAppOnAws({ appId: model.appId, appName: model.appName });\r\n      console.log(newApp);\r\n      return newApp;\r\n    }\r\n  }\r\n}",
    "Html": "<div class=\"row\">\r\n\t<div class=\"col-12\" id=\"vueId\" v-cloak>\r\n\t\t<div v-if=\"appLink\">\r\n\t\t\t<div class=\"alert alert-success\" role=\"alert\">\r\n\t\t\t\t<h4 class=\"alert-heading\">Success!</h4>\r\n\t\t\t\tNew app: {{newAppName}} has been created. It might take few minutes for the app to be activated.\r\n\t\t\t\t<hr>\r\n\t\t\t\t<p class=\"mb-0\">\r\n\t\t\t\t\tCheck this link in few minutes <a :href=\"appLink\">{{appLink}}</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t\t<div v-if=\"!appLink\">\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"App Id\">\r\n\t\t\t\t<b-form-input @blur=\"format()\" type=\"text\" size=\"sm\" v-model=\"newAppId\" placeholder=\"e.g. myapp\">\r\n\t\t\t\t</b-form-input>\r\n\t\t\t</b-form-group>\r\n\r\n\t\t\t<b-form-group @submit.stop.prevent label=\"App Name\">\r\n\t\t\t\t<b-form-input type=\"text\" size=\"sm\" v-model=\"newAppName\" placeholder=\"e.g. My App\">\r\n\t\t\t\t</b-form-input>\r\n\t\t\t</b-form-group>\r\n\r\n\r\n\t\t\t<b-button class=\"mt-2\" variant=\"success\" block size=\"md\" @click=\"newApp\">\r\n\t\t\t\t<b-spinner small v-if=\"saving\"></b-spinner>\r\n\t\t\t\tCreate\r\n\t\t\t</b-button>\r\n\t\t</div>\r\n\t</div>\r\n</div>",
    "Script": "new MarsVue('vueId', { methods: [{ name: 'createApp', block: 'CreateMarsAppPage' }] },\r\n  {\r\n    data: {\r\n      newAppId: '',\r\n      newAppName: '',\r\n      appLink: '',\r\n      saving: false,\r\n    },\r\n    methods: {\r\n      format() {\r\n        this.newAppId = this.newAppId.replace(/\\s+/g, '-').toLowerCase()\r\n      },\r\n      async newApp() {\r\n        try {\r\n          this.saving = true;\r\n\r\n          const r = await this.api.createApp({\r\n            appId: this.newAppId,\r\n            appName: this.newAppName,\r\n          })\r\n\r\n          this.saving = false;\r\n          this.newAppId = '';\r\n          this.newAppName = '';\r\n          this.appLink = 'https://' + r;\r\n        } catch (e) {\r\n          this.saving = false;\r\n          alert(e.response.data)\r\n        }\r\n      }\r\n    }\r\n  })",
    "Css": "h3{\r\n  color: white\r\n}\r\n\r\n#XID{\r\n  color: #bbb;\r\n}\r\n\r\n#XID input,  #XID select{\r\n  background-color: inherit;\r\n  border: 1px solid rgb(49, 49, 49);\r\n  color: white;\r\n}\r\n\r\n#PageContent{\r\n  overflow: auto!important;\r\n  height: 100vh;\r\n}",
    "Page": {
      "settings": {
        "url": "/mars/new-app",
        "title": "New app",
        "master": "MarsIdeMasterPage",
        "group": "settings",
        "icon": "fa-plus"
      }
    },
    "updatedAt": "2020-06-24T19:06:52.436Z",
    "isSystem": true
  },
  {
    "_id": "5ee2daf9ed48110007e8ae34",
    "Name": "MarsAppList",
    "Title": "MarsAppList",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "app management",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  const r = await Mars.services.MarsAppList()\r\n  return await JSON.stringify(r.filter(t => t.url.includes('marscloud')).map(t => t.name))\r\n}\r\n\r\nexport default <div>\r\n  <Block />\r\n  <div style=\"display:none\">\r\n    <MarsIdeMasterPage url=\"someurl\" />\r\n  </div>\r\n  <MarsAppList Id=\"MarsAppList1\" />\r\n</div>",
    "DemoJsxTranspiled": "async function Block() {\n  const r = await Mars.services.MarsAppList();\n  return await JSON.stringify(r.filter(t => t.url.includes('marscloud')).map(t => t.name));\n}\n\nexport default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(Block, null),\n  executeAppBlock(\n    \"div\",\n    { style: \"display:none\" },\n    executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n  ),\n  executeAppBlock(MarsAppList, { Id: \"MarsAppList1\" })\n);",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"list-group\" },\n      s.map(t => executeAppBlock(\n        \"a\",\n        { target: \"_blank\", href: 'https://' + t.url, \"class\": \"list-group-item list-group-item-action list-group-item-dark\" },\n        t.name\n      ))\n    ),\n    executeAppBlock(This.style, null),\n    executeAppBlock(This.script, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <div class=\"list-group\">\r\n        {s.map(t => <a target=\"_blank\" href={'https://' + t.url} class=\"list-group-item list-group-item-action list-group-item-dark\">{t.name}</a>)}\r\n      </div>\r\n      <This.style />\r\n      <This.script />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Css": " ",
    "Script": " ",
    "Html": "",
    "BlockFunction": "function listCdns(cloudfront) {\r\n  return new Promise((resolve, reject) => {\r\n    cloudfront.listDistributions({}, function (err, data) {\r\n      if (!err) {\r\n        console.log(data);\r\n        resolve(data)\r\n      } else {\r\n        reject(err)\r\n        console.log('listCdns failed:\\n', err);\r\n      }\r\n    });\r\n  })\r\n}\r\n\r\nfunction getAws() {\r\n  var AWS = require(\"aws-sdk\");\r\n  AWS.config.region = 'eu-north-1';\r\n  return AWS;\r\n}\r\n\r\nasync function server() {\r\n  try {\r\n    var AWS = getAws();\r\n    var cloudfront = new AWS.CloudFront({ apiVersion: '2015/07/09' });\r\n    const cdns = await listCdns(cloudfront)\r\n    return cdns.DistributionList.Items.map(t => ({ name: t.Comment || (t.Aliases.Items[0] || t.DomainName), url: t.Aliases.Items[0] || t.DomainName }))\r\n  } catch (e1) {\r\n    return ({\r\n      statusCode: 400,\r\n      body: e1\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee2dfd5ed48110007e8ae35",
    "Name": "MarsAppsManagementPage",
    "Title": "MarsAppsManagementPage",
    "Type": "page",
    "Apps": [],
    "Folder": "app management",
    "DataArgs": [],
    "DemoJsx": "export default <MarsAppsManagementPage />",
    "DemoJsxTranspiled": "export default executeAppBlock(MarsAppsManagementPage, null);",
    "Page": {
      "settings": {
        "url": "/mars/apps",
        "title": "mars apps",
        "master": "MarsIdeMasterPage",
        "group": "settings",
        "icon": "fa-list"
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nasync function Block() {\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"p-3\" },\n      executeAppBlock(\n        \"h3\",\n        { \"class\": \"pb-3\" },\n        \"Apps\"\n      ),\n      executeAppBlock(MarsAppList, null),\n      executeAppBlock(This.style, null)\n    )\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <div class=\"p-3\">\r\n      <h3 class=\"pb-3\">Apps</h3>\r\n      <MarsAppList />\r\n      <This.style />\r\n    </div>\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "Css": "h3{\r\n  color: white\r\n}\r\n\r\n.list-group-item-dark{\r\n  background-color: #212122!important;\r\n  color: #eee!important;\r\n}\r\n\r\n#PageContent{\r\n  overflow: auto!important;\r\n  height: 100vh;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee53387e834852f14bc90d1",
    "Name": "PageLoader",
    "Title": "PageLoader",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "common",
    "DataArgs": [],
    "DemoJsx": "export default <div>\r\n  <PageLoader />\r\n  <script>{'setTimeout(()=>{pageLoadSpinner.hidden=false}, 300)'}</script>\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  'div',\n  null,\n  executeAppBlock(PageLoader, null),\n  executeAppBlock(\n    'script',\n    null,\n    'setTimeout(()=>{pageLoadSpinner.hidden=false}, 300)'\n  )\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.style, null),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nexport default <div>\r\n  <This.html />\r\n  <This.style />\r\n  <This.script />\r\n</div>",
    "Html": "<div class=\"loader\" id=\"pageLoadSpinner\" hidden>\r\n\t<div class=\"bar\"></div>\r\n</div>",
    "Css": "@keyframes loader-animation {\r\n  0% {\r\n\tleft: -100%;\r\n  }\r\n  49% {\r\n\tleft: 100%;\r\n  }\r\n  50% {\r\n\tleft: 100%;\r\n  }\r\n  100% {\r\n\tleft: -100%;\r\n  }\r\n}\r\n\r\n.loader .bar {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  height: 3px;\r\n  width: 100%;\r\n  z-index: 999999;\r\n  background-color: red;\r\n  animation-name: loader-animation;\r\n  animation-duration: 3s;\r\n  animation-iteration-count: infinite;\r\n  animation-timing-function: ease-in-out;\r\n}",
    "Script": "pageLoadSpinner.hidden = true;",
    "isSystem": true
  },
  {
    "_id": "5ee5360ce834852f14bc90d2",
    "Name": "MarsNavJs",
    "Title": "MarsNavJs",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "client js",
    "DataArgs": [],
    "DemoJsx": "export default <MarsNavJs />",
    "DemoJsxTranspiled": "export default executeAppBlock(MarsNavJs, null);",
    "JsxTranspiled": "export default thisBlock.Script;",
    "Jsx": "export default thisBlock.Script\r\n",
    "Script": "/* load new page content when user clicks on an element with data-target-partial tag and prevent default navigation */\r\n$(document).on('click', '[data-target-partial]', function (e) {\r\n  e.preventDefault();\r\n  const targetUrl = $(this).attr('href');\r\n  window.goTo(targetUrl)\r\n\r\n  return e.preventDefault();\r\n});\r\n\r\nwindow.goTo = (targetUrl) => {\r\n  window.history.pushState(targetUrl, '', targetUrl);\r\n  pageLoadSpinner.hidden = false;\r\n  window.postRequest(targetUrl, { Id: 'AjaxPage' }).then(t => {\r\n    $('#PageContent').html(t.data);\r\n    pageLoadSpinner.hidden = true;\r\n  })\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee53808e834852f14bc90d3",
    "Name": "JsFile",
    "Title": "JsFile",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "client js",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "children"
      }
    ],
    "DemoJsx": "export default <JsFile>hey there</JsFile>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  JsFile,\n  null,\n  \"hey there\"\n);",
    "JsxTranspiled": "Req.response.contentType('text/javascript; charset=UTF-8');\nexport default data.children.join('\\n');",
    "Jsx": "Req.response.contentType('text/javascript; charset=UTF-8')\r\nexport default data.children.join('\\n')",
    "isSystem": true
  },
  {
    "_id": "5ee55e0ae834852f14bc90d4",
    "Name": "TestAlbumAws",
    "Title": "TestAlbumAws",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background: black;padding: 10px;color:white\">\r\n      <div style=\"display:none\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n      <TestAlbumAws Id=\"test1\" m=\"123\"/>\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background: black;padding: 10px;color:white\" },\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(TestAlbumAws, { Id: \"test1\", m: \"123\" })\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  \"div\",\n  { id: data.Id },\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, data)\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nexport default <div id={data.Id}>\r\n  <This.html />\r\n  <This.script {...data} />\r\n</div>",
    "Html": "<div id=\"XID_VUE\">\r\n\t<h1>My Photo Albums App: {{m}}</h1>\r\n\t<input v-model=\"m\"/>\r\n\t<button @click=\"reload()\">Reload</button>\r\n</div>",
    "Script": "new MarsVue('XID_VUE', data, {\r\n  data,\r\n  methods: {\r\n    async reload() {\r\n      await this.api.reRender('TestAlbumAws', { ...data, m: 444 });\r\n    }\r\n  }\r\n})",
    "BlockFunction": "function api() {\r\n  return {\r\n    reRender(blockName, blockData) {\r\n      return Mars.blocks[blockName](Mars, blockData, Req);\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee577bee834852f14bc90d5",
    "Name": "AppStyles",
    "Title": "AppStyles",
    "Type": "settings",
    "Apps": [],
    "Folder": "theme",
    "DataArgs": [],
    "DemoJsx": "export default <AppStyles />",
    "DemoJsxTranspiled": "export default executeAppBlock(AppStyles, null);",
    "isSystem": true
  },
  {
    "_id": "5ee63dfccb100f58a01fb53a",
    "Name": "InitBlocks",
    "Title": "InitBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "mars engine",
    "DataArgs": [],
    "DemoJsx": "export default <InitBlocks />",
    "DemoJsxTranspiled": "export default executeAppBlock(InitBlocks, null);",
    "BlockFunction": "const { toCamelCase, AsyncFunction } = Mars.libs;\r\nconst { blocks, pages } = Mars;\r\n\r\nfunction initBlocks(blocksArr, override) {\r\n  for (const b of blocksArr) {\r\n    const f = `if(!Mars.blocks) {throw new Error(\"Mars.blocks is null in new blocks:(${b.Name})\")} ` + 'with (Mars.blocks) { ' + b.JsxTranspiled + ' }';\r\n    try {\r\n      const thisB = JSON.stringify({ ...b, Html: (b.Html || '').replace(/XTEMPLATE>/g, 'script>').replace(/<XTEMPLATE/g, '<script type=\"text/x-template\"') });\r\n\r\n      if (!override || blocks[toCamelCase(b.Name)]) {\r\n        blocks[toCamelCase(b.Name)] = new AsyncFunction(\r\n          'Mars',\r\n          'data',\r\n          'Req',\r\n          `const thisBlock = ${thisB}; ` +\r\n          f\r\n            .replace('executeServerJs', 'Mars.executeServerJs')\r\n            .replace('Mars.initJsx()', 'Mars.initJsx(thisBlock, data, Req)')\r\n            .replace(/export default/g, 'return ')\r\n            .replace('Mars.render', 'return ')\r\n            .replace(/x-bind-/g, 'x-bind:')\r\n            .replace(/executeAppBlock/g, 'Mars.executeAppBlock')\r\n            .replace(/executeAppBlock\\(/g, 'executeAppBlock(Req,'),\r\n        );\r\n\r\n        blocks[toCamelCase(b.Name)].funName = b.Name;\r\n\r\n        // create separate propery for page blocks\r\n        if (b.Type === 'page' && b.Page && b.Page.settings && b.Page.settings.url) pages[b.Page.settings.url] = b;\r\n      }\r\n\r\n    } catch (error) {\r\n      blocks[toCamelCase(b.Name)] = () => {\r\n        return `${b.Name}: ${error.toString()}`;\r\n      };\r\n      console.error(b.Name + error);\r\n    }\r\n  }\r\n}\r\n\r\nfunction server() {\r\n  // init \r\n  initBlocks(data.blocksArr, false)\r\n  Mars.services.InitSettings();\r\n\r\n\r\n  //Mars.services.InitClientBlocks\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee640f8ea3eb91e3ca9d4f1",
    "Name": "InitClientBlocks",
    "Title": "InitClientBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "mars engine",
    "DataArgs": [],
    "DemoJsx": "export default <InitClientBlocks />",
    "DemoJsxTranspiled": "export default executeAppBlock(InitClientBlocks, null);",
    "BlockFunction": "const { toCamelCase, AsyncFunction } = Mars.libs;\r\nconst { blocks, pages } = Mars;\r\n\r\nfunction server() {\r\n  for (const b of data.blocksArr) {\r\n    const f = 'if(!Mars.blocks) {throw new Error(\"Mars.blocks is null in oldblocks\")} ' + 'with (Mars.blocks) { ' + b.JsxTranspiled + ' }';\r\n    try {\r\n      blocks[toCamelCase(b.Name)] = async function (d) {\r\n        try {\r\n          const uniqId = d.Id || `obj${new Date().getTime()}`;\r\n\r\n          let html = b.Html.replace(/XDATA/g, `XDATA${uniqId}`)\r\n            .replace(/XID/g, uniqId)\r\n            .replace(/XTEMPLATE>/g, 'script>')\r\n            .replace(/<XTEMPLATE/g, '<script type=\"text/x-template\"');\r\n\r\n          let funcDataForScriptResult = '';\r\n          if (b.DataForScriptFunction) {\r\n            const funcDataForScript = new AsyncFunction('data', b.DataForScriptFunction);\r\n            funcDataForScriptResult = await funcDataForScript(data);\r\n          }\r\n\r\n          let script = '';\r\n          if (b.Script) {\r\n            script = `<div v-pre ><script type=\"module\">\r\n                    import 'https://cdn.jsdelivr.net/npm/vue';\r\n                    (function(){const data=JSON.parse(decodeURIComponent(\"${encodeURIComponent(JSON.stringify(funcDataForScriptResult))}\"));\r\n                    ${b.Script.replace('MarsVue(', \"MarsVue('XID', data, \")\r\n                .replace('MarsBlock()', \"MarsBlock('XID', data)\")\r\n                .replace(/XID/g, uniqId)} })();</script></div>`;\r\n          }\r\n\r\n          const css = `<div v-pre><style v-pre scoped type=\"text/css\">${b.Css}</style></div>`.replace(/XID/g, uniqId);\r\n\r\n          return html + script + css;\r\n        } catch (error) {\r\n          console.error(b.Name + error);\r\n          throw new Error(`${b.Name}: ${error}`);\r\n        }\r\n      };\r\n    } catch (error) {\r\n      blocks[toCamelCase(b.Name)] = () => {\r\n        return `!${b.Name}: ${error.toString()}`;\r\n      };\r\n      console.error(b.Name + error);\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee6457c94e62139740bb9fc",
    "Name": "InjectSessionIntoRequest",
    "Title": "InjectSessionIntoRequest",
    "Type": "service",
    "Apps": [],
    "Folder": "mars engine",
    "DataArgs": [],
    "DemoJsx": "export default <InjectSessionIntoRequest />",
    "DemoJsxTranspiled": "export default executeAppBlock(InjectSessionIntoRequest, null);",
    "BlockFunction": "const azureStorage = Mars.services.AzureStorage();\r\n\r\n/**\r\n     * get and set current session\r\n     * */\r\nconst session = {\r\n  /**\r\n   * set session data\r\n   * */\r\n  async set(obj) {\r\n    Mars.cache.sessions[Req.headers.sessionid] = obj;\r\n    const insertedEntity = await azureStorage.insertEntity(`App${kinoApp.AppId}Sessions`, {\r\n      PartitionKey: headers.sessionid[0],\r\n      RowKey: headers.sessionid,\r\n      Data: JSON.stringify(obj)\r\n    });\r\n  },\r\n  /**\r\n   * get session {sessionId: uuid, data: {}}\r\n   * */\r\n  async get() {\r\n    if (!cache.data.sessions.v[headers.sessionid])\r\n      try {\r\n        const sessionFromTable = await azureStorage.getEntity(`App${kinoApp.AppId}Sessions`, headers.sessionid[0], headers.sessionid);\r\n        cache.data.sessions.v[headers.sessionid] = JSON.parse(sessionFromTable[0].Data)\r\n      } catch (ee) {\r\n        console.error(ee);\r\n      }\r\n\r\n    return {\r\n      sessionId: headers.sessionid,\r\n      data: cache.data.sessions.v[headers.sessionid],\r\n    };\r\n  },\r\n};\r\n\r\nasync function server() {\r\n  const { event } = data;\r\n  // parse cookies\r\n  event.cookies = getCookiesFromHeader(event.headers.cookie || event.headers.Cookie);\r\n\r\n  // inject user into request\r\n  const token = event.cookies.mars_token;\r\n\r\n  if (token) event.user = await Mars.services.GetUserByToken({ token });\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee6483994e62139740bb9fd",
    "Name": "AzureStorage",
    "Title": "AzureStorage",
    "Type": "service",
    "Apps": [],
    "Folder": "data storage",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  const azureStorage = await Mars.services.AzureStorage();\r\n  const testTable = 'testTable';\r\n  await azureStorage.createTableIfNotExists(testTable)\r\n  const inserted = await azureStorage.insertEntity(testTable, { prop1: 123, PartitionKey: '1' }, true)\r\n  return inserted\r\n}\r\n\r\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n  const azureStorage = await Mars.services.AzureStorage();\n  const testTable = 'testTable';\n  await azureStorage.createTableIfNotExists(testTable);\n  const inserted = await azureStorage.insertEntity(testTable, { prop1: 123, PartitionKey: '1' }, true);\n  return inserted;\n}\n\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "const azure = require('azure-storage');\r\nconst moment = require('moment');\r\nconst uuid = (require('uuid')).v4;\r\nconst { config } = Mars;\r\n\r\nif (!Mars.azureStorage) {\r\n  const entGen = azure.TableUtilities.entityGenerator;\r\n  const tableSvc = azure.createTableService(config.azureStorageConnection);\r\n  const blobSvc = azure.createBlobService(config.azureStorageConnection);\r\n  const queueSvc = azure.createQueueService(config.azureStorageConnection);\r\n  const Query = azure.TableQuery;\r\n  Mars.azureStorage = {\r\n    entGen, tableSvc, blobSvc, queueSvc, Query\r\n  }\r\n}\r\n\r\nconst { entGen, tableSvc, blobSvc, queueSvc, Query } = Mars.azureStorage;\r\n\r\nfunction getInvertedTimestamp() {\r\n  const inverted = moment('3000-01-01').unix() - moment().unix();\r\n  const invertedString = inverted.toString();\r\n  const pad = '000000000000000';\r\n\r\n  return pad.substring(0, pad.length - invertedString.length) + invertedString;\r\n}\r\n\r\nconst GenerateKey = function () {\r\n  const inverted = getInvertedTimestamp();\r\n  const uid = uuid();\r\n\r\n  return `${inverted}_${uid}`;\r\n};\r\n\r\nconst insertToBlob = (container, name, text) => new Promise((resolve, reject) => {\r\n  blobSvc.createContainerIfNotExists(container.toLowerCase(), {\r\n    publicAccessLevel: 'blob',\r\n  }, (error1) => {\r\n    if (error1) {\r\n      reject(error1);\r\n    } else {\r\n      blobSvc.createBlockBlobFromText(container.toLowerCase(), name, text, (error2, result, response) => {\r\n        if (error2) reject(error2);\r\n        else resolve(`https://${config.azureStorageAccountName}.blob.core.windows.net/${result.container}/${result.name}`);\r\n      });\r\n    }\r\n  });\r\n});\r\n\r\nconst uploadFileToAzure = (stream, blob, size, type) => new Promise(((resolve, reject) => {\r\n  const blobOptions = {\r\n    contentSettings: {\r\n      contentType: type,\r\n    },\r\n  };\r\n  blobSvc.createBlockBlobFromStream(config.webFilesBlob, blob, stream, size, blobOptions, (error, result, response) => {\r\n    if (error) {\r\n      reject(error);\r\n    } else {\r\n      resolve();\r\n      console.log('uploaded');\r\n    }\r\n  });\r\n}));\r\n\r\nconst listBlobDirectories = (container, prefix, continuationToken = null) => new Promise(((resolve, reject) => {\r\n  blobSvc.listBlobDirectoriesSegmentedWithPrefix(container, prefix, continuationToken, async (error, result, response) => {\r\n    if (error) {\r\n      reject(error);\r\n    } else {\r\n      continuationToken = result.continuationToken;\r\n      if (continuationToken !== null) {\r\n        const res = await listBlobDirectories(container, prefix, continuationToken);\r\n        result.entries.push(...res.entries);\r\n      }\r\n      resolve(result.entries);\r\n    }\r\n  });\r\n}));\r\n\r\nasync function asyncForEach(array, callback) {\r\n  for (let index = 0; index < array.length; index++) {\r\n    await callback(array[index], index, array);\r\n  }\r\n}\r\n\r\nconst createTableIfNotExists = (tableName) => new Promise(async (resolve, reject) => {\r\n  tableSvc.createTableIfNotExists(tableName, (error, results, response) => {\r\n    if (error) reject(error);\r\n    else {\r\n      resolve();\r\n    }\r\n  });\r\n});\r\n\r\nconst insertEntity = (table, entity, orderByRowKey) => new Promise(async (resolve, reject) => {\r\n  await asyncForEach(Object.keys(entity), async (key) => {\r\n    const value = entity[key];\r\n    if (value && value.length > 1000) {\r\n      // if the property value too large we save it to blob and replace with link to the blob\r\n      entity[key] = await insertToBlob(table, `${key}_${uuid()}`, value);\r\n    }\r\n  });\r\n\r\n  if (orderByRowKey) entity.RowKey = GenerateKey();\r\n  tableSvc.insertOrMergeEntity(table, entity, (error, result, response) => {\r\n    if (error) reject(error);\r\n    else resolve(entity);\r\n  });\r\n});\r\n\r\nconst queryEntity = (table, query, continuationToken = null) => new Promise((resolve, reject) => {\r\n  tableSvc.queryEntities(\r\n    table,\r\n    query,\r\n    continuationToken,\r\n    async (error, result, response) => {\r\n      if (error) reject(error);\r\n      else {\r\n        continuationToken = result.continuationToken;\r\n        if (continuationToken !== null) {\r\n          const res = await queryEntity(table, query, continuationToken);\r\n          response.body.value.push(...res);\r\n        }\r\n        resolve(response.body.value);\r\n      }\r\n    }\r\n  );\r\n});\r\n\r\nconst getEntity = (table, pKey, rKey) => new Promise((resolve, reject) => {\r\n  const query = new azure.TableQuery()\r\n    .top(50)\r\n    .where('PartitionKey eq ?', pKey.toString())\r\n    .where(' and RowKey eq ?', rKey.toString());\r\n  tableSvc.queryEntities(\r\n    table,\r\n    query,\r\n    null,\r\n    (error, result, response) => {\r\n      if (error) reject(error);\r\n      else resolve(response.body.value);\r\n    }\r\n  );\r\n});\r\n\r\nconst queryEntityByPartitionKey = (table, pkey) => new Promise((resolve, reject) => {\r\n  const query = new azure.TableQuery()\r\n    .top(50)\r\n    .where('PartitionKey eq ?', pkey.toString());\r\n  tableSvc.queryEntities(\r\n    table,\r\n    query,\r\n    null,\r\n    (error, result, response) => {\r\n      if (error) reject(error);\r\n      else resolve(response.body.value);\r\n    }\r\n  );\r\n});\r\n\r\nconst deleteEntity = (table, pkey, rkey) => new Promise((resolve, reject) => {\r\n  const entityDescriptor = {\r\n    PartitionKey: entGen.String(pkey),\r\n    RowKey: entGen.String(rkey),\r\n  };\r\n\r\n  tableSvc.deleteEntity(\r\n    table,\r\n    entityDescriptor,\r\n    null,\r\n    (error, result) => {\r\n      if (error) reject(error);\r\n      else resolve(result.isSuccessful);\r\n    }\r\n  );\r\n});\r\n\r\nconst postMessageToQuery = (queueName, msg) => new Promise(async (resolve, reject) => {\r\n  queueSvc.createQueueIfNotExists(queueName, (error, results, response) => {\r\n    if (error) reject(error);\r\n    else {\r\n      const encodedMsg = Buffer.from(JSON.stringify(msg)).toString('base64');\r\n      queueSvc.createMessage(queueName, encodedMsg, (error, results, response) => {\r\n        if (error) reject(error);\r\n        else resolve();\r\n      });\r\n    }\r\n  });\r\n});\r\n\r\nfunction server() {\r\n  return {\r\n    getInvertedTimestamp,\r\n    GenerateKey,\r\n    insertToBlob,\r\n    uploadFileToAzure,\r\n    listBlobDirectories,\r\n    asyncForEach,\r\n    createTableIfNotExists,\r\n    insertEntity,\r\n    queryEntity,\r\n    getEntity,\r\n    queryEntityByPartitionKey,\r\n    deleteEntity,\r\n    postMessageToQuery\r\n  }\r\n}\r\n",
    "isSystem": true
  },
  {
    "_id": "5ee64c180c12e85fc00e78c4",
    "Name": "InitSettings",
    "Title": "InitSettings",
    "Type": "service",
    "Apps": [],
    "Folder": "mars engine",
    "DataArgs": [],
    "DemoJsx": "export default <InitSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(InitSettings, null);",
    "BlockFunction": "const { settings } = Mars;\r\n\r\nfunction server() {\r\n  const blocksArr = Mars.allBlocks.filter((t) => t.Type === 'settings');\r\n  for (const b of blocksArr) {\r\n    settings[b.Name] = b.Config || {};\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ee8c49dbff50c0008f92619",
    "Name": "AppSettings",
    "Title": "AppSettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "general",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "name"
      },
      {
        "DataType": "boolean",
        "PropName": "enableSessions",
        "DefaultValue": "false"
      }
    ],
    "DemoJsx": "export default <AppSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(AppSettings, null);",
    "Config": {
      "name": "Mars Ide",
      "enableSessions": false
    },
    "updatedAt": "2020-06-24T00:03:27.190Z",
    "isSystem": true
  },
  {
    "_id": "5ee93ec1393b334b70ba2771",
    "Name": "Helpers",
    "Title": "Helpers",
    "Type": "service",
    "Apps": [],
    "Folder": "helpers",
    "DataArgs": [],
    "DemoJsx": "export default <Helpers />",
    "DemoJsxTranspiled": "export default executeAppBlock(Helpers, null);",
    "BlockFunction": "function server() {\r\n  return {\r\n    AsyncFunction: Object.getPrototypeOf(async () => { }).constructor,\r\n  };\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eea35f556a2ba0518af8905",
    "Name": "TestEvalCss",
    "Title": "TestEvalCss",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <div>\r\n  <TestEvalCss color=\"red\" />\r\n  <TestEvalCss color=\"blue\" />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(TestEvalCss, { color: \"red\" }),\n  executeAppBlock(TestEvalCss, { color: \"blue\" })\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { id: `${data.Id}` },\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div id={`${data.Id}`}>\r\n      <This.html />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default <Block />;\r\n",
    "Html": "<p class=\"testEvalCss\">hello</p> ",
    "Css": ".testEvalCss{\r\n  color: '${data.color}';\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eea619a467d5428ec1ac3c7",
    "Name": "GenereateNestedTree",
    "Title": "GenereateNestedTree",
    "Type": "service",
    "Apps": [],
    "Folder": "services",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "items",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "string",
            "PropName": "folder"
          },
          {
            "DataType": "string",
            "PropName": "url"
          },
          {
            "DataType": "string",
            "PropName": "icon"
          }
        ]
      }
    ],
    "DemoJsx": "export default Mars.services.GenereateNestedTree({\r\n  items: [\r\n    { name: 'file1', folder: 'folder1' },\r\n    { name: 'file2', folder: 'folder1' },\r\n    { name: 'file2',  },\r\n    { name: 'file3',  }\r\n  ]\r\n})",
    "DemoJsxTranspiled": "export default Mars.services.GenereateNestedTree({\n  items: [{ name: 'file1', folder: 'folder1' }, { name: 'file2', folder: 'folder1' }, { name: 'file2' }, { name: 'file3' }]\n});",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction generateBranch(file, tree) {\r\n  let mainFolder, subFolder;\r\n\r\n  if (!file.folder.includes('/')) {\r\n    mainFolder = file.folder;\r\n    subFolder = null;\r\n    if (tree.every((e) => e.name !== mainFolder)) {\r\n      tree.push({ name: mainFolder, children: [file] })\r\n    } else {\r\n      tree.forEach((e) => {\r\n        if (e.name === mainFolder) e.children.push(file)\r\n      })\r\n    }\r\n  } else {\r\n    mainFolder = file.folder.slice(0, file.folder.indexOf('/'));\r\n    subFolder = file.folder.slice(file.folder.indexOf('/') + 1, file.folder.length);\r\n    let newFile = { ...file, folder: subFolder };\r\n    if (tree.every((e) => e.name !== mainFolder)) {\r\n      if (subFolder === mainFolder) {\r\n        tree.push({ name: mainFolder, children: [file] })\r\n      } else {\r\n        tree.push({ name: mainFolder, children: [] })\r\n      }\r\n    }\r\n    tree.forEach((e) => {\r\n      if (e.name === mainFolder) {\r\n        generateBranch(newFile, e.children);\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nfunction generateTree(files) {\r\n  const generatedTreeData = [];\r\n  _.orderBy(files.filter(t => t.folder), [ss => ss.name], ['asc'])\r\n    .forEach((element) => {\r\n      generateBranch(element, generatedTreeData);\r\n    })\r\n  files.filter(t => !t.folder).forEach(t => generatedTreeData.push(t))\r\n  return _.orderBy(generatedTreeData, [ss => ss.name], ['asc']);\r\n}\r\n\r\nfunction server() {\r\n  return generateTree(data.items)\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eea647c467d5428ec1ac3c8",
    "Name": "MongoDb",
    "Title": "MongoDb",
    "Type": "service",
    "Apps": [],
    "Folder": "data storage",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  const mongo = await Mars.services.MongoDb();\r\n  return await mongo.users.findById('5ee16780d5db6c55240ec72b')\r\n} \r\n\r\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n  const mongo = await Mars.services.MongoDb();\n  return await mongo.users.findById('5ee16780d5db6c55240ec72b');\n}\n\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction omitId(obj) {\r\n  if (!obj._id) return obj\r\n  const { _id, ...withoutId } = obj;\r\n  return withoutId;\r\n}\r\n\r\n\r\n\r\nasync function createCollectionsIfNotExists(dbClient, collectionNames) {\r\n  for (let collection of Mars.settings.MongoConfig.collections) {\r\n    try {\r\n      if (!collectionNames.includes(collection)) await dbClient.createCollection(collection.name)\r\n    } catch (e) {\r\n      console.error(e)\r\n    }\r\n  }\r\n}\r\n\r\nasync function server() {\r\n  const dbClient = await Mars.mongoDb;\r\n\r\n  const collectionNames = (await dbClient.collections()).map(t => t.collectionName);\r\n\r\n  await createCollectionsIfNotExists(dbClient, collectionNames);\r\n\r\n  const ObjectID = Mars.libs.ObjectID;\r\n\r\n  let collections = { collectionNames };\r\n\r\n  collectionNames.map((elem) => {\r\n    async function find(myObject) {\r\n      return await dbClient.collection(elem).find(myObject).toArray();\r\n    }\r\n\r\n    async function findOne(myObject) {\r\n      return await dbClient.collection(elem).findOne(myObject);\r\n    }\r\n\r\n    async function saveDeletedDoc(deletedDoc) {\r\n      deletedDoc._deletedAt = new Date();\r\n      deletedDoc._originalCollection = elem;\r\n      await dbClient.collection('_deleted_documents').insertOne(deletedDoc)\r\n    }\r\n\r\n    async function findById(id) {\r\n      let _id = id;\r\n      try { _id = new ObjectID(id) } catch (e) { }\r\n      return await dbClient.collection(elem).findOne({ _id });\r\n    }\r\n\r\n    async function insert(myObject) {\r\n      myObject.createdAt = new Date();\r\n      return await dbClient.collection(elem).insertOne(myObject);\r\n    }\r\n\r\n    async function deleteById(id) {\r\n      await saveDeletedDoc(await findById(id))\r\n      return await dbClient.collection(elem).deleteOne({ _id: new ObjectID(id) });\r\n    }\r\n\r\n    async function deleteOne(myObject) {\r\n      await saveDeletedDoc(myObject)\r\n      return await dbClient.collection(elem).deleteOne(myObject);\r\n    }\r\n\r\n    async function updateById(id, myObject) {\r\n      if (!myObject.$set) myObject.updatedAt = new Date();\r\n      return await dbClient.collection(elem).findOneAndUpdate({ _id: new ObjectID(id) }, myObject, { returnOriginal: false });\r\n    }\r\n\r\n    async function update(query, myObject) {\r\n      try {\r\n        if (myObject.$set) await dbClient.collection(elem).findOneAndUpdate(query, { $set: { updatedAt: new Date() } }, { returnOriginal: false });\r\n        else myObject.updatedAt = new Date();\r\n\r\n        return await dbClient.collection(elem).findOneAndUpdate(query, myObject, { returnOriginal: false });\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    }\r\n\r\n    async function upsert(myObject, path, objectId) {\r\n      const obj = path ? { [path]: omitId(myObject) } : omitId(myObject);\r\n      if (!myObject._id && !objectId) return insert(obj);\r\n      await update({ _id: new ObjectID(myObject._id || objectId) }, { $set: obj });\r\n      if (elem === 'blocks') {\r\n        let orgininalBlock = _.cloneDeep(Mars.allBlocks.find(t => t._id.toString() === (myObject._id || objectId)));\r\n        if (path) orgininalBlock[path] = Array.isArray(myObject) ? myObject : { ...orgininalBlock[path], ...omitId(myObject) }\r\n        return Mars.services.ResetCache({\r\n          blockObj: orgininalBlock\r\n        })\r\n      }\r\n      return true;\r\n    }\r\n\r\n    collections[elem] = {\r\n      findOne,\r\n      find,\r\n      insert,\r\n      deleteOne,\r\n      update,\r\n      upsert,\r\n\r\n      findById,\r\n      deleteById,\r\n      updateById,\r\n      mongo: dbClient.collection(elem)\r\n    };\r\n  });\r\n\r\n  return collections\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eea6bd4467d5428ec1ac3c9",
    "Name": "HashPasswords",
    "Title": "HashPasswords",
    "Type": "service",
    "Apps": [],
    "Folder": "auth",
    "DataArgs": [],
    "DemoJsx": "export default <HashPasswords />",
    "DemoJsxTranspiled": "export default executeAppBlock(HashPasswords, null);",
    "BlockFunction": "\r\nvar SHA3 = require(\"crypto-js\").SHA3;\r\n\r\nfunction server() {\r\n  return SHA3(data.password).toString()\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eea8133165c817c4ad9df75",
    "Name": "DataPage",
    "Title": "",
    "Apps": [],
    "Folder": "block",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "blockName"
      }
    ],
    "Created": {
      "DateTime": "2020-05-18T21:43:23.974Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "LastChanged": {
      "DateTime": "2020-05-20T01:49:00.476Z",
      "UserId": 20,
      "UserName": "John Rush üèÖ "
    },
    "ClientTypeScript": "",
    "Description": "",
    "Icon": "",
    "Image": "",
    "JsxVersion": 2,
    "LoaderHtml": "",
    "Note": "",
    "Placement": "",
    "ShowOnPage": "",
    "SystemBlock": "",
    "Type": "page",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  if (!Req.user) return <div>You are not logged in. Please <a href=\"/mars/auth\">Log In or Register</a></div>\r\n\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <MongoCollectionTree Id=\"MongoCollectionTree1\" title={data.tableName} />\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nasync function Block() {\n  if (!Req.user) return executeAppBlock(\n    \"div\",\n    null,\n    \"You are not logged in. Please \",\n    executeAppBlock(\n      \"a\",\n      { href: \"/mars/auth\" },\n      \"Log In or Register\"\n    )\n  );\n\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(MongoCollectionTree, { Id: \"MongoCollectionTree1\", title: data.tableName })\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Page": {
      "settings": {
        "url": "/mars/data/:tableName",
        "title": "mars data",
        "master": "MarsIdeMasterPage"
      }
    },
    "BlockFunction": "",
    "ServerTypeScript": "",
    "ShowCompiledJsx": "",
    "Script": "",
    "Css": "",
    "isSystem": true
  },
  {
    "_id": "5eea8203e0656b40b4265a56",
    "Name": "MongoCollectionTree",
    "Title": "DataTableTree",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "model editor",
    "DataArgs": [],
    "DemoJsx": "\r\nconst _head = <Fragment>\r\n  <script type=\"module\" src=\"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\" defer></script>{data.head}\r\n  <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\" type=\"module\"></script>\r\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" defer></script>\r\n  <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\" defer></script>\r\n  <script src=\"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\" defer></script>\r\n  <script src=\"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\" defer></script>\r\n  <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n</Fragment>;\r\n\r\nMars.render(<Page title={data.title} head={_head}>\r\n\r\n  <MongoCollectionTree Id=\"demoTree2\" title=\"_assets_images\" />\r\n  <Modal />\r\n  <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" />\r\n  <link href=\"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\" rel=\"stylesheet\" />\r\n  <link rel=\"stylesheet\" href=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" />\r\n\r\n</Page>);\r\n",
    "DemoJsxTranspiled": "\nconst _head = executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(\"script\", { type: \"module\", src: \"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\", defer: true }),\n  data.head,\n  executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\", type: \"module\" }),\n  executeAppBlock(\"script\", { src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\", defer: true }),\n  executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" })\n);\n\nMars.render(executeAppBlock(\n  Page,\n  { title: data.title, head: _head },\n  executeAppBlock(MongoCollectionTree, { Id: \"demoTree2\", title: \"_assets_images\" }),\n  executeAppBlock(Modal, null),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\", integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", crossorigin: \"anonymous\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(\"link\", { href: \"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\", rel: \"stylesheet\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" })\n));",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction getDataItem(d) {\r\n  return [{\r\n    name: 'view data',\r\n    icon: 'fa-list',\r\n  }, {\r\n    name: 'edit model',\r\n    icon: 'fa-cog'\r\n  }, {\r\n    name: 'add new',\r\n    icon: 'fa-plus'\r\n  }]\r\n}\r\n\r\nasync function server() {\r\n  const collectionName = data.title;\r\n  const tableConfig = Mars.settings.MongoConfig.collections\r\n    .find(t => t.name === collectionName);\r\n\r\n  const items = await Mars.data[collectionName].find();\r\n  const model = Mars.services[tableConfig.defaultModelBlock];\r\n  \r\n  if (model) {\r\n   \r\n    const transformEach = model().transformEach;\r\n    if (transformEach) {\r\n      if (transformEach[Symbol.toStringTag] === 'AsyncFunction') {\r\n        await Promise.allSettled(items.map(t => transformEach(t, 'preview')))\r\n      } else {\r\n        for (const t of items) {\r\n          transformEach(t, 'preview')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n\r\n  function getEditObjectUrl(collectionName, modelName, objectId = null, docTitle) {\r\n    const editUrl = `/mars/edit-data/${tableConfig.defaultModelBlock}/${collectionName}?objectId=${objectId || ''}`;\r\n    return `Modal.open('/api/RenderFormByModel?Id=RenderDataByModel1&modelName=${modelName}&collectionName=${collectionName}&objectId=${objectId || ''}&iframeUrl=${encodeURIComponent(editUrl)}', {width: '785px', noPadding: true, title: '${docTitle}' })`\r\n  }\r\n\r\n  const tree = _.orderBy(items, [ss => ss[tableConfig.titleField]], ['asc']).map(t => {\r\n    const keys = Object.keys(t);\r\n    const docTitle = t[tableConfig.titleField];\r\n\r\n    const contextMenuActions = [{\r\n      title: 'Edit', onClick: getEditObjectUrl(collectionName, tableConfig.defaultModelBlock, t._id, `Edit ${docTitle}`)\r\n    }, {\r\n      title: 'Move up', onClick: 'alert(\"not implemented\")'\r\n    }, {\r\n      title: 'Move down', onClick: 'alert(\"not implemented\")'\r\n    }, {\r\n      title: 'Delete', onClick: `confirm(\"Are you sure you want to delete ${docTitle}\");MongoCollectionTree1.deleteObject(\"${collectionName}\",\"${t._id.toString()}\",\"${tableConfig.defaultModelBlock}\")`\r\n    }]\r\n\r\n    if (model) {\r\n      const modelActions = model().contextMenu(t);\r\n      contextMenuActions.unshift(...modelActions)\r\n    }\r\n\r\n    return {\r\n      name: docTitle,\r\n      contextMenuActions\r\n    }\r\n  })\r\n\r\n  const children = await Mars.services.GenereateNestedTree({\r\n    items: await Promise.all(items.map(async (t) => {\r\n      const docTitle = t[tableConfig.titleField];\r\n\r\n      const contextMenuActions = [{\r\n        title: 'Edit', onClick: getEditObjectUrl(collectionName, tableConfig.defaultModelBlock, t._id, `Edit ${docTitle}`)\r\n      }, {\r\n        title: 'Move up', onClick: 'alert(\"not implemented\")'\r\n      }, {\r\n        title: 'Move down', onClick: 'alert(\"not implemented\")'\r\n      }, {\r\n        title: 'Delete', onClick: `confirm(\"Are you sure you want to delete ${docTitle}\");MongoCollectionTree1.deleteObject(\"${collectionName}\",\"${t._id.toString()}\",\"${tableConfig.defaultModelBlock}\")`\r\n      }]\r\n\r\n      if (model) {\r\n        const modelActions = model().contextMenu(t);\r\n        contextMenuActions.unshift(...modelActions)\r\n      }\r\n      const qs = Object.keys(t).map(tt => `${tt}=${t[tt]}`).join('&')\r\n\r\n      let preview;\r\n      if (Mars.blocks[tableConfig.defaultModelBlock]) preview = await Mars.blocks[tableConfig.defaultModelBlock](Mars, Object.assign({ preview: true }, tableConfig.lazyLoadDetails ? { _id: t._id } : t), Req)\r\n\r\n      return {\r\n        name: preview || docTitle,\r\n        contextMenuActions,\r\n        folder: t[tableConfig.folderField] || (t.folder || null),\r\n        OnClick: tableConfig.renderModel ? `Modal.open('/api/${tableConfig.defaultModelBlock}?${qs}')` : getEditObjectUrl(collectionName, tableConfig.defaultModelBlock, t._id, `Edit ${docTitle}`)\r\n      }\r\n    }))\r\n  });\r\n\r\n  return {\r\n    createNewModalJs: getEditObjectUrl(collectionName, tableConfig.defaultModelBlock, null, 'Add new document'),\r\n    niceTitle: tableConfig.title,\r\n    tree: children\r\n  }\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"data-table-tree px-2\" },\n    executeAppBlock(This.html, s),\n    executeAppBlock(NestedTree, { Id: \"NestedTreeDataTable\", Searchable: true, Tree: s.tree }),\n    executeAppBlock(This.script, data),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div id={data.Id} class=\"data-table-tree px-2\">\r\n      <This.html {...s}/>\r\n      <NestedTree Id=\"NestedTreeDataTable\" Searchable Tree={s.tree} />\r\n      <This.script {...data}/>\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Css": ".data-table-tree{\r\n  background-color: #1e1e1e;\r\n  height: 100vh;\r\n  width: 300px;\r\n  overflow: auto;\r\n}\r\n\r\n.panel--title {\r\n  text-transform: uppercase;\r\n  padding-top: 10px;\r\n  margin-bottom: 7px;\r\n  font-size: 12px;\r\n  color: #afafaf;\r\n}\r\n\r\n#NestedTreeDataTable input{\r\n color: #afafaf!important;\r\n}",
    "Html": "<p id=\"CREATE_NEW_OBJECT_XID\" class=\"panel--title\">\r\n\t${data.niceTitle || data.title}\r\n\t<i v-b-tooltip.right @click=\"${data.createNewModalJs}\"\r\n\t\ttitle=\"New object\" class=\"fa fa-plus float-right\" style=\"cursor:pointer\"></i>\r\n</p>",
    "Script": "const m = new MarsBlock('XID', { ...data, methods: [{ name: 'deleteObject', block: 'MongoDbCrud' }] },\r\n  {\r\n    async deleteObject(collectionName, objectId, modelName) {\r\n      try {\r\n        await this.api.deleteObject(collectionName, objectId, modelName)\r\n        MainNav1_VUE.$bvToast.toast(`Document has been deleted`, {\r\n          title: 'Success!',\r\n          autoHideDelay: 2000,\r\n          variant: 'success',\r\n          solid: true\r\n        })\r\n\r\n        await MongoCollectionTree1.api.reload()\r\n\r\n        return obj\r\n      } catch (e) {\r\n        MainNav1_VUE.$bvToast.toast(e.response.data, {\r\n          title: 'Error while deleting!',\r\n          autoHideDelay: 2000,\r\n          variant: 'danger',\r\n          solid: true\r\n        })\r\n        return e;\r\n      }\r\n\r\n    }\r\n  })\r\n\r\nnew MarsVue('CREATE_NEW_OBJECT_XID', {}, {})",
    "isSystem": true
  },
  {
    "_id": "5eea8c32e0656b40b4265a57",
    "Name": "UsersModel",
    "Title": "UsersModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "PropName": "users",
        "DataType": "array",
        "SubArgs": [
          {
            "PropName": "name",
            "DataType": "string"
          },
          {
            "PropName": "email",
            "DataType": "string"
          }
        ],
        "CollapseField": "name"
      }
    ],
    "DemoJsx": "export default <UsersModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(UsersModel, null);",
    "isSystem": true
  },
  {
    "_id": "5eea8e69e0656b40b4265a58",
    "Name": "MongoConfig",
    "Title": "MongoConfig",
    "Type": "settings",
    "Apps": [],
    "Folder": "data storage",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "collections",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "string",
            "PropName": "titleField"
          },
          {
            "DataType": "string",
            "PropName": "defaultModelBlock"
          },
          {
            "DataType": "boolean",
            "PropName": "includeToCmsToolbar",
            "RegExp": "",
            "Description": "Show in cms toolbar under \"create new\" section",
            "NullAllowed": true
          },
          {
            "DataType": "boolean",
            "PropName": "renderModel",
            "RegExp": "",
            "NullAllowed": true
          },
          {
            "DataType": "string",
            "PropName": "folder",
            "NullAllowed": true
          },
          {
            "DataType": "string",
            "PropName": "folderField",
            "NullAllowed": true
          }
        ],
        "CollapseField": "name",
        "Title": "Mongo Collections"
      }
    ],
    "DemoJsx": "export default <MongoConfig />",
    "DemoJsxTranspiled": "export default executeAppBlock(MongoConfig, null);",
    "Config": {
      "collections": [
        {
          "name": "users",
          "titleField": "name",
          "defaultModelBlock": "UserModel",
          "includeToCmsToolbar": false,
          "folder": "collections"
        },
        {
          "name": "blocks",
          "titleField": "Name",
          "defaultModelBlock": "BlockModel",
          "includeToCmsToolbar": false,
          "folder": "system"
        },
        {
          "name": "_deleted_documents",
          "titleField": "_id",
          "title": "Deleted documents",
          "defaultModelBlock": "DeletedDocumentModel",
          "includeToCmsToolbar": false,
          "folder": "system",
          "renderModel": true,
          "folderField": "_originalCollection"
        },
        {
          "name": "_increments",
          "titleField": "_id",
          "defaultModelBlock": "IncrementModel",
          "includeToCmsToolbar": false,
          "folder": "system"
        },
        {
          "name": "blog_posts",
          "titleField": "title",
          "defaultModelBlock": "BlogPostModel",
          "includeToCmsToolbar": true,
          "cmsTitle": "blog post",
          "folder": "collections"
        },
        {
          "name": "simple_pages",
          "titleField": "title",
          "defaultModelBlock": "SimplePageModel",
          "includeToCmsToolbar": true,
          "cmsTitle": "page",
          "folder": "collections"
        },
        {
          "name": "_assets_images",
          "title": "images",
          "titleField": "name",
          "defaultModelBlock": "AssetImageModel",
          "folder": "assets",
          "renderModel": true
        },
        {
          "name": "_assets_files",
          "title": "files",
          "titleField": "name",
          "defaultModelBlock": "AssetFileModel",
          "folder": "assets",
          "renderModel": true
        }
      ]
    },
    "updatedAt": "2020-07-23T10:14:43.004Z",
    "isSystem": true
  },
  {
    "_id": "5eea96b7e0656b40b4265a59",
    "Name": "NavAppTree",
    "Title": "NavAppTree",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "DemoJsx": "Mars.render(<MarsIdeMasterPage url=\"someurl\" />);",
    "DemoJsxTranspiled": "Mars.render(executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" }));",
    "BlockFunction": "function getBlockIcon(blockType) {\r\n  return ''\r\n  if (blockType === 'model') return 'mars-icon json'; // fa fa-list-alt\r\n  if (blockType === 'page') return 'mars-icon page'; // fa fa-list-alt\r\n  if (blockType === 'app') return 'mars-icon app'; // fa fa-list-alt\r\n  if (blockType === 'settings') return 'mars-icon settings'; // fa fa-list-alt\r\n  if (!blockType || blockType === 'block' || blockType === '') return 'mars-icon module'; // fab fa-html5\r\n  if (blockType.includes('jsx')) return 'mars-icon box'; // fab fa-js-square\r\n  if (blockType === 'service') return 'mars-icon js'; //fab fa-node\r\n  if (blockType === 'prompter') return 'fab fa-searchengin';\r\n}\r\n\r\n\r\nfunction getChildren(str) {\r\n  if (!str) return []\r\n  const children = (str.match(/executeAppBlock*?(.*?),/g) || []).map(function (val) {\r\n    return val.replace('executeAppBlock(', '').replace(/\"/, '').replace(',', '').replace('(', '');\r\n  }).filter(t => t !== 'Block' && !t.includes('This.') && !t.includes('\"'));\r\n\r\n  return children.map(t => {\r\n    const b = Mars.allBlocks.find(tt => tt.Name === t);\r\n    const ch = {\r\n      name: t,\r\n      icon: b && b.Type ? getBlockIcon(b.Type) : '',\r\n      children: getChildren((b || {}).JsxTranspiled)\r\n    }\r\n    return ch.children.length > 0 ? ch : { name: t, icon: b && b.Type ? getBlockIcon(b.Type) : '' }\r\n  })\r\n}\r\n\r\nfunction server() {\r\n  const allPages = Mars.allBlocks.filter(t => !t.isSystem && t.Page && t.Page.settings && t.Type === 'page' && t.JsxTranspiled);\r\n  const tree = allPages.map(t => {\r\n    const ch = getChildren(t.JsxTranspiled);\r\n    return {\r\n      name: t.Page.settings.url,\r\n      icon: 'mars-icon page',\r\n      children: ch.length > 0 ? ch : [{ name: 'no children...' }]\r\n    }\r\n  })\r\n  return { tree }\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(NestedTree, { Id: \"NestedAppTree1\", Searchable: true, Tree: serverData.tree }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (<div>\r\n    <NestedTree Id=\"NestedAppTree1\" Searchable Tree={serverData.tree} />\r\n    <This.style />\r\n  </div>);\r\n}\r\nexport default Block();\r\n",
    "isSystem": true
  },
  {
    "_id": "5eeccf373e05752f440a8b73",
    "Name": "RenderFormByModel",
    "Title": "OldDataArgsForm",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "model editor/form",
    "DataArgs": [],
    "DemoJsx": "export default <RenderFormByModel Id=\"RenderDataByModel1\" objectId=\"5eb35ce51315ae64b9e03189\" path=\"DataArgs\" collectionName=\"blocks\" modelName=\"Blockjsx3\"\r\n  iframeUrl=\"/mars/edit-data-args/Blockjsx3\" />",
    "DemoJsxTranspiled": "export default executeAppBlock(RenderFormByModel, { Id: \"RenderDataByModel1\", objectId: \"5eb35ce51315ae64b9e03189\", path: \"DataArgs\", collectionName: \"blocks\", modelName: \"Blockjsx3\",\n  iframeUrl: \"/mars/edit-data-args/Blockjsx3\" });",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\"iframe\", { id: \"iFrame1\", height: data.height || \"500px\", width: \"100%\", style: \"border:0;margin:0;padding:0\",\n    src: decodeURIComponent(data.iframeUrl) }),\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, data)\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nexport default <div>\r\n  <iframe id=\"iFrame1\" height={data.height || \"500px\"} width=\"100%\" style=\"border:0;margin:0;padding:0\"\r\n    src={decodeURIComponent(data.iframeUrl)} />\r\n  <This.html />\r\n  <This.script {...data} />\r\n</div>",
    "Script": "import '/api/MarsJs';\r\nnew MarsVue('XID', { methods: [{ name: 'saveObject', block: 'MongoDbCrud' }] },\r\n  {\r\n    methods: {\r\n      async saveObject(obj) {\r\n        console.log('obj', obj);\r\n        console.log('data', data);\r\n        try {\r\n          const r = await this.api.saveObject(data.collectionName, data.modelName, obj, data.path, data.objectId)\r\n\r\n          if (this.$bvToast)\r\n            this.$bvToast.toast(`Data has been saved`, {\r\n              title: 'Success!',\r\n              autoHideDelay: 2000,\r\n              variant: 'success',\r\n              solid: true\r\n            })\r\n          else alert(`Data has been saved`)\r\n\r\n          if (window['MongoCollectionTree1']) await MongoCollectionTree1.api.reload()\r\n\r\n          if (r.evalJs) eval(r.evalJs)\r\n          return obj\r\n        } catch (e) {\r\n          if (this.$bvToast)\r\n            this.$bvToast.toast(e.response ? e.response.data : e, {\r\n              title: 'Error while saving!',\r\n              autoHideDelay: 2000,\r\n              variant: 'danger',\r\n              solid: true\r\n            })\r\n          else alert(e.response ? e.response.data : e)\r\n          return e;\r\n        }\r\n\r\n      }\r\n    }\r\n  })",
    "BlockFunction": "",
    "Html": "<div id=\"XID\"></div>",
    "isSystem": true
  },
  {
    "_id": "5eed036ff254950008a30cb5",
    "Name": "GetModelAndData",
    "Title": "GetModelAndData",
    "Type": "service",
    "Apps": [],
    "Folder": "model editor",
    "DataArgs": [],
    "DemoJsx": "export default <GetModelAndData />",
    "DemoJsxTranspiled": "export default executeAppBlock(GetModelAndData, null);",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nasync function server() {\r\n  const dbClient = await Mars.mongoDb;\r\n\r\n  //const data = await dbClient.collection(collectionName).findOne({ _id: new ObjectID(objectId) });\r\n  //const dateBasedOnPath = jsonPath && jsonPath !== 'root' ? _.get(data, jsonPath) : data;\r\n\r\n  const model = Mars.allBlocks.find(t => t.Name === data.modelName)\r\n\r\n  const cleanedData = _.pickBy(data.blockData || {}, (value, key) => model.DataArgs.some(t => t.PropName === key));\r\n\r\n  const results = {\r\n    Data: cleanedData,\r\n    Model: {\r\n      _id: model._id,\r\n      Name: model.Name,\r\n      DataArgs: model.DataArgs\r\n    },\r\n    EditPageTitle: `Edit ${data.modelName}`\r\n  };\r\n\r\n  return results;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eee0bc1770d5f217069a70d",
    "Name": "FormRenderPage",
    "Title": "OldDataFormAngular",
    "Type": "page",
    "Apps": [],
    "Folder": "model editor/form",
    "DataArgs": [],
    "DemoJsx": "export default <OldDataFormAngular />",
    "DemoJsxTranspiled": "export default executeAppBlock(OldDataFormAngular, null);",
    "Html": "<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n\t<meta charset=\"utf-8\">\r\n\t<base href=\"/\" />\r\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,maximum-scale=5\" />\r\n\t<meta name=\"theme-color\" content=\"#a044aaff\" />\r\n\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\r\n\t<script src=\"https://ajax.googleapis.com/ajax/libs/angularjs/1.7.5/angular.min.js\" defer></script>\r\n\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js\"></script>\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/css/theme.min.css\">\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/custom.min.css?v=40\">\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/app-theme/styles.css?v=13\">\r\n\r\n\t<style>\r\n\t\tbutton,\r\n\t\ta {\r\n\t\t\tcursor: pointer !important;\r\n\t\t}\r\n\r\n\t\t[ng\\:cloak],\r\n\t\t[ng-cloak],\r\n\t\t[data-ng-cloak],\r\n\t\t[x-ng-cloak],\r\n\t\t.ng-cloak,\r\n\t\t.x-ng-cloak,\r\n\t\t[v-cloak] {\r\n\t\t\tdisplay: none !important;\r\n\t\t}\r\n\t</style>\r\n\r\n</head>\r\n<script class=\"pagePropsScript\" type=\"text/javascript\">\r\n\twindow.setPageProps = function() {\r\n      window.pageProps = {\r\n        Style: {\r\n          \"Background\": {\r\n            \"Size\": \"\",\r\n            \"Attachment\": \"\",\r\n            \"VerticalAligment\": \"\",\r\n            \"HorizontalAligment\": \"\",\r\n            \"Color\": \"\",\r\n            \"Image\": \"\"\r\n          }\r\n        }\r\n      };\r\n      window.appStyles = {\r\n        \"FontFamilies\": [{\r\n          \"Title\": \"Serif\",\r\n          \"FontFamily\": \"serif\",\r\n          \"Id\": \"serif\"\r\n        }, {\r\n          \"Title\": \"Sans-serif\",\r\n          \"FontFamily\": \"sans-serif\",\r\n          \"Id\": \"sans-serif\"\r\n        }, {\r\n          \"Title\": \"Monospace\",\r\n          \"FontFamily\": \"monospace\",\r\n          \"Id\": \"monospace\"\r\n        }, {\r\n          \"Title\": \"Cursive\",\r\n          \"FontFamily\": \"cursive\",\r\n          \"Id\": \"cursive\"\r\n        }, {\r\n          \"Title\": \"Fantasy\",\r\n          \"FontFamily\": \"fantasy\",\r\n          \"Id\": \"fantasy\"\r\n        }, {\r\n          \"Title\": \"System-ui\",\r\n          \"FontFamily\": \"system-ui\",\r\n          \"Id\": \"system-ui\"\r\n        }],\r\n        \"Shadow\": {\r\n          \"Color\": \"rgba(0, 0, 0, 0.125)\",\r\n          \"Blur\": \"35\",\r\n          \"HorizontalOffset\": \"0\",\r\n          \"VerticalOffset\": \"0\"\r\n        },\r\n        \"Border\": {\r\n          \"Width\": \"1\",\r\n          \"Style\": \"solid\",\r\n          \"Radius\": \"8\",\r\n          \"Color\": \"#e7eaf3\"\r\n        },\r\n        \"TextSizes\": {\r\n          \"1\": \"14px\",\r\n          \"2\": \"16px\",\r\n          \"3\": \"18px\",\r\n          \"4\": \"26px\",\r\n          \"5\": \"36px\",\r\n          \"6\": \"45px\",\r\n          \"7\": \"60px\"\r\n        },\r\n        \"SpacingList\": [{\r\n          \"Id\": \"0\",\r\n          \"Title\": \"0\",\r\n          \"Web\": \"0\"\r\n        }, {\r\n          \"Id\": \"1\",\r\n          \"Title\": \"1\",\r\n          \"Web\": \"0.5rem\"\r\n        }, {\r\n          \"Id\": \"2\",\r\n          \"Title\": \"2\",\r\n          \"Web\": \"1rem\"\r\n        }, {\r\n          \"Id\": \"3\",\r\n          \"Title\": \"3\",\r\n          \"Web\": \"1.5rem\"\r\n        }, {\r\n          \"Id\": \"4\",\r\n          \"Title\": \"4\",\r\n          \"Web\": \"2rem\"\r\n        }, {\r\n          \"Id\": \"5\",\r\n          \"Title\": \"5\",\r\n          \"Web\": \"2.5rem\"\r\n        }],\r\n        \"ColorList\": [{\r\n          \"Id\": \"primary\",\r\n          \"Title\": \"primary\",\r\n          \"Web\": \"#a044aaff\"\r\n        }, {\r\n          \"Id\": \"secondary\",\r\n          \"Title\": \"secondary\",\r\n          \"Web\": \"#4eab5fff\"\r\n        }, {\r\n          \"Id\": \"danger\",\r\n          \"Title\": \"danger\",\r\n          \"Web\": \"#ea4242ff\"\r\n        }, {\r\n          \"Id\": \"warning\",\r\n          \"Title\": \"warning\",\r\n          \"Web\": \"#faad14ff\"\r\n        }, {\r\n          \"Id\": \"link\",\r\n          \"Title\": \"link\",\r\n          \"Web\": \"#43484dff\"\r\n        }, {\r\n          \"Id\": \"black\",\r\n          \"Title\": \"black\",\r\n          \"Web\": \"#000000ff\"\r\n        }, {\r\n          \"Id\": \"strong\",\r\n          \"Title\": \"strong\",\r\n          \"Web\": \"#000000ff\"\r\n        }, {\r\n          \"Id\": \"default\",\r\n          \"Title\": \"default\",\r\n          \"Web\": \"#55636eff\"\r\n        }, {\r\n          \"Id\": \"muted\",\r\n          \"Title\": \"muted\",\r\n          \"Web\": \"#8a8a8aff\"\r\n        }, {\r\n          \"Id\": \"light\",\r\n          \"Title\": \"light\",\r\n          \"Web\": \"#ccccccff\"\r\n        }, {\r\n          \"Id\": \"extra-light\",\r\n          \"Title\": \"extra-light\",\r\n          \"Web\": \"#fafafaff\"\r\n        }, {\r\n          \"Id\": \"white\",\r\n          \"Title\": \"white\",\r\n          \"Web\": \"#ffffffff\"\r\n        }, {\r\n          \"Id\": \"strong-inverted\",\r\n          \"Title\": \"strong-inverted\",\r\n          \"Web\": \"#e1dfddff\"\r\n        }, {\r\n          \"Id\": \"default-inverted\",\r\n          \"Title\": \"default-inverted\",\r\n          \"Web\": \"#bbc1c7ff\"\r\n        }, {\r\n          \"Id\": \"muted-inverted\",\r\n          \"Title\": \"muted-inverted\",\r\n          \"Web\": \"#c5cbd1ff\"\r\n        }, {\r\n          \"Id\": \"light-inverted\",\r\n          \"Title\": \"light-inverted\",\r\n          \"Web\": \"#070605ff\"\r\n        }, {\r\n          \"Id\": \"extra-light-inverted\",\r\n          \"Title\": \"extra-light-inverted\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"transparent\",\r\n          \"Title\": \"transparent\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"soft-primary\",\r\n          \"Title\": \"soft-primary\",\r\n          \"Web\": \"#a044aa33\"\r\n        }, {\r\n          \"Id\": \"soft-secondary\",\r\n          \"Title\": \"soft-secondary\",\r\n          \"Web\": \"#4eab5f33\"\r\n        }, {\r\n          \"Id\": \"soft-danger\",\r\n          \"Title\": \"soft-danger\",\r\n          \"Web\": \"#ea424233\"\r\n        }, {\r\n          \"Id\": \"soft-warning\",\r\n          \"Title\": \"soft-warning\",\r\n          \"Web\": \"#faad1433\"\r\n        }, {\r\n          \"Id\": \"soft-link\",\r\n          \"Title\": \"soft-link\",\r\n          \"Web\": \"#43484d33\"\r\n        }, {\r\n          \"Id\": \"soft-black\",\r\n          \"Title\": \"soft-black\",\r\n          \"Web\": \"#00000033\"\r\n        }, {\r\n          \"Id\": \"soft-strong\",\r\n          \"Title\": \"soft-strong\",\r\n          \"Web\": \"#00000033\"\r\n        }, {\r\n          \"Id\": \"soft-default\",\r\n          \"Title\": \"soft-default\",\r\n          \"Web\": \"#55636e33\"\r\n        }, {\r\n          \"Id\": \"soft-muted\",\r\n          \"Title\": \"soft-muted\",\r\n          \"Web\": \"#8a8a8a33\"\r\n        }, {\r\n          \"Id\": \"soft-light\",\r\n          \"Title\": \"soft-light\",\r\n          \"Web\": \"#cccccc33\"\r\n        }, {\r\n          \"Id\": \"soft-extra-light\",\r\n          \"Title\": \"soft-extra-light\",\r\n          \"Web\": \"#fafafa33\"\r\n        }, {\r\n          \"Id\": \"soft-white\",\r\n          \"Title\": \"soft-white\",\r\n          \"Web\": \"#ffffff33\"\r\n        }, {\r\n          \"Id\": \"soft-strong-inverted\",\r\n          \"Title\": \"soft-strong-inverted\",\r\n          \"Web\": \"#e1dfdd33\"\r\n        }, {\r\n          \"Id\": \"soft-default-inverted\",\r\n          \"Title\": \"soft-default-inverted\",\r\n          \"Web\": \"#bbc1c733\"\r\n        }, {\r\n          \"Id\": \"soft-muted-inverted\",\r\n          \"Title\": \"soft-muted-inverted\",\r\n          \"Web\": \"#c5cbd133\"\r\n        }, {\r\n          \"Id\": \"soft-light-inverted\",\r\n          \"Title\": \"soft-light-inverted\",\r\n          \"Web\": \"#07060533\"\r\n        }, {\r\n          \"Title\": \"soft-primary\",\r\n          \"Id\": \"#a044aa33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"soft-secondary\",\r\n          \"Id\": \"#4eab5f33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"color-danger\",\r\n          \"Id\": \"#ea424233\",\r\n          \"Web\": \"\"\r\n        }],\r\n        \"ColumnWidth\": {\r\n          \"1\": \"1\",\r\n          \"2\": \"2\",\r\n          \"3\": \"3\",\r\n          \"4\": \"4\",\r\n          \"5\": \"5\",\r\n          \"6\": \"6\",\r\n          \"7\": \"7\",\r\n          \"8\": \"8\",\r\n          \"9\": \"9\",\r\n          \"10\": \"10\",\r\n          \"11\": \"11\",\r\n          \"Boxed\": \"12\",\r\n          \"FluidBoxed\": \"13\",\r\n          \"Fluid\": \"14\"\r\n        },\r\n        \"ColumnWidthMobile\": {\r\n          \"1\": \"1\",\r\n          \"2\": \"2\",\r\n          \"3\": \"3\",\r\n          \"4\": \"4\",\r\n          \"5\": \"5\",\r\n          \"6\": \"6\",\r\n          \"7\": \"7\",\r\n          \"8\": \"8\",\r\n          \"9\": \"9\",\r\n          \"10\": \"10\",\r\n          \"11\": \"11\",\r\n          \"FullWidth\": \"12\"\r\n        },\r\n        \"EmptyImageText\": \"\",\r\n        \"CustomColors\": [{\r\n          \"Title\": \"soft-primary\",\r\n          \"Id\": \"#a044aa33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"soft-secondary\",\r\n          \"Id\": \"#4eab5f33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"color-danger\",\r\n          \"Id\": \"#ea424233\",\r\n          \"Web\": \"\"\r\n        }],\r\n        \"FontSizes\": [{\r\n          \"Id\": \"1\",\r\n          \"Title\": \"1\",\r\n          \"Web\": \"14px\"\r\n        }, {\r\n          \"Id\": \"2\",\r\n          \"Title\": \"2\",\r\n          \"Web\": \"16px\"\r\n        }, {\r\n          \"Id\": \"3\",\r\n          \"Title\": \"3\",\r\n          \"Web\": \"18px\"\r\n        }, {\r\n          \"Id\": \"4\",\r\n          \"Title\": \"4\",\r\n          \"Web\": \"26px\"\r\n        }, {\r\n          \"Id\": \"5\",\r\n          \"Title\": \"5\",\r\n          \"Web\": \"36px\"\r\n        }, {\r\n          \"Id\": \"6\",\r\n          \"Title\": \"6\",\r\n          \"Web\": \"45px\"\r\n        }, {\r\n          \"Id\": \"7\",\r\n          \"Title\": \"7\",\r\n          \"Web\": \"60px\"\r\n        }],\r\n        \"NotTransformedColorList\": [{\r\n          \"Id\": \"primary\",\r\n          \"Title\": \"primary\",\r\n          \"Web\": \"#a044aa\"\r\n        }, {\r\n          \"Id\": \"secondary\",\r\n          \"Title\": \"secondary\",\r\n          \"Web\": \"#4eab5f\"\r\n        }, {\r\n          \"Id\": \"danger\",\r\n          \"Title\": \"danger\",\r\n          \"Web\": \"#ea4242\"\r\n        }, {\r\n          \"Id\": \"warning\",\r\n          \"Title\": \"warning\",\r\n          \"Web\": \"#faad14\"\r\n        }, {\r\n          \"Id\": \"link\",\r\n          \"Title\": \"link\",\r\n          \"Web\": \"#43484d\"\r\n        }, {\r\n          \"Id\": \"black\",\r\n          \"Title\": \"black\",\r\n          \"Web\": \"#000000\"\r\n        }, {\r\n          \"Id\": \"strong\",\r\n          \"Title\": \"strong\",\r\n          \"Web\": \"#000000\"\r\n        }, {\r\n          \"Id\": \"default\",\r\n          \"Title\": \"default\",\r\n          \"Web\": \"#55636e\"\r\n        }, {\r\n          \"Id\": \"muted\",\r\n          \"Title\": \"muted\",\r\n          \"Web\": \"#8a8a8a\"\r\n        }, {\r\n          \"Id\": \"light\",\r\n          \"Title\": \"light\",\r\n          \"Web\": \"#cccccc\"\r\n        }, {\r\n          \"Id\": \"extra-light\",\r\n          \"Title\": \"extra-light\",\r\n          \"Web\": \"#fafafa\"\r\n        }, {\r\n          \"Id\": \"white\",\r\n          \"Title\": \"white\",\r\n          \"Web\": \"#ffffff\"\r\n        }, {\r\n          \"Id\": \"strong-inverted\",\r\n          \"Title\": \"strong-inverted\",\r\n          \"Web\": \"#e1dfdd\"\r\n        }, {\r\n          \"Id\": \"default-inverted\",\r\n          \"Title\": \"default-inverted\",\r\n          \"Web\": \"#bbc1c7\"\r\n        }, {\r\n          \"Id\": \"muted-inverted\",\r\n          \"Title\": \"muted-inverted\",\r\n          \"Web\": \"#c5cbd1\"\r\n        }, {\r\n          \"Id\": \"light-inverted\",\r\n          \"Title\": \"light-inverted\",\r\n          \"Web\": \"#070605\"\r\n        }, {\r\n          \"Id\": \"extra-light-inverted\",\r\n          \"Title\": \"extra-light-inverted\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"transparent\",\r\n          \"Title\": \"transparent\",\r\n          \"Web\": \"\"\r\n        }]\r\n      };\r\n      window.APP = {\r\n        \"Name\": \"Holidada\",\r\n        \"CoreAppHeader\": \"holidada\",\r\n        \"EmailSettings\": {\r\n          \"SenderName\": \"Holidiada\",\r\n          \"CopyCC\": [{\r\n            \"Email\": \"rashid.lepshokov@gmail.com\"\r\n          }],\r\n          \"CopyBCC\": [{\r\n            \"Email\": \"rashid.lepshokov@gmail.com\"\r\n          }],\r\n          \"SenderAddress\": \"\"\r\n        },\r\n        \"ForceHttps\": false,\r\n        \"TimeFormat\": \"24\",\r\n        \"CacheSettings\": {\r\n          \"PageDefaultTtl\": \"300\",\r\n          \"StylesTtl\": \"300\",\r\n          \"PartialDefaultTtl\": \"300\"\r\n        },\r\n        \"AdsEnabled\": \"\",\r\n        \"Analytics\": {\r\n          \"GoogleAnalytics\": \"\",\r\n          \"MixpanelToken\": \"\"\r\n        },\r\n        \"RedirectToSubAppProgram\": \"\",\r\n        \"ScraperId\": \"\",\r\n        \"ShowRatings\": \"\",\r\n        \"TimeZone\": \"\",\r\n        \"FeaturedBlocks\": [{\r\n          \"Name\": \"text\",\r\n          \"Id\": \"5d13fcef6989a135152105d9\",\r\n          \"Icon\": \"fas fa-align-left\"\r\n        }, {\r\n          \"Name\": \"html\",\r\n          \"Id\": \"5d0fb8a397f29b1e667ccfcd\"\r\n        }, {\r\n          \"Name\": \"image\",\r\n          \"Id\": \"5d0f6ad557717620e679e16e\",\r\n          \"Icon\": \"far fa-image\"\r\n        }]\r\n      };\r\n      window.angularAppConstants = {\r\n        appStyle: window.appStyles,\r\n        recentFolderName: 'Recently used',\r\n        pageProps: pageProps,\r\n      };\r\n      window.pageTitle = \"Edit NestedTree\";\r\n      window.pageId = \"5eece9f81822a73a5c65afae\";\r\n      window.contentServiceApi = \"https://holidada-content-service-dev.azurewebsites.net\";\r\n      window.coreApiUrl = \"https://apidev.filmgrail.com\";\r\n      window.featuredBlocks = [{\r\n        \"Name\": \"text\",\r\n        \"Id\": \"5d13fcef6989a135152105d9\",\r\n        \"Icon\": \"fas fa-align-left\"\r\n      }, {\r\n        \"Name\": \"html\",\r\n        \"Id\": \"5d0fb8a397f29b1e667ccfcd\"\r\n      }, {\r\n        \"Name\": \"image\",\r\n        \"Id\": \"5d0f6ad557717620e679e16e\",\r\n        \"Icon\": \"far fa-image\"\r\n      }];\r\n      console.log('set page props page');\r\n    };\r\n    setPageProps();\r\n\r\n</script>\r\n<script>\r\n\tfunction getCookieByName(name) {\r\n      const pattern = RegExp(name + \"=.[^;]*\");\r\n      const matched = document.cookie.match(pattern);\r\n      if (matched) {\r\n        const cookie = matched[0].split('=');\r\n        return cookie[1];\r\n      }\r\n      return null;\r\n    }\r\n</script>\r\n<script>\r\n\twindow.fixSvgOnSafary = function() {\r\n    };\r\n</script>\r\n<script src=\"https://holidada-dev.azureedge.net/assets/dist/head.min.js?v=35\" defer></script>\r\n<script src=\"/assets/js/model-editor.js\" defer></script>\r\n\r\n<body class=\"undefined \" style=\" \">\r\n\t<div ng-app=\"app\">\r\n\t\t<main id=\"content\" role=\"main\">\r\n\t\t\t<div class=\"\">\r\n\t\t\t\t<script></script>\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"        col-12 col-md-12 page-block  \" style=\" \" data-column-width=\"12\"\r\n\t\t\t\t\t\tdata-content-group>\r\n\t\t\t\t\t\t<div style=\" \" class=\"  \">\r\n\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div data-block-id=\"5eecf0a71822a73a5c65afc4\" data-block-name=\"edit json mars3\"\r\n\t\t\t\t\t\t\t\t\t\tdata-id=\"5db17fbf6147d414d81f9069\" data-page-id=\"5eece9f81822a73a5c65afae\"\r\n\t\t\t\t\t\t\t\t\t\tdata-index=\"0\" class=\"        col-12 col-md-12 page-block  \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t<div style=\" \" class=\"  \">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"       d-none   col-12 col-md-12   \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div v-pre>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<style v-pre scoped type=\"text/css\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.blockCtrlData .bg-soft-dark {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbackground-color: rgba(115, 121, 126, 0.1) !important;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tborder-bottom: 1px solid #d7d7d7;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.blockCtrlData .form-group-custom {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-left: 1rem;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-right: 1rem;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.blockCtrlData .card-body .form-group-custom {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-left: 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpadding-right: 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</style>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-target-id=\"obj051592658913044\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-vue-id=\"obj051592658913044\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"        col-12 col-md-12   \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"angular blockCtrlData\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-controller=\"Ctrl35f7ba74-516d-410b-9b18-5984ea47f325 as blockCtrl\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-show=\"!blockCtrl.itemsLoaded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"row d-flex justify-content-center align-items-center text-secondary py-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"spinner-border\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"p-3\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"blockCtrl.keys(blockCtrl.currentBlock.Data).length === 0 && blockCtrl.itemsLoaded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-cloak>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tThere isn't data to edit\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<edit-json\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\targs-model=\"blockCtrl.currentBlock.Model.DataArgs\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\targs-data=\"blockCtrl.currentBlock.Data\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmethods=\"blockCtrl\"></edit-json>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Footer -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<footer\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"blockCtrl.keys(blockCtrl.currentBlock.Data).length !== 0 || (blockCtrl.keys(blockCtrl.currentBlock.Data).length === 0 && blockCtrl.itemsLoaded)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-hide=\"blockCtrl.currentBlock.MasterPageUrl\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"p-0 bg-white\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"z-index: 1;position:sticky;bottom: 0;margin:-1px\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-cloak>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary btn-block mt-3\" ng-class=\"{'rounded-0': !blockCtrl.displaySettings.RoundedButton}\" ng-click=\"blockCtrl.postBlock()\" ng-disabled=\"blockCtrl.isSaving || (blockCtrl.displaySettings.ValidateForm ? !blockCtrl.isFormValid(blockCtrl.currentBlock.Model.DataArgs, blockCtrl.currentBlock.Data) : false)\">\r\n                                      <i ng-show=\"blockCtrl.isSaving\" class=\"spinner-border mr-2\"></i>{{blockCtrl.displaySettings.ButtonTitle || 'Save'}}\r\n                                    </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</footer>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- IMAGES MODAL -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"chooseImageModal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"js-modal-window u-modal-window w-100 w-lg-80\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card rounded-xs-bottom-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-none d-md-block card-header bg-light py-3 px-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"h6 mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{blockCtrl.displaySettings.ImagesModalHeader || 'Select an image'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <span aria-hidden=\"true\">√ó</span>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- MOBILE modal header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-md-none mobile-modal-head card-header py-3 px-3 position-relative\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-center position-absolute\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"left: 0;top: 10px;right: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"modal-close-span\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 class=\"mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{blockCtrl.displaySettings.ImagesModalHeader || 'Select an image'}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <i class=\"fas fa-times-circle\"></i>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body position-relative\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"max-height: 500px; overflow-y: auto;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-show=\"blockCtrl.imagesLoading\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"modal-bg-loader d-flex justify-content-center align-items-center text-secondary\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"spinner-border\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex mb-1 px-3 text-primary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-hide=\"blockCtrl.displaySettings.HideAdminControlsOnImagesModal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n          class=\"cursor-pointer\"\r\n          ng-show=\"blockCtrl.displayingFolder.Name !== ''\"\r\n          ng-click=\"blockCtrl.openFolder(blockCtrl.displayingFolder.ParentFolder, true)\"\r\n        >\r\n          <i class=\"fas fa-chevron-left\"></i><span class=\"ml-2\">Back</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n            class=\"ml-auto cursor-pointer\"\r\n            ng-click=\"blockCtrl.showUploadModal('url')\"\r\n            ng-hide=\"blockCtrl.displayingFolder.Name === blockCtrl.constants.recentFolderName\"\r\n          >Upload new from URL</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n            class=\"ml-5 cursor-pointer\"\r\n            ng-click=\"blockCtrl.showUploadModal('disk')\"\r\n            ng-hide=\"blockCtrl.displayingFolder.Name === blockCtrl.constants.recentFolderName\"\r\n          >Upload new from disk</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-12 col-md-3 col-lg-2 text-center py-2 px-3 image-item\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-repeat=\"item in blockCtrl.displayingFolder.Values\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-style=\"{'background-color': blockCtrl.selectedItem.Index === $index ? '#d3eaf5' : ''}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-click=\"item.Type === 'folder' ? blockCtrl.selectImage($index) : blockCtrl.selectImage($index, true)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-dblclick=\"item.Type === 'folder' ? blockCtrl.openFolder(item.Name) : blockCtrl.setImage()\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"position-relative\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn crop-button text-white px-2 py-1 position-absolute top-0 right-0\" ng-show=\"item.Type !== 'folder' && !blockCtrl.displaySettings.HideAdminControlsOnImagesModal\" ng-click=\"blockCtrl.selectImage($index); blockCtrl.showCropDialog(); $event.stopPropagation()\">\r\n                                                <i class=\"fas fa-crop\"></i>\r\n                                              </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img ng-src=\"{{item.Value}}\" alt=\"\" ng-class=\"{'img-thumbnail': item.Type !== 'folder'}\" style=\"max-height: 200px\">\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"d-block\">{{item.DisplayName}}</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"d-block text-secondary\" ng-hide=\"blockCtrl.displaySettings.HideAdminControlsOnImagesModal\">{{item.User}}</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"d-block text-secondary\" ng-hide=\"blockCtrl.displaySettings.HideAdminControlsOnImagesModal\">{{item.CreatedSince}}</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-footer d-flex justify-content-end\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"position: sticky; bottom: 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary transition-3d-hover mr-1\" ng-click=\"blockCtrl.selectedItem.Type === 'folder' ? blockCtrl.openFolder(blockCtrl.selectedItem.Name) : blockCtrl.setImage()\" ng-disabled=\"!blockCtrl.keys(blockCtrl.selectedItem).length\">\r\n                                          {{ blockCtrl.displaySettings.ImagesModalConfirmButtonTitle\r\n\t\t  \t? blockCtrl.displaySettings.ImagesModalConfirmButtonTitle\r\n\t\t  \t: (blockCtrl.selectedItem.Type === 'folder' ? 'Open folder' : 'Confirm')}}\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-soft-secondary transition-3d-hover\" onclick=\"Custombox.modal.close();\">\r\n                                          {{ blockCtrl.displaySettings.ImagesModalCancelButtonTitle || 'Cancel' }}\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- IMAGES MODAL END -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- UPLOAD IMAGE MODAL -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"uploadImageModal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"js-modal-window u-modal-window w-100 w-lg-80\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card rounded-xs-bottom-0\" ng-form\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"imageForm\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-none d-md-block card-header bg-light py-3 px-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"h6 mb-0\">Upload an image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button id=\"closeUploadImageModalButton\" type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <span aria-hidden=\"true\">√ó</span>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- MOBILE modal header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-md-none mobile-modal-head card-header py-3 px-3 position-relative\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-center position-absolute\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"left: 0;top: 10px;right: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"modal-close-span\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 class=\"mb-0\">Upload an image\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h5>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <i class=\"fas fa-times-circle\"></i>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"min-height: 500px;\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"blockCtrl.uploadType === 'url'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"imageUrl\">Image url</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"imageUrl\" type=\"text\" class=\"form-control\" ng-model=\"blockCtrl.imageFile.Url\" ng-change=\"blockCtrl.getImageFromUrl()\">\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"position-relative\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-show=\"blockCtrl.uploadType === 'disk'\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"position-absolute d-flex justify-content-center align-items-center text-secondary w-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"background-color: rgba(255, 255, 255, 0.7); height: 40px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label id=\"uploadImageButton\" class=\"mb-0 p-2\" for=\"fileAttachmentBtn\">\r\n                                                  {{imageForm.file.$valid ? 'Change' : 'Choose file to upload' }}\r\n                                                  <input type=\"file\" ngf-select ng-model=\"blockCtrl.imageFile.File\" name=\"file\" id=\"fileAttachmentBtn\" class=\"file-attachment-btn__label cursor-pointer\" ng-change=\"blockCtrl.setDefaultImageName()\" required>\r\n                                                </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-hide=\"imageForm.file.$valid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-100 bg-secondary d-flex justify-content-center align-items-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"height: 400px\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"h3\">Your image</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img ng-show=\"imageForm.file.$valid\" ngf-thumbnail=\"blockCtrl.imageFile.File\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-show=\"imageForm.file.$valid\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"position-absolute\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"bottom: 3px; right: 3px\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn-primary px-2 py-1\" ng-click=\"blockCtrl.showCropDialog(imageForm.file.$modelValue)\"><i class=\"fas fa-crop\"></i>\r\n                                                </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-4 pl-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"imageName\">Image name</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"imageName\" type=\"text\" class=\"form-control\" ng-model=\"blockCtrl.imageFile.Name\" required>\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n              ng-click=\"blockCtrl.showFolderInput = !blockCtrl.showFolderInput; blockCtrl.imageFile.Folder = ''\"\r\n              class=\"text-primary cursor-pointer\"\r\n            >\r\n            <span ng-show=\"!blockCtrl.showFolderInput\">\r\n              <i class=\"fas fa-plus-circle\"></i> Add new folder to existing\r\n            </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show=\"blockCtrl.showFolderInput\">\r\n              <i class=\"fas fa-minus-circle\"></i> Cancel folder adding\r\n            </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"blockCtrl.showFolderInput\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"imageFolder\">Image folder</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"imageFolder\" type=\"text\" class=\"form-control\" ng-model=\"blockCtrl.imageFile.Folder\">\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card-footer d-flex justify-content-end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary transition-3d-hover mr-1\" ng-disabled=\"!imageForm.$valid || blockCtrl.imageUploading\" ng-click=\"blockCtrl.uploadImage()\">\r\n                                          <i ng-show=\"blockCtrl.imageUploading\" class=\"spinner-border mr-2\"></i>Upload\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-soft-secondary transition-3d-hover\" onclick=\"Custombox.modal.close();\">\r\n                                          Cancel\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- UPLOAD IMAGE MODAL END -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- CROP IMAGE MODAL -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"cropImageModal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"js-modal-window u-modal-window w-100 w-lg-80\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card rounded-xs-bottom-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-none d-md-block card-header bg-light py-3 px-5\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"h6 mb-0\">Crop\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tan image</h3>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\" ng-click=\"blockCtrl.hideCropper()\">\r\n                                            <span aria-hidden=\"true\">√ó</span>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- MOBILE modal header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-md-none mobile-modal-head card-header py-3 px-3 position-relative\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-center position-absolute\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"left: 0;top: 10px;right: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"modal-close-span\"></span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h5 class=\"mb-0\">Crop an\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\timage</h5>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\" ng-click=\"blockCtrl.hideCropper()\">\r\n                                            <i class=\"fas fa-times-circle\"></i>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"min-height: 500px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row d-flex\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"col-8\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<img class=\"mw-100\" ng-src=\"{{blockCtrl.cropped.url}}\" ng-cropper ng-cropper-show=\"blockCtrl.showEvent\" ng-cropper-hide=\"blockCtrl.hideEvent\" ng-cropper-options=\"blockCtrl.cropOptions\">\r\n                                          </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"col-4 pl-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"small\" for=\"cropImageWidth\">Image width</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"cropImageWidth\" type=\"text\" class=\"form-control form-control-xs\" ng-model=\"blockCtrl.cropped.size.Width\" disabled>\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"small\" for=\"cropImageHeight\">Image height</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"cropImageHeight\" type=\"text\" class=\"form-control form-control-xs\" ng-model=\"blockCtrl.cropped.size.Height\" disabled>\r\n                                            </div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"small\" for=\"cropImageHeight\">Aspect ratio</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control form-control-xs\" ng-model=\"blockCtrl.cropAspectRatio\" ng-change=\"blockCtrl.changeImageAspectRatio(blockCtrl.cropAspectRatio.split(':')[0], blockCtrl.cropAspectRatio.split(':')[1])\">\r\n                                                <option value=\"\">Custom</option>\r\n                                                <option value=\"1:1\">Square (1:1)</option>\r\n                                                <option value=\"4:3\">Rectangle (4:3)</option>\r\n                                                <option value=\"1920:550\">Slider (1920:550)</option>\r\n                                                <option value=\"4:6\">Poster (4:6)</option>\r\n                                                <option value=\"16:9\">Backdrop (16:9)</option>\r\n                                              </select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"small\" for=\"cropImageName\">Image name</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"cropImageName\" type=\"text\" class=\"form-control form-control-xs\" ng-model=\"blockCtrl.imageFile.Name\">\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n              ng-click=\"blockCtrl.showFolderInput = !blockCtrl.showFolderInput; blockCtrl.imageFile.Folder = ''\"\r\n              class=\"text-primary small cursor-pointer\"\r\n            >\r\n            <span ng-show=\"!blockCtrl.showFolderInput\">\r\n              <i class=\"fas fa-plus-circle\"></i> Add new folder to existing\r\n            </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ng-show=\"blockCtrl.showFolderInput\">\r\n              <i class=\"fas fa-minus-circle\"></i> Cancel folder adding\r\n            </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"blockCtrl.showFolderInput\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"small\" for=\"cropImageFolder\">Image folder</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input id=\"cropImageFolder\" type=\"text\" class=\"form-control form-control-xs\" ng-model=\"blockCtrl.imageFile.Folder\">\r\n                                            </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card-footer d-flex justify-content-end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary transition-3d-hover mr-1\" ng-click=\"blockCtrl.cropImage()\">\r\n                                          <i ng-show=\"blockCtrl.imageUploading\" class=\"spinner-border mr-2\"></i>Save as new image\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button ng-click=\"blockCtrl.hideCropper()\" type=\"button\" class=\"btn btn-sm btn-soft-secondary transition-3d-hover\" onclick=\"Custombox.modal.close();\">\r\n                                          Cancel\r\n                                        </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- CROP IMAGE MODAL END -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"        col-12 col-md-12   \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script v-pre>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(window).on('DOMContentLoaded DOMContentLoadedAsync', function() {\r\n                                    (function() {\r\n                                      var PageBlockId = '5db17fbf6147d414d81f9069';\r\n                                      var data = JSON.parse(decodeURIComponent(\"*data*\"));\r\n                                      let blockAngularApp = (window.appExternal || app);\r\n                                      //blockAngularApp.config(textAngularConfigFunction);  // todo: use it when sidebar will be deleted from project code\r\n                                      blockAngularApp.config(['$httpProvider', function($httpProvider) {\r\n                                        $httpProvider.defaults.headers.common['Token'] = data.Token;\r\n                                      }]);\r\n\r\n                                      blockAngularApp.factory('helpersFactory', helpersFactoryFunction);\r\n\r\n                                      const controllerFunction = new Function('$document', '$scope', '$rootScope', '$http', '$timeout', '$q', 'helpersFactory', 'Upload', 'Cropper', blockCtrlFunction.toString().replace(/[a-zA-z$,() ]+{/, '').slice(0, -1));\r\n                                      blockAngularApp.controller('Ctrl35f7ba74-516d-410b-9b18-5984ea47f325', ['$document', '$scope', '$rootScope', '$http', '$timeout', '$q', 'helpersFactory', 'Upload', 'Cropper',\r\n                                        controllerFunction,\r\n                                        //blockCtrlFunction\r\n                                      ]);\r\n\r\n                                      if (!window.addedDirectives) window.addedDirectives = [];\r\n                                      if (window.addedDirectives.indexOf('editJson') === -1) {\r\n                                        // prevention of multiple directive settings \r\n                                        window.addedDirectives.push('editJson');\r\n\r\n                                        blockAngularApp.directive('editJson', function() {\r\n                                          return {\r\n                                            restrict: 'E',\r\n                                            scope: {\r\n                                              argsModel: '=',\r\n                                              argsData: '=',\r\n                                              argsDataArray: \"=\",\r\n                                              argsPropertyName: \"=\",\r\n                                              index: \"=\",\r\n                                              collapseField: '=',\r\n                                              methods: '=',\r\n                                            },\r\n                                            template: `\r\n      <div ng-attr-id=\"{{ (argsPropertyName || '').split(' ').join('') + '-PropertyInnerCollapse-' + index }}\" ng-init=\"isCollapseOpen = false\">\r\n        <div class=\"card mb-2\" ng-if=\"argsDataArray\">\r\n          <div\r\n            ng-if=\"collapseField\"\r\n            class=\"card-header card-collapse\"\r\n            ng-attr-id=\"{{ (argsPropertyName || '').split(' ').join('') + '-innerHeading-' + index }}\"\r\n          >\r\n            <div class=\"d-flex justify-content-between align-items-center position-relative\">  <!-- collapce header -->\r\n              <button\r\n                type=\"button\"\r\n                class=\"btn btn-link btn-block d-flex card-btn py-2 px-3 border-0 collapsed\"\r\n                data-toggle=\"collapse\"\r\n                data-target=\"#{{(argsPropertyName || '').split(' ').join('')}}-subArgCollapse-{{index}}\"\r\n                aria-expanded=\"false\"\r\n                aria-controls=\"(argsPropertyName || '').split(' ').join('')-subArgCollapse-{{index}}\"\r\n\t\t\t\tng-click=\"isCollapseOpen = !isCollapseOpen\"\r\n              >\r\n                <span class=\"accordion-icons text-secondary align-self-center mr-2\">\r\n                  <span class=\"accordion-icon-minus fas fa-minus\"></span>\r\n                  <span class=\"accordion-icon-plus fas fa-plus\"></span>\r\n                </span>\r\n\r\n                {{methods.getCollapseFieldValue(argsDataArray[index][collapseField], collapseField, argsModel)}}\r\n\r\n              </button>\r\n              <div class=\"p-3 position-absolute\" style=\"right: 0\">\r\n                <small>\r\n\t\t\t\t  <a\r\n\t\t\t\t\t\r\n\t\t\t\t\tng-click=\"methods.deleteSubArg(argsDataArray, index)\"\r\n\t\t\t\t\tclass=\"text-danger mr-1\"\r\n\t\t\t\t\tng-show=\"isCollapseOpen\"\r\n\t\t\t\t  >\r\n\t\t\t\t\t<i class=\"far fa-trash-alt\"></i> {{methods.displaySettings.RemoveButtonTitle || 'Remove'}}\r\n\t\t\t\t  </a>\r\n                  <a\r\n                    ng-if=\"argsDataArray.length > 1 && index !== 0\"\r\n                    ng-click=\"methods.moveSubArgUp(argsDataArray, index)\"\r\n                    class=\"mr-1\"\r\n                  >\r\n                    <i class=\"fas fa-arrow-up\"></i>\r\n                  </a>\r\n                  <a\r\n                    ng-if=\"argsDataArray.length > 1 && index !== argsDataArray.length - 1\"\r\n                    ng-click=\"methods.moveSubArgDown(argsDataArray, index)\"\r\n\t\t\t\t\tclass=\"mr-1\"\r\n                   >\r\n                    <i class=\"fas fa-arrow-down\"></i>\r\n                  </a>\r\n                </small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            ng-attr-id=\"{{ (argsPropertyName || '').split(' ').join('') + '-subArgCollapse-' + index }}\"\r\n            ng-class=\"{'collapse': collapseField}\"\r\n            aria-labelledby=\"{{(argsPropertyName || '').split(' ').join('')}}-innerHeading-{{index}}\"\r\n            data-parent=\"#{{(argsPropertyName || '').split(' ').join('') + '-PropertyInnerCollapse-' + index}}\"\r\n          >\r\n            <div class=\"card-body\">\r\n              <small ng-if=\"!collapseField\" class=\"d-block text-right pr-3\">\r\n                <a\r\n                  ng-if=\"index !== 0\"\r\n                  ng-click=\"methods.moveSubArgUp(argsDataArray, index)\"\r\n                  class=\"mr-1\"\r\n                >\r\n                  <i class=\"fas fa-arrow-up\"></i> Move up\r\n                </a>\r\n                <a\r\n                  ng-if=\"index !== argsDataArray.length - 1\"\r\n                  ng-click=\"methods.moveSubArgDown(argsDataArray, index)\"\r\n                  class=\"mr-1\"\r\n                 >\r\n                  <i class=\"fas fa-arrow-down\"></i> Move down\r\n                </a>\r\n                <a\r\n                         ng-click=\"methods.deleteSubArg(argsDataArray, index)\"\r\n                  class=\"text-danger\"\r\n\t\t\t\t  class=\"mr-1\"\r\n                >\r\n                  <i class=\"far fa-trash-alt\"></i> Remove\r\n                </a>\r\n              </small>\r\n\r\n              <member ng-repeat=\"member in argsModel\" member-model=\"member\" member-data=\"argsData\" methods=\"methods\"></member>\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <member ng-if=\"!argsDataArray\" ng-repeat=\"member in argsModel\" member-model=\"member\" member-data=\"argsData\" methods=\"methods\"></member>\r\n      `,\r\n                                          };\r\n                                        });\r\n                                      }\r\n\r\n                                      if (window.addedDirectives.indexOf('member') === -1) {\r\n                                        // prevention of multiple directive settings \r\n                                        window.addedDirectives.push('member');\r\n\r\n                                        blockAngularApp.directive('member', function($compile) {\r\n                                          return {\r\n                                            restrict: 'E',\r\n                                            scope: {\r\n                                              memberModel: '=',\r\n                                              memberData: '=',\r\n                                              methods: '=',\r\n                                            },\r\n                                            link: function(scope, element, attrs) {\r\n                                              let collectionSt;\r\n                                              if (scope.memberModel.SubArgs && scope.memberModel.SubArgs.length) {\r\n                                                scope.argsData = scope.memberData[scope.memberModel.PropName];\r\n\r\n                                                /* this approach 'memberData[memberModel.PropName]' is used for two-way binding with really deep nesting */\r\n                                                scope.nowPostfix = Date.now();\r\n                                                collectionSt = `\r\n            <!-- Basics Accordion -->\r\n            <div\r\n              id=\"{{memberModel.PropName.split(' ').join('')}}-{{nowPostfix}}\"\r\n              ng-show=\"methods.isVisible(memberModel) && methods.isSectionVisible(memberModel.SubArgs)\"\r\n            >\r\n              <!-- Card -->\r\n              <div class=\"card\">\r\n                <div class=\"card-header card-collapse\" id=\"basicsHeadingOne\">\r\n                  <h5 class=\"mb-0\">\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-link btn-block d-flex card-btn py-2 px-3 border-0 collapsed\"\r\n                      data-toggle=\"collapse\"\r\n                      data-target=\"#collapse-body-{{memberModel.PropName.split(' ').join('')}}-{{nowPostfix}}\"\r\n                      aria-expanded=\"false\"\r\n                      aria-controls=\"collapse-body-{{memberModel.PropName.split(' ').join('')}}-{{nowPostfix}}\">\r\n\r\n                      <span class=\"accordion-icons text-secondary align-self-center mr-2\">\r\n                        <span class=\"accordion-icon-minus fas fa-minus\"></span>\r\n                        <span class=\"accordion-icon-plus fas fa-plus\"></span>\r\n                      </span>\r\n\r\n                      {{ memberModel.Title || memberModel.PropName }}\r\n\r\n                    </button>\r\n                  </h5>\r\n                </div>\r\n                <div\r\n                  id=\"collapse-body-{{memberModel.PropName.split(' ').join('')}}-{{nowPostfix}}\"\r\n                  class=\"collapse\"\r\n                  aria-labelledby=\"basicsHeadingOne\"\r\n                  data-parent=\"#{{memberModel.PropName.split(' ').join('')}}-{{nowPostfix}}\">\r\n                  <div class=\"card-body\" style=\"background-color: #ececec;\">\r\n\r\n                    ${scope.memberModel.DataType === 'object'\r\n\t\t\t\t\t  ? `\r\n\t\t\t\t\t\t   <edit-json\r\n\t\t\t\t\t\t\t args-model=\"memberModel.SubArgs\"\r\n\t\t\t\t\t\t\t args-data=\"argsData\"\r\n\t\t\t\t\t\t\t methods=\"methods\"\r\n\t\t\t\t\t\t\t>\r\n                           </edit-json>\r\n\t\t\t\t\t\t \r\n\t\t\t\t\t\t`\r\n                      : `\r\n\t\t\t\t\t\t   <edit-json\r\n\t\t\t\t\t\t\t ng-repeat=\"data in argsData\"\r\n\t\t\t\t\t\t\t args-model=\"memberModel.SubArgs\"\r\n\t\t\t\t\t\t\t args-data=\"data\"\r\n\t\t\t\t\t\t\t args-data-array=\"argsData\"\r\n\t\t\t\t\t\t\t args-property-name=\"memberModel.PropName\"\r\n\t\t\t\t\t\t\t index=\"$index\"\r\n\t\t\t\t\t\t\t methods=\"methods\"\r\n\t\t\t\t\t\t\t collapse-field=\"memberModel.CollapseField\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t   </edit-json>\r\n\t\t\t\t\t\t   <a\r\n\t\t\t\r\n\t\t\t\t\t\t\t ng-click=\"methods.addSubArg(argsData, memberModel.SubArgs, memberModel.PropName)\">\r\n\t\t\t\t\t\t\t <small><i class=\"fas fa-plus-circle\"></i> {{methods.displaySettings.AddButtonTitle || 'Add'}}</small>\r\n\t\t\t\t\t\t   </a>\r\n\t\t\t\t\t\t `\r\n                    }\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <!-- End Card -->\r\n            </div>\r\n            <!-- End Basics Accordion -->\r\n          `;\r\n                                              } else {\r\n                                                /* adding custom value to options if it doesn't exist */\r\n                                                if (scope.memberModel.Options) {\r\n                                                  scope.memberModel.OptionsList = [];\r\n                                                  if (scope.memberModel.Options) {\r\n                                                    if (angular.isArray(scope.memberModel.Options)) {\r\n                                                      scope.memberModel.OptionsList = scope.methods.getOptions(scope.memberModel.Options, scope.memberData[scope.memberModel.PropName], scope.memberModel.UseUrlParams);\r\n                                                    } else {\r\n                                                      /* generate url if there are any url params */\r\n                                                      scope.memberModel.Options = scope.methods.generateOptionsUrl(scope.memberModel.Options);\r\n\r\n                                                      /* preventing of request error if the page is a draft and there are any url params with ':' */\r\n                                                      if (scope.memberModel.Options.includes(':')) {\r\n                                                        scope.memberModel.OptionsList = [];\r\n                                                      } else {\r\n                                                        scope.methods.getOptionsFromUrl(scope.memberModel.Options, scope.memberData[scope.memberModel.PropName], scope.memberModel.UseUrlParams)\r\n                                                          .then(function(options) {\r\n                                                            scope.memberModel.OptionsList = options;\r\n                                                          })\r\n                                                          .catch(function(err) {\r\n                                                            console.error(err);\r\n                                                            alert('Failed to load options. Try reloading the page.');\r\n                                                          });\r\n                                                      }\r\n                                                    }\r\n                                                  }\r\n                                                }\r\n\r\n                                                collectionSt = `\r\n            <div\r\n              class=\"form-group form-group-custom pt-2\"\r\n              ng-show=\"methods.isVisible(memberModel)\"\r\n            >\r\n              <label for=\"prop-{{memberModel.PropName.split(' ').join('')}}\" class=\"form-label font-weight-semi-bold\">\r\n                {{memberModel.Title || memberModel.PropName}} <span ng-hide=\"methods.displaySettings.HideObjectType\">({{memberModel.DataType}})</span><span ng-show=\"!memberModel.NullAllowed\" class=\"text-danger\">*</span>\r\n              </label>\r\n              <div\r\n                class=\"row d-flex align-items-center\"\r\n                ng-if=\"memberModel.Options && memberModel.DataType !== 'image'\"\r\n              >\r\n\r\n                <div\r\n                  ng-if=\"memberModel.DataType === 'color' && memberData[memberModel.PropName]\"\r\n                  class=\"img-dropdown-thumbnail-container\"\r\n                >\r\n                  <img\r\n                    ng-src=\"{{memberModel.DataType === 'color' ? methods.getUrl(memberData[memberModel.PropName], memberModel.OptionsList) : memberData[memberModel.PropName]}}\"\r\n                    class=\"img-dropdown-thumbnail\"\r\n                    style=\"border: solid 1px #dadada; border-radius: 3px;\"\r\n                    alt=\"\"\r\n                  >\r\n                </div>\r\n\r\n                <div\r\n                  ng-class=\"{ 'img-dropdown-container': memberModel.DataType === 'color' && memberData[memberModel.PropName], 'w-100': memberModel.DataType !== 'color' || !memberData[memberModel.PropName] }\"\r\n                >\r\n                  <ui-select\r\n                    ng-if=\"!memberModel.AllowMultipleSelect\"\r\n                    ng-model=\"memberData[memberModel.PropName]\"\r\n                    theme=\"bootstrap\"\r\n                    style=\"width: 100%;\"\r\n                    id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                    name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                    class=\"{{memberModel.PropName.split(' ').join('')}}-select selectpicker\"\r\n                    ng-disabled=\"memberModel.ReadOnly\"\r\n                  >\r\n                    <ui-select-match class=\"overflow-hidden\" allow-clear=\"true\">\r\n                      <span\r\n                        style=\"padding-right: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\">\r\n                        {{ $select.selected.Key }}\r\n                      </span>\r\n                    </ui-select-match>\r\n                    <ui-select-choices\r\n                      repeat=\"option.Value as option in (memberModel.OptionsList | filter: $select.search)\"\r\n                      refresh=\"memberModel.restrictEnterCustom ? '' : methods.refreshResults($select)\"\r\n                      refresh-delay=\"0\"\r\n                    >\r\n                      <span ng-bind=\"option.Key\"></span>\r\n                    </ui-select-choices>\r\n                  </ui-select>\r\n\r\n                  <!-- I have to duplicate selectors blocks because ui-select isn't able to set attr multiple conditionally -->\r\n\r\n                  <ui-select\r\n                    ng-if=\"memberModel.AllowMultipleSelect\"\r\n                    multiple\r\n                    tagging=\"memberModel.restrictEnterCustom ? '' : methods.refreshResultsMultiple\"\r\n                    close-on-select=\"false\"\r\n                    ng-model=\"memberData[memberModel.PropName]\"\r\n                    theme=\"bootstrap\"\r\n                    id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                    name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                    class=\"{{memberModel.PropName.split(' ').join('')}}-select selectpicker\"\r\n                    ng-disabled=\"memberModel.ReadOnly\"\r\n                  >\r\n                    <ui-select-match class=\"overflow-hidden\" allow-clear=\"true\">\r\n                      <span>{{$item.Key}}</span>\r\n                    </ui-select-match>\r\n                    <ui-select-choices\r\n                      repeat=\"option.Value as option in (memberModel.OptionsList | filter: $select.search)\"\r\n                      refresh-delay=\"0\"\r\n                    >\r\n                      <span ng-bind=\"option.Key\"></span>\r\n                    </ui-select-choices>\r\n                  </ui-select>\r\n                </div>\r\n\r\n                <small style=\"margin-top: 0.5rem;\">\r\n                  <a\r\n                    class=\"mt-2\"\r\n                    ng-show=\"memberModel.DataType !== 'color' && methods.getUrl(memberData[memberModel.PropName], memberModel.OptionsList)\"\r\n                    ng-href=\"{{methods.getUrl(memberData[memberModel.PropName], memberModel.OptionsList)}}\"\r\n                    target=\"_blank\">\r\n                    <i class=\"fa fa-link\"></i> Open URL\r\n                  </a>\r\n                </small>\r\n              </div>\r\n\r\n\t\t\t<!-- IMAGE -->\r\n\t\t\t  <div \r\n\t\t\t\tng-if=\"memberModel.DataType === 'image'\"\r\n\t\t\t\tclass=\"\"\r\n\t\t\t  >\r\n\t\t\t\t<input\r\n\t\t\t\t  id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n\t\t\t\t  name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n\t\t\t\t  type=\"hidden\"\r\n\t\t\t\t  ng-model=\"memberData[memberModel.PropName]\"\r\n\t\t\t\t  ng-disabled=\"memberModel.ReadOnly\"\r\n\t\t\t\t>\r\n\t\t\t\t<div\r\n                  ng-if=\"!memberData[memberModel.PropName]\"\r\n\t\t\t\t  style=\"height: 150px;\r\n\t\t\t\t\t\t border: solid 1px #dadada; \r\n\t\t\t\t\t\t border-radius: 3px; background: #dddddd\"\r\n                  class=\"d-flex justify-content-center align-items-center cursor-pointer\"\r\n\t\t\t\t  ng-click=\"methods.showAddImageModal(memberModel, memberData)\"\r\n                >\r\n\t\t\t\t<h4\r\n\t\t\t\t  class=\"mb-0 text-center\"\r\n \t\t\t\t  style=\"color: #999999\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{methods.displaySettings.ChooseFromLibraryText || 'Choose from library'}}\r\n\t\t\t\t  </h4>\r\n                </div>\r\n\t\t\t\t<div\r\n                  ng-if=\"memberData[memberModel.PropName]\"\r\n\t\t\t\t  class=\"text-center\"\r\n\t\t\t\t  style=\"border: solid 1px #dadada; border-radius: 3px; overflow: hidden;\"\r\n                >\r\n                  <img\r\n                    ng-src=\"{{memberData[memberModel.PropName]}}\"\r\n                    class=\"mw-100\"\r\n\t\t\t\t\tstyle=\"max-height: 300px;\"\r\n                    alt=\"\"\r\n                  >\r\n                </div>\r\n\t\t\t\t<div class=\"mt-1\" ng-show=\"memberData[memberModel.PropName]\">\r\n\t\t\t\t  <span\r\n\t\t\t\t\tclass=\"text-primary cursor-pointer\"\r\n\t\t\t\t\tng-click=\"methods.showAddImageModal(memberModel, memberData)\"\r\n\t\t\t\t  >\r\n\t\t\t\t  <i class=\"fas fa-cloud\"></i> {{methods.displaySettings.ChooseFromLibraryText || 'Choose from library'}}\r\n\t\t\t\t  </span>\r\n\t\t\t\t  <span\r\n\t\t\t\t\tclass=\"text-danger cursor-pointer ml-3\"\r\n\t\t\t\t\tng-click=\"memberData[memberModel.PropName] = ''\"\r\n\t\t\t\t  >\r\n\t\t\t\t  <i class=\"far fa-trash-alt\"></i> {{methods.displaySettings.ClearImageText || 'Clear'}}\r\n\t\t\t\t  </span>\r\n\t\t\t\t</div>\r\n              </div>\r\n\t\t\t<!-- END IMAGE -->\r\n\r\n\t\t\t<!-- CUSTOM COLOR -->\r\n\t\t\t<div class=\"row d-flex align-items-center position-relative\" ng-if=\"memberModel.DataType === 'color' && !memberModel.Options\">\r\n\t\t\t  <div class=\"img-dropdown-thumbnail-container\" style=\"background-color:{{memberData[memberModel.PropName]}}\">\r\n\t\t\t\t\r\n\t\t\t  </div>\r\n\t\t\t  <input\r\n\t\t\t\t  ng-class=\"{'is-invalid': !methods.isMatchedToRegexp(memberData[memberModel.PropName], memberModel.RegExp)}\"\r\n\t\t\t\t  id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n\t\t\t\t  name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n\t\t\t\t  class=\"form-control form-control-sm img-dropdown-container\"\r\n\t\t\t\t  type=\"text\"\r\n\t\t\t\t  placeholder=\"{{memberModel.SampleValue ? (methods.displaySettings.EGAbbreviation || 'e.g.') + ' ' + memberModel.SampleValue : ''}}\"\r\n\t\t\t\t  ng-model=\"memberData[memberModel.PropName]\"\r\n\t\t\t\t  ng-disabled=\"memberModel.ReadOnly\"\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t\t<!-- END CUSTOM COLOR -->\r\n\r\n              <input\r\n                ng-if=\"memberModel.DataType === 'string' && !memberModel.Options\"\r\n                ng-class=\"{'is-invalid': !methods.isMatchedToRegexp(memberData[memberModel.PropName], memberModel.RegExp)}\"\r\n                id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                class=\"form-control form-control-sm\"\r\n                type=\"text\"\r\n                placeholder=\"{{memberModel.SampleValue ? (methods.displaySettings.EGAbbreviation || 'e.g.') + ' ' + memberModel.SampleValue : ''}}\"\r\n                ng-model=\"memberData[memberModel.PropName]\"\r\n                ng-disabled=\"memberModel.ReadOnly\"\r\n              >\r\n\r\n              <div ng-if=\"memberModel.DataType === 'html' && !memberModel.Options\">\r\n                <text-angular\r\n                  id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                  ng-model=\"memberData[memberModel.PropName]\"\r\n                  ta-default-wrap=\"div\"\r\n                  ta-toolbar-group-class=\"btn-group mr-2 mb-2\"\r\n                  ta-toolbar-button-class=\"btn btn-outline-secondary font-size-1 height-35 p-2\"\r\n                  ta-text-editor-class=\"form-control overflow-scroll max-height-600 {{ methods.pageProps.WhiteTextOnDark ? 'bg-dark' : '' }}\"\r\n                  ta-disabled=\"memberModel.ReadOnly\"\r\n                  ta-keep-styles=\"true\"\r\n                ></text-angular>\r\n              </div>\r\n\r\n              <input\r\n                ng-if=\"memberModel.DataType === 'int' && !memberModel.Options\"\r\n                id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                class=\"form-control form-control-sm\"\r\n                type=\"number\"\r\n                valid-number\r\n                placeholder=\"{{memberModel.SampleValue ? (methods.displaySettings.EGAbbreviation || 'e.g.') + ' ' + memberModel.SampleValue : ''}}\"\r\n                ng-model=\"memberData[memberModel.PropName]\"\r\n                ng-disabled=\"memberModel.ReadOnly\"\r\n              >\r\n\r\n              <textarea\r\n                ng-if=\"memberModel.DataType === 'text' && !memberModel.Options\"\r\n                id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                ng-model=\"memberData[memberModel.PropName]\"\r\n\t\t\t\tplaceholder=\"{{memberModel.SampleValue ? (methods.displaySettings.EGAbbreviation || 'e.g.') + ' ' + memberModel.SampleValue : ''}}\"\r\n                class=\"form-control\"\r\n                rows=\"8\"\r\n                ng-disabled=\"memberModel.ReadOnly\"\r\n              ></textarea>\r\n\r\n              <div\r\n                class=\"custom-control custom-switch\"\r\n                ng-if=\"memberModel.DataType === 'boolean' && !memberModel.Options\"\r\n\t\t\t\tng-init=\"togglerSuffix=methods.generateRandomSuffix()\"\r\n\t\t\t  >\r\n\r\n                <input\r\n                  ng-model=\"memberData[memberModel.PropName]\"\r\n                  id=\"prop-{{memberModel.PropName.split(' ').join('')}}-toggler-{{togglerSuffix}}\"\r\n                  type=\"checkbox\"\r\n                  class=\"custom-control-input\"\r\n                  ng-disabled=\"memberModel.ReadOnly\"\r\n                >\r\n                <label for=\"prop-{{memberModel.PropName.split(' ').join('')}}-toggler-{{togglerSuffix}}\"\r\n                       class=\"custom-control-label custom-control-label-blue custom-switch-intents\">{{memberModel.Title || memberModel.PropName}}</label>\r\n              </div>\r\n\r\n              <div\r\n                ng-if=\"memberModel.DataType === 'date' && !memberModel.Options\"\r\n                class=\"position-relative\"\r\n                ng-model=\"memberData[memberModel.PropName]\"\r\n                ng-flatpickr\r\n                fp-opts=\"methods.dateOpts\"\r\n                fp-on-setup=\"\r\n                  methods.datePostSetup({\r\n                      fpItem: fpItem,\r\n                      currentValue: memberData[memberModel.PropName]\r\n                  })\"\r\n              >\r\n                <input\r\n                  id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                  name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                  class=\"form-control form-control-sm datepicker-readonly-bg\"\r\n                  type=\"text\"\r\n                  ng-disabled=\"memberModel.ReadOnly\"\r\n                  ng-model=\"memberData[memberModel.PropName]\"\r\n                  data-input\r\n                >\r\n\r\n                <a\r\n                  class=\"input-button\"\r\n                  title=\"clear\"\r\n                  ng-hide=\"memberModel.ReadOnly || !memberData[memberModel.PropName]\"\r\n                  style=\"position: absolute; font-size: 0.6875rem; top: 13px; right: 15px;\"\r\n                  data-clear\r\n                >\r\n                  <i class=\"fas fa-times\"></i>\r\n                </a>\r\n              </div>\r\n\r\n\t\t\t<!-- Date Time -->\r\n\t\t\t  <div\r\n                ng-if=\"memberModel.DataType === 'dateTime' && !memberModel.Options\"\r\n                class=\"position-relative\"\r\n                ng-model=\"memberData[memberModel.PropName]\"\r\n                ng-flatpickr\r\n                fp-opts=\"methods.dateTimeOpts\"\r\n                fp-on-setup=\"\r\n                  methods.datePostSetup({\r\n                      fpItem: fpItem,\r\n                      currentValue: memberData[memberModel.PropName]\r\n                  })\"\r\n              >\r\n                <input\r\n                  id=\"prop-{{memberModel.PropName.split(' ').join('')}}\"\r\n                  name=\"{{memberModel.PropName.split(' ').join('')}}\"\r\n                  class=\"form-control form-control-sm datepicker-readonly-bg\"\r\n                  type=\"text\"\r\n                  ng-disabled=\"memberModel.ReadOnly\"\r\n                  ng-model=\"memberData[memberModel.PropName]\"\r\n                  data-input\r\n                >\r\n\r\n                <a\r\n                  class=\"input-button\"\r\n                  title=\"clear\"\r\n                  ng-hide=\"memberModel.ReadOnly || !memberData[memberModel.PropName]\"\r\n                  style=\"position: absolute; font-size: 0.6875rem; top: 13px; right: 15px;\"\r\n                  data-clear\r\n                >\r\n                  <i class=\"fas fa-times\"></i>\r\n                </a>\r\n              </div>\r\n\r\n              <small class=\"text-muted form-text\">\r\n                {{memberModel.Description}}\r\n              </small>\r\n            </div>\r\n          `;\r\n                                              }\r\n\r\n                                              $compile(collectionSt)(scope, function(cloned, scope) {\r\n                                                element.append(cloned);\r\n                                              });\r\n                                            },\r\n                                          };\r\n                                        });\r\n                                      }\r\n\r\n                                      const setBlock = function() {\r\n                                        const blockDiv = $(`[data-id=\"${data.PageBlockId}\"]`).find('.blockCtrlData');\r\n                                        if (blockDiv && blockDiv.scope()) {\r\n                                          blockDiv.scope().blockCtrl.displaySettings = data.DisplaySettings || {};\r\n                                          blockDiv.scope().blockCtrl.addBlock(JSON.parse(decodeURIComponent(data.json)), `${data['Post to service']}?collectionName=${data.Collection}&objectId=${data.ObjectId}&jsonPath=${data.JsonPath}&modelBlockName=${data.ModelBlockName}`, data.OnSaveJs, data.ObjectId, data.ItemIndex);\r\n                                        } else {\r\n                                          setTimeout(function() {\r\n                                            setBlock();\r\n                                          }, 300);\r\n                                        }\r\n                                      };\r\n\r\n                                      setBlock();\r\n                                    })();\r\n                                    $(window).off('DOMContentLoaded DOMContentLoadedAsync');\r\n                                  });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t</main>\r\n\t</div>\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/app-admin.min.css?v=8\"><!-- END ADMIN SCRIPTS -->\r\n\r\n\t<script src=\"https://holidada-dev.azureedge.net/assets/dist/libs.min.js?v=9\" defer></script>\r\n\t<script src=\"https://holidada-dev.azureedge.net/assets/dist/app.min.js?v=77\" defer></script>\r\n\t<script>\r\n\t\t$(window).on('load', function() {\r\n        document.dispatchEvent(new Event('DOMContentLoadedAsync'));\r\n      });\r\n      $(document).on('ready', function() {\r\n        $(function() {\r\n          $('[data-toggle=\"tooltip\"]').tooltip();\r\n        });\r\n        let showTimeout;\r\n        $(document).on('show.bs.tooltip', function(e) {\r\n          showTimeout = setTimeout(function() {\r\n            $('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n          }, 3000);\r\n        });\r\n        $(document).on('hide.bs.tooltip', function(e) {\r\n          clearTimeout(showTimeout);\r\n        });\r\n        $(document).on('scroll', function(e) {\r\n          $('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n        });\r\n        \r\n        $.HSCore.components.HSValidation.init('.js-validate', {\r\n          rules: {\r\n            confirmPassword: {\r\n              equalTo: '#signupPassword',\r\n            },\r\n          },\r\n        });\r\n        $.HSCore.components.HSModalWindow.init('[data-modal-target]', '.js-modal-window', {\r\n          autonomous: true,\r\n        });\r\n        $.HSCore.components.HSSelectPicker.init('.js-select');\r\n        $.HSCore.components.HSFocusState.init();\r\n      });\r\n\t</script>\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.8.1/css/all.css\"\r\n\t\tintegrity=\"sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf\" crossorigin=\"anonymous\">\r\n\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/app-bottom.min.css?v=6\">\r\n\r\n</body>\r\n\r\n</html>",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  const dd = {\n    ModelBlockName: data.modelName,\n    PageBlockId: \"5db17fbf6147d414d81f9069\",\n    'Get from service': \"\",\n    'Post to service': \"\",\n    DisplaySettings: {},\n    json: encodeURIComponent(JSON.stringify(s))\n  };\n\n  return thisBlock.Html.replace('*data*', encodeURIComponent(JSON.stringify(dd)));\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  const dd = {\r\n    ModelBlockName: data.modelName,\r\n    PageBlockId: \"5db17fbf6147d414d81f9069\",\r\n    'Get from service': \"\",\r\n    'Post to service': \"\",\r\n    DisplaySettings: {},\r\n    json: encodeURIComponent(JSON.stringify(s))\r\n  }\r\n\r\n  return thisBlock.Html.replace('*data*', encodeURIComponent(JSON.stringify(dd)));\r\n}\r\n\r\nexport default <Block/>",
    "Script": "",
    "Page": {
      "settings": {
        "url": "/mars/edit-data/:modelName/:collectionName?postTo=:postTo&path=:path&objectId=:objectId",
        "title": "Edit"
      }
    },
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nasync function server() {\r\n  const model = Mars.allBlocks.find(t => t.Name === data.modelName);\r\n  let blockData = typeof (data.objectId) === 'string' ? await Mars.data[data.collectionName].findById(data.objectId) : {};\r\n\r\n\r\n\r\n  if (data.path && data.path !== 'root') blockData = { ..._.get(blockData, data.path), _id: blockData._id }\r\n  const cleanedData = _.pickBy(blockData, (value, key) => model.DataArgs.some(t => t.PropName === key));\r\n  if (data.objectId) cleanedData._id = blockData._id.toString();\r\n\r\n  // execute transformEach\r\n  const tableConfig = Mars.settings.MongoConfig.collections\r\n    .find(t => t.name === data.collectionName);\r\n  const modelBlock = Mars.services[tableConfig.defaultModelBlock];\r\n  if (modelBlock) {\r\n    const transformEach = modelBlock().transformEach;\r\n    if (transformEach) await transformEach(cleanedData, 'details')\r\n  }\r\n\r\n\r\n  const results = {\r\n    Data: cleanedData,\r\n    Model: {\r\n      _id: model._id,\r\n      Name: model.Name,\r\n      DataArgs: model.DataArgs\r\n    },\r\n    EditPageTitle: `Edit ${data.modelName}`\r\n  };\r\n\r\n  return results\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eee18d68e59c71a9c4cc024",
    "Name": "AngularPostFormJs",
    "Title": "AngularPostFormJs",
    "Type": "page",
    "Apps": [],
    "Folder": "model editor/form",
    "DataArgs": [],
    "DemoJsx": "export default <AngularPostFormJs />",
    "DemoJsxTranspiled": "export default executeAppBlock(AngularPostFormJs, null);",
    "JsxTranspiled": "export default executeAppBlock(\n  JsFile,\n  null,\n  thisBlock.Script\n);",
    "Jsx": "export default <JsFile>\r\n  {thisBlock.Script}\r\n</JsFile>",
    "Script": "blockCtrlFunction = function ($document, $scope, $rootScope, $http, $timeout, $q, helpersFactory, Upload, Cropper) {\r\n  function cropFunction(data) {\r\n    vm.cropped.data = data;\r\n    const width = parseInt(data.width);\r\n    const height = parseInt(data.height);\r\n    vm.cropped.size.Width = `${parseInt(width)}px`;\r\n    vm.cropped.size.Height = `${parseInt(height)}px`;\r\n    const oldName = vm.imageFile.Name ? vm.imageFile.Name.replace(/ [0-9]+x[0-9]+/, '') : '';\r\n    vm.imageFile.Name = `${oldName} ${width}x${height}`;\r\n    $scope.$apply();\r\n  }\r\n\r\n  const imagesDefaultEndpoint = '/api/getFilesList';\r\n  const vm = this;\r\n  vm.blocks = [];\r\n  vm.cropped = {\r\n    file: null,\r\n    data: null,\r\n    size: {\r\n      Height: '',\r\n      Width: '',\r\n    },\r\n    url: '',\r\n  };\r\n  vm.cropAspectRatio = null;\r\n  vm.cropOptions = {\r\n    crop: cropFunction,\r\n  };\r\n  vm.currentBlock = {\r\n    _id: '',\r\n    Model: {},\r\n    Data: {},\r\n  };\r\n  vm.dateOpts = {\r\n    dateFormat: 'd.m.Y',\r\n    altInput: true,\r\n    altFormat: 'd.m.Y',\r\n    defaultDate: new Date().toISOString(),\r\n    wrap: true,\r\n    static: true,\r\n  };\r\n  vm.dateTimeOpts = {\r\n    dateFormat: 'd.m.Y h:i K',\r\n    altInput: true,\r\n    altFormat: 'd.m.Y h:i K',\r\n    defaultDate: new Date().toISOString(),\r\n    wrap: true,\r\n    static: true,\r\n    enableTime: true,\r\n  };\r\n  vm.datePostSetup = function (fpItem) {\r\n    fpItem.fpItem.setDate(fpItem.currentValue);\r\n  };\r\n\r\n  vm.displayingFolder = {\r\n    Name: '',\r\n    ParentFolder: '',\r\n    Values: [],\r\n  };\r\n  vm.showEvent = 'show';\r\n  vm.hideEvent = 'hide';\r\n  vm.imageFile = {\r\n    File: undefined,\r\n    Name: '',\r\n    Folder: '',\r\n    Url: '',\r\n  };\r\n  vm.images = [];\r\n  vm.imagesApiUrl = '';\r\n  vm.itemIndex = null;\r\n  vm.itemsLoading = false;\r\n  vm.justUploadedImage = {};\r\n  vm.onSaveJsFunction = null;\r\n  vm.pageProps = helpersFactory.pageProps;\r\n  vm.postBlockUrl = null;\r\n  vm.selectedItem = {};\r\n  vm.showFolderInput = false;\r\n  vm.urlParamsOptions = helpersFactory.parseUrlParams(vm.pageProps.UrlParams);\r\n\r\n  vm.addBlock = addBlock;\r\n  vm.addSubArg = addSubArg;\r\n  vm.changeImageAspectRatio = changeImageAspectRatio;\r\n  vm.cropImage = cropImage;\r\n  vm.deleteSubArg = deleteSubArg;\r\n  vm.generateOptionsUrl = generateOptionsUrl;\r\n  vm.generateRandomSuffix = generateRandomSuffix;\r\n  vm.getCollapseFieldValue = getCollapseFieldValue;\r\n  vm.getImageFromUrl = getImageFromUrl;\r\n  vm.getOptions = getOptions;\r\n  vm.getOptionsFromUrl = getOptionsFromUrl;\r\n  vm.getUrl = getUrl;\r\n  vm.hideCropper = hideCropper;\r\n  vm.isComplicatedArgsExist = isComplicatedArgsExist;\r\n  vm.isFormValid = isFormValid;\r\n  vm.isMatchedToRegexp = isMatchedToRegexp;\r\n  vm.isSectionVisible = isSectionVisible;\r\n  vm.isVisible = isVisible;\r\n  vm.keys = Object.keys;\r\n  vm.moveSubArgDown = moveSubArgDown;\r\n  vm.moveSubArgUp = moveSubArgUp;\r\n  vm.openFolder = openFolder;\r\n  vm.postBlock = postBlock;\r\n  vm.refreshResultsMultiple = refreshResultsMultiple;\r\n  vm.refreshResults = refreshResults;\r\n  vm.selectImage = selectImage;\r\n  vm.setDefaultImageName = setDefaultImageName;\r\n  vm.setImage = setImage;\r\n  vm.showAddImageModal = showAddImageModal;\r\n  vm.showCropDialog = showCropDialog;\r\n  vm.showCropper = showCropper;\r\n  vm.showUploadModal = showUploadModal;\r\n  vm.tagTransform = tagTransform;\r\n  vm.uploadImage = uploadImage;\r\n\r\n  function addBlock(block, postToService = null, onSaveJs = null, objectId = null, itemIndex = 0) {\r\n    vm.itemsLoaded = false;\r\n    if (postToService && postToService.indexOf('block/') === -1) {\r\n      vm.postBlockUrl = `/service/${postToService.replace('.', '/')}`;\r\n    } else if (postToService && postToService.indexOf('block/') > -1) {\r\n      vm.postBlockUrl = postToService;\r\n    }\r\n    if (itemIndex) vm.itemIndex = itemIndex;\r\n\r\n    vm.onSaveJsFunction = onSaveJs ? new Function('ObjectId', onSaveJs) : null;\r\n    vm.objectId = objectId;\r\n    if (!block.Data) block.Data = {};\r\n    // todo: combine all recurrent handling of block's data, add int parsing for all int data args\r\n    helpersFactory.setDefaultValues(block.Model.DataArgs, block.Data);\r\n    helpersFactory.parseIntValues(block.Model.DataArgs, block.Data);\r\n    vm.currentBlock = _.cloneDeep(block);\r\n    vm.itemsLoaded = true;\r\n\r\n    $timeout(() => {\r\n      $scope.$apply();\r\n      if (parent.resizeIFrameToFitContent) parent.resizeIFrameToFitContent(parent.document.getElementById('iFrame1'))\r\n    });\r\n  }\r\n\r\n  function getOptions(options, value, useUrlParams) {\r\n    options.forEach((o) => {\r\n      if (o.Value || o.Value === 0) o.Value = o.Value.toString();\r\n    });\r\n    let resultOptions = options;\r\n    if (useUrlParams) resultOptions = vm.urlParamsOptions.concat(resultOptions);\r\n    const optionsValues = resultOptions.map(item => item.Value);\r\n\r\n\r\n    if (Array.isArray(value)) { // MULTIPLE options\r\n      const unlistedOptions = _.differenceWith(value, optionsValues, _.isEqual);\r\n      if (unlistedOptions.length) {\r\n        const mappedOptions = unlistedOptions.map(item => ({\r\n          Key: item,\r\n          Value: item,\r\n        }));\r\n        resultOptions = options.concat(mappedOptions);\r\n      }\r\n    } else if ((value || value === 0) && optionsValues.indexOf(value) === -1) { // SINGLE option\r\n      const customOption = {\r\n        Key: `Custom: ${value}`,\r\n        Value: value,\r\n      };\r\n      const firstOption = options[0];\r\n      // if options are colors list\r\n      if (firstOption && firstOption.Url && firstOption.Url.indexOf('dummyimage') && /^[a-zA-Z0-9]{6}$/.test(value)) {\r\n        customOption.Url = firstOption.Url.replace(/[a-zA-Z0-9]{6}\\/[a-zA-Z0-9]{6}\\/*$/, `${value}/${value}`);\r\n      }\r\n\r\n      resultOptions.push(customOption);\r\n    }\r\n\r\n    return resultOptions;\r\n  }\r\n\r\n  function generateOptionsUrl(url) {\r\n    return helpersFactory.generateOptionsUrl(url, vm.currentBlock.Data, vm.pageProps.UrlParams);\r\n  }\r\n\r\n  function getOptionsFromUrl(requestUrl, value, useUrlParams) {\r\n    if (window.cachedOptions && window.cachedOptions[requestUrl]) {\r\n      let options = window.cachedOptions[requestUrl].files || window.cachedOptions[requestUrl];\r\n      options = getOptions(options, value, useUrlParams);\r\n      return $q.when(options);\r\n    }\r\n//window.contentServiceApi + \r\n    return $http.get(requestUrl)\r\n      .then((res) => {\r\n        console.log(res);\r\n        let { data } = res;\r\n        // if returned options are images\r\n        if (res.data && res.data.files) data = res.data.files;\r\n\r\n        const options = vm.getOptions(data, value, useUrlParams);\r\n\r\n        if (!window.cachedOptions) window.cachedOptions = {};\r\n        window.cachedOptions[requestUrl] = res.data.files\r\n          ? {\r\n            folderName: res.data.folderName,\r\n            files: options,\r\n          }\r\n          : options;\r\n\r\n        return options;\r\n      });\r\n  }\r\n\r\n  function getCollapseFieldValue(collapseFieldValue, collapseField, argsModel) {\r\n    const prop = argsModel.find(p => p.PropName === collapseField);\r\n    if (prop) {\r\n      if (prop.OptionsList && prop.OptionsList.length) {\r\n        const option = prop.OptionsList.find(o => o.Value.toString() === collapseFieldValue.toString());\r\n        if (option) return option.Key;\r\n      }\r\n    }\r\n\r\n    return collapseFieldValue;\r\n  }\r\n\r\n  function isFormValid(dataArgs, data) {\r\n    function validate(args, dataModel) {\r\n      for (let i = 0; i < args.length; i++) {\r\n        const arg = args[i];\r\n        if (!arg.NullAllowed\r\n          && (!dataModel[arg.PropName] && dataModel[arg.PropName] !== 0\r\n            || arg.DataType === 'array' && dataModel[arg.PropName].length === 0)) {\r\n          return false;\r\n        }\r\n        if (arg.SubArgs && arg.SubArgs.length) {\r\n          const isValid = isFormValid(arg.SubArgs, dataModel[arg.PropName]);\r\n          if (!isValid) return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n\r\n    // validate data\r\n    if (Array.isArray(data)) {\r\n      for (let i = 0; i < data.length; i++) {\r\n        const dataObject = data[i];\r\n        const isValid = validate(dataArgs, dataObject);\r\n        if (!isValid) return false;\r\n      }\r\n    } else {\r\n      const isValid = validate(dataArgs, data);\r\n      if (!isValid) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  function deleteSubArg(array, index) {\r\n    array.splice(index, 1);\r\n  }\r\n\r\n  function moveSubArgUp(array, index) {\r\n    if (index > 0) {\r\n      const replacedItem = array[index - 1];\r\n      array[index - 1] = array[index];\r\n      array[index] = replacedItem;\r\n    }\r\n  }\r\n\r\n  function moveSubArgDown(array, index) {\r\n    if (index < array.length - 1) {\r\n      const replacedItem = array[index + 1];\r\n      array[index + 1] = array[index];\r\n      array[index] = replacedItem;\r\n    }\r\n  }\r\n\r\n  function parseModelToObject(modelArgs) {\r\n    const resObject = {};\r\n\r\n    modelArgs.forEach((arg) => {\r\n      if (arg.SubArgs && arg.SubArgs.length) {\r\n        resObject[arg.PropName] = arg.DataType === 'object'\r\n          ? parseModelToObject(arg.SubArgs)\r\n          : [parseModelToObject(arg.SubArgs)];\r\n      } else {\r\n        resObject[arg.PropName] = '';\r\n      }\r\n    });\r\n    helpersFactory.setDefaultValues(modelArgs, resObject);\r\n    return resObject;\r\n  }\r\n\r\n  function addSubArg(array, modelArgs, propName) {\r\n    const entityObject = parseModelToObject(modelArgs);\r\n    array.push(entityObject);\r\n    const lastElementIndex = array.length - 1;\r\n    setTimeout(() => {\r\n      $(`#${propName}-innerHeading-${lastElementIndex} button`)\r\n        .click();\r\n    }, 10);\r\n  }\r\n\r\n  function postBlock() {\r\n    \r\n    const currentBlockPostData = _.cloneDeep(vm.currentBlock.Data);\r\n    helpersFactory.transformIntOptionsToString(vm.currentBlock.Model.DataArgs, currentBlockPostData);\r\n\r\n    const payload = {\r\n      Name: vm.currentBlock.Model.Name,\r\n      BlockId: vm.currentBlock.Model._id,\r\n      Data: currentBlockPostData,\r\n    };\r\n\r\n    const postUrl = vm.postBlockUrl || '/api/addBlock';\r\n    console.log(currentBlockPostData)\r\n    //vm.isSaving = true;\r\n\r\n    window.parent.RenderDataByModel1.saveObject(currentBlockPostData).then(() => {\r\n      vm.isSaving = false\r\n    })\r\n\r\n  }\r\n\r\n  function getUrl(value, optionsList) {\r\n    let url = null;\r\n    if (Array.isArray(optionsList)) {\r\n      const option = optionsList.find(item => item.Value === value);\r\n\r\n      if (option && option.Url) {\r\n        url = option.Url;\r\n      }\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  function tagTransform(newTag) {\r\n    const item = {\r\n      Key: newTag,\r\n      Value: newTag,\r\n    };\r\n    return item;\r\n  }\r\n\r\n  /* items adding to the regular dropdown on the fly  */\r\n  function refreshResults($select) {\r\n    const { search } = $select;\r\n    let list = angular.copy($select.items);\r\n    const FLAG = -1;\r\n    /* remove last user input */\r\n    list = list.filter(item => item.id !== FLAG);\r\n\r\n    if (!search) {\r\n      /* use the predefined list */\r\n      $select.items = list;\r\n    } else {\r\n      /* manually add user input and set selection */\r\n      const userInputItem = {\r\n        id: FLAG,\r\n        Key: search,\r\n        Value: search,\r\n      };\r\n      $select.items = list.concat([userInputItem]);\r\n    }\r\n  }\r\n\r\n  /* items adding to the multiple dropdown on the fly  */\r\n  function refreshResultsMultiple(newTag) {\r\n    return {\r\n      Key: newTag,\r\n      Value: newTag,\r\n    };\r\n  }\r\n\r\n  function isMatchedToRegexp(value, regexp) {\r\n    if (!regexp) return true;\r\n\r\n    const regExp = new RegExp(regexp);\r\n    return regExp.test(value);\r\n  }\r\n\r\n  function isVisible(prop) {\r\n    if (!prop.ConditionalVisibility) return true;\r\n\r\n    let isPropVisible = true;\r\n    const visibilityOptions = prop.conditionalVisibilityOptions;\r\n    if (visibilityOptions.length) {\r\n      const combination = prop.ConditionalVisibilityCombination || 'AND';\r\n      isPropVisible = combination === 'AND'; // if combination is AND, visibility is true by default\r\n      for (let i = 0; i < visibilityOptions.length; i++) {\r\n        const option = visibilityOptions[i];\r\n        if (Object.keys(option).length) {\r\n          const condPropertyValue = _.get(vm.currentBlock.Data, option.Property.Value);\r\n          if ((option.Value || option.Value === 0)\r\n            && option.Condition.Value.indexOf('--value--') !== -1) {\r\n            option.Condition.Value = option.Condition.Value.replace('--value--', option.Value);\r\n          }\r\n          const regExp = new RegExp(option.Condition.Value);\r\n          const checkResult = regExp.test(condPropertyValue);\r\n          if (checkResult && combination === 'OR') {\r\n            isPropVisible = true;\r\n            break;\r\n          }\r\n          if (!checkResult && combination === 'AND') {\r\n            isPropVisible = false;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return isPropVisible;\r\n  }\r\n\r\n  function isSectionVisible(props) {\r\n    let isVisible = false;\r\n    for (let i = 0; i < props.length; i++) {\r\n      if (vm.isVisible(props[i])) {\r\n        isVisible = true;\r\n        break;\r\n      }\r\n    }\r\n    return isVisible;\r\n  }\r\n\r\n  function generateRandomSuffix() {\r\n    return Date.now();\r\n  }\r\n\r\n  /* todo: move whole images logic to standalone factory */\r\n  function parseImageList(imagesData, currentFolder) {\r\n    vm.images = _.cloneDeep(imagesData.files);\r\n\r\n    vm.selectedItem = {};\r\n\r\n    // vm.savedDataArgKey = propName;\r\n    vm.openFolder(currentFolder || '');\r\n  }\r\n\r\n  function getImages(apiUrl = null, currentFolder = '', useCache = false) {\r\n    vm.imagesLoading = true;\r\n    const apiUrlExist = !!apiUrl && apiUrl.indexOf(':') === -1;\r\n    const getFilesUrl = apiUrlExist ? apiUrl : imagesDefaultEndpoint;\r\n\r\n    if (useCache && window.cachedOptions && window.cachedOptions[getFilesUrl] && Object.keys(window.cachedOptions[getFilesUrl]).length) {\r\n      if (!currentFolder && apiUrlExist) {\r\n        currentFolder = window.cachedOptions[getFilesUrl].folderName;\r\n      }\r\n      parseImageList(window.cachedOptions[getFilesUrl], currentFolder, apiUrlExist);\r\n      if (Object.keys(vm.justUploadedImage).length) {\r\n        const ind = vm.displayingFolder.Values.findIndex(item => item.Folder === vm.justUploadedImage.folderName && item.DisplayName.indexOf(`${vm.justUploadedImage.fileName} (--`) === 0);\r\n        if (ind !== -1) {\r\n          vm.selectImage(ind);\r\n          vm.justUploadedImage = {};\r\n          vm.setImage();\r\n        }\r\n      }\r\n      vm.imagesLoading = false;\r\n    } else {\r\n      $http.get(window.contentServiceApi + getFilesUrl)\r\n        .then((res) => {\r\n          if (!window.cachedOptions) window.cachedOptions = {};\r\n          window.cachedOptions[getFilesUrl] = res.data;\r\n          if (!currentFolder && apiUrlExist) {\r\n            currentFolder = res.data.folderName;\r\n          }\r\n          parseImageList(res.data, currentFolder, apiUrlExist);\r\n          if (Object.keys(vm.justUploadedImage).length) {\r\n            const ind = vm.displayingFolder.Values.findIndex(item => item.Folder === vm.justUploadedImage.folderName && item.DisplayName.indexOf(`${vm.justUploadedImage.fileName} (--`) === 0);\r\n            if (ind !== -1) {\r\n              vm.selectImage(ind);\r\n              vm.justUploadedImage = {};\r\n              vm.setImage();\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          alert('Failed to load images. Try reloading the page.');\r\n        })\r\n        .finally(() => {\r\n          vm.imagesLoading = false;\r\n        });\r\n    }\r\n  }\r\n\r\n  function showAddImageModal(prop, dataObject) {\r\n    vm.savedProp = prop; // model property\r\n    vm.savedDataObject = dataObject; // model object where data will be put\r\n\r\n    helpersFactory.showModal('#chooseImageModal');\r\n    $(document).on('custombox:overlay:open', function (e) {\r\n      setTimeout(function () {\r\n        if ($('.js-modal-window').is(':visible')) {\r\n          const scrollY = document.body.style.top;\r\n          document.body.style.position = '';\r\n          document.body.style.top = '';\r\n          window.scrollTo(0, parseInt(scrollY || '0') * -1);\r\n        }\r\n      }, 500);\r\n    });\r\n\r\n    let url = imagesDefaultEndpoint;\r\n    if (prop.Options && !Array.isArray(prop.Options)) url = prop.Options;\r\n\r\n    vm.imagesApiUrl = url;\r\n    getImages(url, '', true);\r\n  }\r\n\r\n  function selectImage(index, setImage = false) {\r\n    vm.selectedItem = vm.displayingFolder.Values[index];\r\n    vm.selectedItem.Index = index;\r\n\r\n    if (setImage) vm.setImage();\r\n  }\r\n\r\n  function setImage() {\r\n    const image = vm.displayingFolder.Values[vm.selectedItem.Index];\r\n    let imageUrl = image.Value;\r\n    const imageUrlParts = imageUrl.split('?');\r\n    if (imageUrlParts[0].endsWith('--small')) {\r\n      imageUrl = imageUrlParts[0].substr(0, imageUrlParts[0].length - 7) + (imageUrlParts[1] ? `?${imageUrlParts[1]}` : '');\r\n    }\r\n\r\n    vm.savedDataObject[vm.savedProp.PropName] = imageUrl;\r\n    helpersFactory.closeModal();\r\n  }\r\n\r\n  function isComplicatedArgsExist() {\r\n    if (Object.keys(vm.currentBlock.Model).length) {\r\n      const complicatedArgsList = vm.currentBlock.Model.DataArgs.filter(item => item.DataType === 'array' || item.DataType === 'object');\r\n\r\n      return complicatedArgsList.length !== 0;\r\n    }\r\n  }\r\n\r\n  function openFolder(folderName, getAllFilesList = false) {\r\n    const parentFolderArr = folderName.split('/');\r\n    parentFolderArr.pop();\r\n    vm.displayingFolder.ParentFolder = parentFolderArr.join('/');\r\n    vm.displayingFolder.Name = folderName;\r\n\r\n    // get all images if users clicks on back button in folder after only movie images fetching\r\n    if (getAllFilesList) {\r\n      const folder = helpersFactory.trimSlashes(`${vm.displayingFolder.Name || ''}${vm.imageFile.Folder ? `/${vm.imageFile.Folder}` : ''}`);\r\n      getImages(null, folder, true);\r\n    } else {\r\n      vm.displayingFolder.Values = helpersFactory.parseFolder(folderName, vm.images);\r\n    }\r\n\r\n    vm.selectedItem = {};\r\n  }\r\n\r\n  function setDefaultImageName() {\r\n    if (vm.imageFile.File && vm.imageFile.File.name) {\r\n      vm.imageFile.Name = vm.imageFile.File.name;\r\n    }\r\n  }\r\n\r\n  function showUploadModal(uploadType) {\r\n    vm.showFolderInput = false;\r\n    vm.imageFile.Name = '';\r\n\r\n    vm.uploadType = uploadType;\r\n    helpersFactory.showModal('#uploadImageModal');\r\n    if (vm.uploadType === 'disk') helpersFactory.showUploadDialog();\r\n  }\r\n\r\n  function uploadImage(parentImage = null) {\r\n    // clean images cache\r\n    if (window.cachedOptions && window.cachedOptions[vm.imagesApiUrl]) delete window.cachedOptions[vm.imagesApiUrl];\r\n\r\n    vm.imageUploading = true;\r\n    const folderName = helpersFactory.trimSlashes(`${vm.displayingFolder.Name || ''}${vm.imageFile.Folder ? `/${vm.imageFile.Folder}` : ''}`);\r\n\r\n    vm.justUploadedImage = {\r\n      fileName: vm.imageFile.Name,\r\n      folderName,\r\n    };\r\n\r\n    const payload = {\r\n      file: vm.imageFile.File,\r\n      fileName: vm.imageFile.Name,\r\n      folderName,\r\n    };\r\n    if (parentImage) {\r\n      payload.originalImageUrl = parentImage.Value;\r\n      payload.originalImageDisplayName = parentImage.DisplayName;\r\n    }\r\n\r\n    Upload.upload({\r\n      url: `${window.contentServiceApi}/api/uploadFile`,\r\n      headers: { token: vm.pageProps.Token },\r\n      data: payload,\r\n    })\r\n      .then(() => {\r\n        vm.imageFile.File = undefined;\r\n        vm.imageFile.Name = '';\r\n        vm.imageFile.Folder = '';\r\n        vm.imageFile.Url = '';\r\n        vm.uploadSucceed = true;\r\n        vm.showFolderInput = false;\r\n        helpersFactory.closeModal();\r\n        getImages(null, folderName);\r\n      })\r\n      .catch((e) => {\r\n        let errorMeassage = 'Failed to upload the image. Please try again.';\r\n        if (e.data && e.data.errorMessage) errorMeassage = e.data.errorMessage;\r\n        alert(errorMeassage);\r\n        console.log(e);\r\n      })\r\n      .finally(() => {\r\n        vm.imageUploading = false;\r\n      });\r\n  }\r\n\r\n  function showCropper() {\r\n    $scope.$broadcast(vm.showEvent);\r\n  }\r\n\r\n  function hideCropper(notResetRatio) {\r\n    if (!notResetRatio) {\r\n      vm.cropOptions.aspectRatio = null;\r\n      vm.cropAspectRatio = null;\r\n    }\r\n    $scope.$broadcast(vm.hideEvent);\r\n  }\r\n\r\n  function showCropDialog(image = null) {\r\n    vm.showFolderInput = false;\r\n    if (image) {\r\n      vm.selectedItem = {};\r\n      vm.cropped.file = image;\r\n      const urlCreator = window.URL || window.webkitURL;\r\n      vm.cropped.url = urlCreator.createObjectURL(image);\r\n      $timeout(() => {\r\n        vm.showCropper();\r\n      });\r\n    } else {\r\n      $timeout(() => { /* wait for selectedItem setting */\r\n        const xhr = new XMLHttpRequest();\r\n        vm.cropped.url = vm.selectedItem.OriginalImageUrl || vm.selectedItem.Value;\r\n        xhr.open('GET', vm.cropped.url);\r\n        xhr.responseType = 'blob'; /* force the HTTP response, response-type header to be blob */\r\n        xhr.onload = function () {\r\n          vm.cropped.file = xhr.response; /* xhr.response is now a blob object */\r\n\r\n          let imageName = vm.selectedItem.DisplayName;\r\n          if (!vm.selectedItem.OriginalImageDisplayName) {\r\n            imageName = vm.selectedItem.DisplayName;\r\n          }\r\n          vm.imageFile.Name = imageName;\r\n          vm.showCropper();\r\n        };\r\n        xhr.send();\r\n      });\r\n    }\r\n    helpersFactory.showModal('#cropImageModal');\r\n  }\r\n\r\n  function changeImageAspectRatio(width, height) {\r\n    width = parseInt(width); // eslint-disable-line no-param-reassign\r\n    height = parseInt(height); // eslint-disable-line no-param-reassign\r\n    vm.cropOptions.aspectRatio = width / height;\r\n    vm.hideCropper(true);\r\n    vm.showCropper();\r\n  }\r\n\r\n  function cropImage() {\r\n    let mimeType = '';\r\n    vm.hideCropper();\r\n    if ($('#closeUploadImageModalButton')\r\n      .is(':visible')) {\r\n      $('#closeUploadImageModalButton')\r\n        .click();\r\n    }\r\n\r\n    // waiting for modal closing\r\n    setTimeout(() => {\r\n      Cropper.crop(vm.cropped.file, vm.cropped.data)\r\n        .then(Cropper.encode)\r\n        .then((dataUrl) => {\r\n          const obj = /data:(.*);base64,(.*)/.exec(dataUrl);\r\n          mimeType = obj[1];\r\n          return dataUrl;\r\n        })\r\n        .then(fetch)\r\n        .then(res => res.blob())\r\n        .then((blob) => {\r\n          const file = new File([blob], 'cropped', { type: mimeType });\r\n\r\n          vm.imageFile.File = file;\r\n\r\n          if (Object.keys(vm.selectedItem).length) {\r\n            let parentItem = vm.selectedItem;\r\n            if (vm.selectedItem.OriginalImageUrl && vm.selectedItem.OriginalImageDisplayName) {\r\n              parentItem = {\r\n                Value: vm.selectedItem.OriginalImageUrl,\r\n                DisplayName: vm.selectedItem.OriginalImageDisplayName,\r\n              };\r\n            }\r\n\r\n            vm.uploadImage(parentItem);\r\n          } else {\r\n            vm.uploadImage();\r\n          }\r\n        })\r\n        .catch((e) => {\r\n          alert('Failed to crop the image. Please try again');\r\n          console.log(e);\r\n        });\r\n    }, 300);\r\n  }\r\n\r\n  function getImageFromUrl() {\r\n    $http({\r\n      url: `${window.contentServiceApi}/api/getImageProxy`,\r\n      method: 'GET',\r\n      params: { url: vm.imageFile.Url },\r\n      responseType: 'blob',\r\n    })\r\n      .then((res) => {\r\n        const { data } = res;\r\n        if (data.type.indexOf('image') !== -1) {\r\n          vm.imageFile.File = data;\r\n        } else {\r\n          vm.imageFile.File = undefined;\r\n        }\r\n      })\r\n      .catch((e) => {\r\n        if (vm.imageFile.File) vm.imageFile.File = undefined;\r\n        console.log('Can\\'t get image from url');\r\n      });\r\n  }\r\n\r\n  $rootScope.$on('addBlockEvent', (event, args) => {\r\n    event.stopPropagation();\r\n    vm.EditOnlyDataForBlock = args.EditOnlyDataForBlock;\r\n    if (vm.blocks.length) {\r\n      const block = vm.blocks.find(block => block.Name === args.blockName);\r\n\r\n      addBlock(block);\r\n    } else {\r\n      vm.itemsLoading = true;\r\n      helpersFactory.getBlocksData()\r\n        .then((blocks) => {\r\n          vm.blocks = blocks;\r\n\r\n          const block = vm.blocks.find(block => block.Name === args.blockName);\r\n\r\n          addBlock(block);\r\n        })\r\n        .catch((err) => {\r\n          alert('Failed to load blocks data. Try reloading the page.');\r\n        })\r\n        .finally(() => {\r\n          vm.itemsLoading = false;\r\n          debugger\r\n          parent.resizeIFrameToFitContent(parent.document.getElementById('iFrame1'))\r\n        });\r\n    }\r\n  });\r\n\r\n  $scope.$on('getBlocksData', () => {\r\n    if (!vm.blocks.length) {\r\n      vm.itemsLoading = true;\r\n      helpersFactory.getBlocksData()\r\n        .then((blocks) => {\r\n          vm.blocks = blocks;\r\n        })\r\n        .catch((err) => {\r\n          alert('Failed to load blocks data. Try reloading the page.');\r\n        })\r\n        .finally(() => {\r\n          vm.itemsLoading = false;\r\n          debugger\r\n          parent.resizeIFrameToFitContent(parent.document.getElementById('iFrame1'))\r\n        });\r\n    }\r\n  });\r\n\r\n  $document.bind('keydown', (event) => {\r\n    if (event.keyCode === 27) { // esc button\r\n      vm.hideCropper();\r\n    }\r\n  });\r\n\r\n  $document.bind('hideCropper', (event) => {\r\n    vm.hideCropper();\r\n  });\r\n};\r\n",
    "Page": {
      "settings": {
        "url": "/assets/js/model-editor.js",
        "title": "model-editor.js"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5eee1e128e59c71a9c4cc025",
    "Name": "UserModel",
    "Title": "UserModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "PropName": "name",
        "DataType": "string"
      },
      {
        "PropName": "email",
        "DataType": "string"
      },
      {
        "DataType": "string",
        "PropName": "roles",
        "NullAllowed": true,
        "SuggestOptions": true,
        "Options": [
          {
            "Key": "admin",
            "Value": "admin"
          },
          {
            "Key": "content manager",
            "Value": "content manager"
          },
          {
            "Key": "developer",
            "Value": "developer"
          }
        ],
        "AllowMultipleSelect": true
      }
    ],
    "DemoJsx": "export default <UserModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(UserModel, null);",
    "updatedAt": "2020-07-09T15:12:28.917Z",
    "isSystem": true
  },
  {
    "_id": "5eec91bcd991ec83376349e2",
    "Name": "Modal",
    "Title": "Modal",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "common/components",
    "DataArgs": [],
    "DemoJsx": "export default (\n  <MasterBasePage>\n    <ul>\n      {(new Array(30)).fill(0).map((i, ix) => (<li>{`content ${ix + 1}`}</li>))}\n    </ul>\n    <div style=\"display: flex; flex-direction: column; justify-content: space-between; margin: 20px;\">\n      <button onclick=\"Modal.open('/api/TestLongContent')\">No params</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { hideModalHeader: true, title: 'Custom title' })\">hideModalHeader</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { hideCloseButton: true })\">hideCloseButton</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { closeByEscape: false })\">closeByEscape (false)</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { roundCorners: true })\">roundCorners</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { noPadding: true })\">noPadding</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { noPaddingHorizontal: true })\">noPaddingHorizontal</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { noPaddingVertical: true })\">noPaddingVertical</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { width: '300px' })\">width</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { title: 'Custom title' })\">title</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { noCloseOnOverlay: true })\">noCloseOnOverlay</button>\n      <button onclick=\"Modal.open('/api/TestShortContent', { autoHeight: true })\">autoHeight</button>\n      <button onclick=\"Modal.open('/api/TestShortContent', { autoHeight: true, roundCorners: true })\">autoHeight + roundCorners</button>\n      <h2>Footer buttons</h2>\n      <button onclick=\"Modal.open('/api/TestShortContent', { hideModalHeader: true, buttons: [{ id: 'btn_confirm', label: 'Confirm', className: 'btn btn-primary', callback: () => alert('cool') }, { id: 'btn_cancel', label: 'Cancel', className: 'btn', callback: () => Modal.close() }] })\">autoHeight + roundCorners + footer</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { roundCorners: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\">roundCorners + footer</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { hideModalHeader: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\">hideModalHeader + footer</button>\n      <h2>Sidebar</h2>\n      <button onclick=\"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'left', width: '450px', hideCloseButton: true, hideModalHeader: true })\">Sidebar left + width</button>\n      <button onclick=\"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'right', hideCloseButton: true, hideModalHeader: true })\">Sidebar right</button>\n    </div>\n    <ul>\n      {(new Array(50)).fill(0).map((i, ix) => (<li>{`content ${ix + 31}`}</li>))}\n    </ul>\n  </MasterBasePage>\n);\n",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  MasterBasePage,\n  null,\n  executeAppBlock(\n    \"ul\",\n    null,\n    new Array(30).fill(0).map((i, ix) => executeAppBlock(\n      \"li\",\n      null,\n      `content ${ix + 1}`\n    ))\n  ),\n  executeAppBlock(\n    \"div\",\n    { style: \"display: flex; flex-direction: column; justify-content: space-between; margin: 20px;\" },\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent')\" },\n      \"No params\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { hideModalHeader: true, title: 'Custom title' })\" },\n      \"hideModalHeader\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { hideCloseButton: true })\" },\n      \"hideCloseButton\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { closeByEscape: false })\" },\n      \"closeByEscape (false)\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { roundCorners: true })\" },\n      \"roundCorners\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { noPadding: true })\" },\n      \"noPadding\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { noPaddingHorizontal: true })\" },\n      \"noPaddingHorizontal\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { noPaddingVertical: true })\" },\n      \"noPaddingVertical\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { width: '300px' })\" },\n      \"width\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { title: 'Custom title' })\" },\n      \"title\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { noCloseOnOverlay: true })\" },\n      \"noCloseOnOverlay\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestShortContent', { autoHeight: true })\" },\n      \"autoHeight\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestShortContent', { autoHeight: true, roundCorners: true })\" },\n      \"autoHeight + roundCorners\"\n    ),\n    executeAppBlock(\n      \"h2\",\n      null,\n      \"Footer buttons\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestShortContent', { hideModalHeader: true, buttons: [{ id: 'btn_confirm', label: 'Confirm', className: 'btn btn-primary', callback: () => alert('cool') }, { id: 'btn_cancel', label: 'Cancel', className: 'btn', callback: () => Modal.close() }] })\" },\n      \"autoHeight + roundCorners + footer\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { roundCorners: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\" },\n      \"roundCorners + footer\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { hideModalHeader: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\" },\n      \"hideModalHeader + footer\"\n    ),\n    executeAppBlock(\n      \"h2\",\n      null,\n      \"Sidebar\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'left', width: '450px', hideCloseButton: true, hideModalHeader: true })\" },\n      \"Sidebar left + width\"\n    ),\n    executeAppBlock(\n      \"button\",\n      { onclick: \"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'right', hideCloseButton: true, hideModalHeader: true })\" },\n      \"Sidebar right\"\n    )\n  ),\n  executeAppBlock(\n    \"ul\",\n    null,\n    new Array(50).fill(0).map((i, ix) => executeAppBlock(\n      \"li\",\n      null,\n      `content ${ix + 31}`\n    ))\n  )\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.style, null),\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nexport default (\n  <Fragment>\n    <This.style />\n    <This.html />\n    <This.script />\n  </Fragment>\n);\n",
    "Html": "<template id=\"xmodal-template\">\n\t<div id=\"xmodal\" class=\"xmodal-overlay\" style=\"display: none;\">\n\t\t<div id=\"xmodal_container\" class=\"xmodal-container\">\n\t\t\t<div id=\"xmodal_header\" class=\"xmodal-header show\">\n\t\t\t\t<span id=\"xmodal_header_title\" class=\"xmodal-header-text\"></span>\n\t\t\t\t<div id=\"xmodal_close\" class=\"hdd-close xmodal-close-button\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"xmodal-body\">\n\t\t\t\t<div id=\"xmodal_content\" class=\"xmodal-content\">\n\t\t\t\t\t<div class=\"xmodal-spinner d-flex justify-content-center align-items-center\">\n\t\t\t\t\t\t<div class=\"spinner-border text-primary\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>",
    "Css": ".xmodal-overlay {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(0,0,0,0);\n  z-index: 9999;\n  box-sizing: border-box;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  transition: background .25s ease-out;\n  scroll-behavior: smooth;\n}\n\n.xmodal-overlay::-webkit-scrollbar {\n  width: 0px;\n  background: transparent;\n}\n\n.xmodal-overlay.open {\n  background: rgba(0,0,0,.45);\n}\n\n.xmodal-container {\n  position: fixed;\n  top: 200%;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  min-width: 100%;\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  box-shadow: 0 8px 16px 0 rgba(0,0,0,.2);\n  background-color: #fff;\n  z-index: 100;\n  scroll-behavior: smooth;\n  transition: top .25s ease;\n}\n\n.xmodal-container.auto-height {\n  transform: scaleY(0);\n  transform-origin: bottom;\n  transition: transform 0.25s ease;\n}\n\n.xmodal-container.sidebar, .xmodal-container.sidebar.left {\n  position: absolute;\n  top: 0!important;\n  bottom: 0!important;\n  max-height: 100%;\n  min-height: 100%;\n  height: 100%;\n  margin-top: 0!important;\n  margin-bottom: 0!important;\n  min-width: unset;\n  width: 85%;\n}\n\n.xmodal-container.sidebar.left {\n  left: 0!important;\n  margin-left: -85%;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  transition: margin-left .25s ease;\n}\n\n.xmodal-container.sidebar.right {\n  right: 0!important;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n  margin-right: -85%;\n  transition: margin-right .25s ease;\n}\n\n.open > .xmodal-container {\n  top: 0;\n  transform: scaleY(1);\n}\n\n.open > .xmodal-container.auto-height {\n  height: auto;\n  top: auto;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.open > .xmodal-container.sidebar {\n  transform: scaleX(1);\n}\n\n.open > .xmodal-container.sidebar.left {\n  margin-left: 0!important;\n}\n\n.open > .xmodal-container.sidebar.right {\n  margin-right: 0!important;\n}\n\n.xmodal-container.round-corners {\n  border-radius: 12px 12px 0 0;\n  margin-top: 12px;\n}\n\n.open > .xmodal-container.round-corners.auto-height {\n  max-height: calc(100% - 24px);\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xmodal-container.round-corners:before {\n  position: absolute;\n  top: -8px;\n  left: 0;\n  right: 0;\n  margin: auto;\n  width: 44px;\n  height: 4px;\n  background: #eee;\n  content: \" \";\n  border-radius: 9px;\n}\n\n.xmodal-header {\n  position: relative;\n  display: block;\n  height: 0;\n  box-sizing: border-box;\n  z-index: 10;\n  padding: 0;\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n\n.round-corners .xmodal-header {\n  border-radius: 16px 16px 0 0;\n}\n\n.xmodal-header.show {\n  padding: 12px 16px;\n  height: 48px;\n  background-color: #fff;\n  box-shadow: 0 1px 0 0 #eee;\n}\n\n.xmodal-header-text {\n  display: none;\n}\n\n.xmodal-header.show .xmodal-header-text {\n  display: inline-block;\n  vertical-align: middle;\n  font-weight: 700;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  max-width: calc(100% - 24px);\n}\n\n.xmodal-close-button {\n  position: absolute;\n  top: 12px;\n  right: 12px;\n  padding: 0;\n  vertical-align: middle;\n  display: inline-block;\n  width: 24px;\n  height: 24px;\n  z-index: 9999;\n  cursor: pointer;\n  font-size: 20px;\n  text-align: center;\n  line-height: 24px;\n  color: #777;\n}\n\n.xmodal-close-button:hover {\n  color: #000;\n}\n\n.xmodal-close-button.hide {\n  display: none;\n}\n\n.xmodal-body {\n  max-height: 100%;\n  margin-top: 0;\n  height: 100%;\n  box-sizing: border-box;\n  overflow-y: auto;\n  scroll-behavior: smooth;\n}\n\n.xmodal-header.show + .xmodal-body {\n  margin-top: 0;\n  height: calc(100% - 48px);\n}\n\n.xmodal-footer + .xmodal-body {\n  margin-top: 0;\n  height: calc(100% - 64px);\n}\n\n.xmodal-header.show + .xmodal-footer + .xmodal-body {\n  margin-top: 0;\n  /* height: calc(100% - 48px - 64px); */\n  margin-bottom: 64px;\n  height: calc(100% - 48px);\n}\n\n.xmodal-content {\n  padding: 16px;\n}\n\n.xmodal-footer {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  padding: .8rem;\n  border-top: 1px solid var(--color-gray200);\n  background-color: #fff;\n}\n\n.xmodal-container.round-corners .xmodal-footer {\n  bottom: 12px;\n}\n\n.xmodal-footer > button {\n  margin-left: .5rem;\n}\n\n.no-padding .xmodal-content {\n  padding: 0;\n}\n\n.no-padding-h .xmodal-content {\n  padding-left: 0;\n  padding-right: 0;\n}\n\n.no-padding-v .xmodal-content {\n  padding-top: 0;\n  padding-bottom: 0;\n}\n\n.xmodal-spinner {\n  min-height: 250px;\n}\n\n.xmodal-content > .card-body {\n  padding: 0!important;\n}\n\n@media (min-width: 640px) {\n  .xmodal-overlay {\n    padding: 32px 0;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .xmodal-container {\n    position: relative;\n    top: unset !important;\n    border-radius: 4px;\n    width: 960px;\n    min-width: unset;\n    height: auto;\n    bottom: unset;\n    opacity: 0;\n    transition: opacity .25s ease;\n  }\n\n  .xmodal-container.top {\n    margin-top: 0;\n  }\n\n  .xmodal-container.sidebar {\n    width: 25%;\n  }\n\n  .xmodal-container.sidebar.left {\n    margin-left: -85%;\n  }\n\n  .xmodal-container.sidebar.right {\n    margin-right: -85%;\n  }\n\n  .open > .xmodal-container {\n    opacity: 1;\n  }\n\n  .xmodal-container.round-corners {\n    border-radius: 16px;\n    margin-top: auto;\n    overflow: hidden;\n  }\n\n  .xmodal-container.auto-height {\n    margin: auto !important;\n    transform: unset;\n    transform-origin: unset;\n  }\n\n  .xmodal-header.show {\n    padding: 12px 24px;\n  }\n\n  .xmodal-content {\n    padding: 24px;\n  }\n\n  .xmodal-container.round-corners .xmodal-footer {\n    bottom: 0;\n  }\n}",
    "Script": "class XModal {\n  constructor(id) {\n    this.id = id;\n    this._listeners = new Map();\n\n    const template = document.getElementById('xmodal-template').content.cloneNode(true);\n    template.getElementById('xmodal').setAttribute('id', 'xmodal_' + id);\n    template.getElementById('xmodal_container').setAttribute('id', 'xmodal_container_' + id);\n    template.getElementById('xmodal_header').setAttribute('id', 'xmodal_header_' + id);\n    template.getElementById('xmodal_header_title').setAttribute('id', 'xmodal_header_title_' + id);\n    template.getElementById('xmodal_close').setAttribute('id', 'xmodal_close_' + id);\n    template.getElementById('xmodal_content').setAttribute('id', 'xmodal_content_' + id);\n    document.body.appendChild(template);\n\n    this.root = document.getElementById('xmodal_' + id);\n    this.root.style.zIndex = 9999 + this.id;\n    this.container = document.getElementById('xmodal_container_' + id);\n    this.header = document.getElementById('xmodal_header_' + id);\n    this.headerTitle = document.getElementById('xmodal_header_title_' + id);\n    this.closeBtn = document.getElementById('xmodal_close_' + id);\n    this.spinner = `<div class=\"xmodal-spinner d-flex justify-content-center align-items-center\"><div class=\"spinner-border text-success\"></div></div>`;\n    this.content = document.getElementById('xmodal_content_' + id);\n    this.closeByEscape = true;\n\n    this.root.addEventListener('click', (e) => this._closeHandler(e));\n    this.closeBtn.addEventListener('click', (e) => this._closeHandler(e));\n  }\n\n  async open(urlOrDom, options, onLoadCallback, postRequestData) {\n    if (!urlOrDom) {\n      return;\n    }\n\n    if (options) {\n      this.noCloseOnOverlay = options.noCloseOnOverlay || false;\n      this.closeByEscape = options.closeByEscape === undefined ? true : options.closeByEscape;\n      if (options.hideModalHeader) {\n        this.header.classList.remove('show');\n      }\n\n      if (options.hideCloseButton) {\n        this.closeBtn.classList.add('hide');\n      }\n\n      if (options.roundCorners) {\n        this.container.classList.add('round-corners');\n      }\n\n      if (options.autoHeight) {\n        this.container.classList.add('auto-height');\n      }\n\n      if (options.noPadding) {\n        this.container.classList.add('no-padding');\n      }\n\n      if (options.noPaddingHorizontal) {\n        this.container.classList.add('no-padding-h');\n      }\n\n      if (options.noPaddingVertical) {\n        this.container.classList.add('no-padding-v');\n      }\n\n      if (options.width) {\n        this.container.style.width = options.width;\n      }\n\n      if (options.position && options.position === 'top') {\n        this.container.classList.add('top');\n      }\n\n      if (options.sidebar) {\n        this.container.classList.add('sidebar');\n        if (options.sidebarPosition === 'left') {\n          this.container.classList.add('left');\n          if (options.width) {\n            this.container.style.marginLeft = '-' + options.width;\n          }\n        } else if (options.sidebarPosition === 'right') {\n          this.container.classList.add('right');\n          if (options.width) {\n            this.container.style.marginRight = '-' + options.width;\n          }\n        }\n      }\n    }\n\n    this.root.style.display = '';\n    setTimeout(() => { this.root.classList.add('open'); }, 10);\n\n    if (typeof urlOrDom === 'string') {\n      try {\n        const response = await window.postRequest(urlOrDom, postRequestData || {});\n        $(this.content).html(response.data);\n        this.headerTitle.textContent = options && options.title ? options.title : response.data.PageTitle;\n        // setTimeout(() => { SITE.updateImages(); }, 700);\n        if (onLoadCallback && typeof onLoadCallback === 'function') {\n          onLoadCallback(this);\n        }\n      }\n      catch (ex) {\n        alert(\"Something went wrong, please try again: \".concat(message))\n      }\n    } else if (typeof urlOrDom === 'object' && urlOrDom.cloneNode) {\n      $(this.content).html(urlOrDom);\n    }\n\n    if (options && options.buttons && options.buttons.length) {\n      const footer = document.createElement('div');\n      footer.id = \"xmodal_footer_\" + this.id;\n      footer.classList.add('xmodal-footer');\n      options.buttons.forEach(i => {\n        const btn = document.createElement('button');\n        if (i.id) { btn.id = i.id; };\n        btn.className = i.className || 'btn';\n        btn.type = i.type || 'button';\n        btn.innerText = i.label;\n        btn.onclick = i.callback;\n        footer.appendChild(btn);\n      });\n\n      this.header.after(footer);\n    }\n  }\n\n  close() {\n    this.root.classList.remove('open');\n    setTimeout(() => this._destroy(), 250);\n  }\n\n  set onClose(callback) {\n    this._on('close', callback);\n  }\n\n  set onClosed(callback) {\n    this._on('closed', callback);\n  }\n\n  _on(label, callback) {\n    this._listeners.has(label) || this._listeners.set(label, []);\n    this._listeners.get(label).push(callback);\n  }\n\n  _trigger(label, ...args) {\n    if (this._listeners.has(label)) {\n      this._listeners.get(label).forEach((listener) => {\n        listener(...args);\n      });\n    }\n  }\n\n  _closeHandler(e) {\n    e.stopPropagation();\n    if (e.target !== this.root && e.target !== this.closeBtn) {\n      return;\n    }\n\n    if (this.noCloseOnOverlay && e.target === this.root) {\n      return;\n    }\n\n    this._trigger('close');\n    this.close();\n  }\n\n  _destroy() {\n    this.root.remove();\n    this._trigger('closed');\n  }\n}\n\nif (!window.Modal) {\n  const mars = new MarsBlock('xmodal', data, {\n    _instances: [],\n    _init: function () {\n      // Track Escape key press\n      const self = this;\n      document.onkeydown = function (e) {\n        e = e || window.event;\n        let isEscape = false;\n        if (\"key\" in e) {\n          isEscape = (e.key === \"Escape\" || e.key === \"Esc\");\n        } else {\n          isEscape = (e.keyCode === 27);\n        }\n\n        const instances = self._instances;\n        if (isEscape && instances.length && instances[instances.length - 1].closeByEscape) {\n          self.close();\n        }\n      };\n    },\n    _reset: function () {\n      if (this._instances.length) {\n        return;\n      }\n\n      document.body.classList.remove('noscroll');\n      document.body.style.top = '';\n\n      if (this.scrollTop !== undefined) {\n        window.scrollTo(0, this.scrollTop);\n      }\n\n      this.scrollTop = undefined;\n    },\n    _getScroll: function () {\n      if (window.pageYOffset != undefined) {\n        return [pageXOffset, pageYOffset];\n      } else {\n        let sx, sy, d = document, r = d.documentElement, b = d.body;\n        sx = r.scrollLeft || b.scrollLeft || 0;\n        sy = r.scrollTop || b.scrollTop || 0;\n        return [sx, sy];\n      }\n    },\n    open: async function (urlOrDom, options, onLoadCallback, postRequestData) {\n      if (!urlOrDom) {\n        return;\n      }\n\n      if (this._instances.length === 0) {\n        this.scrollTop = (this._getScroll())[1];\n        document.body.classList.add('noscroll');\n        document.body.style.top = -this.scrollTop + 'px';\n      }\n\n      const id = this._instances.length + 1;\n      const modal = new XModal(id);\n      this._instances.push(modal);\n      modal.onClose = () => this.close(id);\n      modal.onClosed = () => this._reset();\n      return modal.open(urlOrDom, options, onLoadCallback, postRequestData);\n    },\n    close: function (id) {\n      if (id) {\n        const index = this._instances.findIndex(i => i.id === id);\n        this._instances[index].close();\n        this._instances.splice(index, 1);\n        return;\n      }\n\n      const lastModal = this._instances.pop();\n      if (lastModal) {\n        lastModal.close();\n      }\n    },\n  });\n\n  mars._init();\n  window.Modal = window.Modal || mars;\n}\n",
    "isSystem": true
  },
  {
    "_id": "5eee9ea18e59c71a9c4cc026",
    "Name": "ValidateDataBasedOnModel",
    "Title": "ValidateDataBasedOnModel",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return await Mars.services.ValidateDataBasedOnModel({\r\n    modelName: 'UserModel',\r\n    data: {\r\n      name: 'hohn',\r\n      email: '',\r\n    }\r\n  })\r\n}\r\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n  return await Mars.services.ValidateDataBasedOnModel({\n    modelName: 'UserModel',\n    data: {\n      name: 'hohn',\n      email: ''\n    }\n  });\n}\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "var errors = [];\r\nvar warnings = [];\r\nvar logs = [];\r\nconst { moment } = Mars.libs;\r\n\r\nfunction getStringPropsTypes(pt, allowMultipleSelect) {\r\n  if (allowMultipleSelect) return 'array'\r\n  if (pt === 'image' || pt === 'color' || pt === 'date' || pt === 'datetime') return 'string'\r\n  return pt\r\n}\r\n\r\nfunction validateProp(model, prop, path) {\r\n  delete prop.$$hashKey;\r\n  logs.push(`Validating ${model.PropName} on path ${path}`);\r\n  var propType = Array.isArray(prop[model.PropName]) ? 'array' : typeof (prop[model.PropName]);\r\n  propType = propType == 'number' ? 'int' : propType;\r\n  propType = model.DataType == 'dateTime' && moment(prop[model.PropName]).isValid() ? 'dateTime' : propType;\r\n\r\n  if (propType == 'undefined' && model.NullAllowed) return;\r\n  if (!model.NullAllowed && !prop[model.PropName]) errors.push(`Data on path '${path ? path + '.' : path}${model.PropName}' should not be null or empty`);\r\n\r\n  if (getStringPropsTypes(model.DataType, model.AllowMultipleSelect) != propType) errors.push(`Data on path '${path ? path + '.' : path}${model.PropName}' should have propType ${model.DataType}, but it is ${propType}`);\r\n  else {\r\n    if (propType === 'object') {\r\n      model.SubArgs.forEach(p => validateProp(p, prop[model.PropName], `${path ? path + '.' : path}${model.PropName}`));\r\n    }\r\n    if (propType === 'array' && model.SubArgs) {\r\n      if (prop[model.PropName].length == 0 && !model.NullAllowed) errors.push(`Array ${model.PropName} on path ${path} is empty`);\r\n      for (var i = 0; i < prop[model.PropName].length; i++) {\r\n        model.SubArgs.forEach(p => validateProp(p, prop[model.PropName][i], `${path ? path + '.' : path}${model.PropName}[${i}]`));\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nasync function server() {\r\n\r\n  if (!data || !data.modelName) errors.push('Empty model');\r\n  if (!data.data) errors.push('Empty data');\r\n\r\n  const model = Mars.allBlocks.find(t => t.Name === data.modelName);\r\n  if (!model) errors.push('Model not found');\r\n\r\n\r\n  var baseType = Array.isArray(data.data) ? 'array' : typeof (data.data);\r\n\r\n  if (baseType != 'object') errors.push(`Data should have propType object, but it is ${baseType}`);\r\n\r\n  if (errors.length == 0) model.DataArgs.forEach(p => validateProp(p, data.data, ''));\r\n\r\n\r\n\r\n  return {\r\n    valid: errors.length === 0,\r\n    errors,\r\n  };\r\n}",
    "isSystem": true
  },
  {
    "_id": "5eefa99d76810d113071e3ee",
    "Name": "UpdateAwsLambdaCode",
    "Title": "UpdateAwsLambda",
    "Type": "service",
    "Apps": [],
    "Folder": "aws",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  //const b1 = Mars.services.UpdateAwsLambdaCode({ appId: 'content-service-dev-cms' })\r\n  return await Promise.all([\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'holidada' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'suntegy' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'mobile' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'filmfinder' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'aspirity' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'cinema' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'ticketing' }),\r\n    Mars.services.UpdateAwsLambdaCode({ appId: 'bergenkino' }),\r\n  ])\r\n}\r\n\r\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n  //const b1 = Mars.services.UpdateAwsLambdaCode({ appId: 'content-service-dev-cms' })\n  return await Promise.all([Mars.services.UpdateAwsLambdaCode({ appId: 'holidada' }), Mars.services.UpdateAwsLambdaCode({ appId: 'suntegy' }), Mars.services.UpdateAwsLambdaCode({ appId: 'mobile' }), Mars.services.UpdateAwsLambdaCode({ appId: 'filmfinder' }), Mars.services.UpdateAwsLambdaCode({ appId: 'aspirity' }), Mars.services.UpdateAwsLambdaCode({ appId: 'cinema' }), Mars.services.UpdateAwsLambdaCode({ appId: 'ticketing' }), Mars.services.UpdateAwsLambdaCode({ appId: 'bergenkino' })]);\n}\n\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "async function server() {\r\n  try {\r\n    if (!data.appId) throw new Error('appId is requered')\r\n    var params = {\r\n      FunctionName: data.appId + \"-function\",\r\n      S3Bucket: \"marscode\",\r\n      S3Key: \"node_modules/app.zip\"\r\n    };\r\n\r\n    var AWS = require(\"aws-sdk\");\r\n\r\n    AWS.config.update({\r\n      region: 'eu-north-1',\r\n      secretAccessKey: 'zP+l0yO7XVM8wmjinqyqpDcK86L6oFwJgMkAXTS1',\r\n      accessKeyId: 'AKIARME3PQSOFOEUAQPT'\r\n    });\r\n    \r\n    var lambda = new AWS.Lambda({ region: 'eu-north-1' });\r\n\r\n    return new Promise((resolve) => {\r\n      lambda.updateFunctionCode(params, function (err, data) {\r\n        if (err) resolve('create aws labda has failed: ' + err)\r\n        else setTimeout(() => {\r\n          resolve(data);\r\n        }, 1000 * 5)\r\n      })\r\n    })\r\n  } catch (e) {\r\n    return ({\r\n      statusCode: 200,\r\n      body: e.toString()\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef104115c0175311807f550",
    "Name": "MongoDbCrud",
    "Title": "MongoDbCrud",
    "Type": "service",
    "Apps": [],
    "Folder": "model editor",
    "DataArgs": [],
    "DemoJsx": "export default <MongoDbCrud />",
    "DemoJsxTranspiled": "export default executeAppBlock(MongoDbCrud, null);",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction api() {\r\n  return {\r\n    saveObject,\r\n    deleteObject\r\n  }\r\n}\r\n\r\nasync function saveObject(collectionName, modelName, newDoc, path, objectId) {\r\n  if (!newDoc) throw new Error('Document is null');\r\n  const doc = objectId ? await Mars.data[collectionName].findById(objectId) : null;\r\n  let triggers;\r\n  if (Mars.services[modelName]) {\r\n    triggers = Mars.services[modelName](newDoc).triggers;\r\n  }\r\n\r\n  if (modelName && path !== 'DataArgs') {\r\n    const validate = await Mars.services.ValidateDataBasedOnModel({\r\n      modelName,\r\n      data: newDoc\r\n    })\r\n    if (!validate.valid) throw new Error(validate.errors.join('\\n'));\r\n    if (triggers && triggers.beforeUpdate && objectId) await triggers.beforeUpdate(doc, newDoc)\r\n    if (triggers && triggers.beforeInsert && !objectId) await triggers.beforeInsert(newDoc)\r\n  }\r\n  const r = await Mars.data[collectionName].upsert(newDoc, path, objectId);\r\n\r\n  if (triggers && triggers.afterUpdate && objectId) await triggers.afterUpdate(doc, newDoc)\r\n  if (triggers && triggers.afterInsert && !objectId) await triggers.afterInsert(newDoc)\r\n\r\n  if (collectionName === 'blocks') {\r\n    const blockObj = await Mars.data.blocks.findById(objectId)\r\n    await Mars.services.ResetCache({\r\n      blockObj\r\n    })\r\n  }\r\n\r\n  if (triggers && triggers.redirectAfterSave) {\r\n    const redirectUrl = await triggers.redirectAfterSave(newDoc);\r\n    return {\r\n      evalJs: `location.href='${redirectUrl}'`\r\n    }\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\nasync function deleteObject(collectionName, objectId, modelName) {\r\n  let triggers;\r\n  const doc = await Mars.data[collectionName].findById(objectId);\r\n  if (Mars.services[modelName]) {\r\n    triggers = Mars.services[modelName](doc).triggers;\r\n  }\r\n  if (triggers && triggers.beforeDelete) await triggers.beforeDelete(doc)\r\n\r\n  if (!objectId) throw new Error('objectId is null');\r\n\r\n  const r = await Mars.data[collectionName].deleteById(objectId);\r\n  if (triggers && triggers.afterDelete) await triggers.afterDelete(doc)\r\n  return r;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef10b985c0175311807f553",
    "Name": "BlockModel",
    "Title": "BlockModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "PropName": "Name",
        "DataType": "string"
      },
      {
        "PropName": "Note",
        "DataType": "string"
      },
      {
        "PropName": "Placement",
        "DataType": "string",
        "Options": [
          {
            "Key": "Head",
            "Value": "head"
          },
          {
            "Key": "Body",
            "Value": ""
          }
        ],
        "UseUrlParams": false
      },
      {
        "PropName": "Type",
        "DataType": "string",
        "Options": [
          {
            "Key": "UI Block",
            "Value": "block"
          },
          {
            "Key": "Model",
            "Value": "model"
          },
          {
            "Key": "Service",
            "Value": "service"
          },
          {
            "Key": "Prompter",
            "Value": "prompter"
          },
          {
            "Value": "jsx",
            "Key": "Jsx UI Block"
          },
          {
            "Value": "app",
            "Key": "Mobile native block"
          }
        ],
        "UseUrlParams": false,
        "SuggestOptions": true
      },
      {
        "PropName": "Folder",
        "DataType": "string",
        "Options": "/api/folders/Blocks",
        "SuggestOptions": true
      },
      {
        "PropName": "ShowOnPage",
        "DataType": "string",
        "Options": [
          {
            "Key": "Any",
            "Value": "any"
          },
          {
            "Key": "Draft",
            "Value": "draft"
          },
          {
            "Key": "Page",
            "Value": "page"
          }
        ]
      },
      {
        "PropName": "Title",
        "DataType": "string"
      },
      {
        "PropName": "Apps",
        "DataType": "int",
        "Options": "/api/getApps",
        "AllowMultipleSelect": true,
        "SuggestOptions": true
      },
      {
        "DataType": "text",
        "PropName": "LoaderHtml",
        "RegExp": "",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "TestPage"
      },
      {
        "DataType": "boolean",
        "PropName": "SystemBlock",
        "RegExp": ""
      },
      {
        "DataType": "string",
        "PropName": "Icon",
        "Description": "font awesome class, svg tag or image url are allowed",
        "NullAllowed": false
      },
      {
        "DataType": "image",
        "PropName": "Image",
        "RegExp": "",
        "Description": "Block example screenshot for examples displaying"
      },
      {
        "DataType": "boolean",
        "PropName": "ClientTypeScript",
        "RegExp": "",
        "Description": "if true the client.js will use typescript linter",
        "NullAllowed": true
      },
      {
        "DataType": "boolean",
        "PropName": "ServerTypeScript",
        "RegExp": "",
        "Description": "if true the server.js, jsx and server/client will use typescript linter",
        "NullAllowed": true
      },
      {
        "DataType": "text",
        "PropName": "Description",
        "RegExp": ""
      },
      {
        "DataType": "int",
        "PropName": "JsxVersion",
        "RegExp": "",
        "Description": "1 = old version. 2 = new version fully compatible with react jsx.",
        "NullAllowed": true,
        "DefaultValue": "1"
      },
      {
        "DataType": "boolean",
        "PropName": "ShowCompiledJsx",
        "RegExp": "",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "AllowedSearchForRoles",
        "Title": "Allowed Search For Roles",
        "Description": "If empty every user is able to find block in the search prompter",
        "NullAllowed": true,
        "SuggestOptions": true,
        "Options": "/api/roles",
        "AllowMultipleSelect": true
      }
    ],
    "DemoJsx": "export default <BlockModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(BlockModel, null);",
    "isSystem": true
  },
  {
    "_id": "5ef23b12962c8333105de3f8",
    "Name": "HelpersJs",
    "Title": "HelpersJs",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "client js",
    "DataArgs": [],
    "DemoJsx": "export default <HelpersJs />",
    "DemoJsxTranspiled": "export default executeAppBlock(HelpersJs, null);",
    "Script": "window.resizeIFrameToFitContent = (iFrame) => {\r\n  const height = iFrame.contentWindow.document.body.scrollHeight;\r\n  iFrame.width = iFrame.contentWindow.document.body.scrollWidth;\r\n  iFrame.height = height > 550 ? height : 550;\r\n}",
    "JsxTranspiled": "export default thisBlock.Script;",
    "Jsx": "export default thisBlock.Script",
    "isSystem": true
  },
  {
    "_id": "5ef2a49a962c8333105de3fe",
    "Name": "EditDataArgsHtmlPage",
    "Title": "EditDataArgsHtmlPage",
    "Type": "page",
    "Apps": [],
    "Folder": "model editor/edit args",
    "DataArgs": [],
    "DemoJsx": "export default <EditDataArgsHtmlPage modelName=\"BlockFiles\"/>",
    "DemoJsxTranspiled": "export default executeAppBlock(EditDataArgsHtmlPage, { modelName: \"BlockFiles\" });",
    "Html": "<!doctype html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n\t<meta charset=\"utf-8\">\r\n\t<base href=\"/\" />\r\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,maximum-scale=5\" />\r\n\t<meta name=\"theme-color\" content=\"#a044aaff\" />\r\n\t<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\r\n\t<script src=\"https://cdn.jsdelivr.net/npm/vue@2.6.11\"></script>\r\n\t<script src=\"https://ajax.googleapis.com/ajax/libs/angularjs/1.7.5/angular.min.js\" defer></script>\r\n\t<script src=\"https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js\"></script><!-- CSS Front Template -->\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/app.min.css?v=11\">\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/css/theme.min.css\">\r\n\t<!-- It can't be parsed by grunt -->\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/custom.min.css?v=40\">\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/app-theme/styles.css?v=13\"><!-- Favicon -->\r\n\t<link rel=\"icon\"\r\n\t\thref=\"https://cdn-dev.filmgrail.com/web-files/20/image/logo/holidada-icon-180x180.png (--a344ab--) (180x180)?updated=2020-03-05T15:26:56.463Z\">\r\n\t<!--<link rel=\"apple-touch-icon\" href=\"https://holidada-dev.azureedge.net/assets/images/apple-touch-icon.png\"><link rel=\"apple-touch-icon\" sizes=\"72x72\" href=\"https://holidada-dev.azureedge.net/assets/images/icon-72x72.png\"><link rel=\"apple-touch-icon\" sizes=\"114x114\" href=\"https://holidada-dev.azureedge.net/assets/images/icon-114x114.png\">-->\r\n\t<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->\r\n\t<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->\r\n\t<!--[if lt IE 9]><script src=\"https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js\"></script><script src=\"https://oss.maxcdn.com/respond/1.4.2/respond.min.js\"></script><![endif]-->\r\n\t<meta name=\"google-signin-client_id\"\r\n\t\tcontent=\"157319711439-t5vnovk7b9e4mhsuj8m1q33qtgb433o8.apps.googleusercontent.com\">\r\n\t<style>\r\n\t\tbutton,\r\n\t\ta {\r\n\t\t\tcursor: pointer !important;\r\n\t\t}\r\n\r\n\t\t[ng\\:cloak],\r\n\t\t[ng-cloak],\r\n\t\t[data-ng-cloak],\r\n\t\t[x-ng-cloak],\r\n\t\t.ng-cloak,\r\n\t\t.x-ng-cloak,\r\n\t\t[v-cloak] {\r\n\t\t\tdisplay: none !important;\r\n\t\t}\r\n\t</style>\r\n\t<title>Block Properties For Mars3</title>\r\n\t<meta name=\"title\" content=\"Block Properties For Mars3\">\r\n\t<meta name=\"description\" content=\"\">\r\n\t<meta name=\"keywords\" content=\"\" />\r\n\t<link rel=\"canonical\"\r\n\t\thref=\"https://holidada-dev.azureedge.net/admin/block-properties-for-mars3/5e9723403784782b58f49f78\" />\r\n\r\n\t<meta itemprop=\"name\" content=\"Block Properties For Mars3\">\r\n\t<meta itemprop=\"description\" content=\"\">\r\n\t<meta itemprop=\"image\" content=\"undefined\">\r\n\r\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\r\n\r\n\t<meta property=\"og:type\" content=\"website\">\r\n\t<meta property=\"og:url\"\r\n\t\tcontent=\"https://holidada-dev.azureedge.net/admin/block-properties-for-mars3/5e9723403784782b58f49f78\">\r\n\t<meta property=\"og:title\" content=\"Block Properties For Mars3\">\r\n\t<meta property=\"og:description\" content=\"\">\r\n\t<meta property=\"og:image\" content=\"\">\r\n\t<meta property=\"og:site_name\" content=\"Holidada\" />\r\n\r\n\t<meta property=\"twitter:card\" content=\"summary_large_image\">\r\n\t<meta property=\"twitter:url\"\r\n\t\tcontent=\"https://holidada-dev.azureedge.net/admin/block-properties-for-mars3/5e9723403784782b58f49f78\">\r\n\t<meta property=\"twitter:title\" content=\"Block Properties For Mars3\">\r\n\t<meta property=\"twitter:description\" content=\"\">\r\n\t<meta property=\"twitter:image\" content=\"\">\r\n</head>\r\n<script class=\"pagePropsScript\" type=\"text/javascript\">\r\n\twindow.setPageProps = function() {\r\n      window.pageProps = {\r\n        Title: 'Block Properties For Mars3',\r\n        Url: 'admin/block-properties-for-mars3/:blockId',\r\n        UrlModel: 'admin/block-properties-for-mars3/:blockId',\r\n        UrlParams: {\r\n          \"blockId\": \"5e9723403784782b58f49f78\"\r\n        },\r\n        IsMaster: false,\r\n        MasterPageId: 'null',\r\n        _id: '5ef2a2e2bc771032ace4240a',\r\n        CreatedBy: {\r\n          \"Name\": \"John Rush üèÖ \",\r\n          \"Timestamp\": \"2020-06-24T00:48:34.390Z\",\r\n          \"UserId\": 20\r\n        },\r\n        LastChanged: {\r\n          \"DateTime\": \"2020-06-24T00:51:09.847Z\",\r\n          \"UserId\": 20,\r\n          \"UserName\": \"John Rush üèÖ \"\r\n        },\r\n        Token: 'kW13a6cXmA1bRedX1TkzxyqQM8sblhqlSKIAOxu5wcjJrGf4wzZwQpowkuDyWcb7bUKhX9vAUM4uC27BXGdDCcp8Pp1Pg3hG/l1kL47eY7k+T/yuyRlaPHB3WPcyjv9f4ZGWfQmfabhyKYDAcHhpGp4kuQr6rTPiLYRdZsNB2LY=',\r\n        IsUserAdmin: true,\r\n        PageType: 'system',\r\n        Args: [],\r\n        Style: {\r\n          \"Background\": {\r\n            \"Size\": \"\",\r\n            \"Attachment\": \"\",\r\n            \"VerticalAligment\": \"\",\r\n            \"HorizontalAligment\": \"\",\r\n            \"Color\": \"\",\r\n            \"Image\": \"\"\r\n          }\r\n        },\r\n        WhiteTextOnDark: false,\r\n        UrlParamsSamples: undefined,\r\n        StartDate: null,\r\n        EndDate: null,\r\n        OutOfDate: false,\r\n        MetaData: {},\r\n      };\r\n      window.appStyles = {\r\n        \"Name\": \"Holidada\",\r\n        \"WhiteTextOnDark\": false,\r\n        \"Favicon\": \"https://cdn-dev.filmgrail.com/web-files/20/image/logo/holidada-icon-180x180.png (--a344ab--) (180x180)?updated=2020-03-05T15:26:56.463Z\",\r\n        \"FontFamilies\": [{\r\n          \"Title\": \"Serif\",\r\n          \"FontFamily\": \"serif\",\r\n          \"Id\": \"serif\"\r\n        }, {\r\n          \"Title\": \"Sans-serif\",\r\n          \"FontFamily\": \"sans-serif\",\r\n          \"Id\": \"sans-serif\"\r\n        }, {\r\n          \"Title\": \"Monospace\",\r\n          \"FontFamily\": \"monospace\",\r\n          \"Id\": \"monospace\"\r\n        }, {\r\n          \"Title\": \"Cursive\",\r\n          \"FontFamily\": \"cursive\",\r\n          \"Id\": \"cursive\"\r\n        }, {\r\n          \"Title\": \"Fantasy\",\r\n          \"FontFamily\": \"fantasy\",\r\n          \"Id\": \"fantasy\"\r\n        }, {\r\n          \"Title\": \"System-ui\",\r\n          \"FontFamily\": \"system-ui\",\r\n          \"Id\": \"system-ui\"\r\n        }],\r\n        \"Shadow\": {\r\n          \"Color\": \"rgba(0, 0, 0, 0.125)\",\r\n          \"Blur\": \"35\",\r\n          \"HorizontalOffset\": \"0\",\r\n          \"VerticalOffset\": \"0\"\r\n        },\r\n        \"Border\": {\r\n          \"Width\": \"1\",\r\n          \"Style\": \"solid\",\r\n          \"Radius\": \"8\",\r\n          \"Color\": \"#e7eaf3\"\r\n        },\r\n        \"TextSizes\": {\r\n          \"1\": \"14px\",\r\n          \"2\": \"16px\",\r\n          \"3\": \"18px\",\r\n          \"4\": \"26px\",\r\n          \"5\": \"36px\",\r\n          \"6\": \"45px\",\r\n          \"7\": \"60px\"\r\n        },\r\n        \"SpacingList\": [{\r\n          \"Id\": \"0\",\r\n          \"Title\": \"0\",\r\n          \"Web\": \"0\"\r\n        }, {\r\n          \"Id\": \"1\",\r\n          \"Title\": \"1\",\r\n          \"Web\": \"0.5rem\"\r\n        }, {\r\n          \"Id\": \"2\",\r\n          \"Title\": \"2\",\r\n          \"Web\": \"1rem\"\r\n        }, {\r\n          \"Id\": \"3\",\r\n          \"Title\": \"3\",\r\n          \"Web\": \"1.5rem\"\r\n        }, {\r\n          \"Id\": \"4\",\r\n          \"Title\": \"4\",\r\n          \"Web\": \"2rem\"\r\n        }, {\r\n          \"Id\": \"5\",\r\n          \"Title\": \"5\",\r\n          \"Web\": \"2.5rem\"\r\n        }],\r\n        \"ColorList\": [{\r\n          \"Id\": \"primary\",\r\n          \"Title\": \"primary\",\r\n          \"Web\": \"#a044aaff\"\r\n        }, {\r\n          \"Id\": \"secondary\",\r\n          \"Title\": \"secondary\",\r\n          \"Web\": \"#4eab5fff\"\r\n        }, {\r\n          \"Id\": \"danger\",\r\n          \"Title\": \"danger\",\r\n          \"Web\": \"#ea4242ff\"\r\n        }, {\r\n          \"Id\": \"warning\",\r\n          \"Title\": \"warning\",\r\n          \"Web\": \"#faad14ff\"\r\n        }, {\r\n          \"Id\": \"link\",\r\n          \"Title\": \"link\",\r\n          \"Web\": \"#43484dff\"\r\n        }, {\r\n          \"Id\": \"black\",\r\n          \"Title\": \"black\",\r\n          \"Web\": \"#000000ff\"\r\n        }, {\r\n          \"Id\": \"strong\",\r\n          \"Title\": \"strong\",\r\n          \"Web\": \"#000000ff\"\r\n        }, {\r\n          \"Id\": \"default\",\r\n          \"Title\": \"default\",\r\n          \"Web\": \"#55636eff\"\r\n        }, {\r\n          \"Id\": \"muted\",\r\n          \"Title\": \"muted\",\r\n          \"Web\": \"#8a8a8aff\"\r\n        }, {\r\n          \"Id\": \"light\",\r\n          \"Title\": \"light\",\r\n          \"Web\": \"#ccccccff\"\r\n        }, {\r\n          \"Id\": \"extra-light\",\r\n          \"Title\": \"extra-light\",\r\n          \"Web\": \"#fafafaff\"\r\n        }, {\r\n          \"Id\": \"white\",\r\n          \"Title\": \"white\",\r\n          \"Web\": \"#ffffffff\"\r\n        }, {\r\n          \"Id\": \"strong-inverted\",\r\n          \"Title\": \"strong-inverted\",\r\n          \"Web\": \"#e1dfddff\"\r\n        }, {\r\n          \"Id\": \"default-inverted\",\r\n          \"Title\": \"default-inverted\",\r\n          \"Web\": \"#bbc1c7ff\"\r\n        }, {\r\n          \"Id\": \"muted-inverted\",\r\n          \"Title\": \"muted-inverted\",\r\n          \"Web\": \"#c5cbd1ff\"\r\n        }, {\r\n          \"Id\": \"light-inverted\",\r\n          \"Title\": \"light-inverted\",\r\n          \"Web\": \"#070605ff\"\r\n        }, {\r\n          \"Id\": \"extra-light-inverted\",\r\n          \"Title\": \"extra-light-inverted\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"transparent\",\r\n          \"Title\": \"transparent\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"soft-primary\",\r\n          \"Title\": \"soft-primary\",\r\n          \"Web\": \"#a044aa33\"\r\n        }, {\r\n          \"Id\": \"soft-secondary\",\r\n          \"Title\": \"soft-secondary\",\r\n          \"Web\": \"#4eab5f33\"\r\n        }, {\r\n          \"Id\": \"soft-danger\",\r\n          \"Title\": \"soft-danger\",\r\n          \"Web\": \"#ea424233\"\r\n        }, {\r\n          \"Id\": \"soft-warning\",\r\n          \"Title\": \"soft-warning\",\r\n          \"Web\": \"#faad1433\"\r\n        }, {\r\n          \"Id\": \"soft-link\",\r\n          \"Title\": \"soft-link\",\r\n          \"Web\": \"#43484d33\"\r\n        }, {\r\n          \"Id\": \"soft-black\",\r\n          \"Title\": \"soft-black\",\r\n          \"Web\": \"#00000033\"\r\n        }, {\r\n          \"Id\": \"soft-strong\",\r\n          \"Title\": \"soft-strong\",\r\n          \"Web\": \"#00000033\"\r\n        }, {\r\n          \"Id\": \"soft-default\",\r\n          \"Title\": \"soft-default\",\r\n          \"Web\": \"#55636e33\"\r\n        }, {\r\n          \"Id\": \"soft-muted\",\r\n          \"Title\": \"soft-muted\",\r\n          \"Web\": \"#8a8a8a33\"\r\n        }, {\r\n          \"Id\": \"soft-light\",\r\n          \"Title\": \"soft-light\",\r\n          \"Web\": \"#cccccc33\"\r\n        }, {\r\n          \"Id\": \"soft-extra-light\",\r\n          \"Title\": \"soft-extra-light\",\r\n          \"Web\": \"#fafafa33\"\r\n        }, {\r\n          \"Id\": \"soft-white\",\r\n          \"Title\": \"soft-white\",\r\n          \"Web\": \"#ffffff33\"\r\n        }, {\r\n          \"Id\": \"soft-strong-inverted\",\r\n          \"Title\": \"soft-strong-inverted\",\r\n          \"Web\": \"#e1dfdd33\"\r\n        }, {\r\n          \"Id\": \"soft-default-inverted\",\r\n          \"Title\": \"soft-default-inverted\",\r\n          \"Web\": \"#bbc1c733\"\r\n        }, {\r\n          \"Id\": \"soft-muted-inverted\",\r\n          \"Title\": \"soft-muted-inverted\",\r\n          \"Web\": \"#c5cbd133\"\r\n        }, {\r\n          \"Id\": \"soft-light-inverted\",\r\n          \"Title\": \"soft-light-inverted\",\r\n          \"Web\": \"#07060533\"\r\n        }, {\r\n          \"Title\": \"soft-primary\",\r\n          \"Id\": \"#a044aa33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"soft-secondary\",\r\n          \"Id\": \"#4eab5f33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"color-danger\",\r\n          \"Id\": \"#ea424233\",\r\n          \"Web\": \"\"\r\n        }],\r\n        \"ColumnWidth\": {\r\n          \"1\": \"1\",\r\n          \"2\": \"2\",\r\n          \"3\": \"3\",\r\n          \"4\": \"4\",\r\n          \"5\": \"5\",\r\n          \"6\": \"6\",\r\n          \"7\": \"7\",\r\n          \"8\": \"8\",\r\n          \"9\": \"9\",\r\n          \"10\": \"10\",\r\n          \"11\": \"11\",\r\n          \"Boxed\": \"12\",\r\n          \"FluidBoxed\": \"13\",\r\n          \"Fluid\": \"14\"\r\n        },\r\n        \"ColumnWidthMobile\": {\r\n          \"1\": \"1\",\r\n          \"2\": \"2\",\r\n          \"3\": \"3\",\r\n          \"4\": \"4\",\r\n          \"5\": \"5\",\r\n          \"6\": \"6\",\r\n          \"7\": \"7\",\r\n          \"8\": \"8\",\r\n          \"9\": \"9\",\r\n          \"10\": \"10\",\r\n          \"11\": \"11\",\r\n          \"FullWidth\": \"12\"\r\n        },\r\n        \"EmptyImageText\": \"\",\r\n        \"CustomColors\": [{\r\n          \"Title\": \"soft-primary\",\r\n          \"Id\": \"#a044aa33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"soft-secondary\",\r\n          \"Id\": \"#4eab5f33\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Title\": \"color-danger\",\r\n          \"Id\": \"#ea424233\",\r\n          \"Web\": \"\"\r\n        }],\r\n        \"FontSizes\": [{\r\n          \"Id\": \"1\",\r\n          \"Title\": \"1\",\r\n          \"Web\": \"14px\"\r\n        }, {\r\n          \"Id\": \"2\",\r\n          \"Title\": \"2\",\r\n          \"Web\": \"16px\"\r\n        }, {\r\n          \"Id\": \"3\",\r\n          \"Title\": \"3\",\r\n          \"Web\": \"18px\"\r\n        }, {\r\n          \"Id\": \"4\",\r\n          \"Title\": \"4\",\r\n          \"Web\": \"26px\"\r\n        }, {\r\n          \"Id\": \"5\",\r\n          \"Title\": \"5\",\r\n          \"Web\": \"36px\"\r\n        }, {\r\n          \"Id\": \"6\",\r\n          \"Title\": \"6\",\r\n          \"Web\": \"45px\"\r\n        }, {\r\n          \"Id\": \"7\",\r\n          \"Title\": \"7\",\r\n          \"Web\": \"60px\"\r\n        }],\r\n        \"NotTransformedColorList\": [{\r\n          \"Id\": \"primary\",\r\n          \"Title\": \"primary\",\r\n          \"Web\": \"#a044aa\"\r\n        }, {\r\n          \"Id\": \"secondary\",\r\n          \"Title\": \"secondary\",\r\n          \"Web\": \"#4eab5f\"\r\n        }, {\r\n          \"Id\": \"danger\",\r\n          \"Title\": \"danger\",\r\n          \"Web\": \"#ea4242\"\r\n        }, {\r\n          \"Id\": \"warning\",\r\n          \"Title\": \"warning\",\r\n          \"Web\": \"#faad14\"\r\n        }, {\r\n          \"Id\": \"link\",\r\n          \"Title\": \"link\",\r\n          \"Web\": \"#43484d\"\r\n        }, {\r\n          \"Id\": \"black\",\r\n          \"Title\": \"black\",\r\n          \"Web\": \"#000000\"\r\n        }, {\r\n          \"Id\": \"strong\",\r\n          \"Title\": \"strong\",\r\n          \"Web\": \"#000000\"\r\n        }, {\r\n          \"Id\": \"default\",\r\n          \"Title\": \"default\",\r\n          \"Web\": \"#55636e\"\r\n        }, {\r\n          \"Id\": \"muted\",\r\n          \"Title\": \"muted\",\r\n          \"Web\": \"#8a8a8a\"\r\n        }, {\r\n          \"Id\": \"light\",\r\n          \"Title\": \"light\",\r\n          \"Web\": \"#cccccc\"\r\n        }, {\r\n          \"Id\": \"extra-light\",\r\n          \"Title\": \"extra-light\",\r\n          \"Web\": \"#fafafa\"\r\n        }, {\r\n          \"Id\": \"white\",\r\n          \"Title\": \"white\",\r\n          \"Web\": \"#ffffff\"\r\n        }, {\r\n          \"Id\": \"strong-inverted\",\r\n          \"Title\": \"strong-inverted\",\r\n          \"Web\": \"#e1dfdd\"\r\n        }, {\r\n          \"Id\": \"default-inverted\",\r\n          \"Title\": \"default-inverted\",\r\n          \"Web\": \"#bbc1c7\"\r\n        }, {\r\n          \"Id\": \"muted-inverted\",\r\n          \"Title\": \"muted-inverted\",\r\n          \"Web\": \"#c5cbd1\"\r\n        }, {\r\n          \"Id\": \"light-inverted\",\r\n          \"Title\": \"light-inverted\",\r\n          \"Web\": \"#070605\"\r\n        }, {\r\n          \"Id\": \"extra-light-inverted\",\r\n          \"Title\": \"extra-light-inverted\",\r\n          \"Web\": \"\"\r\n        }, {\r\n          \"Id\": \"transparent\",\r\n          \"Title\": \"transparent\",\r\n          \"Web\": \"\"\r\n        }]\r\n      };\r\n      window.APP = {\r\n        \"Name\": \"Holidada\",\r\n        \"CoreAppHeader\": \"holidada\",\r\n        \"EmailSettings\": {\r\n          \"SenderName\": \"Holidiada\",\r\n          \"CopyCC\": [{\r\n            \"Email\": \"rashid.lepshokov@gmail.com\"\r\n          }],\r\n          \"CopyBCC\": [{\r\n            \"Email\": \"rashid.lepshokov@gmail.com\"\r\n          }],\r\n          \"SenderAddress\": \"\"\r\n        },\r\n        \"ForceHttps\": false,\r\n        \"TimeFormat\": \"24\",\r\n        \"CacheSettings\": {\r\n          \"PageDefaultTtl\": \"300\",\r\n          \"StylesTtl\": \"300\",\r\n          \"PartialDefaultTtl\": \"300\"\r\n        },\r\n        \"AdsEnabled\": \"\",\r\n        \"Analytics\": {\r\n          \"GoogleAnalytics\": \"\",\r\n          \"MixpanelToken\": \"\"\r\n        },\r\n        \"RedirectToSubAppProgram\": \"\",\r\n        \"ScraperId\": \"\",\r\n        \"ShowRatings\": \"\",\r\n        \"TimeZone\": \"\",\r\n        \"FeaturedBlocks\": [{\r\n          \"Name\": \"text\",\r\n          \"Id\": \"5d13fcef6989a135152105d9\",\r\n          \"Icon\": \"fas fa-align-left\"\r\n        }, {\r\n          \"Name\": \"html\",\r\n          \"Id\": \"5d0fb8a397f29b1e667ccfcd\"\r\n        }, {\r\n          \"Name\": \"image\",\r\n          \"Id\": \"5d0f6ad557717620e679e16e\",\r\n          \"Icon\": \"far fa-image\"\r\n        }]\r\n      };\r\n      window.angularAppConstants = {\r\n        appStyle: window.appStyles,\r\n        recentFolderName: 'Recently used',\r\n        pageProps: pageProps,\r\n      };\r\n      window.pageTitle = \"Block Properties For Mars3\";\r\n      window.pageId = \"5ef2a2e2bc771032ace4240a\";\r\n      window.contentServiceApi = \"https://holidada-content-service-dev.azurewebsites.net\";\r\n      window.coreApiUrl = \"https://apidev.filmgrail.com\";\r\n      window.featuredBlocks = [{\r\n        \"Name\": \"text\",\r\n        \"Id\": \"5d13fcef6989a135152105d9\",\r\n        \"Icon\": \"fas fa-align-left\"\r\n      }, {\r\n        \"Name\": \"html\",\r\n        \"Id\": \"5d0fb8a397f29b1e667ccfcd\"\r\n      }, {\r\n        \"Name\": \"image\",\r\n        \"Id\": \"5d0f6ad557717620e679e16e\",\r\n        \"Icon\": \"far fa-image\"\r\n      }];\r\n      console.log('set page props page');\r\n    };\r\n    setPageProps();\r\n\r\n    function redirectHttps() {\r\n      const isEnvSet = true;\r\n      if (isEnvSet && window.APP.ForceHttps && location.protocol === 'http:') {\r\n        window.location.href = window.location.href.replace('http:', 'https:');\r\n      }\r\n    }\r\n    redirectHttps();\r\n</script>\r\n<script>\r\n\tfunction getCookieByName(name) {\r\n      const pattern = RegExp(name + \"=.[^;]*\");\r\n      const matched = document.cookie.match(pattern);\r\n      if (matched) {\r\n        const cookie = matched[0].split('=');\r\n        return cookie[1];\r\n      }\r\n      return null;\r\n    }\r\n</script>\r\n<script>\r\n\twindow.fixSvgOnSafary = function() {\r\n      if (/^((?!chrome|android).)*safari/i.test(navigator.userAgent)) {\r\n        const keysAttrs = ['clip-path', 'fill'];\r\n        console.log('fixSvgOnSafary');\r\n        keysAttrs.forEach(function(key) {\r\n          $(\"svg [\" + key + \"]\").attr(key, function() {\r\n            return $(this).attr(key).indexOf(location.href) === -1 ? $(this).attr(key).replace(\"url(\", \"url(\" + location.href) : $(this).attr(key);\r\n          });\r\n        })\r\n      }\r\n    };\r\n</script>\r\n<script src=\"https://holidada-dev.azureedge.net/assets/dist/head.min.js?v=35\" defer></script>\r\n\r\n<body class=\"undefined \" style=\" \">\r\n\t<div ng-app=\"app\">\r\n\t\t<main id=\"content\" role=\"main\">\r\n\t\t\t<div class=\"\">\r\n\t\t\t\t<script></script>\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"        col-12 col-md-12 page-block  \" style=\" \" data-column-width=\"12\"\r\n\t\t\t\t\t\tdata-content-group>\r\n\t\t\t\t\t\t<div style=\" \" class=\"  \">\r\n\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div data-block-id=\"5e3889d5092d27184ce44fbe\" data-block-name=\"block properties\"\r\n\t\t\t\t\t\t\t\t\t\tdata-id=\"5e388ab2092d27184ce44fc2\" data-page-id=\"5ef2a2e2bc771032ace4240a\"\r\n\t\t\t\t\t\t\t\t\t\tdata-index=\"1\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"  text-undefined    font-weight-undefined  text-undefined       col-12 col-md-12 page-block  \"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\" \" data-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t<div style=\"margin-bottom:1rem!important; \" class=\"  \">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div data-target-id=\"obj151592959887893\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-vue-id=\"obj151592959887893\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"        col-12 col-md-12   \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"angular\" ng-cloak\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-controller=\"Ctrl7ec25f47-2a13-4cca-b143-9953679a35e7\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- List -->\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"sidebarNav1Collapse\" data-parent=\"#sidebarNav\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn btn-success btn-sm shadow-none btn-block\" ng-show=\"argsWereModified()\" ng-click=\"saveChanges();\">SAVE CHANGES</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class=\"table table-bordered bg-white mb-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr ng-repeat=\"arg in blockModel.DataArgs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-modal-target=\"#editPropArgModal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-click=\"setCurrentArg(arg, $index)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal cursor-pointer\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ng-hide=\"arg.NullAllowed\" class=\"text-danger\">*</span>{{arg.PropName}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{arg.AllowMultipleSelect ? 'array of ':''}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{arg.DataType}}{{arg.Options && arg.Options.length?' with options':''}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-repeat=\"subArg in arg.SubArgs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"d-block font-size-1 cursor-pointer\" data-modal-target=\"#editPropArgModal\" ng-click=\"setCurrentArg(subArg, $parent.$index, $index)\">\r\n                <span ng-hide=\"subArg.NullAllowed\" class=\"text-danger\">*</span>{{subArg.PropName}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\">{{subArg.DataType}}{{subArg.Options && subArg.Options.length?' with options':''}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"pl-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"subArg.DataType === 'array' || subArg.DataType === 'object'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-repeat=\"subSubArg in subArg.SubArgs\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"d-block font-size-1 cursor-pointer\" data-modal-target=\"#editPropArgModal\" ng-click=\"setCurrentArg(subSubArg, $parent.$parent.$index, $parent.$index, $index)\">\r\n                  <span ng-hide=\"subSubArg.NullAllowed\" class=\"text-danger\">*</span>{{subSubArg.PropName}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"text-muted\">{{subSubArg.DataType}}{{subSubArg.Options && subSubArg.Options.length?' with options':''}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button ng-click=\"addNewArg(arg, $parent.$index, subArg)\" class=\"btn btn-xs btn-link pl-0\"><span class=\"fas fa-plus\"></span> add</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button ng-show=\"arg.DataType === 'array' || arg.DataType === 'object'\" data-modal-target=\"#editPropArgModal\" ng-click=\"addNewArg(arg, $index)\" class=\"btn btn-xs btn-link pl-0\"><span class=\"fas fa-plus\"></span> add</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button data-modal-target=\"#editPropArgModal\" ng-click=\"addNewArg()\" class=\"btn btn-sm btn-block btn-soft-primary mb-2\"><span class=\"fas fa-plus\"></span> Add new property</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- End List -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"editPropArgModal\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"js-modal-window u-modal-window w-100 w-lg-40\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card block-props\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card-header bg-extra-light py-3 px-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"h6 mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{currentArg.Title || currentArg.PropName}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <span aria-hidden=\"true\">√ó</span>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- End Header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"table table-bordered bg-white mb-4\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tTitle</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.Title\" placeholder=\"\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tProperty</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.PropName\" placeholder=\"Property name\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group-append\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"custom-select form-control border-0\" ng-model=\"currentArg.DataType\" style=\"border-left: solid 2px #eee!important;border-radius: 0;\" ng-change=\"currentArg.RegExp = ''\">\r\n                                                      <option value=\"string\">String</option>\r\n                                                      <option value=\"text\">Multiline text</option>\r\n                                                      <option value=\"html\">Rich text</option>\r\n                                                      <option value=\"int\" selected=\"selected\">Number or Id</option>\r\n                                                      <option value=\"boolean\">True or False</option>\r\n                                                      <option value=\"date\">Date</option>\r\n                                                      <option value=\"dateTime\">Date/Time</option>\r\n                                                      <option value=\"image\">Image</option>\r\n                                                      <option value=\"color\">Color</option>\r\n                                                      <option value=\"array\">Array</option>\r\n                                                      <option value=\"object\">Object</option>\r\n                                                    </select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"currentArg.DataType === 'array'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollapse field</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.CollapseField\" placeholder=\"Field for accordion items. If empty no collapse.\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDescription</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.Description\" placeholder=\"\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSample value</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.SampleValue\" placeholder=\"\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"currentArg.DataType !== 'array' && currentArg.DataType !== 'object'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tDefault value</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.DefaultValue\" placeholder=\"\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"currentArg.DataType === 'string'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRegular expression</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"p-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input-group border-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control form-control border-0\" ng-model=\"currentArg.RegExp\" placeholder=\"\">\r\n                                                </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tSettings</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" id=\"canBeEmptyCheck\" ng-model=\"currentArg.NullAllowed\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"canBeEmptyCheck\">\r\n                                                      Optional\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"currentArg.DataType !== 'array' && currentArg.DataType !== 'object'\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" id=\"readOnlyCheck\" ng-model=\"currentArg.ReadOnly\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"readOnlyCheck\">\r\n                                                      Read only\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" ng-model=\"currentArg.SuggestOptions\" id=\"suggestOptions\" ng-change=\"suggestOptions(currentArg)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"suggestOptions\">\r\n                                                      Suggest options\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"currentArg.Options\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" id=\"useUrlParamsCheck\" ng-model=\"currentArg.UseUrlParams\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"useUrlParamsCheck\">\r\n                                                      Use url params\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"currentArg.SuggestOptions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" ng-model=\"currentArg.restrictEnterCustom\" id=\"restrictEnterCustom\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"restrictEnterCustom\">\r\n                                                      Restrict Enter Custom\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"currentArg.Options\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" id=\"multipleSelectCheck\" ng-model=\"currentArg.AllowMultipleSelect\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"multipleSelectCheck\">\r\n                                                      Multiple choice\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-check\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input class=\"form-check-input\" type=\"checkbox\" ng-model=\"currentArg.ConditionalVisibility\" id=\"conditionalVisibility\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-check-label\" for=\"conditionalVisibility\">\r\n                                                      Conditional Visibility\r\n                                                    </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tActions</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-soft-primary my-2\" ng-click=\"moveUp($index)\"><span class=\"fa fa-arrow-up mr-1\"></span> Move up</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-soft-primary my-2\" ng-click=\"moveDown($index)\"><span class=\"fa fa-arrow-down mr-1\"></span> Move down</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-soft-danger ml-3\" ng-click=\"deleteCurrentArg(currentArg)\"><span class=\"fa fa-trash mr-1\"></span> Delete</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"currentArg.ConditionalVisibility\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<th scope=\"row\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"font-weight-normal\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tConditional visibility\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group mt-2 mb-0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label for=\"condVisCombination\"><b>Conditions combination</b></label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select id=\"condVisCombination\" class=\"form-control form-control-xs\" ng-model=\"currentArg.ConditionalVisibilityCombination\">\r\n                                                    <option value=\"OR\">OR</option>\r\n                                                    <option value=\"AND\">AND</option>\r\n                                                  </select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</th>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"d-flex justify-content-between\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-repeat=\"option in currentArg.conditionalVisibilityOptions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" ng-options=\"arg as arg.Key group by arg.Parent for arg in argsOptions track by arg.Key\" ng-model=\"option.Property\"></select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"form-text text-muted\">Property</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group px-2\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"form-control\" ng-model=\"option.Condition\" ng-options=\"condition as condition.Key for condition in conditionalVisibilityConditions track by condition.Key\">\r\n                                                    </select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"form-text text-muted\">Condition</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-if=\"addValueOptions.indexOf(option.Condition.Key) !== -1\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" ng-model=\"option.Value\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<small class=\"form-text text-muted\">Value</small>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button style=\"max-width: 50px;\" class=\"btn form-control btn-soft-danger pl-2\" ng-click=\"deleteConditionalVisibilityOption(currentArg, $index)\">\r\n                                                    <span class=\"fas fa-trash text-danger\"></span>\r\n                                                  </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button class=\"btn d-block btn-xs btn-soft-secondary btn-bg-transparent px-0\" ng-click=\"addConditionalVisibilityOption(currentArg)\">\r\n                                                  <span class=\"fas fa-plus\"></span> add rule\r\n                                                </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-show=\"isString(currentArg.Options) && currentArg.SuggestOptions\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label>Url to load options from </label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a class=\"btn btn-white btn-xs float-right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-click=\"currentArg.Options=[{}]\">add\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcustom options</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"input-group mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" ng-model=\"currentArg.Options\"> </div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div ng-hide=\"isString(currentArg.Options) || !currentArg.SuggestOptions\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"form-label\">Custom options</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a class=\"btn btn-gray btn-xs float-right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-click=\"currentArg.Options=''\">load\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfrom url</a>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"input-group\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tng-repeat=\"option in currentArg.Options\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" ng-model=\"option.Key\" placeholder=\"Title\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control\" ng-model=\"option.Value\" placeholder=\"Value\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button ng-click=\"deleteOption(currentArg, $index)\" style=\"    max-width: 50px;\" class=\"btn form-control btn-soft-danger pl-2\"><span class=\"fas fa-trash text-danger\"></span></button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button ng-click=\"addNewOption(currentArg)\" class=\"btn d-block btn-xs btn-soft-secondary btn-bg-transparent\"><span class=\"fas fa-plus\"></span> add</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-footer bg-light\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary btn-block\" onclick=\"Custombox.modal.close();\">Done</button>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div id=\"saveBlockNotesModal{{Id}}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"js-modal-window u-modal-window w-100 w-lg-40\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- Header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card-header bg-light py-3 px-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"d-flex justify-content-between align-items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<h3 class=\"h6 mb-0\">Add notes to the\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tchange</h3>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"close\" aria-label=\"Close\" onclick=\"Custombox.modal.close();\">\r\n                                            <span aria-hidden=\"true\">√ó</span>\r\n                                          </button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- End Header -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"card-body\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"input-group mb-3\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<textarea class=\"form-control\" ng-model=\"note\" placeholder=\"e.g. added new features to support timezones...\"></textarea>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"card-footer d-flex justify-content-end bg-light\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-link btn-block\" onclick=\"Custombox.modal.close();\">Cancel</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-sm btn-primary btn-block\" ng-click=\"saveChanges();\" ng-disabled=\"isSaving\">{{isSaving?'SAVING.....':'Confirm changes'}}</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"        col-12 col-md-12   \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<script v-pre>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(window).on('DOMContentLoaded DOMContentLoadedAsync', function() {\r\n                                    (function() {\r\n                                      var PageBlockId = '5e388ab2092d27184ce44fc2';\r\n                                      var data = JSON.parse(decodeURIComponent(\"%7B%22AdvancedSettings%22%3A%7B%22EvaluateValues%22%3Atrue%7D%2C%22Token%22%3A%22kW13a6cXmA1bRedX1TkzxyqQM8sblhqlSKIAOxu5wcjJrGf4wzZwQpowkuDyWcb7bUKhX9vAUM4uC27BXGdDCcp8Pp1Pg3hG%2Fl1kL47eY7k%2BT%2FyuyRlaPHB3WPcyjv9f4ZGWfQmfabhyKYDAcHhpGp4kuQr6rTPiLYRdZsNB2LY%3D%22%2C%22IsModal%22%3Afalse%2C%22IsMobile%22%3Anull%2C%22IsTablet%22%3Anull%2C%22SubAppId%22%3A1%2C%22SubAppName%22%3A%22tr-istanbul%22%2C%22PageBlockId%22%3A%225e388ab2092d27184ce44fc2%22%7D\"));\r\n                                      if (!window.appBlock) {\r\n                                        window.appBlock = angular.module('app', [\r\n                                     \r\n                                        ]);\r\n                                      }\r\n\r\n                                      window.appBlock.config(['$httpProvider', function($httpProvider) {\r\n                                        $httpProvider.defaults.headers.common['Token'] = getCookie('Token');\r\n                                      }]);\r\n\r\n                                      window.appBlock.controller('Ctrl7ec25f47-2a13-4cca-b143-9953679a35e7', ['$scope', '$rootScope', '$http', '$timeout',\r\n                                        function($scope, $rootScope, $http, $timeout) {\r\n                                          $.HSCore.components.HSModalWindow.init('[data-modal-target]', '.js-modal-window', {\r\n                                            autonomous: true\r\n                                          });\r\n                                          $scope.Title = data.Title;\r\n                                          $scope.Id = data.Id;\r\n\r\n\r\n                                          function getBlockId() {\r\n                                            return location.href.split('/').pop();\r\n                                          }\r\n\r\n                                          $scope.openRawPropEditor = function(blockId) {\r\n                                            MODAL.Open('/admin/edit-raw-json/Blocks/DataArgs/' + blockId);\r\n                                          };\r\n\r\n                                          $scope.openChangeLog = function(blockId) {\r\n                                            MODAL.Open('/admin/change-log/' + blockId);\r\n                                          };\r\n\r\n                                          $scope.isString = function isString(x) {\r\n                                            return Object.prototype.toString.call(x) === '[object String]';\r\n                                          };\r\n\r\n                                          $scope.currentArg = {};\r\n\r\n                                          $scope.suggestOptions = function(arg) {\r\n                                            if (!arg) return;\r\n                                            if (arg.SuggestOptions) {\r\n                                              arg.Options = [];\r\n                                            } else {\r\n                                              delete arg.Options;\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.setCurrentArg = function(arg, argIndex, subArgIndex, subSubArgIndex) {\r\n                                            if (arg && arg.Options) arg.SuggestOptions = true;\r\n                                            $scope.currentArg = arg;\r\n                                            $scope.argIndex = argIndex;\r\n                                            $scope.subArgIndex = subArgIndex;\r\n                                            $scope.subSubArgIndex = subSubArgIndex;\r\n                                            console.log('argIndex', argIndex);\r\n                                            console.log('subArgIndex', subArgIndex);\r\n                                            console.log('subSubArgIndex', subSubArgIndex);\r\n                                          };\r\n\r\n                                          const move = function(origin, destination) {\r\n                                            let items = $scope.blockModel.DataArgs;\r\n                                            if ($scope.subArgIndex >= 0) items = $scope.blockModel.DataArgs[$scope.argIndex].SubArgs;\r\n                                            if ($scope.subSubArgIndex >= 0) items = $scope.blockModel.DataArgs[$scope.argIndex].SubArgs[$scope.subArgIndex].SubArgs;\r\n\r\n                                            const temp = items[destination];\r\n                                            items[destination] = items[origin];\r\n                                            items[origin] = temp;\r\n                                          };\r\n\r\n                                          $scope.moveUp = function() {\r\n                                            if ($scope.subArgIndex && !$scope.subSubArgIndex) {\r\n                                              move($scope.subArgIndex, $scope.subArgIndex - 1);\r\n                                              $scope.subArgIndex -= 1;\r\n                                            } else if ($scope.subSubArgIndex) {\r\n                                              move($scope.subSubArgIndex, $scope.subSubArgIndex - 1);\r\n                                              $scope.subSubArgIndex -= 1;\r\n                                            } else {\r\n                                              move($scope.argIndex, $scope.argIndex - 1);\r\n                                              $scope.argIndex -= 1;\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.moveDown = function() {\r\n                                            if ($scope.subArgIndex && !$scope.subSubArgIndex) {\r\n                                              move($scope.subArgIndex, $scope.subArgIndex + 1);\r\n                                              $scope.subArgIndex += 1;\r\n                                            } else if ($scope.subSubArgIndex) {\r\n                                              move($scope.subSubArgIndex, $scope.subSubArgIndex + 1);\r\n                                              $scope.subSubArgIndex += 1;\r\n                                            } else {\r\n                                              move($scope.argIndex, $scope.argIndex + 1);\r\n                                              $scope.argIndex += 1;\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.moveCurrentArg = function(moveUp) {\r\n                                            if ($scope.subArgIndex >= 0) {\r\n                                              move($scope.blockModel.DataArgs[$scope.argIndex].SubArgs, $scope.currentArg, moveUp ? -1 : 1);\r\n                                            } else {\r\n                                              move($scope.blockModel.DataArgs, $scope.currentArg, moveUp ? -1 : 1);\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.deleteCurrentArg = function() {\r\n                                            if ($scope.subArgIndex >= 0 && (!$scope.subSubArgIndex || $scope.subSubArgIndex === 0)) {\r\n                                              $scope.blockModel.DataArgs[$scope.argIndex].SubArgs.splice($scope.subArgIndex, 1);\r\n                                            } else if ($scope.subSubArgIndex >= 0) {\r\n                                              $scope.blockModel.DataArgs[$scope.argIndex].SubArgs[$scope.subArgIndex].SubArgs.splice($scope.subSubArgIndex, 1);\r\n                                            } else {\r\n                                              $scope.blockModel.DataArgs.splice($scope.argIndex, 1);\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.addNewArg = function(arg, index, subArg) {\r\n                                            if (arg && !subArg) {\r\n                                              if (!arg.SubArgs) {\r\n                                                arg.SubArgs = [];\r\n                                              }\r\n                                              arg.SubArgs.push({\r\n                                                DataType: 'string'\r\n                                              });\r\n                                              $scope.setCurrentArg(arg.SubArgs[arg.SubArgs.length - 1], index, arg.SubArgs.length - 1);\r\n                                            } else if (subArg) {\r\n                                              if (!subArg.SubArgs) {\r\n                                                subArg.SubArgs = [];\r\n                                              }\r\n                                              subArg.SubArgs.push({\r\n                                                DataType: 'string'\r\n                                              });\r\n                                            } else {\r\n                                              $scope.blockModel.DataArgs.push({\r\n                                                DataType: 'string'\r\n                                              });\r\n                                              $scope.setCurrentArg($scope.blockModel.DataArgs[$scope.blockModel.DataArgs.length - 1], $scope.blockModel.DataArgs.length - 1);\r\n                                            }\r\n                                            $.HSCore.components.HSModalWindow.init('[data-modal-target]', '.js-modal-window', {\r\n                                              autonomous: true,\r\n                                            });\r\n                                          };\r\n\r\n                                          $scope.addNewOption = function(arg) {\r\n                                            if (arg.Options) {\r\n                                              arg.Options.push({});\r\n                                            } else {\r\n                                              arg.Options = [{}];\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.deleteOption = function(arg, optionIndex) {\r\n                                            arg.Options.splice(optionIndex, 1);\r\n                                          };\r\n\r\n                                          function initBlock(bData) {\r\n                                            window.BLOCKDATA_CACHE = bData;\r\n                                            $scope.blockModel = bData;\r\n                                            $scope.argsOptions = [];\r\n\r\n                                            $scope.Apps = bData.Apps;\r\n                                            $scope.blockModel.DataArgs.forEach((arg) => {\r\n                                              if (arg.DataType !== 'array') {\r\n                                                if (!arg.SubArgs) {\r\n                                                  $scope.argsOptions.push({\r\n                                                    Key: arg.PropName,\r\n                                                    Value: arg.PropName,\r\n                                                    Parent: 'Main properties',\r\n                                                  });\r\n                                                } else {\r\n                                                  arg.SubArgs.forEach((subArg) => {\r\n                                                    $scope.argsOptions.push({\r\n                                                      Key: `${arg.PropName}.${subArg.PropName}`,\r\n                                                      Value: `${arg.PropName}.${subArg.PropName}`,\r\n                                                      Parent: arg.PropName,\r\n                                                    });\r\n                                                  });\r\n                                                }\r\n                                              }\r\n                                            });\r\n\r\n                                            setTimeout(function() {\r\n                                              $scope.originalDataArgs = (' ' + JSON.stringify($scope.blockModel.DataArgs)).slice(1);\r\n                                            }, 300)\r\n                                            $scope.isLoading = false;\r\n                                            console.log('setTimeoutHSModalWindow');\r\n                                            setTimeout(function() {\r\n                                              console.log('HSModalWindow');\r\n                                              $.HSCore.components.HSModalWindow.init('[data-modal-target]', '.js-modal-window', {\r\n                                                autonomous: true,\r\n                                              });\r\n                                            }, 300);\r\n                                          }\r\n\r\n                                          function loadBlock() {\r\n                                            $scope.blockModel = {\r\n                                              BlockFunction: 'Loading...'\r\n                                            };\r\n                                            $scope.isLoading = true;\r\n                                            if (window.BLOCKDATA_CACHE) return initBlock(window.BLOCKDATA_CACHE);\r\n                                            $http.get(`/api/GetBlock?blockName=*blockName*`)\r\n                                              .then(\r\n                                                (res) => {\r\n                                                  initBlock(res.data);\r\n                                                },\r\n                                                (error) => {\r\n                                                  $scope.error = error;\r\n                                                  $scope.isLoading = false;\r\n                                                }\r\n                                              );\r\n                                          }\r\n\r\n                                          $scope.loadBlockPages = function() {\r\n                                            $scope.isLoadingPages = true;\r\n                                            $http.get(`${window.contentServiceApi}/block/get where block is used?BlockId=${$scope.blockModel._id}`)\r\n                                              .then(\r\n                                                (res) => {\r\n                                                  console.log(res.data);\r\n                                                  $scope.blockUsage = res.data;\r\n                                                  $scope.isLoadingPages = false;\r\n                                                },\r\n                                                () => {\r\n                                                  alert('Failed to load block pages. Please try again.');\r\n                                                  $scope.isLoadingPages = false;\r\n                                                }\r\n                                              );\r\n                                          };\r\n\r\n                                          $scope.cloneBlock = function() {\r\n                                            const newBlockName = prompt('Please enter new block name', '');\r\n                                            if (newBlockName != null) {\r\n                                              $scope.isCloning = true;\r\n                                              $http.post(`/api/GetBlock?blockName=*blockName*`, {\r\n                                                  blockName: newBlockName\r\n                                                })\r\n                                                .then(\r\n                                                  (res) => {\r\n                                                    console.log(res.data);\r\n                                                    $scope.isCloning = false;\r\n                                                    location.href = `/admin/block-page/${res.data}`;\r\n                                                  },\r\n                                                  () => {\r\n                                                    alert('Failed to clone block. Please try again.');\r\n                                                    $scope.isCloning = false;\r\n                                                  }\r\n                                                );\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.generateTestPage = function() {\r\n                                            console.log($scope.blockModel);\r\n                                            $scope.isCloning = true;\r\n                                            $http.post(`${window.contentServiceApi}/api/newTestPage`, {\r\n                                                BlockId: $scope.blockModel._id\r\n                                              })\r\n                                              .then(\r\n                                                (res) => {\r\n                                                  console.log(res.data);\r\n                                                  $scope.isCloning = false;\r\n                                                  $scope.blockModel.TestPage = res.data.Url;\r\n                                                  $scope.TestPageId = res.data.PageId;\r\n                                                  $scope.saveChanges(true);\r\n\r\n                                                },\r\n                                                () => {\r\n                                                  alert('Failed to generateTestPage block. Please try again.');\r\n                                                  $scope.isCloning = false;\r\n                                                }\r\n                                              );\r\n                                          };\r\n\r\n                                          $scope.executeBlock = function() {\r\n                                            MODAL.Open($scope.blockModel.TestPage, {\r\n                                              width: '800px'\r\n                                            });\r\n                                          };\r\n\r\n                                          $scope.getEditBlockUrl = function() {\r\n                                            return `/admin/edit/Blocks/root/block/${$scope.blockModel._id}`;\r\n                                          };\r\n\r\n                                          $scope.deleteBlock = function() {\r\n                                            $scope.isDeleting = true;\r\n                                            $http.post(`${window.contentServiceApi}/api/deleteBlock/${$scope.blockModel._id}`)\r\n                                              .then(\r\n                                                (res) => {\r\n                                                  console.log(res.data);\r\n                                                  $scope.isDeleting = false;\r\n                                                  $scope.blockModel = {};\r\n                                                },\r\n                                                (error) => {\r\n                                                  alert(`Failed to delete block. ${error}`);\r\n                                                  $scope.isDeleting = false;\r\n                                                }\r\n                                              );\r\n                                          };\r\n\r\n                                          $scope.pushBlockToSecondaryDb = function() {\r\n                                            $scope.isPushing = true;\r\n                                            $http.post(`${window.contentServiceApi}/api/pushBlockToSecondaryDb/${$scope.blockModel._id}`)\r\n                                              .then(\r\n                                                (res) => {\r\n                                                  console.log(res.data);\r\n                                                  $scope.isPushing = false;\r\n                                                  $('#openChangeLog').click();\r\n                                                },\r\n                                                (error) => {\r\n                                                  alert(`Failed to push block. ${error}`);\r\n                                                  $scope.isPushing = false;\r\n                                                }\r\n                                              );\r\n                                          };\r\n\r\n                                          $scope.conditionalVisibilityConditions = [{\r\n                                              Key: 'is set',\r\n                                              Value: '\\\\\\S+',\r\n                                            },\r\n                                            {\r\n                                              Key: '=',\r\n                                              Value: '^--value--$',\r\n                                            },\r\n                                            {\r\n                                              Key: '!=',\r\n                                              Value: '^(?!--value--$)',\r\n                                            },\r\n                                          ];\r\n                                          $scope.addValueOptions = ['=', '!='];\r\n                                          $scope.addConditionalVisibilityOption = function(arg) {\r\n                                            if (arg.conditionalVisibilityOptions) {\r\n                                              arg.conditionalVisibilityOptions.push({});\r\n                                            } else {\r\n                                              arg.conditionalVisibilityOptions = [{}];\r\n                                            }\r\n                                          };\r\n\r\n                                          $scope.deleteConditionalVisibilityOption = function(arg, optionIndex) {\r\n                                            arg.conditionalVisibilityOptions.splice(optionIndex, 1);\r\n                                          };\r\n\r\n                                          $scope.saveChanges = function(triggerAddBlock) {\r\n                                            $scope.isSaving = true;\r\n                                            $scope.blockModel.Note = $scope.note;\r\n                                            const payload = JSON.parse(angular.toJson($scope.blockModel.DataArgs));\r\n\r\n                                            window.parent.RenderDataByModel1.saveObject(payload).then(() => {\r\n                                              \r\n                                            })\r\n                                          };\r\n\r\n\r\n                                          $scope.argsWereModified = function() {\r\n                                            return $scope.blockModel && $scope.originalDataArgs !== JSON.stringify($scope.blockModel.DataArgs) && $scope.originalDataArgs && $scope.blockModel.DataArgs;\r\n                                          };\r\n\r\n                                          loadBlock();\r\n\r\n                                        }\r\n                                      ]);\r\n\r\n                                    })();\r\n                                    $(window).off('DOMContentLoaded DOMContentLoadedAsync');\r\n                                  });\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</script>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div data-block-id=\"5e389123092d27184ce45072\" data-block-name=\"get block\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-id=\"5e3892f0092d27184ce45079\" data-page-id=\"5ef2a2e2bc771032ace4240a\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-index=\"0\" class=\"        col-12 col-md-12 page-block  \" style=\" \"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-column-width=\"12\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div style=\" \" class=\"  \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"\"> </div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t</main>\r\n\t</div>\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/app-bottom.min.css?v=6\">\r\n\t<!-- ADMIN SCRIPTS -->\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/app-admin.min.css?v=8\">\r\n\t<!-- END ADMIN SCRIPTS -->\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/dist/custom.min.css?v=40\">\r\n\t<link rel=\"stylesheet\" href=\"https://holidada-dev.azureedge.net/assets/app-theme/styles.css?v=13\">\r\n\t<!-- Google Fonts -->\r\n\t<link href=\"//fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap\" rel=\"stylesheet\">\r\n\t<script src=\"https://holidada-dev.azureedge.net/assets/dist/libs.min.js?v=9\" defer></script>\r\n\t<script src=\"https://holidada-dev.azureedge.net/assets/dist/app.min.js?v=77\" defer></script>\r\n\t<script>\r\n\t\t$(window).on('load', function() {\r\n        document.dispatchEvent(new Event('DOMContentLoadedAsync'));\r\n        $('.js-mega-menu').HSMegaMenu({\r\n          event: 'click',\r\n          pageContainer: $('.container'),\r\n          breakpoint: 767.98,\r\n        });\r\n        $.HSCore.components.HSSVGIngector.init('.js-svg-injector');\r\n      });\r\n      $(document).on('ready', function() {\r\n        window.fixSvgOnSafary();\r\n        $(function() {\r\n          $('[data-toggle=\"tooltip\"]').tooltip();\r\n        });\r\n        let showTimeout;\r\n        $(document).on('show.bs.tooltip', function(e) {\r\n          showTimeout = setTimeout(function() {\r\n            $('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n          }, 3000);\r\n        });\r\n        $(document).on('hide.bs.tooltip', function(e) {\r\n          clearTimeout(showTimeout);\r\n        });\r\n        $(document).on('scroll', function(e) {\r\n          $('[data-toggle=\"tooltip\"]').tooltip('hide');\r\n        });\r\n        $.HSCore.components.HSHeader.init($('#header'));\r\n        $.HSCore.components.HSMalihuScrollBar.init($('.js-scrollbar'));\r\n        $.HSCore.components.HSShowAnimation.init('.js-animation-link');\r\n        $.HSCore.components.HSValidation.init('.js-validate', {\r\n          rules: {\r\n            confirmPassword: {\r\n              equalTo: '#signupPassword',\r\n            },\r\n          },\r\n        });\r\n        $.HSCore.components.HSModalWindow.init('[data-modal-target]', '.js-modal-window', {\r\n          autonomous: true,\r\n        });\r\n        $.HSCore.components.HSSelectPicker.init('.js-select');\r\n        $.HSCore.components.HSFocusState.init();\r\n        $.HSCore.components.HSCubeportfolio.init('.cbp');\r\n        $.HSCore.components.HSStickyBlock.init('.js-sticky-block');\r\n        $.HSCore.components.HSGoTo.init('.js-go-to');\r\n      });\r\n\t</script>\r\n\t<script type=\"text/javascript\">\r\n\t\t(function() {\r\n        var wf = document.createElement('script');\r\n        wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';\r\n        wf.type = 'text/javascript';\r\n        wf.async = 'true';\r\n        var s = document.getElementsByTagName('script')[0];\r\n        s.parentNode.insertBefore(wf, s);\r\n      })();\r\n\t</script>\r\n\t<link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.8.1/css/all.css\"\r\n\t\tintegrity=\"sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf\" crossorigin=\"anonymous\">\r\n</body>\r\n\r\n</html>",
    "Page": {
      "settings": {
        "url": "/mars/edit-data-args/:modelName",
        "title": "Edit data args"
      }
    },
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return thisBlock.Html.replace(/\\*blockName\\*/g, data.modelName);\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return thisBlock.Html.replace(/\\*blockName\\*/g, data.modelName);\r\n}\r\n\r\nexport default <Block />",
    "isSystem": true
  },
  {
    "_id": "5ef3a05e962c8333105de406",
    "Name": "PageModel",
    "Title": "PageModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "object",
        "PropName": "settings",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "url",
            "Title": "Page Url",
            "Description": "E.g. static page url: '/somepath/somepage'. E.g. dinamic page url: '/movies/:movieId?showReviews=:showReviews'"
          },
          {
            "DataType": "string",
            "PropName": "title",
            "Description": "Show on the browser tab or modal window title",
            "Title": "Page Title"
          },
          {
            "DataType": "string",
            "PropName": "master",
            "Title": "Master Page",
            "Description": "Enter master page block name",
            "SampleValue": "MyMasterPage",
            "NullAllowed": true
          },
          {
            "DataType": "string",
            "PropName": "group",
            "SuggestOptions": true,
            "Options": [
              {
                "Key": "regular page"
              },
              {
                "Key": "settings",
                "Value": "settings"
              },
              {
                "Key": "documentation",
                "Value": "documentation"
              }
            ],
            "NullAllowed": true
          },
          {
            "DataType": "string",
            "PropName": "icon",
            "Title": "Icon",
            "Description": "Shown in settings tree on the left panel",
            "NullAllowed": true,
            "ConditionalVisibility": true,
            "conditionalVisibilityOptions": [
              {
                "Property": {
                  "Key": "settings.group",
                  "Value": "settings.group",
                  "Parent": "settings"
                },
                "Condition": {
                  "Key": "=",
                  "Value": "^--value--$"
                },
                "Value": "settings"
              }
            ]
          },
          {
            "DataType": "object",
            "PropName": "cache",
            "RegExp": "",
            "NullAllowed": true,
            "SubArgs": [
              {
                "DataType": "int",
                "PropName": "ttl",
                "RegExp": "",
                "NullAllowed": true,
                "Description": "cache on cdn in seconds"
              }
            ]
          }
        ]
      }
    ],
    "DemoJsx": "export default <PageModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(PageModel, null);",
    "updatedAt": "2020-07-29T09:34:03.670Z",
    "isSystem": true
  },
  {
    "_id": "5ef3a516962c8333105de407",
    "Name": "TestPage1",
    "Title": "TestPage1",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestPage1 />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestPage1, null);",
    "updatedAt": "2020-06-24T19:10:46.246Z",
    "Page": {
      "settings": {
        "url": "/testpage1",
        "title": "test page",
        "master": "",
        "icon": ""
      }
    },
    "JsxTranspiled": "export default 'HELLOGFDSAQWR';",
    "Jsx": "export default 'HELLOGFDSAQWR'",
    "isSystem": true
  },
  {
    "_id": "5ef3a60f962c8333105de408",
    "Name": "NewTestBlock1",
    "Title": "NewTestBlock1",
    "Type": "service",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <NewTestBlock1 />",
    "DemoJsxTranspiled": "export default executeAppBlock(NewTestBlock1, null);",
    "BlockFunction": "function server() {\r\n  return Mars.services.AuthSignIn\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef3a6cd962c8333105de409",
    "Name": "NewTestBlock2",
    "Title": "NewTestBlock2",
    "Type": "service",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <NewTestBlock2 />",
    "DemoJsxTranspiled": "export default executeAppBlock(NewTestBlock2, null);",
    "isSystem": true
  },
  {
    "_id": "5ef3bf5f962c8333105de40b",
    "Name": "NavDocumentation",
    "Title": "NavGuide",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "navigation",
    "DataArgs": [],
    "DemoJsx": "export default <NavGuide />",
    "DemoJsxTranspiled": "export default executeAppBlock(NavGuide, null);",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\nexport default executeAppBlock(NestedTree, { Id: \"NestedTreeGuide\", Searchable: true, Tree: serverData });",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\nexport default <NestedTree Id=\"NestedTreeGuide\" Searchable Tree={serverData} />\r\n",
    "BlockFunction": "function server() {\r\n  function getMenu(bName) {\r\n    return [{\r\n      title: 'Edit page', onClick: `location.href='/mars/ide/${bName}'`\r\n    }]\r\n  }\r\n\r\n  const fabricPages = Mars.allBlocks.find(t => t.Name === (data.fabricBlockName || 'DocumentationPageFabric')).pages;\r\n  const items = Object.keys(fabricPages).map(t => {\r\n    const tt = fabricPages[t];\r\n    const title = tt && tt.settings && tt.settings.title ? tt.settings.title : '--no title'\r\n    return {\r\n      name: title,\r\n      folder: tt && tt.settings && tt.settings.folder ? tt.settings.folder : 'default',\r\n      OnClick: `Modal.open(\"documentation/${t}\", { title: \"${title}\" })`,\r\n    }\r\n  })\r\n\r\n  const treeData = Mars.services.GenereateNestedTree({\r\n    items\r\n  })\r\n  return treeData\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef3d665e01dfa3daccf52f2",
    "Name": "EditorJs",
    "Title": "EditorJs",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "wysiwyg",
    "DataArgs": [],
    "DemoJsx": "export default <div>\r\n  <h1>editor1</h1>\r\n  <EditorJs blockName=\"HowToCreateUiBlock\" path=\"blocks.RenderEditorJsObj.data.blocks\"/>\r\n  <h1>editor2</h1>\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"editor1\"\n  ),\n  executeAppBlock(EditorJs, { blockName: \"HowToCreateUiBlock\", path: \"blocks.RenderEditorJsObj.data.blocks\" }),\n  executeAppBlock(\n    \"h1\",\n    null,\n    \"editor2\"\n  )\n);",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(SearchBlockService, { Id: \"EditorJs_SearchBlockService\" }),\n    executeAppBlock(ExecuteBlocksArray, { Id: \"ExecuteBlocksArray\" }),\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.script, { blocks: s }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <SearchBlockService Id=\"EditorJs_SearchBlockService\" />\r\n      <ExecuteBlocksArray Id=\"ExecuteBlocksArray\" />\r\n      <This.html />\r\n      <This.script blocks={s}/>\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Html": "<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/header@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/link@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/raw@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/image@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/checklist@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/list@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/embed@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/inline-code@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/code@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/warning@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/table@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/attaches@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/paragraph@latest/dist/bundle.min.js\"></script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/@editorjs/marker@latest\"></script>\r\n<div id=\"XID\">\r\n  <button class=\"btn btn-primary\" :disabled=\"saving\" @click=\"save\">save</button>\r\n</div>\r\n<div id=\"XID_editorJS\"></div>",
    "Script": "import \"/api/MarsJs\";\r\n\r\nconst justifyButtons = [\r\n  {\r\n    title: \"Space between\",\r\n    name: \"justifySpaceBetween\",\r\n    group: \"justify\",\r\n    className: \"justify-content-between\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\" /><path d=\"m1.78125,7.98103l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\" fill=\"#fff\"/><path d=\"m14.15624,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\" fill=\"#fff\"/></svg>',\r\n  },\r\n  {\r\n    title: \"Space around\",\r\n    name: \"justifySpaceAround\",\r\n    group: \"justify\",\r\n    className: \"justify-content-around\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\"/><path fill=\"#fff\" d=\"m3.46873,7.98103l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\"/><path fill=\"#fff\" d=\"m12.46876,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\"/></svg>',\r\n  },\r\n  {\r\n    title: \"Space evenly\",\r\n    name: \"justifySpaceEvenly\",\r\n    group: \"justify\",\r\n    className: \"justify-content-evenly\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\"/><path fill=\"#fff\" d=\"m4.09373,7.98103l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\"/><path fill=\"#fff\" d=\"m11.84376,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\"/></svg>',\r\n  },\r\n  {\r\n    title: \"Justify start\",\r\n    name: \"justifyStart\",\r\n    group: \"justify\",\r\n    className: \"justify-content-start\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\"/><path fill=\"#fff\" d=\"m1.84375,7.98102l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\"/><path fill=\"#fff\" d=\"m7.28131,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\"/></svg>',\r\n  },\r\n  {\r\n    title: \"Justify center\",\r\n    name: \"justifyCenter\",\r\n    group: \"justify\",\r\n    className: \"justify-content-center\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\"/><path fill=\"#fff\" d=\"m5.34378,7.98102l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\"/><path fill=\"#fff\" d=\"m10.46872,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\"/></svg>',\r\n  },\r\n  {\r\n    title: \"Justify end\",\r\n    name: \"justifyEnd\",\r\n    group: \"justify\",\r\n    className: \"justify-content-end\",\r\n    icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m0.53125,6.125l18.93749,0l0,7.75l-18.93749,0l0,-7.75z\"/><path fill=\"#fff\" d=\"m9.09374,7.98102l4.1875,0l0,4.03795l-4.1875,0l0,-4.03795z\"/><path fill=\"#fff\" d=\"m14.28119,7.98103l4.1875,0l0,4.03794l-4.1875,0l0,-4.03794z\"/></svg>',\r\n  },\r\n];\r\n\r\nconst alignButtons = [\r\n  {\r\n    title: \"Align top\",\r\n    name: \"alignStart\",\r\n    group: \"align\",\r\n    className: \"align-items-start\",\r\n    icon: '<svg viewBox=\"0 0 27 27\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\"><path d=\"M 1 2 L 5 2 L 5 14 L 11 14 L 11 2 L 16 2 L 16 20 L 22 20 L 22 2 L 26 2 L 26 1 L 1 1 L 1 2 Z\"></path></svg>',\r\n  },\r\n  {\r\n    title: \"Align center\",\r\n    name: \"alignCenter\",\r\n    group: \"align\",\r\n    className: \"align-items-center\",\r\n    icon: '<svg viewBox=\"0 0 27 27\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\"><path d=\"M 26 13 L 26 14 L 21 14 L 21 22 L 15 22 L 15 14 L 12 14 L 12 19 L 6 19 L 6 14 L 1 14 L 1 13 L 6 13 L 6 8 L 12 8 L 12 13 L 15 13 L 15 5 L 21 5 L 21 13 L 26 13 Z\"></path></svg>',\r\n  },\r\n  {\r\n    title: \"Align bottom\",\r\n    name: \"alignEnd\",\r\n    group: \"align\",\r\n    className: \"align-items-end\",\r\n    icon: '<svg viewBox=\"0 0 27 27\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\"><path d=\"M 1 25 L 5 25 L 5 13 L 11 13 L 11 25 L 16 25 L 16 7 L 22 7 L 22 25 L 26 25 L 26 26 L 1 26 L 1 25\"></path></svg>',\r\n  },\r\n];\r\n\r\nfunction openBlockSearch(selectHandler) {\r\n  SearchModal.open(\r\n    {\r\n      placeholder: \"Search a block...\",\r\n      debounce: 300,\r\n      fallbackMessage: \"There is no blocks found\",\r\n    },\r\n    async (query) => {\r\n      const result = await EditorJs_SearchBlockService.api.search(\r\n        query,\r\n        \"jsx3\"\r\n      );\r\n      const items = result.map((group) => ({\r\n        title: group.title,\r\n        isGroup: true,\r\n        items: group.items.map((i) => ({ title: i.title, payload: i.title })),\r\n      }));\r\n      return items;\r\n    },\r\n    (blockName) => {\r\n      if (!blockName) {\r\n        return;\r\n      }\r\n\r\n      Modal.close();\r\n      if (selectHandler) {\r\n        selectHandler(blockName);\r\n      }\r\n    }\r\n  );\r\n}\r\n\r\nfunction openMarginSettings(marginPaddingSettings, saveCallback) {\r\n  const id = `${data.Id}_margin_padding`;\r\n  Modal.open('/api/MarginPadding', {\r\n    width: 'auto',\r\n    title: 'Margins & paddings',\r\n    autoHeight: false,\r\n    buttons: [\r\n      {\r\n        id: 'btn_save',\r\n        className: 'btn btn-primary',\r\n        label: 'Save',\r\n        callback: () => {\r\n          if (saveCallback) {\r\n            const result = window[id].save();\r\n            saveCallback(result);\r\n          }\r\n\r\n          Modal.close();\r\n        },\r\n      },\r\n      {\r\n        id: 'btn_cancel',\r\n        label: 'Cancel',\r\n        callback: function () {\r\n          Modal.close();\r\n        },\r\n      },\r\n    ],\r\n  }, null, { Id: id, ...marginPaddingSettings });\r\n}\r\n\r\nclass RowTool {\r\n  static get toolbox() {\r\n    return {\r\n      title: 'Row with blocks',\r\n      icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m16.76679,1.5415l-13.53357,0c-0.93195,0 -1.69171,0.75742 -1.69171,1.69171l0,13.53357c0,0.93195 0.75742,1.69171 1.69171,1.69171l13.53357,0c0.93195,0 1.69171,-0.75742 1.69171,-1.69171l0,-13.53357c0,-0.93195 -0.75742,-1.69171 -1.69171,-1.69171zm0,15.22528l-13.53357,0l0,-13.53357l13.53357,0l0,13.53357z\"/><rect height=\"13.53357\" width=\"1.69171\" y=\"3.23322\" x=\"6.6166\"/><rect height=\"13.53357\" width=\"1.69171\" y=\"3.23322\" x=\"11.69169\"/></svg>',\r\n    };\r\n  }\r\n\r\n  constructor({ data, api }) {\r\n    this.data = data;\r\n    this.data.settings = this.data.settings || {};\r\n    this.data.settings.justify = this.data.settings.justify || 'justify-content-between';\r\n    this.data.settings.align = this.data.settings.align || 'align-items-center';\r\n    this.data.settings.margin = this.data.settings.margin || { top: 0, right: 0, bottom: 0, left: 0 };\r\n    this.data.settings.padding = this.data.settings.padding || { top: 0, right: 0, bottom: 0, left: 0 };\r\n\r\n    this.api = api;\r\n    this.wrapper = document.createElement(\"div\");\r\n    this.wrapper.classList.add(\"mars-row-wrapper\");\r\n    this.wrapper.classList.add(\"d-flex\");\r\n    this.wrapper.classList.add(this.data.settings.justify);\r\n    this.wrapper.classList.add(this.data.settings.align);\r\n  }\r\n\r\n  _handleBlockSearchSelect(blockName) {\r\n    this.data.blocks = this.data.blocks || [];\r\n    const id = `block_${(new Date()).getTime()}`;\r\n    this.data.blocks.push({\r\n      id: id,\r\n      block: blockName,\r\n      settings: { flexGrow: 0, flexFill: false },\r\n    });\r\n\r\n    window.postRequest(`api/${blockName}`).then((response) => {\r\n      if (this.addButton) {\r\n        this.addButton.remove();\r\n      }\r\n\r\n      $(this.wrapper).append(\r\n        this._createBlockWrapper(id, blockName, response.data)\r\n      );\r\n    });\r\n  }\r\n\r\n  _updateJustifyContent(className) {\r\n    this.data.settings.justify = this.data.settings.justify === className ? false : className;\r\n    Object.values(this.wrapper.classList).filter(i => i.startsWith('justify-content-')).forEach(i => this.wrapper.classList.remove(i));\r\n    document.querySelectorAll('[data-id=\"XID\"][data-group=\"justify\"]').forEach(i => i.classList.remove('cdx-settings-button--active'));\r\n    if (this.data.settings.justify) {\r\n      this.wrapper.classList.add(className);\r\n      document.querySelector(`[data-class=\"${className}\"]`).classList.add('cdx-settings-button--active');\r\n    }\r\n  }\r\n\r\n  _updateAlignItems(className) {\r\n    this.data.settings.align = this.data.settings.align === className ? false : className;\r\n    Object.values(this.wrapper.classList).filter(i => i.startsWith('align-items-')).forEach(i => this.wrapper.classList.remove(i));\r\n    document.querySelectorAll('[data-id=\"XID\"][data-group=\"align\"]').forEach(i => i.classList.remove('cdx-settings-button--active'));\r\n    if (this.data.settings.align) {\r\n      this.wrapper.classList.add(className);\r\n      document.querySelector(`[data-class=\"${className}\"]`).classList.add('cdx-settings-button--active');\r\n    }\r\n  }\r\n\r\n  _updateMarginPadding() {\r\n    Object.values(this.wrapper.classList).filter(i => ['mt-', 'ml-', 'mb-', 'mr-', 'pt-', 'pl-', 'pb-', 'pr-'].some(k => i.startsWith(k))).forEach(i => this.wrapper.classList.remove(i));\r\n    Object.keys(this.data.settings.margin).forEach(key => {\r\n      const val = this.data.settings.margin[key];\r\n      if (val) {\r\n        this.wrapper.classList.add(`m${key[0]}-${val}`);\r\n      }\r\n    });\r\n\r\n    Object.keys(this.data.settings.padding).forEach(key => {\r\n      const val = this.data.settings.padding[key];\r\n      if (val) {\r\n        this.wrapper.classList.add(`p${key[0]}-${val}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  _updateFlexWrap() {\r\n    const className = 'flex-wrap';\r\n    const wrapBtn = document.querySelector(`[data-class=\"${className}\"]`);\r\n    if (this.data.settings.wrap) {\r\n      this.data.settings.wrap = false;\r\n      this.wrapper.classList.remove(className);\r\n      if (wrapBtn) {\r\n        wrapBtn.classList.remove('cdx-settings-button--active');\r\n      }\r\n    } else {\r\n      this.data.settings.wrap = className;\r\n      this.wrapper.classList.add(className);\r\n      if (wrapBtn) {\r\n        wrapBtn.classList.add('cdx-settings-button--active');\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateFlexFill(id) {\r\n    const block = this.wrapper.querySelector(`#${id}`);\r\n    const blockData = this.data.blocks.find(i => i.id === id);\r\n    if (blockData.settings.flexFill) {\r\n      block.classList.add('flex-fill');\r\n      this.wrapper.querySelector(`#toolbar_flexFill_${id}`).classList.add('cdx-settings-button--active');\r\n      if (blockData.settings.flexGrow > 0) {\r\n        blockData.settings.flexGrow = 0;\r\n        this._updateFlexGrow(id);\r\n      }\r\n    } else {\r\n      block.classList.remove('flex-fill');\r\n      this.wrapper.querySelector(`#toolbar_flexFill_${id}`).classList.remove('cdx-settings-button--active');\r\n    }\r\n  }\r\n\r\n  _updateFlexGrow(id) {\r\n    const block = this.wrapper.querySelector(`#${id}`);\r\n    const blockData = this.data.blocks.find(i => i.id === id);\r\n    const enlargeButton = this.wrapper.querySelector(`#toolbar_enlarge_${id}`);\r\n    let badge = enlargeButton.querySelector(`#toolbar_enlarge_badge_${id}`);\r\n\r\n    Object.values(block.classList).filter(i => i.startsWith('flex-grow-')).forEach(i => block.classList.remove(i));\r\n    if ((blockData.settings.flexGrow || 0) === 0) {\r\n      enlargeButton.classList.remove('cdx-settings-button--active');\r\n      if (badge) {\r\n        badge.remove();\r\n      }\r\n    } else {\r\n      blockData.settings.flexFill = false;\r\n      this._updateFlexFill(id);\r\n\r\n      enlargeButton.classList.add('cdx-settings-button--active');\r\n      if (!badge) {\r\n        badge = document.createElement('span');\r\n        badge.setAttribute('id', `toolbar_enlarge_badge_${id}`);\r\n        badge.setAttribute('class', 'badge badge-danger badge-pill mars-row-flex-grow-badge');\r\n        enlargeButton.appendChild(badge);\r\n      }\r\n\r\n      badge.innerText = blockData.settings.flexGrow;\r\n      block.classList.add(`flex-grow-${blockData.settings.flexGrow}`);\r\n    }\r\n  }\r\n\r\n  _handleSettingsBtnClick(name, group, className) {\r\n    switch (name) {\r\n      case 'add':\r\n        openBlockSearch((blockName) => {\r\n          this._handleBlockSearchSelect(blockName);\r\n        });\r\n        return;\r\n      case 'margin-padding':\r\n        openMarginSettings({ margin: this.data.settings.margin, padding: this.data.settings.padding }, (result) => {\r\n          this.data.settings.margin = result.margin;\r\n          this.data.settings.padding = result.padding;\r\n          this._updateMarginPadding();\r\n        });\r\n        return;\r\n      case 'wrap':\r\n        this._updateFlexWrap();\r\n        return;\r\n    }\r\n\r\n    switch (group) {\r\n      case 'justify':\r\n        this._updateJustifyContent(className);\r\n        return;\r\n      case 'align':\r\n        this._updateAlignItems(className);\r\n        return;\r\n    }\r\n  }\r\n\r\n  _handleToolbarBtnClick(id, btnName) {\r\n    const index = this.data.blocks.findIndex(i => i.id === id);\r\n    if (index === -1) {\r\n      return;\r\n    }\r\n\r\n    const blockData = this.data.blocks.find(i => i.id === id);\r\n    const el = this.wrapper.querySelector(`#${id}`);\r\n    this.data.blocks[index].settings = this.data.blocks[index].settings || {};\r\n\r\n    switch (btnName) {\r\n      case 'remove':\r\n        if (el) {\r\n          el.remove();\r\n        }\r\n\r\n        this.data.blocks.splice(index, 1);\r\n        this.api.tooltip.hide();\r\n        return;\r\n      case 'moveLeft':\r\n        this._moveBlock(id, index, index - 1);\r\n        return;\r\n      case 'moveRight':\r\n        this._moveBlock(id, index, index + 1);\r\n        return;\r\n      case 'flexFill':\r\n        blockData.settings.flexFill = !blockData.settings.flexFill;\r\n        this._updateFlexFill(id);\r\n        return;\r\n      case 'enlarge':\r\n        blockData.settings.flexGrow = (blockData.settings.flexGrow || 0) + 1;\r\n        blockData.settings.flexGrow = blockData.settings.flexGrow < 5 ? blockData.settings.flexGrow : 5;\r\n        this._updateFlexGrow(id);\r\n        return;\r\n      case 'reduce':\r\n        blockData.settings.flexGrow = (blockData.settings.flexGrow || 0) - 1;\r\n        blockData.settings.flexGrow = blockData.settings.flexGrow > 0 ? blockData.settings.flexGrow : 0;\r\n        this._updateFlexGrow(id);\r\n        return;\r\n    }\r\n  }\r\n\r\n  _moveBlock(id, oldIndex, newIndex) {\r\n    if (oldIndex < 0 || newIndex < 0 || newIndex >= this.data.blocks.length) {\r\n      return;\r\n    }\r\n\r\n    this.data.blocks.splice(newIndex, 0, this.data.blocks.splice(oldIndex, 1)[0]);\r\n    const node = document.getElementById(id);\r\n\r\n    if (newIndex > oldIndex) {\r\n      node.nextSibling.after(node);\r\n    } else if (newIndex < oldIndex) {\r\n      node.previousSibling.before(node);\r\n    }\r\n  }\r\n\r\n  _createToolbarButton(id, name, svg) {\r\n    const btn = document.createElement(\"button\");\r\n    btn.setAttribute('id', `toolbar_${name}_${id}`);\r\n    btn.classList.add(\"ce-settings__button\");\r\n    btn.dataset.blockid = id;\r\n    btn.innerHTML = svg;\r\n    btn.addEventListener(\"click\", () => {\r\n      this._handleToolbarBtnClick(id, name);\r\n    });\r\n\r\n    return btn;\r\n  }\r\n\r\n  _createBlockWrapper(id, blockName, html) {\r\n    const buttons = [\r\n      {\r\n        title: \"Enlarge\",\r\n        name: 'enlarge',\r\n        group: 'flex-grow',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m18.72437,16.12562l-2.59875,-2.59875c0.83531,-1.29937 1.29937,-2.78437 1.29937,-4.455c0,-4.64062 -3.7125,-8.35312 -8.35312,-8.35312s-8.35312,3.7125 -8.35312,8.35312s3.7125,8.35312 8.35312,8.35312c1.67062,0 3.15562,-0.46406 4.455,-1.29937l2.59875,2.59875c0.7425,0.7425 1.85625,0.7425 2.59875,0c0.7425,-0.7425 0.7425,-1.85625 0,-2.59875zm-9.6525,-0.55687c-3.61969,0 -6.49687,-2.87719 -6.49687,-6.49687s2.87719,-6.49687 6.49687,-6.49687s6.49687,2.87719 6.49687,6.49687s-2.97,6.49687 -6.49687,6.49687z\"/><path d=\"m12.78437,8.14375l-2.78437,0l0,-2.78437c0,-0.55687 -0.37125,-0.92812 -0.92812,-0.92812c-0.55687,0 -0.92812,0.46406 -0.92812,0.92812l0,2.78437l-2.78437,0c-0.46406,0 -0.92812,0.37125 -0.92812,0.92812c0,0.55687 0.37125,0.92812 0.92812,0.92812l2.78437,0l0,2.78437c0,0.55687 0.37125,0.92812 0.92812,0.92812c0.55687,0 0.92812,-0.37125 0.92812,-0.92812l0,-2.78437l2.78437,0c0.55687,0 0.92812,-0.37125 0.92812,-0.92812c0,-0.55687 -0.46406,-0.92812 -0.92812,-0.92812z\"/></svg>',\r\n      },\r\n      {\r\n        title: \"Fill\",\r\n        name: 'flexFill',\r\n        group: 'flex-grow',\r\n        className: 'flex-fill',\r\n        icon: '<svg width=\"17\" height=\"10\" viewBox=\"0 0 17 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z\"></path></svg>',\r\n      },\r\n      {\r\n        title: 'Reduce',\r\n        name: 'reduce',\r\n        group: 'flex-grow',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m18.72437,16.12562l-2.59875,-2.59875c0.83531,-1.29937 1.29937,-2.78437 1.29937,-4.455c0,-4.64062 -3.7125,-8.35312 -8.35312,-8.35312s-8.35312,3.7125 -8.35312,8.35312s3.7125,8.35312 8.35312,8.35312c1.67062,0 3.15562,-0.46406 4.455,-1.29937l2.59875,2.59875c0.7425,0.7425 1.85625,0.7425 2.59875,0c0.7425,-0.7425 0.7425,-1.85625 0,-2.59875zm-9.6525,-0.55687c-3.61969,0 -6.49687,-2.87719 -6.49687,-6.49687s2.87719,-6.49687 6.49687,-6.49687s6.49687,2.87719 6.49687,6.49687s-2.97,6.49687 -6.49687,6.49687z\" /><path d=\"m12.78437,8.14375l-2.78437,0l-1.85624,0l-2.78437,0c-0.46406,0 -0.92812,0.37125 -0.92812,0.92812c0,0.55687 0.37125,0.92812 0.92812,0.92812l2.78437,0l1.85624,0l2.78437,0c0.55687,0 0.92812,-0.37125 0.92812,-0.92812c0,-0.55687 -0.46406,-0.92812 -0.92812,-0.92812z\" /></svg>',\r\n      },\r\n      {\r\n        title: \"Move left\",\r\n        name: \"moveLeft\",\r\n        icon: '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path transform=\"rotate(90 7,7.000000476837159) \" d=\"m8.1245,9.37938l0,-8.6a1.125,-1.125 0 0 1 -2.25,0l0,8.6l-3.594,-3.595a1.125,-1.125 0 1 1 -1.59,1.591l5.513,5.516c0.44,0.439 1.151,0.439 1.59,0l5.516,-5.516a1.125,-1.125 0 0 1 -1.59,-1.59l-3.596,3.594l0.001,0z\"/></svg>',\r\n      },\r\n      {\r\n        title: 'Remove block',\r\n        name: 'remove',\r\n        icon: '<svg class=\"icon icon--cross\" width=\"12px\" height=\"12px\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#cross\"></use></svg>',\r\n      },\r\n      {\r\n        title: \"Move right\",\r\n        name: \"moveRight\",\r\n        icon: '<svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\"><path transform=\"rotate(-90 7,7)\" d=\"m8.1245,9.37938l0,-8.6a1.125,-1.125 0 0 1 -2.25,0l0,8.6l-3.594,-3.595a1.125,-1.125 0 1 1 -1.59,1.591l5.513,5.516c0.44,0.439 1.151,0.439 1.59,0l5.516,-5.516a1.125,-1.125 0 0 1 -1.59,-1.59l-3.596,3.594l0.001,0z\"/></svg>',\r\n      },\r\n    ];\r\n\r\n    const wrapper = document.createElement(\"div\");\r\n    wrapper.setAttribute('id', id);\r\n    wrapper.classList.add(\"mars-row-block-wrapper\");\r\n    wrapper.innerHTML = html;\r\n    wrapper.dataset.block = blockName;\r\n\r\n    const toolbar = document.createElement(\"div\");\r\n    toolbar.classList.add(\"mars-row-block-toolbar\");\r\n    toolbar.classList.add(\"ce-settings\");\r\n    buttons.forEach((button) => {\r\n      const btn = this._createToolbarButton(id, button.name, button.icon);\r\n      toolbar.appendChild(btn);\r\n      this.api.tooltip.onHover(btn, button.title, {});\r\n    });\r\n    wrapper.appendChild(toolbar);\r\n    return wrapper;\r\n  }\r\n\r\n  renderSettings() {\r\n    const settings = [\r\n      ...justifyButtons,\r\n      ...alignButtons,\r\n      {\r\n        title: 'Margins & Paddings',\r\n        name: 'margin-padding',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m17.89455,2.83299l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79629c0,-0.43963 0.33688,-0.79643 0.75196,-0.79643l15.03728,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,6.81471l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79643c0,-0.43948 0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path d=\"m17.89455,10.79629l-7.51864,0c-0.41508,0 -0.75182,-0.35666 -0.75182,-0.79629s0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.35666 0.75196,0.79629s-0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,14.77801l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79629c0,-0.43963 0.33674,-0.79643 0.75182,-0.79643l7.51864,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,18.75973l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79643c0,-0.43948 0.33688,-0.79629 0.75196,-0.79629l15.03728,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path transform=\"rotate(180 4.736896514892577,10.000147819519043) \" d=\"m7.94064,9.56198l-2.63159,-2.58804c-0.16465,-0.16171 -0.40379,-0.20312 -0.60975,-0.10994c-0.20527,0.09478 -0.3384,0.30985 -0.3384,0.54797l0,1.79175l-2.25561,0c-0.41577,0 -0.75182,0.35666 -0.75182,0.79629s0.33606,0.79629 0.75182,0.79629l2.25561,0l0,1.79175c0,0.23738 0.13313,0.45231 0.3384,0.54797c0.07297,0.03266 0.14882,0.04928 0.22551,0.04928c0.13987,0 0.27755,-0.05483 0.38424,-0.15923l2.63159,-2.58804c0.11427,-0.11388 0.17966,-0.27238 0.17966,-0.43802s-0.06539,-0.32487 -0.17966,-0.43802zm0,0\"/></svg>',\r\n      },\r\n      {\r\n        title: 'Add a block',\r\n        name: 'add',\r\n        icon: '<svg class=\"icon icon--plus\" width=\"16px\" height=\"16px\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#plus\"></use></svg>',\r\n      },\r\n      {\r\n        title: 'Wrap items',\r\n        group: 'wrap',\r\n        name: 'wrap',\r\n        className: 'flex-wrap',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m7.75,5.12502l-6.00005,0c-0.41391,0 -0.74995,-0.33604 -0.74995,-0.75009c0,-0.41391 0.33604,-0.74995 0.74995,-0.74995l6.00005,0c0.41405,0 0.74995,0.33604 0.74995,0.74995c0,0.41405 -0.33591,0.75009 -0.74995,0.75009zm0,0\"/><path d=\"m7.75,14.12502l-6.00005,0c-0.41391,0 -0.74995,-0.33604 -0.74995,-0.75009c0,-0.41391 0.33604,-0.74995 0.74995,-0.74995l6.00005,0c0.41405,0 0.74995,0.33604 0.74995,0.74995c0,0.41405 -0.33591,0.75009 -0.74995,0.75009zm0,0\"/><path d=\"m7.75,9.62502l-6.00005,0c-0.41391,0 -0.74995,-0.33604 -0.74995,-0.75009c0,-0.41391 0.33604,-0.74995 0.74995,-0.74995l6.00005,0c0.41405,0 0.74995,0.33604 0.74995,0.74995c0,0.41405 -0.33591,0.75009 -0.74995,0.75009zm0,0\"/><path d=\"m13.75005,3.62498l-3.00009,0c-0.41391,0 -0.74995,0.33604 -0.74995,0.74995c0,0.41405 0.33604,0.75009 0.74995,0.75009l3.00009,0c2.06776,0 3.74991,1.68214 3.74991,3.74991c0,2.06776 -1.68214,3.75005 -3.74991,3.75005l0,-1.6875c0,-0.22343 -0.1328,-0.42599 -0.33755,-0.51595c-0.20476,-0.08858 -0.44399,-0.04875 -0.60823,0.10341l-2.62505,2.43759c-0.11398,0.10643 -0.17921,0.25571 -0.17921,0.4124c0,0.15683 0.06523,0.30611 0.17921,0.41254l2.62505,2.43745c0.10643,0.09833 0.24376,0.1501 0.38329,0.1501c0.07649,0 0.15216,-0.01579 0.22495,-0.04655c0.20476,-0.08995 0.33755,-0.29251 0.33755,-0.51595l0,-1.6875c2.8949,0 5.24995,-2.35506 5.24995,-5.25009c0,-2.8949 -2.35506,-5.24995 -5.24995,-5.24995zm0,0\"/></svg>',\r\n      },\r\n    ];\r\n\r\n    const wrapper = document.createElement(\"div\");\r\n    settings.forEach((tune) => {\r\n      let button = document.createElement(\"div\");\r\n      button.dataset.class = tune.className ? tune.className : '';\r\n      button.dataset.group = tune.group ? tune.group : '';\r\n      button.dataset.id = 'XID';\r\n      button.classList.add(\"cdx-settings-button\");\r\n      button.innerHTML = tune.icon;\r\n      this.api.tooltip.onHover(button, tune.title, {});\r\n\r\n      if (tune.group && tune.className && this.data.settings[tune.group] === tune.className) {\r\n        button.classList.add('cdx-settings-button--active');\r\n      }\r\n\r\n      button.addEventListener(\"click\", (e) => {\r\n        this._handleSettingsBtnClick(tune.name, tune.group, tune.className);\r\n      });\r\n\r\n      wrapper.appendChild(button);\r\n    });\r\n\r\n    return wrapper;\r\n  }\r\n\r\n  save() {\r\n    return this.data;\r\n  }\r\n\r\n  render() {\r\n    console.log('render', this.data);\r\n    if (!this.data || !this.data.blocks || !this.data.blocks.length) {\r\n      this.addButton = document.createElement(\"button\");\r\n      this.addButton.setAttribute(\"id\", \"add-mars-block-btn\");\r\n      this.addButton.className = \"btn btn-primary m-2\";\r\n      this.addButton.innerText = \"Add a block\";\r\n      this.addButton.addEventListener(\"click\", () => {\r\n        openBlockSearch((blockName) => {\r\n          this._handleBlockSearchSelect(blockName);\r\n        });\r\n      });\r\n\r\n      $(this.wrapper).append(this.addButton);\r\n      return this.wrapper;\r\n    }\r\n\r\n    this._updateMarginPadding();\r\n    this._updateFlexWrap();\r\n\r\n    setTimeout(() => {\r\n      this.data.blocks.map(i => {\r\n        $(this.wrapper).append(\r\n          this._createBlockWrapper(i.id, i.block, window.WysiwygCache[i.id])\r\n        );\r\n\r\n        this._updateFlexFill(i.id);\r\n        this._updateFlexGrow(i.id);\r\n      });\r\n    }, 300);\r\n\r\n    // Promise.all(this.data.blocks.map(i => window.postRequest(`api/${i.block}`)))\r\n    //   .then(values => {\r\n    //     values.forEach((i, ix) => {\r\n    //       this.wrapper.appendChild(\r\n    //         this._createBlockWrapper(this.data.blocks[ix].id, this.data.blocks[ix].block, i.data)\r\n    //       );\r\n\r\n    //       this._updateFlexFill(this.data.blocks[ix].id);\r\n    //       this._updateFlexGrow(this.data.blocks[ix].id);\r\n    //     });\r\n    //   });\r\n\r\n    return this.wrapper;\r\n  }\r\n}\r\n\r\nclass MarsBlockTool {\r\n  static get toolbox() {\r\n    return {\r\n      title: 'Mars block',\r\n      icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m18.67037,8.86352l-2.15058,-2.15058c-0.88442,-0.88442 -0.34394,-1.81798 0.61985,-1.87467c1.58743,-0.09827 2.47941,-1.79152 1.18301,-3.20131c-1.40978,-1.29262 -3.09548,-0.40442 -3.19375,1.17923c-0.06047,0.96379 -1.00159,1.50805 -1.88223,0.62741l-2.10523,-2.10523c-0.63119,-0.63119 -1.65546,-0.63119 -2.28665,0l-2.13169,2.13169c-0.88442,0.88442 -1.82176,0.33638 -1.88223,-0.62741c-0.09827,-1.58743 -1.79908,-2.49075 -3.20887,-1.19435c-1.30018,1.41356 -0.39686,3.11438 1.19057,3.21265c0.96379,0.06047 1.51183,1.00159 0.63119,1.88601l-2.12413,2.12035c-0.63119,0.63119 -0.63119,1.65546 0,2.28665l2.10523,2.10523c0.88442,0.88064 0.35906,1.79908 -0.60473,1.85956c-1.58743,0.09827 -2.47563,1.78774 -1.17923,3.19753c1.40978,1.2964 3.0917,0.41197 3.18997,-1.17545c0.06047,-0.96379 0.98269,-1.49294 1.86711,-0.61229l2.12413,2.12413c0.64253,0.64253 1.69325,0.64253 2.33578,0.00378l1.48916,-1.48916l0.63875,-0.63875c0.83529,-0.87308 0.29481,-1.79152 -0.65765,-1.852c-1.58743,-0.09827 -2.48697,-1.79908 -1.19057,-3.20887c1.40978,-1.2964 3.1106,-0.39308 3.20887,1.19435c0.06047,0.95246 0.97513,1.48916 1.84822,0.65387l0.57828,-0.57828l1.55719,-1.55719c0.00378,-0.00378 0.00378,-0.00378 0.00756,-0.00756l0.02268,-0.02268c0.63119,-0.63119 0.63119,-1.65546 0,-2.28665z\"/></svg>',\r\n    };\r\n  }\r\n\r\n  constructor({ data, api }) {\r\n    this.data = data;\r\n    this.data.id = this.data.id || `block_${(new Date()).getTime()}`;\r\n    this.api = api;\r\n    this.data.settings = this.data.settings || {};\r\n    this.data.settings.justify = this.data.settings.justify || 'justify-content-center';\r\n    this.data.settings.margin = this.data.settings.margin || { top: 0, right: 0, bottom: 0, left: 0 };\r\n    this.data.settings.padding = this.data.settings.padding || { top: 0, right: 0, bottom: 0, left: 0 };\r\n\r\n    this.wrapper = document.createElement(\"div\");\r\n    this.wrapper.classList.add('d-flex');\r\n    this.wrapper.classList.add(this.data.settings.justify);\r\n    if (this.data && this.data.block) {\r\n      this.wrapper.dataset.block = this.data.block;\r\n    }\r\n  }\r\n\r\n  _updateJustifyContent(className) {\r\n    this.data.settings.justify = this.data.settings.justify === className ? false : className;\r\n    Object.values(this.wrapper.classList).filter(i => i.startsWith('justify-content-')).forEach(i => this.wrapper.classList.remove(i));\r\n    document.querySelectorAll('[data-id=\"XID\"][data-group=\"justify\"]').forEach(i => i.classList.remove('cdx-settings-button--active'));\r\n    if (this.data.settings.justify) {\r\n      this.wrapper.classList.add(className);\r\n      document.querySelector(`[data-class=\"${className}\"]`).classList.add('cdx-settings-button--active');\r\n    }\r\n  }\r\n\r\n  _updateMarginPadding() {\r\n    Object.values(this.wrapper.classList).filter(i => ['mt-', 'ml-', 'mb-', 'mr-', 'pt-', 'pl-', 'pb-', 'pr-'].some(k => i.startsWith(k))).forEach(i => this.wrapper.classList.remove(i));\r\n    Object.keys(this.data.settings.margin).forEach(key => {\r\n      const val = this.data.settings.margin[key];\r\n      if (val) {\r\n        this.wrapper.classList.add(`m${key[0]}-${val}`);\r\n      }\r\n    });\r\n\r\n    Object.keys(this.data.settings.padding).forEach(key => {\r\n      const val = this.data.settings.padding[key];\r\n      if (val) {\r\n        this.wrapper.classList.add(`p${key[0]}-${val}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  _handleSettingsBtnClick(name, group, className) {\r\n    switch (name) {\r\n      case 'margin':\r\n      case 'padding':\r\n        openMarginSettings({ margin: this.data.settings.margin, padding: this.data.settings.padding }, (result) => {\r\n          this.data.settings.margin = result.margin;\r\n          this.data.settings.padding = result.padding;\r\n          this._updateMarginPadding();\r\n        });\r\n        return;\r\n    }\r\n\r\n    switch (group) {\r\n      case 'justify':\r\n        this._updateJustifyContent(className);\r\n        return;\r\n        // case 'align':\r\n        //   this._updateAlignItems(className);\r\n        return;\r\n    }\r\n  }\r\n\r\n  save() {\r\n    return this.data;\r\n  }\r\n\r\n  renderSettings() {\r\n    const settings = [\r\n      ...justifyButtons,\r\n      {\r\n        title: 'Margins',\r\n        name: 'margin',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m17.89455,2.83299l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79629c0,-0.43963 0.33688,-0.79643 0.75196,-0.79643l15.03728,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,6.81471l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79643c0,-0.43948 0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path d=\"m17.89455,10.79629l-7.51864,0c-0.41508,0 -0.75182,-0.35666 -0.75182,-0.79629s0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.35666 0.75196,0.79629s-0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,14.77801l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79629c0,-0.43963 0.33674,-0.79643 0.75182,-0.79643l7.51864,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,18.75973l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79643c0,-0.43948 0.33688,-0.79629 0.75196,-0.79629l15.03728,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path transform=\"rotate(180 4.736896514892577,10.000147819519043) \" d=\"m7.94064,9.56198l-2.63159,-2.58804c-0.16465,-0.16171 -0.40379,-0.20312 -0.60975,-0.10994c-0.20527,0.09478 -0.3384,0.30985 -0.3384,0.54797l0,1.79175l-2.25561,0c-0.41577,0 -0.75182,0.35666 -0.75182,0.79629s0.33606,0.79629 0.75182,0.79629l2.25561,0l0,1.79175c0,0.23738 0.13313,0.45231 0.3384,0.54797c0.07297,0.03266 0.14882,0.04928 0.22551,0.04928c0.13987,0 0.27755,-0.05483 0.38424,-0.15923l2.63159,-2.58804c0.11427,-0.11388 0.17966,-0.27238 0.17966,-0.43802s-0.06539,-0.32487 -0.17966,-0.43802zm0,0\"/></svg>',\r\n      },\r\n      {\r\n        title: 'Stretched',\r\n        name: \"stretched\",\r\n        icon: '<svg width=\"17\" height=\"10\" viewBox=\"0 0 17 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M13.568 5.925H4.056l1.703 1.703a1.125 1.125 0 0 1-1.59 1.591L.962 6.014A1.069 1.069 0 0 1 .588 4.26L4.38.469a1.069 1.069 0 0 1 1.512 1.511L4.084 3.787h9.606l-1.85-1.85a1.069 1.069 0 1 1 1.512-1.51l3.792 3.791a1.069 1.069 0 0 1-.475 1.788L13.514 9.16a1.125 1.125 0 0 1-1.59-1.591l1.644-1.644z\"/></svg>',\r\n      },\r\n      {\r\n        title: 'Paddings',\r\n        name: 'padding',\r\n        icon: '<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m17.89455,2.83299l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79629c0,-0.43963 0.33688,-0.79643 0.75196,-0.79643l15.03728,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,6.81471l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79643c0,-0.43948 0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path d=\"m17.89455,10.79629l-7.51864,0c-0.41508,0 -0.75182,-0.35666 -0.75182,-0.79629s0.33674,-0.79629 0.75182,-0.79629l7.51864,0c0.41508,0 0.75196,0.35666 0.75196,0.79629s-0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,14.77801l-7.51864,0c-0.41508,0 -0.75182,-0.3568 -0.75182,-0.79629c0,-0.43963 0.33674,-0.79643 0.75182,-0.79643l7.51864,0c0.41508,0 0.75196,0.35681 0.75196,0.79643c0,0.43948 -0.33688,0.79629 -0.75196,0.79629zm0,0\"/><path d=\"m17.89455,18.75973l-15.03728,0c-0.41508,0 -0.75196,-0.3568 -0.75196,-0.79643c0,-0.43948 0.33688,-0.79629 0.75196,-0.79629l15.03728,0c0.41508,0 0.75196,0.3568 0.75196,0.79629c0,0.43963 -0.33688,0.79643 -0.75196,0.79643zm0,0\"/><path d=\"m7.94064,9.56198l-2.63159,-2.58804c-0.16465,-0.16171 -0.40379,-0.20312 -0.60975,-0.10994c-0.20527,0.09478 -0.3384,0.30985 -0.3384,0.54797l0,1.79175l-2.25561,0c-0.41577,0 -0.75182,0.35666 -0.75182,0.79629s0.33606,0.79629 0.75182,0.79629l2.25561,0l0,1.79175c0,0.23738 0.13313,0.45231 0.3384,0.54797c0.07297,0.03266 0.14882,0.04928 0.22551,0.04928c0.13987,0 0.27755,-0.05483 0.38424,-0.15923l2.63159,-2.58804c0.11427,-0.11388 0.17966,-0.27238 0.17966,-0.43802s-0.06539,-0.32487 -0.17966,-0.43802zm0,0\"/></svg>',\r\n      },\r\n    ];\r\n\r\n    const wrapper = document.createElement(\"div\");\r\n    settings.forEach((tune) => {\r\n      const button = document.createElement(\"div\");\r\n      button.dataset.class = tune.className ? tune.className : '';\r\n      button.dataset.group = tune.group ? tune.group : '';\r\n      button.dataset.id = 'XID';\r\n      button.classList.add(\"cdx-settings-button\");\r\n      button.innerHTML = tune.icon;\r\n      this.api.tooltip.onHover(button, tune.title, {});\r\n      wrapper.appendChild(button);\r\n\r\n      button.addEventListener(\"click\", (e) => {\r\n        this._handleSettingsBtnClick(tune.name, tune.group, tune.className);\r\n      });\r\n    });\r\n\r\n    return wrapper;\r\n  }\r\n\r\n  render() {\r\n    if (this.data.block) {\r\n      setTimeout(() => { $(this.wrapper).html(window.WysiwygCache[this.data.id]) }, 300);\r\n      // $(this.wrapper).html(window.WysiwygCache[this.data.id]);\r\n      return this.wrapper;\r\n    }\r\n\r\n    openBlockSearch((blockName) => {\r\n      this.data.block = blockName;\r\n      this.wrapper.innerHTML = \"<div>Loading...</div>\";\r\n      window.postRequest(`api/${blockName}`).then((response) => {\r\n        // this.wrapper.innerHTML = response.data;\r\n        $(this.wrapper).html($(response.data));\r\n        this.wrapper.dataset.block = this.data.block;\r\n      });\r\n    });\r\n\r\n    this._updateMarginPadding();\r\n    return this.wrapper;\r\n  }\r\n}\r\n\r\nnew MarsVue(\r\n  data.Id,\r\n  { ...data, methods: [{ name: \"saveData\", block: \"EditorJs\" }] },\r\n  {\r\n    data: {\r\n      editorJS: {},\r\n      saving: false,\r\n    },\r\n    async mounted() {\r\n      const blocksToRender = [];\r\n      (data.blocks || []).filter(i => i.type === 'marsBlock').forEach(i => blocksToRender.push({ id: i.data.id, name: i.data.block }));\r\n      (data.blocks || []).filter(i => i.type === 'row').forEach(k => (k.data.blocks || []).forEach(i => blocksToRender.push({ id: i.id, name: i.block })));\r\n      window.WysiwygCache = window.WysiwygCache || {};\r\n      const cache = await ExecuteBlocksArray.api.execute(blocksToRender);\r\n      Object.keys(cache || {}).map(key => {\r\n        Object.defineProperty(window.WysiwygCache, key, {\r\n          value: cache[key],\r\n          writable: false\r\n        });\r\n      });\r\n\r\n      this.editorJS = new EditorJS({\r\n        holderId: \"XID_editorJS\",\r\n        autofocus: true,\r\n        logLevel: \"ERROR\",\r\n        tools: {\r\n          header: Header,\r\n          linkTool: LinkTool,\r\n          raw: RawTool,\r\n          image: {\r\n            class: ImageTool,\r\n            config: {\r\n              endpoints: {\r\n                byFile: \"/api/UploadFile\",\r\n                byUrl: \"api/fetchUrl\",\r\n              },\r\n            },\r\n          },\r\n          attaches: {\r\n            class: AttachesTool,\r\n            config: {\r\n              endpoint: \"/api/UploadFile\",\r\n            },\r\n          },\r\n          table: {\r\n            class: Table,\r\n            inlineToolbar: true,\r\n          },\r\n          inlineCode: InlineCode,\r\n          warning: Warning,\r\n          code: CodeTool,\r\n          checklist: {\r\n            class: Checklist,\r\n            inlineToolbar: true,\r\n          },\r\n          paragraph: {\r\n            class: Paragraph,\r\n            inlineToolbar: true,\r\n          },\r\n          list: {\r\n            class: List,\r\n            inlineToolbar: true,\r\n          },\r\n          embed: Embed,\r\n          Marker: {\r\n            class: Marker,\r\n            shortcut: \"CMD+SHIFT+M\",\r\n          },\r\n          marsBlock: { class: MarsBlockTool, inlineToolbar: [\"link\"] },\r\n          row: RowTool,\r\n        },\r\n        data: {\r\n          blocks: data.blocks,\r\n        },\r\n      });\r\n    },\r\n    methods: {\r\n      save() {\r\n        this.saving = true;\r\n        this.editorJS\r\n          .save()\r\n          .then(async (outputData) => {\r\n            await this.api.saveData(outputData.blocks);\r\n            eval(data.afterSave);\r\n            this.saving = false;\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"Saving failed: \", error);\r\n          });\r\n      },\r\n    },\r\n  },\r\n);\r\n",
    "Css": ".tc-table, .tc-table__wrap {\r\n  height: auto!important;\r\n}\r\n\r\n.ct--shown {\r\n  z-index: 100000;\r\n}\r\n\r\n.mars-row-wrapper {\r\n  border: 1px dashed #ccc;\r\n  min-height: 40px;\r\n}\r\n\r\n.mars-row-block-toolbar {\r\n  display: none;\r\n  min-width: 108px!important;\r\n  max-width: 108px!important;\r\n  width: auto;\r\n}\r\n\r\n.mars-row-block-toolbar > .ce-settings__button {\r\n  margin: 1!important;\r\n}\r\n\r\n.mars-row-block-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.mars-row-block-wrapper:hover {\r\n  background-color: var(--color-warning200);\r\n}\r\n\r\n.mars-row-block-wrapper:hover > .mars-row-block-toolbar {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  padding: 3px;\r\n  top: unset!important;\r\n  bottom: unset!important;\r\n  left: -1px!important;\r\n  right: unset!important;\r\n}\r\n\r\n.mars-row-flex-grow-badge {\r\n  position: absolute;\r\n  top: .25rem;\r\n  left: .25rem;\r\n  font-size: 0.6rem;\r\n  padding-left: .25rem;\r\n  padding-right: .25rem;\r\n}",
    "BlockFunction": "const { _ } = Mars.libs;\r\nasync function server() {\r\n  const r = await Mars.data[data.collection].findById(data.objectId)\r\n  return _.get(r, data.path) || [];\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    async saveData(content) {\r\n      const u = await Mars.data[data.collection].updateById(data.objectId, { $set: { [data.path]: content } });\r\n      await Mars.services.ResetCache({\r\n        blockObj: { ...u.value, _id: u.value._id.toString() }\r\n      })\r\n      return true\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef3ee83e01dfa3daccf52f3",
    "Name": "UploadFile",
    "Title": "UploadFile",
    "Type": "service",
    "Apps": [],
    "Folder": "files",
    "DataArgs": [],
    "DemoJsx": "",
    "DemoJsxTranspiled": "",
    "BlockFunction": "const AWS = require('aws-sdk');\r\n\r\nAWS.config.update({\r\n  region: 'eu-north-1',\r\n  secretAccessKey: 'zP+l0yO7XVM8wmjinqyqpDcK86L6oFwJgMkAXTS1',\r\n  accessKeyId: 'AKIARME3PQSOFOEUAQPT'\r\n});\r\n\r\nconst Multipart = require(\"lambda-multipart\");\r\nconst parseMultipartFormData = async event => {\r\n  return new Promise((resolve, reject) => {\r\n    const parser = new Multipart(event);\r\n\r\n    parser.on(\"finish\", result => {\r\n      resolve({ fields: result.fields, files: result.files });\r\n    });\r\n\r\n    parser.on(\"error\", error => {\r\n      return reject(error);\r\n    });\r\n  });\r\n};\r\n\r\nconst getFileExtension = file => {\r\n  const headers = file[\"headers\"];\r\n  if (headers == null) {\r\n    throw new Error(`Missing \"headers\" from request`);\r\n  }\r\n\r\n  const contentType = headers[\"content-type\"];\r\n  if (contentType == \"image/jpeg\") {\r\n    return \"jpg\";\r\n  }\r\n\r\n  throw new Error(`Unsupported content type \"${contentType}\".`);\r\n};\r\n\r\nasync function server() {\r\n  try {\r\n    const s3 = new AWS.S3();\r\n\r\n    // if function is hosted on lambda\r\n    if (Mars.config.AWS_LAMBDA_FUNCTION_NAME) {\r\n      const { files } = await parseMultipartFormData(Req);\r\n      Req.files = files;\r\n      console.log('files', files)\r\n    }\r\n\r\n\r\n    const fileName = Req.files.image.name === 'image.png' ? `img-${(new Date()).getTime()}.png` : Req.files.image.name;\r\n    const filePath = `assets/img/${fileName}`;\r\n\r\n    const o = await s3.putObject({\r\n      Bucket: 'marscode',\r\n      Key: filePath,\r\n      ContentType: Req.files.image.mimetype,\r\n      Body: Req.files.image.data,\r\n      ACL: 'public-read'\r\n    }).promise();\r\n\r\n    return {\r\n      success: 1,\r\n      file: {\r\n        url: `https://marscode.s3.eu-north-1.amazonaws.com/${filePath}`,\r\n        name: fileName\r\n      }\r\n    }\r\n  } catch (ex) {\r\n    console.log('S3CacheService.putObject', ex);\r\n    return {\r\n      success: 0,\r\n      file: {\r\n      }\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef0a10d48ed66007f36d240",
    "Name": "CacheService",
    "Title": "Cache",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [],
    "DemoJsx": "",
    "DemoJsxTranspiled": "",
    "BlockFunction": "const AWS = require('aws-sdk');\n\nclass MemoryCacheService {\n  constructor(ttl) {\n    this.ttl = ttl;\n    this.cache = {};\n\n    // delete expired keys every 1/10 interval of default TTL period\n    const self = this;\n    this.timer = setInterval(() => {\n      const timestamp = (new Date()).getTime();\n      const keysToDelete = Object.keys(self).filter(key => self[key].ttl <= timestamp);\n      self.del(keysToDelete);\n    }, ttl * 1000 * 0.1);\n  }\n\n  async get(key, storeFunction, ttl = undefined) {\n    const data = this.cache[key];\n    if (data && data.ttl && data.ttl > (new Date()).getTime()) {\n      return data.value;\n    }\n\n    const result = await storeFunction();\n    this.cache[key] = {\n      ttl: (new Date()).getTime() + (ttl ? ttl : this.ttl) * 1000,\n      value: result,\n    };\n\n    return result;\n  }\n\n  del(keys) {\n    if (Array.isArray(keys)) {\n      for (const key of keys) {\n        delete this.cache[key];\n      }\n\n      return;\n    }\n\n    delete this.cache[keys];\n  }\n\n  delStartWith(startsWith = '') {\n    if (!startsWith) {\n      return;\n    }\n\n    const keys = Object.keys(this.cache);\n    for (const key of keys) {\n      if (key.indexOf(startsWith) === 0) {\n        this.del(key);\n      }\n    }\n  }\n\n  flush() {\n    delete this.cache;\n    this.cache = {};\n  }\n}\n\nclass DynamoDbCacheService {\n  constructor(ttl, tableName) {\n    this.ttl = ttl;\n    this.tableName = tableName;\n    this.cache = new AWS.DynamoDB.DocumentClient();\n  }\n\n  async get(key, storeFunction, ttl = undefined) {\n    let value = undefined;\n    try {\n      const data = await this.cache.get({ TableName: this.tableName, Key: { pk: 'cache', key } }).promise();\n\n      // check if TTL is not expired\n      if (data.Item && data.Item.ttl > (new Date()).getTime() && data.Item.data) {\n        value = JSON.parse(data.Item.data.toString('utf-8'));\n      }\n    } catch (ex) {\n      console.log('DynamoDbCacheService.get', ex);\n    }\n\n    if (value) {\n      return value;\n    }\n\n    const result = await storeFunction();\n    try {\n      const item = {\n        TableName: this.tableName,\n        Item: {\n          pk: 'cache',\n          key,\n          ttl: (new Date()).getTime() + (ttl ? ttl : this.ttl) * 1000,\n          data: Buffer.from(JSON.stringify(result)),\n        },\n      };\n\n      await this.cache.put(item).promise();\n    } catch (ex) {\n      console.log('DynamoDbCacheService.put', ex);\n    }\n\n    return result;\n  }\n\n  async del(keys) {\n    if (Array.isArray(keys)) {\n      await Promise.all(keys.map(key => this.cache.delete({ TableName: this.tableName, Key: { pk: 'cache', key } }).promise()));\n      return;\n    }\n\n    await this.cache.delete({ TableName: this.tableName, Key: { pk: 'cache', key: keys } }).promise();\n  }\n\n  async delStartWith(startsWith = '') {\n    if (!startsWith) {\n      return;\n    }\n\n    try {\n      const result = await this.cache.query({\n        TableName: this.tableName,\n        KeyConditionExpression: \"pk = :pk AND begins_with(#key, :prefix)\",\n        ExpressionAttributeNames: { '#key': 'key' },\n        ExpressionAttributeValues: { ':prefix': startsWith, ':pk': 'cache' },\n        ProjectionExpression: '#key'\n      }).promise();\n\n      if (result && result.Count && result.Items) {\n        const keys = result.Items.map(i => i.key);\n        await this.del(keys);\n      }\n    } catch (ex) {\n      console.log('DynamoDbCacheService.delStartWith', ex);\n    }\n  }\n\n  async flush() {\n    try {\n      await this.cache.delete({ TableName: this.tableName, Key: { pk: 'cache' } }).promise();\n    } catch (ex) {\n      console.log('DynamoDbCacheService.flush', ex);\n    }\n  }\n}\n\nclass S3CacheService {\n  constructor(ttl, bucketName, bucketPathPrefix) {\n    this.ttl = ttl;\n    this.bucketName = bucketName;\n    this.bucketPathPrefix = bucketPathPrefix.endsWith('/') ? bucketPathPrefix.slice(0, bucketPathPrefix.length - 1) : bucketPathPrefix;\n    this.cache = new AWS.S3();\n  }\n\n  async get(key, storeFunction, ttl = undefined) {\n    let value = undefined;\n    try {\n      const data = await this.cache.getObject({ Bucket: this.bucketName, Key: `cache/${key}` }).promise();\n\n      // check if TTL is not expired\n      if (Date.parse(data.Expires) > (new Date()).getTime() && data.Body) {\n        value = JSON.parse(data.Body.toString('utf-8'));\n      }\n    } catch (ex) {\n      console.log('S3CacheService.getObject', ex);\n    }\n\n    if (value) {\n      return value;\n    }\n\n    const result = await storeFunction();\n    try {\n      await this.cache.putObject({\n        Bucket: this.bucketName,\n        Key: `cache/${key}`,\n        ContentType: 'application/json',\n        Body: Buffer.from(JSON.stringify(result)),\n        Expires: new Date((new Date()).getTime() + (ttl ? ttl : this.ttl) * 1000),\n      }).promise();\n    } catch (ex) {\n      console.log('S3CacheService.putObject', ex);\n    }\n\n    return result;\n  }\n\n  async del(keys) {\n    try {\n      if (Array.isArray(keys)) {\n        await Promise.all(keys.map(key => this.cache.deleteObject({ Bucket: this.bucketName, Key: `cache/${key}` }).promise()));\n        return;\n      }\n\n      await this.cache.deleteObject({ Bucket: this.bucketName, Key: `cache/${keys}` }).promise();\n    } catch (ex) {\n      console.log('S3CacheService.del', ex);\n    }\n  }\n\n  async delStartWith(startsWith = '') {\n    if (!startsWith) {\n      return;\n    }\n\n    try {\n      const data = await this.cache.listObjectsV2({ Bucket: this.bucketName, Prefix: `cache/${startsWith}` }).promise();\n      if (!data || !data.Contents || !data.Contents.length) {\n        return;\n      }\n\n      const keys = data.Contents.map(i => i.Key);\n      await Promise.all(keys.map(key => this.cache.deleteObject({ Bucket: this.bucketName, Key: key }).promise()));\n    } catch (ex) {\n      console.log('S3CacheService.delStartWith', ex);\n    }\n  }\n\n  async flush() {\n    throw new Error('S3 cache flush() method is not implemented');\n  }\n}\n\nclass CacheService {\n  constructor(ttlSeconds, dynamoDbTableName, s3BucketName, s3BucketPathPrefix) {\n    this['memory'] = new MemoryCacheService(ttlSeconds);\n    this['dynamodb'] = dynamoDbTableName ? new DynamoDbCacheService(ttlSeconds, dynamoDbTableName) : null;\n    this['s3'] = s3BucketName && s3BucketPathPrefix ? new S3CacheService(ttlSeconds, s3BucketName, s3BucketPathPrefix) : null;\n  }\n\n  /**\n   * Returns cached value or retrieves, sets it up and returns.\n   * \n   * @param key - The cache key.\n   * @param storeFunction - The function to retrieve data to cache.\n   * @param ttlSeconds - The TTL in seconds.\n   * @param cacheType - The type of cache storage: `memory`, `dynamodb`, `s3`.\n   * \n   * @returns Cached value\n   */\n  async get(key, storeFunction, ttlSeconds = undefined, cacheType = 'memory') {\n    if (!this.hasOwnProperty(cacheType)) {\n      throw new Error('Unknown cacheType');\n    }\n\n    if (!this[cacheType]) {\n      throw new Error(`Define \"${cacheType}\" settings in \"CacheConfig\"`);\n    }\n\n    return this[cacheType].get(key, storeFunction, ttlSeconds);\n  }\n\n  /**\n   * Deletes cached data by key or keys array.\n   * \n   * @param keys - Cache keys or array of keys.\n   * @param cacheType - The type of cache storage: `memory`, `dynamodb`, `s3`.\n   */\n  async del(keys, cacheType = 'memory') {\n    if (!this.hasOwnProperty(cacheType)) {\n      throw new Error('Unknown cacheType');\n    }\n\n    if (!this[cacheType]) {\n      throw new Error(`Define \"${cacheType}\" settings in \"CacheConfig\"`);\n    }\n\n    return this[cacheType].del(keys);\n  }\n\n  /**\n   * Deletes cached data by key prefix.\n   *\n   * @param startsWith - Cache key prefix.\n   * @param cacheType - The type of cache storage: `memory`, `dynamodb`, `s3`.\n   */\n  async delStartWith(startsWith = '', cacheType = 'memory') {\n    if (!this.hasOwnProperty(cacheType)) {\n      throw new Error('Unknown cacheType');\n    }\n\n    if (!this[cacheType]) {\n      throw new Error(`Define \"${cacheType}\" settings in \"CacheConfig\"`);\n    }\n\n    if (!startsWith) {\n      return;\n    }\n\n    return this[cacheType].delStartWith(startsWith);\n  }\n\n  /**\n   * Flush cache.\n   *\n   * @param cacheType - The type of cache storage: `memory`, `dynamodb`, `s3`.\n   */\n  async flush(cacheType = 'memory') {\n    if (!this.hasOwnProperty(cacheType)) {\n      throw new Error('Unknown cacheType');\n    }\n\n    if (!this[cacheType]) {\n      throw new Error(`Define \"${cacheType}\" settings in \"CacheConfig\"`);\n    }\n\n    return this[cacheType].flush();\n  }\n}\n\nfunction server() {\n  const config = Mars.settings.CacheConfig;\n  if (!config || !config.ttl) {\n    return new MemoryCacheService(30 * 60);\n  }\n\n  return new CacheService(\n    config.ttl,\n    config.dynamoDbTableName,\n    config.s3BucketName,\n    config.s3BucketPathPrefix,\n  );\n};\n",
    "TestCode": "test('cache Memory', async () => {\n  const item1 = { a: 1, b: 4 };\n  const item2 = { x: 'x', y: 100, z: 'z' };\n  const item3 = { q: 'qqq', w: 'www' };\n\n  /* put to cache */\n  await Mars.cache.get('test1', () => { return item1; });\n  await Mars.cache.get('test2', () => { return item2; });\n  await Mars.cache.get('test3', () => { return item3; });\n\n  /* retrieve from cache */\n  let result = await Mars.cache.get('test1', () => { return undefined; });\n\n  expect(result).toBeDefined();\n  expect(result).toEqual(item1);\n\n  result = await Mars.cache.get('test2', () => { return undefined; });\n\n  expect(result).toBeDefined();\n  expect(result).toEqual(item2);\n\n  result = await Mars.cache.get('test3', () => { return undefined; });\n\n  expect(result).toBeDefined();\n  expect(result).toEqual(item3);\n});\n",
    "isSystem": true
  },
  {
    "_id": "5ef5164834f3b44a54e33b89",
    "Name": "Wysiwyg",
    "Title": "RenderEditorJs",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "wysiwyg",
    "DataArgs": [],
    "DemoJsx": "export default <RenderEditorJs blockName=\"HowToCreateUiBlock\"/>",
    "DemoJsxTranspiled": "export default executeAppBlock(RenderEditorJs, { blockName: \"HowToCreateUiBlock\" });",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\n\nfunction escapeHtml(html) {\n  return html.replace(/</g, '&lt;');\n}\n\nconst editorJsBlocks = {\n  header({ text, level }) {\n    return `<h${level}>${text}</h${level}>`;\n  },\n  paragraph({ text }) {\n    return `<p>${text}</p>`.replace(/<a/g, '<a data-target-partial ');\n  },\n  list({ items, style }) {\n    return `<${style[0]}l>\n    ${items.map(t => `<li>${t}</li>`).join('')}\n    </${style[0]}l>`;\n  },\n  delimiter() {},\n  image({ file, caption }) {\n    return `<img style=\"max-width: 100%;\" src=\"${file.url}\"/>` + `<p style=\"padding-top: 0;margin-top: 5px;\">${caption}</p>`;\n  },\n  code({ code }) {\n    return `<pre><code>${escapeHtml(code)}</code></pre>`;\n  },\n  quote({ text, caption, alignment }) {\n    const title = caption ? `<h3>${caption}</h3>` : '';\n    return `<blockquote>${title}${text}</blockquote>`;\n  },\n  warning({ title, message }) {\n    title = title ? `<h3>${title}</h3>` : '';\n    return `<blockquote>${title}${message}</blockquote>`;\n  },\n  table({ content }) {\n    return executeAppBlock(\n      'table',\n      { 'class': 'tc-table' },\n      executeAppBlock(\n        'tbody',\n        null,\n        content.map(row => executeAppBlock(\n          'tr',\n          null,\n          row.map(cell => executeAppBlock(\n            'td',\n            { 'class': 'tc-table__cell' },\n            cell\n          ))\n        ))\n      )\n    );\n  },\n  raw({ html }) {\n    return html;\n  },\n  row(data) {\n    if (!data) {\n      return null;\n    }\n\n    const classList = ['d-flex'];\n    if (data.settings) {\n      if (data.settings.margin) {\n        Object.keys(data.settings.margin).forEach(key => {\n          const val = data.settings.margin[key];\n          if (val) {\n            classList.push(`m${key[0]}-${val}`);\n          }\n        });\n      }\n\n      if (data.settings.padding) {\n        Object.keys(data.settings.padding).forEach(key => {\n          const val = data.settings.padding[key];\n          if (val) {\n            classList.push(`p${key[0]}-${val}`);\n          }\n        });\n      }\n\n      if (data.settings.justify) {\n        classList.push(data.settings.justify);\n      }\n\n      if (data.settings.align) {\n        classList.push(data.settings.align);\n      }\n\n      if (data.settings.wrap) {\n        classList.push(data.settings.wrap);\n      }\n    }\n\n    const renderBlock = blockData => {\n      const Block = blockData.block ? Mars.blocks[blockData.block] : null;\n      const classes = ['mars-row-wrapper', 'd-flex'];\n      if (blockData.settings) {\n        if (blockData.settings.flexFill) {\n          classes.push('flex-fill');\n        }\n\n        if (blockData.settings.flexGrow) {\n          classes.push(`flex-grow-${blockData.settings.flexGrow}`);\n        }\n      }\n      return executeAppBlock(\n        'div',\n        { id: blockData.id, 'class': classes.join(' ') },\n        Block ? executeAppBlock(Block, null) : `The block \"${blockData.block}\" was not found`\n      );\n    };\n\n    return executeAppBlock(\n      'div',\n      { 'class': classList.join(' ') },\n      (data.blocks || []).map(i => renderBlock(i))\n    );\n  },\n  marsBlock(data) {\n    if (!data) {\n      return null;\n    }\n\n    const classList = ['d-flex'];\n    if (data.settings) {\n      if (data.settings.margin) {\n        Object.keys(data.settings.margin).forEach(key => {\n          const val = data.settings.margin[key];\n          if (val) {\n            classList.push(`m${key[0]}-${val}`);\n          }\n        });\n      }\n\n      if (data.settings.padding) {\n        Object.keys(data.settings.padding).forEach(key => {\n          const val = data.settings.padding[key];\n          if (val) {\n            classList.push(`p${key[0]}-${val}`);\n          }\n        });\n      }\n\n      if (data.settings.justify) {\n        classList.push(data.settings.justify);\n      }\n    }\n\n    const Block = data.block ? Mars.blocks[data.block] : null;\n    return executeAppBlock(\n      'div',\n      { id: data.id, 'class': classList.join(' ') },\n      Block ? executeAppBlock(Block, null) : `The block \"${data.block}\" was not found`\n    );\n  }\n};\n\nfunction blockNotImplemented(d, name) {\n  return `<h3>Block ${name} not implemented</h3>`;\n}\n\nasync function Block() {\n  const s = await serverData;\n\n  return executeAppBlock(\n    'div',\n    { id: data.Id },\n    s && s.length > 0 ? s.map(t => (editorJsBlocks[t.type] || blockNotImplemented)(t.data, t.type)) : executeAppBlock(\n      'p',\n      null,\n      'no content...'\n    ),\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.script, null),\n    executeAppBlock(This.style, null)\n  );\n}\n\n/*\r\nasync function Block() {\r\n  const s = await serverData;\r\n  const defaultPath = `pages.${data.key}.content`;\r\n  const onContextMenuHandler = `Modal.open('/api/EditorJs?afterSave=${data.Id}.api.reload()&collection=${data.collection || 'blocks'}&path=${data.path || defaultPath}&objectId=${data.objectId}'); event.preventDefault()`;\r\n  const isEditMode = Req.user && Req.user.name //(Req.queryStringParameters || {}).edit === 'true';\r\n  console.log(data)\r\n  return <div id={data.Id} class={isEditMode ? 'edit-mode' : ''} ondblclick={isEditMode ? onContextMenuHandler : ''} oncontextmenu={isEditMode ? onContextMenuHandler : ''}>\r\n    {s && s.length > 0 ? s.map(t => (editorJsBlocks[t.type] || blockNotImplemented)(t.data, t.type)) :\r\n      <p>Double click here to start editing...</p>}\r\n    <This.html />\r\n    <This.script />\r\n    <This.style />\r\n  </div>\r\n}\r\n*/\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\n\r\nfunction escapeHtml(html) {\r\n  return html.replace(/</g, '&lt;')\r\n}\r\n\r\nconst editorJsBlocks = {\r\n  header({ text, level }) {\r\n    return `<h${level}>${text}</h${level}>`\r\n  },\r\n  paragraph({ text }) {\r\n    return `<p>${text}</p>`.replace(/<a/g, '<a data-target-partial ')\r\n  },\r\n  list({ items, style }) {\r\n    return `<${style[0]}l>\r\n    ${items.map(t => `<li>${t}</li>`).join('')}\r\n    </${style[0]}l>`\r\n  },\r\n  delimiter() {\r\n\r\n  },\r\n  image({ file, caption }) {\r\n    return `<img style=\"max-width: 100%;\" src=\"${file.url}\"/>` +\r\n      `<p style=\"padding-top: 0;margin-top: 5px;\">${caption}</p>`\r\n  },\r\n  code({ code }) {\r\n    return `<pre><code>${escapeHtml(code)}</code></pre>`\r\n  },\r\n  quote({ text, caption, alignment }) {\r\n    const title = caption ? `<h3>${caption}</h3>` : '';\r\n    return `<blockquote>${title}${text}</blockquote>`\r\n  },\r\n  warning({ title, message }) {\r\n    title = title ? `<h3>${title}</h3>` : '';\r\n    return `<blockquote>${title}${message}</blockquote>`\r\n  },\r\n  table({ content }) {\r\n    return <table class=\"tc-table\"><tbody>\r\n      {content.map(row =>\r\n        <tr>\r\n          {row.map(cell => <td class=\"tc-table__cell\">{cell}</td>)}\r\n        </tr>\r\n      )}\r\n    </tbody></table>\r\n  },\r\n  raw({ html }) {\r\n    return html\r\n  },\r\n  row(data) {\r\n    if (!data) {\r\n      return null;\r\n    }\r\n\r\n    const classList = ['d-flex'];\r\n    if (data.settings) {\r\n      if (data.settings.margin) {\r\n        Object.keys(data.settings.margin).forEach(key => {\r\n          const val = data.settings.margin[key];\r\n          if (val) {\r\n            classList.push(`m${key[0]}-${val}`);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (data.settings.padding) {\r\n        Object.keys(data.settings.padding).forEach(key => {\r\n          const val = data.settings.padding[key];\r\n          if (val) {\r\n            classList.push(`p${key[0]}-${val}`);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (data.settings.justify) {\r\n        classList.push(data.settings.justify);\r\n      }\r\n\r\n      if (data.settings.align) {\r\n        classList.push(data.settings.align);\r\n      }\r\n\r\n      if (data.settings.wrap) {\r\n        classList.push(data.settings.wrap);\r\n      }\r\n    }\r\n\r\n    const renderBlock = (blockData) => {\r\n      const Block = blockData.block ? Mars.blocks[blockData.block] : null;\r\n      const classes = ['mars-row-wrapper', 'd-flex'];\r\n      if (blockData.settings) {\r\n        if (blockData.settings.flexFill) {\r\n          classes.push('flex-fill');\r\n        }\r\n\r\n        if (blockData.settings.flexGrow) {\r\n          classes.push(`flex-grow-${blockData.settings.flexGrow}`);\r\n        }\r\n      }\r\n      return <div id={blockData.id} class={classes.join(' ')}>{Block ? <Block /> : `The block \"${blockData.block}\" was not found`}</div>;\r\n    };\r\n\r\n    return (\r\n      <div class={classList.join(' ')}>\r\n        {(data.blocks || []).map(i => renderBlock(i))}\r\n      </div>\r\n    );\r\n  },\r\n  marsBlock(data) {\r\n    if (!data) {\r\n      return null;\r\n    }\r\n\r\n    const classList = ['d-flex'];\r\n    if (data.settings) {\r\n      if (data.settings.margin) {\r\n        Object.keys(data.settings.margin).forEach(key => {\r\n          const val = data.settings.margin[key];\r\n          if (val) {\r\n            classList.push(`m${key[0]}-${val}`);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (data.settings.padding) {\r\n        Object.keys(data.settings.padding).forEach(key => {\r\n          const val = data.settings.padding[key];\r\n          if (val) {\r\n            classList.push(`p${key[0]}-${val}`);\r\n          }\r\n        });\r\n      }\r\n\r\n      if (data.settings.justify) {\r\n        classList.push(data.settings.justify);\r\n      }\r\n    }\r\n\r\n    const Block = data.block ? Mars.blocks[data.block] : null;\r\n    return <div id={data.id} class={classList.join(' ')}>{Block ? <Block /> : `The block \"${data.block}\" was not found`}</div>;\r\n  },\r\n}\r\n\r\nfunction blockNotImplemented(d, name) {\r\n  return `<h3>Block ${name} not implemented</h3>`\r\n}\r\n\r\nasync function Block() {\r\n  const s = await serverData;\r\n \r\n  return <div id={data.Id}>\r\n    {s && s.length > 0 ? s.map(t => (editorJsBlocks[t.type] || blockNotImplemented)(t.data, t.type)) :\r\n      <p>no content...</p>}\r\n    <This.html />\r\n    <This.script />\r\n    <This.style />\r\n  </div>\r\n}\r\n\r\n/*\r\nasync function Block() {\r\n  const s = await serverData;\r\n  const defaultPath = `pages.${data.key}.content`;\r\n  const onContextMenuHandler = `Modal.open('/api/EditorJs?afterSave=${data.Id}.api.reload()&collection=${data.collection || 'blocks'}&path=${data.path || defaultPath}&objectId=${data.objectId}'); event.preventDefault()`;\r\n  const isEditMode = Req.user && Req.user.name //(Req.queryStringParameters || {}).edit === 'true';\r\n  console.log(data)\r\n  return <div id={data.Id} class={isEditMode ? 'edit-mode' : ''} ondblclick={isEditMode ? onContextMenuHandler : ''} oncontextmenu={isEditMode ? onContextMenuHandler : ''}>\r\n    {s && s.length > 0 ? s.map(t => (editorJsBlocks[t.type] || blockNotImplemented)(t.data, t.type)) :\r\n      <p>Double click here to start editing...</p>}\r\n    <This.html />\r\n    <This.script />\r\n    <This.style />\r\n  </div>\r\n}\r\n*/\r\n\r\nexport default <Block />",
    "Html": "<link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/railscasts.min.css\" />",
    "Script": "import('https://marscode.s3.eu-north-1.amazonaws.com/node_modules/highlightjs/highlight.min.js?123').then((t) => {\r\n  document.querySelectorAll('pre code').forEach((block) => {\r\n    hljs.highlightBlock(block);\r\n  });\r\n\r\n  new MarsBlock('XID', data, {})\r\n})\r\n\r\n",
    "Css": "#XID.edit-mode{\r\n   min-height: 25px;\r\n}\r\n\r\n#XID.edit-mode:hover{\r\n  background-color: #f0f9ff;\r\n}\r\n\r\n#XID blockquote{\r\n  margin: 0 0 1rem;\r\n  background-color: #fdf5d8;\r\n  border-radius: 3px;\r\n  border-left: 4px solid #dddddd;\r\n  padding: 0.75em 1em;\r\n  color: #666666;\r\n  font-style: italic;\r\n}\r\n\r\n#XID blockquote h4{\r\n  color: #333333;\r\n  font-style: normal;\r\n}\r\n\r\n\r\n.inline-code {\r\n  background: rgba(250, 239, 240, 0.78);\r\n  color: #b44437;\r\n  padding: 3px 4px;\r\n  border-radius: 5px;\r\n  margin: 0 1px;\r\n  font-family: inherit;\r\n  font-size: 0.86em;\r\n  font-weight: 500;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.hljs {\r\n  display: block;\r\n  overflow-x: auto;\r\n  padding: .5em;\r\n  background: #1e1e1e;\r\n  color: #dcdcdc\r\n}\r\n\r\n.hljs-keyword,.hljs-literal,.hljs-name,.hljs-symbol {\r\n  color: #569cd6\r\n}\r\n\r\n.hljs-link {\r\n  color: #569cd6;\r\n  text-decoration: underline\r\n}\r\n\r\n.hljs-built_in,.hljs-type {\r\n  color: #4ec9b0\r\n}\r\n\r\n.hljs-class,.hljs-number {\r\n  color: #b8d7a3\r\n}\r\n\r\n.hljs-meta-string,.hljs-string {\r\n  color: #d69d85\r\n}\r\n\r\n.hljs-regexp,.hljs-template-tag {\r\n  color: #9a5334\r\n}\r\n\r\n.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title {\r\n  color: #dcdcdc\r\n}\r\n\r\n.hljs-comment,.hljs-quote {\r\n  color: #57a64a;\r\n  font-style: italic\r\n}\r\n\r\n.hljs-doctag {\r\n  color: #608b4e\r\n}\r\n\r\n.hljs-meta,.hljs-meta-keyword,.hljs-tag {\r\n  color: #9b9b9b\r\n}\r\n\r\n.hljs-template-variable,.hljs-variable {\r\n  color: #bd63c5\r\n}\r\n\r\n.hljs-attr,.hljs-attribute,.hljs-builtin-name {\r\n  color: #9cdcfe\r\n}\r\n\r\n.hljs-section {\r\n  color: gold\r\n}\r\n\r\n.hljs-emphasis {\r\n  font-style: italic\r\n}\r\n\r\n.hljs-strong {\r\n  font-weight: 700\r\n}\r\n\r\n.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag {\r\n  color: #d7ba7d\r\n}\r\n\r\n.hljs-addition {\r\n  background-color: #144212;\r\n  display: inline-block;\r\n  width: 100%\r\n}\r\n\r\n.hljs-deletion {\r\n  background-color: #600;\r\n  display: inline-block;\r\n  width: 100%\r\n}\r\n\r\n.tc-table{width:100%;height:auto;border-collapse:collapse;table-layout:fixed;}.tc-table__wrap{border:1px solid #dbdbe2;border-radius:3px;position:relative;height:100%;width:100%;box-sizing:border-box}.tc-table__cell{border:1px solid #dbdbe2;padding:0;vertical-align:top}.tc-table__area{padding:10px;height:100%}.tc-table__inp{outline:none;flex-grow:100;min-height:1.5em;height:100%;overflow:hidden}.tc-table tbody tr:first-child td{border-top:none}.tc-table tbody tr:last-child td{border-bottom:none}.tc-table tbody tr td:last-child{border-right:none}.tc-table tbody tr td:first-child{border-left:none}",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction getObjectId(t) {\r\n  if (!Req.Page || t.objectId) return t.objectId\r\n  return Req.Page.Props && Req.Page.Props.currentBlockName ? Mars.allBlocks.find(t => t.Name === Req.Page.Props.currentBlockName)._id : Req.Page._id\r\n}\r\n\r\n\r\nasync function server() {\r\n  let defaultPath = `pages.${data.key}.content`;\r\n\r\n  if (!data.key && !data.path) defaultPath = `blocks.${data.Id}.content`\r\n\r\n  const r = !data.collection || data.collection === 'blocks' ? Mars.allBlocks.find(t => t._id === getObjectId(data)) :\r\n    await Mars.data[data.collection].findById(getObjectId(data))\r\n  return _.get(r, data.path || defaultPath) || [];\r\n}\r\n",
    "isSystem": true
  },
  {
    "_id": "5ef9cf6af9d13351a8180d17",
    "Name": "Service1",
    "Type": "service",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <Service1 />",
    "DemoJsxTranspiled": "export default executeAppBlock(Service1, null);",
    "BlockFunction": "function server() {\r\n  console.log('ReqService', Req)\r\n  return { pp: 123 }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef9cf8ff9d13351a8180d18",
    "Name": "Block1",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <Block1 />",
    "DemoJsxTranspiled": "export default executeAppBlock(Block1, null);",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  \"h1\",\n  null,\n  \"hey\"\n);",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nexport default <h1>hey</h1>",
    "BlockFunction": "function server() {\r\n  Mars.services.Service1({}, Req)\r\n  console.log('Req', Req);\r\n  return {\r\n    p: 1\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef9da44f9d13351a8180d19",
    "Name": "ReviewCard",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "getting started",
    "DataArgs": [
      {
        "DataType": "object",
        "PropName": "user",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "id",
            "RegExp": ""
          },
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "image",
            "PropName": "avatar",
            "RegExp": ""
          }
        ]
      },
      {
        "DataType": "text",
        "PropName": "text",
        "RegExp": ""
      },
      {
        "DataType": "string",
        "PropName": "rating"
      },
      {
        "DataType": "dateTime",
        "PropName": "timestamp",
        "RegExp": ""
      }
    ],
    "DemoJsx": "export default <div style=\"padding:1rem\">\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\"></link>\r\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n    integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />\r\n  <Modal />\r\n  <ReviewCard\r\n    user={{ id: 1, name: 'John Rush', avatar: 'https://scontent.fsaw1-4.fna.fbcdn.net/v/t1.0-9/66841814_2233287356724759_4413892183057235968_n.jpg?_nc_cat=111&_nc_sid=09cbfe&_nc_ohc=G1q7mS7T8F0AX-Dg99R&_nc_ht=scontent.fsaw1-4.fna&oh=433d5fa6669cb024a2dcfda5a5b7763a&oe=5F207C38' }}\r\n    text=\"My awesome review text...\" />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  { style: \"padding:1rem\" },\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n    integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\", crossorigin: \"anonymous\" }),\n  executeAppBlock(Modal, null),\n  executeAppBlock(ReviewCard, {\n    user: { id: 1, name: 'John Rush', avatar: 'https://scontent.fsaw1-4.fna.fbcdn.net/v/t1.0-9/66841814_2233287356724759_4413892183057235968_n.jpg?_nc_cat=111&_nc_sid=09cbfe&_nc_ohc=G1q7mS7T8F0AX-Dg99R&_nc_ht=scontent.fsaw1-4.fna&oh=433d5fa6669cb024a2dcfda5a5b7763a&oe=5F207C38' },\n    text: \"My awesome review text...\" })\n);",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\nconst style = Mars.settings.ReviewSettings.style;\n\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id },\n    executeAppBlock(This.html, { likeButton: await executeAppBlock(ReviewLikeButton, null) }),\n    executeAppBlock(This.style, style),\n    executeAppBlock(This.script, null)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\nconst style = Mars.settings.ReviewSettings.style;\r\n\r\nasync function Block() {\r\n  return <div id={data.Id}>\r\n    <This.html likeButton={await (<ReviewLikeButton/>)} />\r\n    <This.style {...style} />\r\n    <This.script />\r\n  </div>\r\n}\r\n\r\nexport default <Block />",
    "updatedAt": "2020-06-29T12:17:50.689Z",
    "Html": "<div class=\"media\">\r\n\t<img class=\"mr-3 rounded-circle\" onclick=\"Modal.open('user-profile/${data.user.id}', { title: '${data.user.name}' })\" src=\"${data.user.avatar}\" alt=\"Generic placeholder image\">\r\n\t<div class=\"media-body\">\r\n\t\t<h5 class=\"mt-0\">${data.user.name} <span class=\"float-right\">${data.likeButton}</span></h5>\r\n\t\t${data.text}\r\n\t</div>\r\n</div>",
    "Css": "#XID {\r\n  font-size: '${data.fontSize}';\r\n  color: '${data.textColor}'\r\n}\r\n\r\n#XID .media {\r\n  background-color: #eee;\r\n  padding: 1rem;;\r\n}\r\n\r\n#XID img {\r\n  width: 100px;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef9e552f9d13351a8180d1b",
    "Name": "MovieReviewsPage",
    "Type": "page",
    "Apps": [],
    "Folder": "getting started",
    "DataArgs": [],
    "DemoJsx": "export default <div style=\"padding:1rem\">\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\"></link>\r\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n    integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />\r\n  <MovieReviewsPage />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  { style: \"padding:1rem\" },\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n    integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\", crossorigin: \"anonymous\" }),\n  executeAppBlock(MovieReviewsPage, null)\n);",
    "updatedAt": "2020-06-29T12:59:23.957Z",
    "Page": {
      "settings": {
        "url": "/movie-reviews/:movieId",
        "title": "Movie reviews",
        "master": "",
        "icon": ""
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This, serverData } = Mars.initJsx();\n\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    s.reviews.map(t => executeAppBlock(ReviewCard, t))\n  );\n}\n\nconst head = executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n  integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\", crossorigin: \"anonymous\" });\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings, { head: head }),\n  executeAppBlock(This.script, null),\n  executeAppBlock(Modal, null),\n  executeAppBlock(Block, null)\n);",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      {s.reviews.map(t => <ReviewCard {...t} />)}\r\n    </div >\r\n  )\r\n}\r\n\r\nconst head = <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n  integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />;\r\n\r\nexport default <Page {...Req} {...thisBlock.Page.settings} head={head}>\r\n  <This.script />\r\n  <Modal />\r\n  <Block />\r\n</Page>",
    "BlockFunction": "async function server() {\r\n  /* you can fetch it from external endpoint or database */\r\n  const reviews = [{\r\n    user: { id: 1, name: 'John Doe', avatar: 'https://api.adorable.io/avatars/150/gggg@adorable.png' },\r\n    text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. '\r\n  },\r\n  {\r\n    user: { id: 2, name: 'Piter Penn', avatar: 'https://api.adorable.io/avatars/150/ssdfsf@adorable.png' },\r\n    text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. '\r\n  },\r\n  {\r\n    user: { id: 3, name: 'Elisa Soer', avatar: 'https://api.adorable.io/avatars/150/gdfdfggg@adorable.png' },\r\n    text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. '\r\n  }]\r\n\r\n  return {\r\n    reviews\r\n  }\r\n}",
    "Script": "import '/api/MarsJs'",
    "isSystem": true
  },
  {
    "_id": "5efa5057f9d13351a8180d1d",
    "Name": "ReviewSettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "getting started/subfolder",
    "DataArgs": [
      {
        "DataType": "int",
        "PropName": "numberOfStars",
        "RegExp": ""
      },
      {
        "DataType": "object",
        "PropName": "style",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "textColor",
            "RegExp": ""
          },
          {
            "DataType": "string",
            "PropName": "fontSize"
          }
        ]
      }
    ],
    "DemoJsx": "export default <ReviewSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(ReviewSettings, null);",
    "updatedAt": "2020-09-07T22:02:39.601Z",
    "Config": {
      "numberOfStars": 6,
      "style": {
        "textColor": "#333333",
        "fontSize": "14px"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5efa58f3b6b0e32424c3ea7b",
    "Name": "ReviewLikeButton",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "getting started",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "reviewId"
      }
    ],
    "DemoJsx": "export default <div style=\"padding:1rem\">\r\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n    integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\"></link>\r\n  <ReviewLikeButton />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  { style: \"padding:1rem\" },\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n    integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\", crossorigin: \"anonymous\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(ReviewLikeButton, null)\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nfunction Block() {\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id },\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.style, null),\n    executeAppBlock(This.script, null)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nfunction Block() {\r\n  return <div id={data.Id}>\r\n    <This.html />\r\n    <This.style />\r\n    <This.script />\r\n  </div>\r\n}\r\n\r\nexport default <Block />",
    "Html": "<div id=\"XID_VUE\">\r\n\t<i @click=\"like()\" class=\"fa-heart\" :class=\"{'fa':likedByMe, 'far':!likedByMe}\"></i>\r\n\t<span v-if=\"likeCount\">\r\n\t\t{{likeCount}} like{{likeCount>1?'s':''}}\r\n\t</span>\r\n</div>",
    "Script": "import '/api/MarsJs'\r\nnew MarsVue('XID_VUE', {\r\n  ...data, methods: [\r\n    { name: 'isLikedByMe', block: 'ReviewLikeButton' },\r\n    { name: 'postLike', block: 'ReviewLikeButton' }\r\n  ]\r\n}, {\r\n  data: {\r\n    likeCount: 0,\r\n    likedByMe: false\r\n  },\r\n  async init() {\r\n    XID_VUE.likedByMe = await XID_VUE.api.isLikedByMe()\r\n  },\r\n  methods: {\r\n    async like() {\r\n      await this.api.postLike(data.reviewId)\r\n      this.likeCount++;\r\n      this.likedByMe = true;\r\n    }\r\n  }\r\n})",
    "updatedAt": "2020-06-29T21:26:43.769Z",
    "BlockFunction": "function api() {\r\n  return {\r\n    isLikedByMe() {\r\n      // todo: fetch this status from db. For now we just return random true or false\r\n      return Math.random() > 0.5\r\n    },\r\n    postLike(reviewId) {\r\n      // todo: implemet code to save it to database or somewhere. You can fetch current user by Req.user\r\n      return true;\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5efa6a28b6b0e32424c3ea7d",
    "Name": "UserProfilePage",
    "Type": "page",
    "Apps": [],
    "Folder": "getting started",
    "DataArgs": [],
    "DemoJsx": "export default <div style=\"padding:1rem\">\r\n  <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\"></link>\r\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\r\n    integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />\r\n  <UserProfilePage userId=\"1\" />\r\n  <UserProfilePage userId=\"2\" />\r\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  { style: \"padding:1rem\" },\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n  executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\",\n    integrity: \"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\", crossorigin: \"anonymous\" }),\n  executeAppBlock(UserProfilePage, { userId: \"1\" }),\n  executeAppBlock(UserProfilePage, { userId: \"2\" })\n);",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This, serverData } = Mars.initJsx();\n\nasync function Block() {\n  const user = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(This.html, { user: user })\n  );\n}\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings),\n  executeAppBlock(Block, null)\n);",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  const user = await serverData;\r\n  return (\r\n    <div>\r\n      <This.html user={user}/>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default <Page {...Req} {...thisBlock.Page.settings}>\r\n  <Block />\r\n</Page>",
    "BlockFunction": "async function server() {\r\n  return [\r\n    {\r\n      id: 1,\r\n      name: 'John Rush',\r\n      avatar: 'https://api.adorable.io/avatars/150/gggg@adorable.png'\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Elon Musk',\r\n      avatar: 'https://api.adorable.io/avatars/150/sdfsdf@adorable.png'\r\n    }\r\n  ].find(t => t.id === parseInt(data.userId))\r\n}",
    "Html": "<div class=\"text-center\">\r\n\t<img class=\"rounded-circle\" src=\"${data.user.avatar}\" alt=\"Generic placeholder image\" width=\"140\" height=\"140\">\r\n\t<h2>${data.user.name}</h2>\r\n\t<p><a class=\"btn btn-secondary\" href=\"#\" role=\"button\">FOLLOW</a></p>\r\n</div>",
    "Page": {
      "settings": {
        "url": "/user-profile/:userId",
        "title": "User profile",
        "master": "",
        "icon": ""
      }
    },
    "isSystem": true
  },
  {
    "_id": "5efbb3ed043f925874d96e8e",
    "Name": "BlogPostFactory",
    "Type": "page",
    "Apps": [],
    "Folder": "page factories",
    "DataArgs": [],
    "DemoJsx": "export default <BlogPostFactory blogPostSlug=\"blog-post-1\" />",
    "DemoJsxTranspiled": "export default executeAppBlock(BlogPostFactory, { blogPostSlug: \"blog-post-1\" });",
    "Page": {
      "settings": {
        "url": "/blog/:blogPostSlug",
        "title": "Blog Post",
        "master": "MasterBasePage",
        "group": "page factory",
        "icon": ""
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nasync function Block() {\n  const blogPost = await Mars.data.blog_posts.findOne({ slug: data.blogPostSlug });\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"container\" },\n      executeAppBlock(\n        \"h1\",\n        null,\n        blogPost.title\n      ),\n      executeAppBlock(Wysiwyg, { collection: \"blog_posts\", objectId: blogPost._id, path: \"content\" }),\n      executeAppBlock(PageAdminToolbar, { collection: \"blog_posts\", objectId: blogPost._id, modelName: \"BlogPostModel\" })\n    )\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "async function Block() {\r\n  const blogPost = await Mars.data.blog_posts.findOne({ slug: data.blogPostSlug })\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <div class=\"container\">\r\n      <h1>{blogPost.title}</h1>\r\n      <Wysiwyg collection=\"blog_posts\" objectId={blogPost._id} path=\"content\" />\r\n      <PageAdminToolbar collection=\"blog_posts\" objectId={blogPost._id} modelName=\"BlogPostModel\"/>\r\n    </div>\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "updatedAt": "2020-07-02T13:25:53.721Z",
    "blocks": {
      "RenderEditorJsObj": {
        "data": {
          "blocks": [
            {
              "type": "paragraph",
              "data": {
                "text": "Blog post 1 TITLE"
              }
            }
          ]
        }
      }
    },
    "isSystem": true
  },
  {
    "_id": "5efbb49e043f925874d96e8f",
    "Name": "BlogPostModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "title"
      },
      {
        "DataType": "string",
        "PropName": "slug",
        "NullAllowed": true,
        "Description": "If empty is auto generated from title"
      },
      {
        "DataType": "string",
        "PropName": "tags",
        "SuggestOptions": true,
        "Options": [
          {
            "Key": "tag1",
            "Value": "tag1"
          },
          {
            "Key": "tag2",
            "Value": "tag2"
          },
          {
            "Key": "tag3",
            "Value": "tag3"
          }
        ],
        "NullAllowed": true,
        "AllowMultipleSelect": true
      },
      {
        "DataType": "image",
        "PropName": "image",
        "RegExp": "",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "folder",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "export default <BlockPostModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(BlockPostModel, null);",
    "updatedAt": "2020-07-05T15:20:06.272Z",
    "BlockFunction": "function getUrl(doc) {\r\n  return `/blog/${doc.slug}`\r\n}\r\n\r\nfunction server() {\r\n  return {\r\n    triggers: {\r\n      async beforeUpdate(oldDoc, newDoc) {\r\n\r\n      },\r\n      async afterUpdate(oldDoc, newDoc) {\r\n\r\n      },\r\n      async beforeInsert(doc) {\r\n        if (!doc.slug) doc.slug = doc.slug = Mars.services.UrlHelper().slugify(doc.title)\r\n      },\r\n      async afterInsert(doc) {\r\n\r\n      },\r\n      async beforeDelete(doc) {\r\n\r\n      },\r\n      async afterDelete(doc) {\r\n\r\n      },\r\n      redirectAfterSave(doc) {\r\n        return getUrl(doc)\r\n      }\r\n    },\r\n    contextMenu(doc) {\r\n      return [\r\n        {\r\n          title: 'View blog post', onClick: `location.href='${getUrl(doc)}'`\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5efe47654ea8ab02f88b245d",
    "Name": "DocumentationPageFabric",
    "Type": "page",
    "Apps": [],
    "Folder": "documentation",
    "DataArgs": [],
    "DemoJsx": "export default <DocumentationPageFabric />",
    "DemoJsxTranspiled": "export default executeAppBlock(DocumentationPageFabric, null);",
    "Page": {
      "settings": {
        "url": "/documentation/:slug",
        "title": "Documentation",
        "master": "MasterBasePage",
        "icon": "",
        "cache": {
          "ttl": 350
        }
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst pageInstance = thisBlock.pages[data.slug];\n//if (!pageInstance) throw new Error('Page doesnt exist')\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings, { title: pageInstance && pageInstance.settings ? pageInstance.settings.title : 'new page' }),\n  executeAppBlock(Wysiwyg, { Id: \"Wysiwyg1\", objectId: thisBlock._id, key: data.slug }),\n  executeAppBlock(\n    \"a\",\n    { href: `/documentation/${data.slug}?edit=true`, target: \"_blank\" },\n    \"edit this article\"\n  ),\n  executeAppBlock(PageAdminToolbar, { objectId: thisBlock._id, key: data.slug }),\n  executeAppBlock(PageAdminActions, { actions: [{\n      title: 'edit wisywig block',\n      blockId: 'Wysiwyg1',\n      path: `pages.${data.slug}.content`,\n      objectId: thisBlock._id\n    }] })\n);",
    "Jsx": "const pageInstance = thisBlock.pages[data.slug];\r\n//if (!pageInstance) throw new Error('Page doesnt exist')\r\nexport default <Page {...Req} {...thisBlock.Page.settings} title={pageInstance && pageInstance.settings ? pageInstance.settings.title : 'new page'}>\r\n  \r\n  <Wysiwyg Id=\"Wysiwyg1\" objectId={thisBlock._id} key={data.slug} />\r\n  <a href={`/documentation/${data.slug}?edit=true`} target=\"_blank\">edit this article</a>\r\n  <PageAdminToolbar objectId={thisBlock._id} key={data.slug} />\r\n  <PageAdminActions actions={[{\r\n    title: 'edit wisywig block',\r\n    blockId: 'Wysiwyg1',\r\n    path: `pages.${data.slug}.content`,\r\n    objectId: thisBlock._id\r\n  }]} />\r\n</Page>",
    "pages": {
      "how-to-add-client-side-logic": {
        "settings": {
          "title": "4. Client side logic in blocks and api methods",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Client side logic and api methods in blocks",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In this lesson we are going to&nbsp;"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "Add like button to review card",
                "Create api method which will receive like count and post a new like",
                "Save data to cache for mocking purposes&nbsp;"
              ]
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1. Add like button to review card",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593465077385.png",
                "name": "img-1593465077385.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Define block props",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593466001413.png",
                "name": "img-1593466001413.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "JSX",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593466020434.png",
                "name": "img-1593466020434.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "HTML",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593466045904.png",
                "name": "img-1593466045904.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "ClientJs",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "import '/api/MarsJs'\nnew MarsVue('XID_VUE', {\n  ...data, methods: [\n    { name: 'isLikedByMe', block: 'ReviewLikeButton' },\n    { name: 'postLike', block: 'ReviewLikeButton' }\n  ]\n}, {\n  data: {\n    likeCount: 0,\n    likedByMe: false\n  },\n  async mounted() {\n    this.likedByMe = await this.api.isLikedByMe()\n  },\n  methods: {\n    async like() {\n      await this.api.postLike()\n      this.likeCount++;\n      this.likedByMe = true;\n    }\n  }\n})"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "the methods here represent api methods from server file",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593466104830.png",
                "name": "img-1593466104830.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Here we import methods into clientjs code and implement it",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593466974557.png",
                "name": "img-1593466974557.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "in <code class=\"inline-code\">init()</code> we fetch the status of the like if the current user has liked it before. We do it asynchronously not to slow down first page render if there are many reviews on it. But you could calculate it on server side as well instead of clientjs",
                "in <code class=\"inline-code\">like() </code>we post the like action to server"
              ]
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593467265136.png",
                "name": "img-1593467265136.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Now lets integrate this like button block into review block",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593468337000.png",
                "name": "img-1593468337000.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593468357601.png",
                "name": "img-1593468357601.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "how-to-create-page": {
        "settings": {
          "title": "2. How to create page",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Nesting mars blocks in a page",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Let's say we have made review block earlier and want to show actual movie reviews as a list on a page."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Here is single <code class=\"inline-code\">review </code>block from previous guide&nbsp;"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593435142323.png",
                "name": "img-1593435142323.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1. Make a new page block called MovieReviewsPage",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593435466942.png",
                "name": "img-1593435466942.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "2. Edit page settings",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593435506116.png",
                "name": "img-1593435506116.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593435560640.png",
                "name": "img-1593435560640.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "3. Define basic jsx structure",
              "level": 3
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { This } = Mars.initJsx();\n\nasync function Block() {\n  return (\n    <div>\n      {/* movie reivews will be rendered here */}\n    </div >\n  )\n}\n\nexport default <Page {...Req} {...thisBlock.Page.settings}>\n  <Block />\n</Page>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "4. Fetch movie reviews from server",
              "level": 3
            }
          },
          {
            "type": "code",
            "data": {
              "code": "async function server() {\n  /* you can fetch it from external endpoint or database */\n  const reviews = [{ user: { id: 1, name: 'John Doe', avatar: 'https://api.adorable.io/avatars/150/gggg@adorable.png' } },\n  { user: { id: 2, name: 'Piter Penn', avatar: 'https://api.adorable.io/avatars/150/ssdfsf@adorable.png' } },\n  { user: { id: 3, name: 'Elisa Soer', avatar: 'https://api.adorable.io/avatars/150/gdfdfggg@adorable.png' } }]\n\n  return {\n    reviews\n  }\n}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "5. Render review in JSX",
              "level": 3
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { This, serverData } = Mars.initJsx();\n\nasync function Block() {\n  const s = await serverData;\n  return (\n    <div>\n      {s.reviews.map(t => <ReviewCard {...t} />)}\n    </div >\n  )\n}\n\nconst head = <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\n  integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />;\n\nexport default <Page {...Req} {...thisBlock.Page.settings} head={head}>\n  <Block />\n</Page>"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593437813654.png",
                "name": "img-1593437813654.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "how-to-create-settings": {
        "settings": {
          "title": "3. How to create settings",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Create settings to be used to configure blocks and pages",
              "level": 1
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1. Create settings block",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593462809211.png",
                "name": "img-1593462809211.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "2. Define settings model",
              "level": 3
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In our case we want to store number of review stars and some theme styles here"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "On the right side of the ide you can find these buttons. Press edit model"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593462903191.png",
                "name": "img-1593462903191.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "We define simple config which can be extended later"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463011242.png",
                "name": "img-1593463011242.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Now press edit config",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463033845.png",
                "name": "img-1593463033845.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Mars will render a form based on the model which you can edit and save&nbsp;",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463092121.png",
                "name": "img-1593463092121.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "How to access these settings",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// anywhere in server code or jsx you can access it\nconsole.log(Mars.settings.ReviewSettings)\n\n// this is gonna print {numberOfStars: 5, style: {textColor: '#333333', fontSize: '14px'}}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Lets use these settings in our review block",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "First we need to pass it to css styles&nbsp;"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463686399.png",
                "name": "img-1593463686399.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Here we interpolate styles",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463599595.png",
                "name": "img-1593463599595.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Here is the result&nbsp;",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593463770338.png",
                "name": "img-1593463770338.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "how-to-create-ui-block": {
        "settings": {
          "title": "1. How to create ui block",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Create new UI block",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Lets say we want to create UI block which review card."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1. Create UI block in mars ide&nbsp;",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593432690114.png",
                "name": "img-1593432690114.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "2. Navigate to .../mars/ide/ReviewCard",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433642706.png",
                "name": "img-1593433642706.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "3. Define basic block structure in block's JSX",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433634600.png",
                "name": "img-1593433634600.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { This, serverData } = Mars.initJsx();\n\nfunction Block() {\n  return <div id={data.Id}> \n    <This.html />\n    <This.style />\n    <This.script />\n  </div>\n}\n\nexport default <Block />"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "4. Define block props",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593432895617.png",
                "name": "img-1593432895617.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "list",
            "data": {
              "style": "unordered",
              "items": [
                "press MORE",
                "press EDIT PROPS",
                "then define the props and types"
              ]
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433075006.png",
                "name": "img-1593433075006.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "We defined user as an object wiht id, name and avatar field and text, rating and timestamp as root properties.&nbsp;"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "5. Input html layout of the review card in block's HTML",
              "level": 3
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The <code class=\"inline-code\">data </code>object is automatically passed to <code class=\"inline-code\">html, server, css, client and jsx</code>. However you can pass extra field there by writing something like this&nbsp;<code class=\"inline-code\">&lt;This.script prop1=\"132\" /&gt;</code> which will be then available in client js as <code class=\"inline-code\">data.prop1</code>."
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433621697.png",
                "name": "img-1593433621697.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "code",
            "data": {
              "code": "<div class=\"media\">\n\t<img class=\"mr-3\" src=\"${data.user.avatar}\" alt=\"Generic placeholder image\">\n\t<div class=\"media-body\">\n\t\t<h5 class=\"mt-0\">${data.user.name}</h5>\n\t\t${data.text}\n\t</div>\n</div>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "6. Now lets make a demo page for our block",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433601266.png",
                "name": "img-1593433601266.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "We are using bootstrap, so we need to define it here in on demo page"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593433865482.png",
                "name": "img-1593433865482.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "code",
            "data": {
              "code": "export default <div style=\"padding:1rem\">\n  <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\n    integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\" />\n  <ReviewCard\n    user={{ id: 1, name: 'John Rush', avatar: 'https://scontent.fsaw1-4.fna.fbcdn.net/v/t1.0-9/66841814_2233287356724759_4413892183057235968_n.jpg?_nc_cat=111&_nc_sid=09cbfe&_nc_ohc=G1q7mS7T8F0AX-Dg99R&_nc_ht=scontent.fsaw1-4.fna&oh=433d5fa6669cb024a2dcfda5a5b7763a&oe=5F207C38' }}\n    text=\"My awesome review text...\" />\n</div>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "7. Lets add some css. If you dont want css to interfere with the rest of the styles then you XID prefix.",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593434350610.png",
                "name": "img-1593434350610.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "code",
            "data": {
              "code": "#XID .media {\n  background-color: #eee;\n  padding: 1rem;;\n}\n\n#XID img {\n  width: 100px;\n}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "8. Here is the demo result",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593434380869.png",
                "name": "img-1593434380869.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "modals-and-page-url-params": {
        "settings": {
          "title": "5. Modals and page url dynamic params",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Modals and page url dynamic params",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In this lesson we will create a modal window to show user profile when someone clicks on avatar"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "1. First we need to make page for it"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593469547635.png",
                "name": "img-1593469547635.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "We will fetch user from server and pass it to html for rendering",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593469657342.png",
                "name": "img-1593469657342.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593469734173.png",
                "name": "img-1593469734173.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Dynamic property in url ",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Will be accessible in code via <code class=\"inline-code\">data.userId</code>"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593469950892.png",
                "name": "img-1593469950892.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "lets mock 2 users and find one of them based on the url param",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470067610.png",
                "name": "img-1593470067610.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "In demo page we can either pass it as a prop to page block&nbsp;",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470113239.png",
                "name": "img-1593470113239.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Or we can change the url to this"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470136715.png",
                "name": "img-1593470136715.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "We can even show multiple demo cases for this page or a block",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470241835.png",
                "name": "img-1593470241835.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Now the page is ready, lets add modal logic",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Add onclick handler to image to open the modal by calling the script"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470828060.png",
                "name": "img-1593470828060.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "First we need to make sure we added Modal block to our demo page and also to the main page. <b>It should only be once on page</b>."
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470475028.png",
                "name": "img-1593470475028.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470633987.png",
                "name": "img-1593470633987.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470665553.png",
                "name": "img-1593470665553.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Now lets test it",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470701983.png",
                "name": "img-1593470701983.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470712965.png",
                "name": "img-1593470712965.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470752047.png",
                "name": "img-1593470752047.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1593470762728.png",
                "name": "img-1593470762728.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Modal usage",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The Modal block documentation is <a href=\"/documentation/modal\">here</a>."
            }
          }
        ]
      },
      "use-master-pages": {
        "settings": {
          "title": "6. Master pages. Nesting pages.",
          "folder": "get started"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Master pages",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You need master pages to place common page fragments such as header, footer, menu, scripts, styles and etc."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To create master page simply create a page block"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594124521880.png",
                "name": "img-1594124521880.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Master page jsx",
              "level": 3
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { This } = Mars.initJsx();\n\nconst head = (\n  <Fragment>\n    <script src=\"/api/MarsJs\" type=\"module\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap\" rel=\"stylesheet\" />\n    <link href=\"https://unpkg.com/bootstrap/dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <This.style/>\n    {data.head}\n  </Fragment>\n);\n\nexport default (\n  <Page head={head}>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-12 p-0\">\n          <div id=\"PageContent\">{This.children()}</div>\n        </div>\n      </div>\n    </div>\n    <Modal />\n    <CmsAdminBtn />\n    {data.scripts}\n  </Page>\n);"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "You must have&nbsp;<code class=\"inline-code\">&lt;div id=\"PageContent\"&gt;</code> in order to use ajax navigation (with no page reload). The new content will be placed inside <code class=\"inline-code\">div.#PageContent</code>",
                "<b>You must have</b><code class=\"inline-code\"><b>&nbsp;</b>&lt;script src=\"/api/MarsJs\" type=\"module\"&gt;&lt;/script&gt;&nbsp;</code>",
                "<code class=\"inline-code\">&lt;CmsAdminBtn /&gt;</code> will render admin button on the bottom-right corner for users with appropriate roles",
                "<code class=\"inline-code\">&lt;Modal /&gt;</code> must on the page if you are using <code class=\"inline-code\">Modal.open(...)</code>",
                "The child page will be rendered inside&nbsp;<code class=\"inline-code\">&lt;div id=\"PageContent\"&gt;{This.children()}&lt;/div&gt;</code>"
              ]
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Lets test our master page by making a demo page. Insert this into demo file of the master"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "async function Block() {\n  return (\n    <div>\n      <div class=\"card\" style=\"width: 18rem;\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">Card title</h5>\n          <h6 class=\"card-subtitle mb-2 text-muted\">Card subtitle</h6>\n          <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\n          <a href=\"#\" class=\"card-link\">Card link</a>\n          <a href=\"#\" class=\"card-link\">Another link</a>\n        </div>\n      </div>\n    </div >\n  )\n}\n\nexport default <Page {...Req} master=\"MyMasterPage\">\n  <Block />\n</Page>"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594125705398.png",
                "name": "img-1594125705398.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Lets create a regular page which uses master page",
              "level": 3
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "First you need to create a page block and then press more-&gt;edit page settings"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594125805679.png",
                "name": "img-1594125805679.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Here is how the page looks like.&nbsp;"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Please note that you need to pass page settings by<code class=\"inline-code\"> {...thisBlock.Page.settings}</code>"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594125967137.png",
                "name": "img-1594125967137.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Performance considerations",
              "level": 3
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "For performance reasons try to have less jsx code if possible. You could rewrite this page by moving html code into html file of the page."
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594126045530.png",
                "name": "img-1594126045530.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Then render html in jsx&nbsp;"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594126122729.png",
                "name": "img-1594126122729.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Both master page and regular page may have",
              "level": 3
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "<code class=\"inline-code\">server </code>code (for example you can check user permissions there and throw an Error&nbsp;",
                "<code class=\"inline-code\">html</code>",
                "<code class=\"inline-code\">css </code>(it will be rendered as inline css on the page",
                "<code class=\"inline-code\">script </code>(will be rendered as module script on the page)",
                "<code class=\"inline-code\">tests </code>(u can create jest tests)",
                "<code class=\"inline-code\">demo </code>(you can create demo page where <code class=\"inline-code\">page url parameters</code> are passed as <code class=\"inline-code\">block data</code>. For example if you have a page <code class=\"inline-code\">/movie/:movieId</code> you can create a demo code <code class=\"inline-code\">&lt;MoviePage movieId=\"123\"&gt;</code> which would render same demo page as if you would open <code class=\"inline-code\">/movie/123</code> in the browser"
              ]
            }
          }
        ]
      },
      "model-triggers": {
        "settings": {
          "title": "Model triggers on before/after update/delete operations",
          "folder": "triggers"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Model triggers",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Model triggers get fired when you add/update/delete collection documents using auto-forms and tree."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Basic structure of triggers code",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "function server() {\n  return {\n    triggers: {\n      async beforeUpdate(oldDoc, newDoc) {\n\n      },\n      async afterUpdate(oldDoc, newDoc) {\n\n      },\n      async beforeInsert(doc) {\n        if (!doc.slug) doc.slug = doc.slug = Mars.services.UrlHelper().slugify(doc.title)\n      },\n      async afterInsert(doc) {\n\n      },\n      async beforeDelete(doc) {\n         // an example on how to break the action\n         throw new Error('dont delete this document')\n      },\n      async afterDelete(doc) {\n\n      },\n      redirectAfterSave(doc) {\n        // if you want to redirect to newly created blog page for example\n        return `/blog/${doc.slug}`\n      }\n    },\n    // transforms each items in tree. view: preview|details|both(default if null)\n    async transformEach(doc, view) {\n      const u = await Mars.data.users.findOne({ name: 'John Rush' })\n      doc.name = doc.name + u.name\n    },\n    contextMenu(doc) {\n      return [\n        {\n          title: 'View blog post', onClick: `location.href='${getUrl(doc)}'`\n        }\n      ]\n    }\n  }\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You need to define triggers in model's server code."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Triggers can be both async or regular functions."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If you want to pause the the action you need to throw an exception<code class=\"inline-code\"> throw new Error('here is some error text')</code>"
            }
          }
        ]
      },
      "data-collections-schema": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Data modeling. Db schema. Collections. Example on blog posts.",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In case you want to create something similar to database table. Lets say blog posts."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "1. You need to define the collection in&nbsp;<code class=\"inline-code\">/mars/ide/MongoConfig&nbsp;</code>"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594126774165.png",
                "name": "img-1594126774165.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "table",
            "data": {
              "content": [
                [
                  "name",
                  "database collection name"
                ],
                [
                  "title field",
                  "object property which is used as a title. For example in this case it is l"
                ],
                [
                  "default model block",
                  "a model which describes the blog post. in our case it is model with title, tags, image..."
                ],
                [
                  "includeToCmsToolbar",
                  "tells mars if we should render \"create blog post\" button in cms admin toolbar"
                ]
              ]
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Here is BlogPostModel",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594126969707.png",
                "name": "img-1594126969707.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Here is blog page",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127022150.png",
                "name": "img-1594127022150.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Now we can manage blog posts from ide admin",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127084405.png",
                "name": "img-1594127084405.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127129304.png",
                "name": "img-1594127129304.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can right click on the blog post and navigate to it&nbsp;"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127150651.png",
                "name": "img-1594127150651.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127158667.png",
                "name": "img-1594127158667.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In cms you can press 3 dots"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127193144.png",
                "name": "img-1594127193144.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "then you get cms toolbar where you can press \"create new blog post\" button"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127218339.png",
                "name": "img-1594127218339.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To edit blog post you just double click edit button on bottom right corner and then double click any element"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127288929.png",
                "name": "img-1594127288929.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ],
        "settings": {
          "title": "Data.Collections.Schema. Example on blog posts",
          "folder": "advanced guides"
        }
      },
      "model-render-and-preview": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Advanced model handling with images as example",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127743348.png",
                "name": "img-1594127743348.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "On the screenshot above we can see"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "The advanced tree rendering with image previews. Practically you can render any html for each image item",
                "Modal window with image preview is also define in image modelI"
              ]
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In Screenshot below you can see 2 pieces of code. One is rendered when data.preview is true (render in the tree) and another one is rendered when user clicks on the image and we show modal"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127806938.png",
                "name": "img-1594127806938.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "You can also add additional context menu options to the image",
              "level": 3
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127906525.png",
                "name": "img-1594127906525.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594127923815.png",
                "name": "img-1594127923815.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ],
        "settings": {
          "title": "Advanced model handling with images as example",
          "folder": "advanced guides"
        }
      },
      "cookies-headers-request-response": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Manipulate cookies, headers, request and response",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In server, jsx, tests and demo code you have a Req object which contains the following"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.user</b></code>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{\n  \"_id\": \"5eea74b5f1e1882cec451a85\",\n  \"userId\": 15,\n  \"name\": \"John Rush\",\n  \"email\": \"john@theworldx.com\",\n  \"roles\": [\"admin\", \"developer\"],\n  \"registeredAt\": \"2020-06-17T19:53:25.064Z\"\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.headers</b></code>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{\n  \"host\": \"localhost:8888\",\n  \"connection\": \"keep-alive\",\n  \"cache-control\": \"max-age=0\",\n  \"upgrade-insecure-requests\": \"1\",\n  \"user-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36\",\n  \"accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\",\n  \"sec-fetch-site\": \"same-origin\",\n  \"sec-fetch-mode\": \"navigate\",\n  \"sec-fetch-user\": \"?1\",\n  \"sec-fetch-dest\": \"iframe\",\n  \"referer\": \"http://localhost:8888/mars/demo/HandleRequest\",\n  \"accept-encoding\": \"gzip, deflate, br\",\n  \"accept-language\": \"en-US,en;q=0.9,nb;q=0.8,ru;q=0.7,tr;q=0.6\",\n  \"cookie\": \"mars_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7Il9pZCI6IjVlZWE3NGI1ZjFlMTg4MmNlYzQ1MWE4NSIsInVzZXJJZCI6MTUsIm5hbWUiOiJKb2huIFJ1c2giLCJlbWFpbCI6ImpvaG5AdGhld29ybGR4LmNvbSIsInJlZ2lzdGVyZWRBdCI6IjIwMjAtMDYtMTdUMTk6NTM6MjUuMDY0WiJ9LCJpYXQiOjE1OTM2OTIxNzIsImV4cCI6MTU5NDI5Njk3Mn0.iciQfBm2nEmdAKvT18BJlKD2iDZGdpGxBFlVF09_-PU; Name=John%20Rush%20%F0%9F%8F%85%20; Token=I%2BurutSFVooSe1fhV89OIhwaC9Bmtlvwz1O4MmdPXUjtbiVLhf0dulvw9OqTZEs64a0qsSvS7GfiQM5gv6Gd8YNAjsgy57JWIOo3H8Zz50jxJRtvSOU7T8N7nJJ6kXrsqAK%2BDOk87Av2G4Bi4X%2BT5jTeTyaD4FooZtAfaOl%2FgYc%3D; UserId=20; mars_token_test=fsdfds; mars_token_test2=tersd\",\n  \"if-none-match\": \"W/\\\"88-ffIMyqwWyBbeWqvu6VHsDhyKCwI\\\"\"\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.queryStringParameters</b></code>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{ \"p1\":\"123\" }"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.cookies</b></code> - cookies are automatically parsed into json object"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{\n  \"mars_token\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjp7Il9pZCI6IjVlZWE3NGI1ZjFlMTg4MmNlYzQ1MWE4NSIsInVzZXJJZCI6MTUsIm5hbWUiOiJKb2huIFJ1c2giLCJlbWFpbCI6ImpvaG5AdGhld29ybGR4LmNvbSIsInJlZ2lzdGVyZWRBdCI6IjIwMjAtMDYtMTdUMTk6NTM6MjUuMDY0WiJ9LCJpYXQiOjE1OTM2OTIxNzIsImV4cCI6MTU5NDI5Njk3Mn0.iciQfBm2nEmdAKvT18BJlKD2iDZGdpGxBFlVF09_-PU\",\n  \"Name\": \"John Rush üèÖ \",\n  \"Token\": \"I+urutSFVooSe1fhV89OIhwaC9Bmtlvwz1O4MmdPXUjtbiVLhf0dulvw9OqTZEs64a0qsSvS7GfiQM5gv6Gd8YNAjsgy57JWIOo3H8Zz50jxJRtvSOU7T8N7nJJ6kXrsqAK+DOk87Av2G4Bi4X+T5jTeTyaD4FooZtAfaOl/gYc=\",\n  \"UserId\": \"20\",\n  \"mars_token_test\": \"fsdfds\",\n  \"mars_token_test2\": \"tersd\",\n  \"SessionId\": \"12f3a296-1dbb-4d08-8821-40ae7a2700d7\"\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b><code class=\"inline-code\"><b>Req.body</b></code></b> - raw body"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.httpMethod</b></code>&nbsp; - GET | POST<code class=\"inline-code\"><br></code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.file</b></code>&nbsp;- binary files and images."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Here us an example on how to upload an image to aws s3"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const s3 = new AWS.S3();\nconst fileName = Req.files.image.name === 'image.png' ? `img-${(new Date()).getTime()}.png` : Req.files.image.name;\nconst filePath = `assets/img/${fileName}`;\n\nconst o = await s3.putObject({\n  Bucket: 'marscode',\n  Key: filePath,\n  ContentType: Req.files.image.mimetype,\n  Body: Req.files.image.data,\n  ACL: 'public-read'\n}).promise();"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.path</b></code> - full path including query string. For example&nbsp;<code class=\"inline-code\">/mars/demo/SomePage?p1=123</code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\"><b>Req.session</b></code> - read more about it <a href=\"/documentation/about-sessions\">here</a>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Manipulate response",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "User <code class=\"inline-code\">Req.response</code> to manipulate response data."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Set cookies</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// set cookies \nReq.response.cookie('test_cookie0', 'cookie0_value');\n\n// You can call it multiple times to set more cookies\nReq.response.cookie('test_cookie1', 'cookie1_value');\nReq.response.cookie('test_cookie2', 'cookie2_value');\n\n// You can set masAge - Number of seconds until the cookie expires. Default is 365000 seconds\nReq.response.cookie('test_coockie3', 'cookie3_value', 60); // expires after one minute"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Set other headers</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// set Cache-Control to tell browser and cdn that this url needs to be cached for 5 minutes\nReq.response.header('Cache-Control', 'max-age=300');"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Set content type</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// set Content-Type to return json\nReq.response.contentType('application/json; charset=utf-8');"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Set status code</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// Set 404 status code\nReq.response.statusCode = 404;"
            }
          }
        ],
        "settings": {
          "title": "Cookies, headers, request and response",
          "folder": "advanced guides"
        }
      },
      "about-sessions": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Sessions",
              "level": 1
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1. Configuration",
              "level": 4
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1.1. Enable sessions",
              "level": 6
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To enable sessions you have to set&nbsp;<code class=\"inline-code\">enableSessions</code> in <a href=\"https://ide.marscloud.dev/mars/ide/AppSettings\">AppSettings</a>:"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// AppSettings block\n{\n  \"name\": \"Your project name\",\n  \"enableSessions\": true\n}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "1.2. Sessions configuration",
              "level": 6
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Make sure that your project has <a href=\"https://ide.marscloud.dev/mars/ide/SessionConfig\">SessionConfig</a> block with following content:"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{\n  \"disableForGuests\": true,          // disable sessions for guest users\n  \"maxAge\": 86400,                   // session cookie maxAge (in seconds)\n  \"storeType\": \"dynamodb\",           // session store type. Available 'memory' and 'dynamodb'\n  \"sessionCookieName\": \"sessionId\",\n  \"sessionVersionCookieName\": \"sessionVersion\",\n  \"cache\": {                         // session cache config. It's a memory cache not to load session from session store between requests\n    \"ttl\": 15,                       // TTL (in seconds) to keep session in memory cache\n    \"checkInterval\": 5               // interval (in seconds) to check and remove sessions with expired TTL. The value must be less than TTL\n  },\n  \"memory\": {                        // in-memory session store config\n    \"checkInterval\": 5               // interval (in seconds) to check and remove expired sessions. The value must be less than maxAge\n  },\n  \"dynamodb\": {                      // AWS DynamoDB session store config. Don't forget to create an index by Primary Key and TTL column\n    \"tableName\": \"mars-sessions\",    // sessions table name\n    \"partitionKey\": \"pk\",            // table Partition Key name (will be used filled with the static string value \"session\")\n    \"sortKey\": \"sessionId\",          // table Sort Key name (will be used for sessionId values)\n    \"ttlColumn\": \"ttl\",              // table TTL column name (to store session expiration date)\n    \"versionColumn\": \"version\",      // table version column name (to store session version number)\n    \"dataColumn\": \"data\".            // table session data column name (to store session data)\n  }\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You have to choose which type of session store you would like to use in your project. The <code class=\"inline-code\">memory</code> type is the most fast store but it's useless if you have multiple application instances because each instance has its own memory (RAM). The <code class=\"inline-code\">dynamodb</code> type is slower but allows to have a centralized session store and useful for in case if you have multiple application instances. To use the <code class=\"inline-code\">dynamodb</code>&nbsp;store you have to create and configure DynamoDB sessions table manually (don't forget to create an index by Primary Key and TTL column)."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The <code class=\"inline-code\">cache</code> config is not applicable and will not be used for the <code class=\"inline-code\">memory</code> store type because it's in-memory solution itself. It's useful to keep sessions in RAM between requests for a short time (depends on your traffic and RAM resources) and to reduce requests to remote session store which is a time consuming operation. Cache is versioned and based on&nbsp;<code class=\"inline-code\">sessionVersionCookieName</code>&nbsp;cookie. If application instance has different (from request session version cookie) cached session version then session will be reloaded from a centralized store.&nbsp;"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "2. Usage",
              "level": 4
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// to set session value\nReq.session.shoppingCart = {\n  items: [...],\n  total: 123.45,\n};\n\n// to get session value\nconst cart = Req.session.shoppingCart;\n\n// to remove session value\ndelete Req.session.shoppingCart;\n\n// to destroy session (generates a new sessionId and clears previous session data)\nReq.session.destroy();\n\n// wrong (!!!). You cannot setup/override Req.session property directly.\n// this code will not affect Req.session value and generate an exception.\nReq.session = { ...something };"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The <code class=\"inline-code\">Req</code> object is available in server, jsx, tests and demo code."
            }
          }
        ],
        "settings": {
          "title": "Sessions",
          "folder": "advanced guides"
        }
      },
      "navigation": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Navigation",
              "level": 1
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Js navigation</b>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If you want single page app style navigation instead of reloading entire page they user"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\">goTo('/pageurl')</code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Hyperlink hrefs</b>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You need to add data-target-partial to a hyperlink"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\">&lt;a&nbsp;data-target-partial href=\"/pageurl\" &gt;Click me&lt;/a&gt;</code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Make sure you have marsjs on the page. The best way is to put it to your master page head&nbsp;<code class=\"inline-code\">&lt;script src=\"/api/MarsJs\" type=\"module\"&gt;&lt;/script&gt;</code>"
            }
          }
        ],
        "settings": {
          "title": "7. Navigation",
          "folder": "get started"
        }
      },
      "extrenal-libraries": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "There are various third party libraries which are included to mars",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can access it this way"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const {_, moment, axios, uuid, require } = Mars.libs;\n\n// the use it below\nasync function server(){\n  return await axios('http://google.com')\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can also require these packages"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "    \"ansi-to-html\": \"^0.6.14\",\n    \"azure-storage\": \"^2.10.3\",\n    \"babel-core\": \"^6.26.3\",\n    \"chalk\": \"^4.0.0\",\n    \"crypto-js\": \"^4.0.0\",\n    \"diff2html\": \"^3.1.7\",\n    \"expect\": \"^26.0.1\",\n    \"fast-check\": \"^1.24.2\",\n    \"immutable\": \"^4.0.0-rc.12\",\n    \"jsonwebtoken\": \"^8.5.1\",\n    \"lambda-multipart\": \"^1.0.2\",\n    \"mongodb\": \"^3.5.7\",\n    \"route-pattern\": \"0.0.6\","
            }
          }
        ],
        "settings": {
          "title": "External npm packages and libraries",
          "folder": "advanced guides"
        }
      },
      "block-context": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "What's available in block code",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// services\nMars.services.SomeService({prop1: 123})\n\n// blocks\nMars.blocks.SomeBlock(Mars, {prop1: 123}, Req)\n\n// in jsx code\nconst { serverData, This } = Mars.initJsx();\nserverData - result of executed server code. If the server code is async then you need to await it.\nconst s = await serverData;\n\n// This - contains interpolated block files: \n <This.html/>\n <This.script/>\n <This.style/>\n\n// You can pass props to block file (by default data props are passed there)\n <This.html prop1={123}/> \n// you can access it in html file \n<p1>${data.prop1}</p1>\n\n// You can also do same with styles css and script. Remember that whatever you pass here gets merged into data.\n\n// you can access the block json \nconst html = thisBlock.Html;\n// or get its name\nconsole.log(thisBlock.Name)"
            }
          }
        ],
        "settings": {
          "title": "What's available in block code",
          "folder": "blocks"
        }
      },
      "debugging": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "How to debug server and client code",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To debug <b>server code </b>you need to install local mars server, launch it in vs code in debug mode and simply write debugger anywhere in server executed code (server, jsx, demo, tests..)."
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { serverData, This } = Mars.initJsx();\n\ndebugger // visual studio code will add a breakpoint here and stop code execution\n\nexport default <This.html/>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Debug client code",
              "level": 3
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Same as above, add <code class=\"inline-code\">debugger </code>anywhere in clientjs and open google chrome inspector."
            }
          }
        ],
        "settings": {
          "title": "Debugging code",
          "folder": "blocks"
        }
      },
      "server-code": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Service block",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If the block type is <code class=\"inline-code\">service </code>then you can call a block by writing <code class=\"inline-code\">Mars.services.MyService({...})</code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Server code can be sync and async"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "async function server() {\n  const r = await Mars.libs.axios('https://api.themoviedb.org/3/movie/550?api_key=7160e72a2cad2b601cb39efaa21eb68e')\n  return r.data\n}\n"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Make sure you await server code if it is async. The service above would be called this way"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const r = await Mars.services.MyService({...})"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Server code in UI Blocks",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Same rules apply here. The way to get server code into jsx is"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { serverData, This } = Mars.initJsx();\n\n// if it is sync funciton then you can access serverData as it is\n//if it is async you need to await it\nconst s = await serverData;"
            }
          }
        ],
        "settings": {
          "title": "Server code",
          "folder": "blocks"
        }
      },
      "xid": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "XID",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "It is a autogenerated or defined id used in all block files within one block instance."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In html, script and css you can simply write <code class=\"inline-code\">XID</code>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In server and jsx you need to use <code class=\"inline-code\">data.Id</code>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Use cases:&nbsp;Scoped css",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "#XID a {\n  color: red;\n}\n\n// all links within this block will be red. but not other links. "
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Element id for js and vue",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// html code\n\n<div id=\"XID_VUE\">\n....\n</div>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// client script\n\nnew MarsVue('XID_VUE', data, {\n  data,\n})"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Random js",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// jsx code\n\nexport default <div id={data.Id}>...</div>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// client script\n$('#XID').addClass('blink')"
            }
          }
        ],
        "settings": {
          "title": "XID usage",
          "folder": "blocks"
        }
      },
      "vue": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Using VUE in Mars",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "new MarsVue('XID_VUE', data, {\n  data: {\n    ...data,\n    prop1: 123\n  },\n  mounted: function () {\n   ...\n  },\n  methods: {\n  ....\n  }\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Make sure you added something like this in your html"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "<div id=\"XID_VUE\">\n  ....\n</div>"
            }
          }
        ],
        "settings": {
          "title": "Using VUE",
          "folder": "blocks"
        }
      },
      "unit-tests": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Unit Test using JEST",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can write tests using jest-expect."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Find documentation <a href=\"https://jestjs.io/docs/en/expect\">here&nbsp;</a>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "test('test 2 good', () => { expect(1).toBe(1) })\n\ntest('test 2 bad', () => { expect({ t: 123 }).toBe({ t: 1234}) })\n"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594724914067.png",
                "name": "img-1594724914067.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ],
        "settings": {
          "title": "Unit tests using JEST",
          "folder": "testing and demo"
        }
      },
      "demo": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Block's DEMO&nbsp;",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Each block should have a demo page&nbsp;"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The demo page is not running in a master page, so you need to make sure to include all scripts needed."
            }
          },
          {
            "type": "warning",
            "data": {
              "title": "Include all dependencies&nbsp;",
              "message": "The demo page is not running in a master page, so you need to make sure to include all scripts needed."
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// demo file\nasync function Block() {\n    return (<div>\n      <script src=\"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\" defer></script>\n  <     script src=\"/api/MarsJs\" type=\"module\"></script>\n      hello demo runner 12\n      <MyBlock prop1=\"123\"/>\n    </div>);\n}\nMars.render(<Block />);\n"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Service block demo",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "For service blocks you need to call it in plain js to return json"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// demo\nexport default Mars.services.GetMovieDetails({ id: 2 })"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can make few calls in one demo"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// demo\nasync function Demo() {\n  return <div>\n    Demo 1\n    <pre><code>{JSON.stringify(Mars.services.GetMovieDetails({ id: 2 }), null, 2)}</code></pre>\n    Demo 2\n    <pre><code>{JSON.stringify(Mars.services.GetMovieDetails({ id: 2 }), null, 2)}</code></pre>\n  </div>\n}\n\nexport default <Demo />"
            }
          }
        ],
        "settings": {
          "title": "Demo pages",
          "folder": "blocks"
        }
      },
      "block-architecture": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Block architecture",
              "level": 2
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1594725927125.png",
                "name": "img-1594725927125.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ],
        "settings": {
          "title": "Block architecture",
          "folder": "blocks"
        }
      },
      "page-scructure": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Page structure",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can have all same files in the page as in the block such as server, jsx, html, css and script."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Server code",
              "level": 5
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can fetch data from database or execute any other server code for the page where result will be available in <code class=\"inline-code\">jsx </code>in <code class=\"inline-code\">serverData</code>."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can also check user <b>permissions </b>here, see an example below"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// we check if user has gmail email and it's true we throw an error.\n// It will show generic error message on the page\nfunction server(){\n   if(Req.user.email.includes('gmail')) {\n      throw new Error('Users with gmail emails cannot use the portal')\n   }\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If you want to show more custom error you can do this"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "// server\nfunction server(){\n   if(Req.user.email.includes('gmail')) {\n      return 'Users with gmail emails cannot use the portal'\n   }\n   return null\n}\n\n//jsx\nconst {serverData} = Mars.initJsx();\nexport default serverData ? <h1>{serverData}</h1> : <h1>Hello world</h1>"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "JSX",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In JSX code on the page you need render blocks same as you would render it in blocks."
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return (\n    <div>\n      <NestedTree Id=\"NestedTreeData\" Searchable Tree={s.tree} />\n      <This.html/>\n      <This.script/>\n      <This.style />\n    </div>);\n}\nexport default Block();\n"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "CSS, HTML and Script&nbsp;",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Page can have own css, html and script same as blocks."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Page props",
              "level": 2
            }
          },
          {
            "type": "code",
            "data": {
              "code": "{\n  \"settings\": {\n    \"url\": \"/mars/data/:tableName\", // page url. You can have dynamic params which later can be accessed by data.tableName\n    \"title\": \"mars data\", // page title shown on the browser tab or modal title\n    \"master\": \"MarsIdeMasterPage\" // page master. Can be null. \n  }\n}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Tests and DEMO",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can add tests and demo to the page same as for blocks."
            }
          }
        ],
        "settings": {
          "title": "Page structure",
          "folder": "advanced guides"
        }
      },
      "script": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Block files: CLIENT SCRIPT",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The client script of the block should be treated as a module if you insert it to your block or page via <code class=\"inline-code\">&lt;This.script /&gt;</code>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "<script type=\"module\">\n  // client script code goes here\n</script>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Here are specs of module"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "unordered",
              "items": [
                "<code class=\"inline-code\">import&nbsp;</code>allows the import of functionality from other modules.&nbsp;&nbsp;",
                "Modules always&nbsp;<code>use strict</code>, by default. E.g. assigning to an undeclared variable will give an error.",
                "Each module has <b>its own top-level scope</b>. In other words, top-level variables and functions from a module are not seen in other scripts.",
                "If you want to export global variable which will be accessible from other blocks you need to use window object. e.g <code class=\"inline-code\">window.prop1 = 123</code> would make prop1 available anywhere on the page from any other block."
              ]
            }
          },
          {
            "type": "warning",
            "data": {
              "title": "Performance tips",
              "message": "You can also include block as regular script by getting its raw text from thisBlock.Script and rendering it in jsx &lt;script&gt;{thisBlock.Script}&lt;/script&gt;"
            }
          }
        ],
        "settings": {
          "title": "Block files: CLIENT SCRIPT",
          "folder": "blocks"
        }
      },
      "localhost": {
        "settings": {
          "title": "Running mars on localhost, debugging and console log",
          "folder": "advanced guides"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Running mars on localhost, debugging and console log",
              "level": 2
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "Ask John to be added to the GitHub repo. Send your GitHub #nickname",
                "Download repo from<a href=\"https://github.com/johnrushx/mars\">&nbsp;https://github.com/johnrushx/mars</a>",
                "Clone DEV branch",
                "Change db name to your project name in <code class=\"inline-code\">/config/default.json/mongoDbName</code> (default is <code class=\"inline-code\">test</code>). If you project is <code class=\"inline-code\">myproject.marscloud.dev</code> then set <code class=\"inline-code\">mongoDbName </code>to <code class=\"inline-code\">myproject-db-dev&nbsp;</code>",
                "Open project in VS Code or similar in debug mode.&nbsp;",
                "Open <a href=\"http://localhost:8888/home\">localhost:8888/home</a> in the browser and log in with your user (if you have no user, then register it and wait for administrator to grant you needed roles. Some project dont require roles, so you can just register and enter the mars ide."
              ]
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Debugging",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In order to do debugging you need to add <code class=\"inline-code\">debugger </code>keyword to the code and save it (only works for localhost)"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Console.log",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can use console.log(..) as you would do it in any other nodejs app if you are running localhost."
            }
          }
        ]
      },
      "autocomplete-in-models": {
        "settings": {
          "title": "Autocomplete in models",
          "folder": "models and schema"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Autocomplete in models.",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "When designing models, schema or settings you can configure fields with autocomplete options from dropdown."
            }
          }
        ]
      },
      "import-export-apps": {
        "settings": {
          "title": "Import or Export Apps",
          "folder": "advanced guides"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Import or Export Apps",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To make your app blocks <b>exportable </b>you need to define it in settings"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1595856919231.png",
                "name": "img-1595856919231.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Other apps can <b>import </b>your blocks by doing this"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1595857012088.png",
                "name": "img-1595857012088.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The blocks will appear in <code class=\"inline-code\">_external</code> folder"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1595857240580.png",
                "name": "img-1595857240580.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "cms-editable-blocks": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "CMS editable blocks",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can let admins edit blocks (or even nested blocks) on the page."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To do so you need to add this on the page"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "const { This } = Mars.initJsx();\n\nexport default <Page {...Req} {...thisBlock.Page.settings}>\n  <TestCmsBlocks1 Id=\"TestCmsBlocks1111111\" />\n  <PageAdminActions actions={[{\n    title: 'edit block1',\n    blockId: 'TestCmsBlocks1111111',\n    modelName: 'TestCmsBlocks1'\n  }]} />\n  <This.html />\n</Page>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<code class=\"inline-code\">PageAdminActions </code>block will be shown as edit button on the bottom right corner."
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596549270460.png",
                "name": "img-1596549270460.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The actions will be rendered as links in modal when admin clicks on the edit button"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Each actions consist of"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "unordered",
              "items": [
                "<code class=\"inline-code\">title </code>- user readable title",
                "<code class=\"inline-code\">blockId </code>- id of the block on the page or in the block nested in another block",
                "<code class=\"inline-code\">modelName </code>- defined the data editor to be shown when user presses the action"
              ]
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "NOTE: you must have an Id for the block. Make sure Id is unique on the page."
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596557074713.png",
                "name": "img-1596557074713.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Wysiwyg editor",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If you wanna add free text editor where admins or content moderators can edit text, images, tables and etc, you need to add&nbsp;"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596557309207.png",
                "name": "img-1596557309207.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Edit button will appear in modal menu when you click on edit button as well."
            }
          }
        ],
        "settings": {
          "title": "CMS editable blocks",
          "folder": "cms"
        }
      },
      "service-with-custom-route": {
        "settings": {
          "title": "Service with custom route",
          "folder": "services"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Service with custom route",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "If you you want to use custom route for your service instead of <code class=\"inline-code\">/api/YourService</code> you can do it"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "Create \"page\" block instead of \"service\" block.",
                "Define the route in page settings"
              ]
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596793666126.png",
                "name": "img-1596793666126.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "3. Write regular server code in service"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "async function server() {\n  return {\n    prop1: 555,\n    data: data\n  }\n}"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "4. Return server code result in jsx"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596793747363.png",
                "name": "img-1596793747363.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "5. You can call your api now"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1596793790204.png",
                "name": "img-1596793790204.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "mssql": {
        "settings": {
          "title": "MsSql database",
          "folder": "data storage"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "MsSql database",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The connection string is defined <a href=\"/mars/ide/MsSqlSettings\">here</a>"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Example of usage"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "async function Block() {\n\n  // define connection string settings here /mars/ide/MsSqlSettings\n\n  const pool = await Mars.services.MsSql();\n\n  const res = await pool.request()\n    .query('select top 10 * from Movies');\n\n  return res.recordset\n}\n\nexport default <Block />"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "results"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1597741869723.png",
                "name": "img-1597741869723.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": false,
              "withBackground": false
            }
          }
        ]
      },
      "modal": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Modal usage",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "First of all make sure the Modal block has been to your base master page.&nbsp;<b>It must be added only once and be global in your project </b>(basically it already exists in any Mars project by default)."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "It has to be something like that:"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "export default (\n  <Page url={url} title={title} head={masterHead}>\n    <Modal />\n    <SearchModal />\n    {This.children()}\n    {scripts}\n  </Page>\n);"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>List of modal options:</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "//  Modal.open(urlOrDom, options, onLoadCallback, postRequestData);\n//  urlOrDom - can be an URL or a DOM element: document.getElementById('some_content');\n//  options - modal presentation options\n//  onLoadCallback - a function which will be called (if you load an URL) when that URL loaded\n//  postRequestData - an object which will be passed in POST request when loading your URL\n\nconst urlOrDom = '/api/SomeBlock';  // or document.getElementById('some_DOM_id');\nModal.open(urlOrDom, {\n  position: 'center', // 'top' or 'center' by default\n  hideModalHeader: false,\n  hideCloseButton: false,\n  closeByEscape: true,\n  roundCorners: false,\n  noPadding: false,\n  noPaddingHorizontal: false,\n  noPaddingVertical: false,\n  width: '70%',\n  title: 'My title',\n  noCloseOnOverlay: false,\n  autoHeight: false,\n  sidebar: false,\n  sidebarSide: 'left', // left or right\n  buttons: [\n    {\n      id: 'btn_confirm',\n      className: 'btn btn-primary',\n      label: 'Confirm',\n      callback: function() {\n        alert('Confirmed!');\n      },\n    },\n    {\n      id: 'btn_cancel',\n      label: 'Cancel',\n      callback: function() {\n        Modal.close();\n      },\n    },\n  ],\n}, () => {\n  console.log('The URL has been loaded!');\n}, {\n  myDataProp1: '111',\n  myDataProp2: '222',\n});\n"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "<b>Usage&nbsp;</b><a href=\"https://ide.marscloud.dev/mars/demo/Modal\">demo</a><b>:</b>"
            }
          },
          {
            "type": "code",
            "data": {
              "code": "<button onclick=\"Modal.open('/api/TestLongContent')\">No params</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { hideModalHeader: true, title: 'Custom title' })\">hideModalHeader</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { hideCloseButton: true })\">hideCloseButton</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { closeByEscape: false })\">closeByEscape (false)</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { roundCorners: true })\">roundCorners</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { noPadding: true })\">noPadding</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { noPaddingHorizontal: true })\">noPaddingHorizontal</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { noPaddingVertical: true })\">noPaddingVertical</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { width: '300px' })\">width</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { title: 'Custom title' })\">title</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { noCloseOnOverlay: true })\">noCloseOnOverlay</button>\n<button onclick=\"Modal.open('/api/TestShortContent', { autoHeight: true })\">autoHeight</button>\n<button onclick=\"Modal.open('/api/TestShortContent', { autoHeight: true, roundCorners: true })\">autoHeight + roundCorners</button>\n<!-- Buttons in footer -->\n<button onclick=\"Modal.open('/api/TestShortContent', { hideModalHeader: true, buttons: [{ id: 'btn_confirm', label: 'Confirm', className: 'btn btn-primary', callback: () => alert('cool') }, { id: 'btn_cancel', label: 'Cancel', className: 'btn', callback: () => Modal.close() }] })\">autoHeight + roundCorners + footer</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { roundCorners: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\">roundCorners + footer</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { hideModalHeader: true, buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\">hideModalHeader + footer</button>\n<!-- Sidebar -->\n<button onclick=\"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'left', width: '450px', hideCloseButton: true, hideModalHeader: true })\">Sidebar left + width</button>\n<button onclick=\"Modal.open('/api/TestLongContent', { sidebar: true, sidebarPosition: 'right', hideCloseButton: true, hideModalHeader: true })\">Sidebar right</button>"
            }
          }
        ],
        "settings": {
          "title": "8. Modal window",
          "folder": "get started"
        }
      },
      "theme-and-styles": {
        "settings": {
          "title": "Theme and styles",
          "folder": "design"
        },
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Theme and styling",
              "level": 2
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "The Mars theme is Bootstrap based and supports most of Bootstrap CSS classes. To avoid conflicts make sure that your master pages don't include any bootstrap stylesheets."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can find available CSS classes in&nbsp;<a href=\"/mars/ide/ThemeStyles\">ThemeStyles</a> block."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Theme config",
              "level": 5
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "To build your own theme open and edit&nbsp;<a href=\"/mars/ide/Theme\">Theme config</a>. Use its <a href=\"/mars/demo/ThemeStyles\">demo page</a> to see you theme."
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Theme variables usage",
              "level": 5
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Mars theme setups <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties\">CSS custom properties (variables)</a> to use them in your application."
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "You can find the list of all available variables in <a href=\"/mars/ide/ThemeVariables\">ThemeVariables</a> block.&nbsp;"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "Usage example:"
            }
          },
          {
            "type": "code",
            "data": {
              "code": ".big-red-title {\n  font-size: var(--font-title);\n  color: var(--colors-danger600);\n}"
            }
          },
          {
            "type": "header",
            "data": {
              "text": "Color palette",
              "level": 5
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "In accordance with this <a href=\"https://refactoringui.com/previews/building-your-color-palette/\">article</a>&nbsp;an automatic calculation of color palette is not very useful. So Mars color palette based on 9 shades of following color categories (bootstrap like): primary, secondary, success, danger, warning, info, gray, which have to be picked and set up by your designer manually."
            }
          }
        ]
      }
    },
    "updatedAt": "2020-09-07T10:17:55.748Z",
    "isSystem": true
  },
  {
    "_id": "5efe68eb4ea8ab02f88b245e",
    "Name": "EditBlockDataOnPage",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "wysiwyg",
    "DataArgs": [],
    "DemoJsx": "export default <EditBlockDataOnPage collection=\"blocks\" modelName=\"UserModel\" objectId=\"5efe47654ea8ab02f88b245d\" path={`pages.testpage2.block1`} />",
    "DemoJsxTranspiled": "export default executeAppBlock(EditBlockDataOnPage, { collection: \"blocks\", modelName: \"UserModel\", objectId: \"5efe47654ea8ab02f88b245d\", path: `pages.testpage2.block1` });",
    "JsxTranspiled": "const { This, serverData } = Mars.initJsx();\n\nexport default executeAppBlock(RenderFormByModel, { Id: \"RenderDataByModel1\",\n  objectId: data.objectId,\n  path: data.path,\n  collectionName: data.collection,\n  modelName: data.modelName,\n  iframeUrl: `/mars/edit-data/${data.modelName}/${data.collection}?objectId=${data.objectId || ''}&path=${data.path}` });",
    "Jsx": "const { This, serverData } = Mars.initJsx();\r\n\r\nexport default <RenderFormByModel Id=\"RenderDataByModel1\"\r\n  objectId={data.objectId}\r\n  path={data.path}\r\n  collectionName={data.collection}\r\n  modelName={data.modelName}\r\n  iframeUrl={`/mars/edit-data/${data.modelName}/${data.collection}?objectId=${data.objectId || ''}&path=${data.path}`} />\r\n",
    "BlockFunction": "const { _ } = Mars.libs;\r\nasync function server() {\r\n  const r = await Mars.data[data.collection].findById(data.objectId)\r\n  return _.get(r, data.path) || [];\r\n}\r\n\r\nfunction api() {\r\n  return {\r\n    async saveData(content) {\r\n      const u = await Mars.data[data.collection].updateById(data.objectId, { $set: { [data.path]: content } });\r\n      await Mars.services.ResetCache({\r\n        blockObj: { ...u.value, _id: u.value._id.toString() }\r\n      })\r\n      return true\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5efe6df44ea8ab02f88b245f",
    "Name": "PageSettingsModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "title"
      },
      {
        "DataType": "string",
        "PropName": "folder"
      }
    ],
    "DemoJsx": "export default <PageSettingsModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(PageSettingsModel, null);",
    "updatedAt": "2020-07-05T11:06:08.031Z",
    "isSystem": true
  },
  {
    "_id": "5efe723c4ea8ab02f88b2460",
    "Name": "EditPageSettingsAdminBtn",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "admin controls",
    "DataArgs": [],
    "DemoJsx": "export default <EditPageSettingsAdminBtn />",
    "DemoJsxTranspiled": "export default executeAppBlock(EditPageSettingsAdminBtn, null);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nasync function Block() {\n  return executeAppBlock(\n    'div',\n    null,\n    executeAppBlock(\n      'a',\n      { 'class': 'float', onclick: `Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${data.path || ''}')` },\n      executeAppBlock('i', { 'class': 'fa fa-cog my-float' })\n    ),\n    executeAppBlock(\n      'script',\n      null,\n      `function editPageProps() { Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${data.path || ''}') }`\n    ),\n    executeAppBlock(This.style, null)\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\nasync function Block() {\r\n  return (\r\n    <div>\r\n      <a class=\"float\" onclick={`Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${data.path || ''}')`}>\r\n        <i class=\"fa fa-cog my-float\"></i>\r\n      </a>\r\n      <script>\r\n        {`function editPageProps() { Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${data.path || ''}') }`}\r\n      </script>\r\n      <This.style />\r\n    </div>);\r\n}\r\n\r\nexport default <Block />",
    "Css": ".float{\r\n\tposition:fixed;\r\n\twidth:50px;\r\n\theight: 50px;\r\n\tbottom:130px;\r\n\tright:10px;\r\n\tbackground-color:#0C9;\r\n\tcolor:#FFF;\r\n\tborder-radius:50px;\r\n\ttext-align:center;\r\n\tbox-shadow: 2px 2px 3px #999;\r\n  cursor: pointer;\r\n}\r\n\r\n.my-float{\r\n\tmargin-top:17px;\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f01c6034ea8ab02f88b2463",
    "Name": "PageAdminToolbar",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "admin controls",
    "DataArgs": [],
    "DemoJsx": "export default <PageAdminToolball />",
    "DemoJsxTranspiled": "export default executeAppBlock(PageAdminToolball, null);",
    "JsxTranspiled": "let path = data.key ? `pages.${data.key}.settings` : data.path;\nif (!data.key && !data.path) path = '';\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(\n    'script',\n    null,\n    `function editPageProps() { Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${path || ''}') }`\n  )\n);",
    "Jsx": "let path = data.key ? `pages.${data.key}.settings` : data.path;\r\nif (!data.key && !data.path) path = '';\r\n\r\nexport default <Fragment>\r\n\r\n  <script>\r\n    {`function editPageProps() { Modal.open('/api/EditBlockDataOnPage?collection=${data.collection || 'blocks'}&modelName=${data.modelName || 'PageSettingsModel'}&objectId=${data.objectId}&path=${path || ''}') }`}\r\n  </script>\r\n</Fragment>",
    "isSystem": true
  },
  {
    "_id": "5f01e9b94ea8ab02f88b2464",
    "Name": "AppReset",
    "Type": "page",
    "Apps": [],
    "Folder": "app management",
    "DataArgs": [],
    "DemoJsx": "export default <AppReset />",
    "DemoJsxTranspiled": "export default executeAppBlock(AppReset, null);",
    "Page": {
      "settings": {
        "url": "/mars/reset-app",
        "title": "Reset app",
        "master": "MarsIdeMasterPage",
        "group": "settings",
        "icon": "fa-sync"
      }
    },
    "JsxTranspiled": "export default executeAppBlock(DemoIframe, { url: \"/api/ResetCache\" });",
    "Jsx": "export default <DemoIframe url=\"/api/ResetCache\"/>",
    "isSystem": true
  },
  {
    "_id": "5f01ef214ea8ab02f88b2465",
    "Name": "UrlHelper",
    "Type": "service",
    "Apps": [],
    "Folder": "helpers",
    "DataArgs": [],
    "DemoJsx": "export default <UrlHelper />",
    "DemoJsxTranspiled": "export default executeAppBlock(UrlHelper, null);",
    "BlockFunction": "function slugify(string) {\r\n  const a = '√†√°√¢√§√¶√£√•ƒÅƒÉƒÖ√ßƒáƒçƒëƒè√®√©√™√´ƒìƒóƒôƒõƒü«µ·∏ßƒ±√Æ√Ø√≠ƒ´ƒØ√¨≈Ç·∏ø√±≈Ñ«π≈à√¥√∂√≤√≥≈ì√∏≈ç√µ≈ë·πï≈ï≈ô√ü≈õ≈°≈ü»ô≈•»õ√ª√º√π√∫≈´«ò≈Ø≈±≈≥·∫É·∫ç√ø√Ω≈æ≈∫≈º¬∑/_,:;';\r\n  const b = 'aaaaaaaaaacccddeeeeeeeegghiiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';\r\n  const special = new RegExp(a.split('').join('|'), 'g');\r\n\r\n  return string.toString().toLowerCase()\r\n    .replace(/\\s+/g, '-') // replace spaces with '-'\r\n    .replace(special, c => b.charAt(a.indexOf(c))) // replace special characters\r\n    .replace(/&/g, '-and-') // replace '&' with 'and'\r\n    .replace(/[^\\w\\-]+/g, '') // remove all non-alphabetical characters\r\n    .replace(/\\-\\-+/g, '-') // replace multiple '-' with single '-'\r\n    .replace(/^-+/, '') // Trim '-' from start of text\r\n    .replace(/-+$/, ''); // Trim '-' from end of text\r\n}\r\n\r\nfunction server() {\r\n  return {\r\n    slugify\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f0234114ea8ab02f88b2477",
    "Name": "CmsAdminToolbar",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background-color: white;height:100vh;padding: 10px;color:white\">\r\n      <script type=\"module\" src=\"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\" defer></script>{data.head}\r\n      <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\" type=\"module\"></script>\r\n      <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" defer></script>\r\n      <script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\" defer></script>\r\n      <script src=\"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\" defer></script>\r\n      <script src=\"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\" defer></script>\r\n      <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n      <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n      <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" />\r\n      <link href=\"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\" rel=\"stylesheet\" />\r\n      <link rel=\"stylesheet\" href=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" />\r\n      <CmsAdminToolbar />\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)\r\n",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background-color: white;height:100vh;padding: 10px;color:white\" },\n    executeAppBlock(\"script\", { type: \"module\", src: \"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\", defer: true }),\n    data.head,\n    executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/axios/axios.js\", type: \"module\" }),\n    executeAppBlock(\"script\", { src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\", defer: true }),\n    executeAppBlock(\"script\", { src: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\", defer: true }),\n    executeAppBlock(\"script\", { src: \"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\", defer: true }),\n    executeAppBlock(\"script\", { src: \"https://cdn.jsdelivr.net/npm/monaco-editor@latest/min/vs/loader.js\", defer: true }),\n    executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" }),\n    executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\", integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", crossorigin: \"anonymous\" }),\n    executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n    executeAppBlock(\"link\", { href: \"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\", rel: \"stylesheet\" }),\n    executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" }),\n    executeAppBlock(CmsAdminToolbar, null)\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "Html": "<script type=\"module\" src=\"https://marscode.s3.eu-north-1.amazonaws.com/node_modules/vue/vue.js\" defer></script>\r\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" defer></script>\r\n<script src=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.js\" defer></script>\r\n<script src=\"https://unpkg.com/@popperjs/core@2.4.0/dist/umd/popper.min.js\" defer></script>\r\n<script src=\"/api/MarsJs\" type=\"module\"></script>\r\n<!--<link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\"\r\n\tintegrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />-->\r\n<link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" />\r\n<link href=\"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\" rel=\"stylesheet\" />\r\n<link rel=\"stylesheet\" href=\"https://d1zibq5kp019rb.cloudfront.net/node_modules/bootstrap-vue/bootstrap-vue.min.css\" />",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  const allowedSections = Mars.settings.CmsAdminToolbarSettings.toolbarSections.filter(t => t.roles && t.roles.length > 1);\n\n  function GetDynamicBlock({ blockName }) {\n    return Mars.blocks[blockName](Mars, { Id: blockName }, Req);\n  }\n\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"col-12\" },\n    executeAppBlock(This.html, null),\n    executeAppBlock(\n      Tabs,\n      { Id: \"Tabs2\", vertical: true, cssClasses: { tabItems: 'mr-2 bg', content: 'pl-1', tabItem: 'text-muted pt-2', tabItemActive: \"text-dark\" } },\n      allowedSections.map(t => executeAppBlock(\n        Tab,\n        { title: `<i v-b-tooltip.right title=\"${t.title}\" class=\" fa-lg ${t.icon}\"></i>` },\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"panel--title\" },\n          t.title\n        ),\n        executeAppBlock(GetDynamicBlock, { blockName: t.blockName })\n      ))\n    ),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  const allowedSections = Mars.settings.CmsAdminToolbarSettings.toolbarSections.filter(t => t.roles && t.roles.length > 1)\r\n\r\n  function GetDynamicBlock({ blockName }) {\r\n    return Mars.blocks[blockName](Mars, { Id: blockName }, Req)\r\n  }\r\n\r\n  return (\r\n    <div id={data.Id} class=\"col-12\">\r\n      <This.html />\r\n      <Tabs Id=\"Tabs2\" vertical cssClasses={{ tabItems: 'mr-2 bg', content: 'pl-1', tabItem: 'text-muted pt-2', tabItemActive: \"text-dark\" }}>\r\n        {allowedSections.map(t => <Tab title={`<i v-b-tooltip.right title=\"${t.title}\" class=\" fa-lg ${t.icon}\"></i>`} >\r\n          <p class=\"panel--title\">{t.title}</p>\r\n          <GetDynamicBlock blockName={t.blockName} />\r\n        </Tab>)}\r\n      </Tabs>\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Script": "",
    "Css": "#XID{\r\n  background-color:#fefefe!important;\r\n}\r\n\r\n#XID .bg{\r\n  background-color: #fefefe!important;\r\n  text-align: center;\r\n  height: calc(100vh - 200px);\r\n  padding-left: 6px;\r\n  padding-right: 6px;\r\n}\r\n\r\n#XID .nav-link{\r\n  padding-left: 0;\r\n  padding-right: 0;\r\n}\r\n\r\n#XID .panel--title{\r\n  text-transform: uppercase;\r\n  padding-top: 10px;\r\n  margin-bottom: 7px;\r\n  font-size: 12px;\r\n}\r\n\r\n#XID .fa-lg {\r\n  font-size: 1.123333em;\r\n}\r\n\r\n.tooltip{\r\n  z-index: 10720;\r\n  left: 15px!important;\r\n}\r\n\r\n.cms-tree .btn-link, .cms-tree a {\r\n  color: #555555 !important;\r\n}\r\n\r\n\r\n.cms-tree .btn-link:hover, .cms-tree a:hover {\r\n  color: #000000 !important;\r\n  cursor: pointer;\r\n}\r\n",
    "isSystem": true
  },
  {
    "_id": "5f023deb4ea8ab02f88b2478",
    "Name": "CmsAdminBtn",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background-color: white;height:100vh;padding: 10px;color:white\">\r\n      <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n      <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" />\r\n      <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\" />\r\n      <Modal />\r\n      <CmsAdminBtn />\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)\r\n",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background-color: white;height:100vh;padding: 10px;color:white\" },\n    executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" }),\n    executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css\" }),\n    executeAppBlock(\"link\", { rel: \"stylesheet\", href: \"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\", integrity: \"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\", crossorigin: \"anonymous\" }),\n    executeAppBlock(Modal, null),\n    executeAppBlock(CmsAdminBtn, null)\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "Css": ".btn-float{\r\n  position: fixed;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-color: #fefefe;\r\n  padding-top: 14px;\r\n  padding-left: 23px;\r\n  bottom: -15px;\r\n  left: -15px;\r\n  color: red;\r\n  border-radius: 50px;\r\n  cursor: pointer;\r\n\tbox-shadow: 2px 2px 15px #999;\r\n\topacity: 0.9;\r\n}\r\n\r\n.btn-float:hover{\r\n  box-shadow: 2px 2px 15px #555;\r\n\topacity: 1;\r\n}",
    "JsxTranspiled": "if (!Req.user) Mars.render;\n\nconst { serverData, This } = Mars.initJsx();\n\nasync function Block() {\n  // const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id },\n    executeAppBlock(This.html, null),\n    executeAppBlock(This.script, data),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "if (!Req.user) Mars.render\r\n\r\nconst { serverData, This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  // const s = await serverData;\r\n  return (\r\n    <div id={data.Id}>\r\n      <This.html />\r\n      <This.script {...data} />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "Html": "<a class=\"btn-float\" onclick=\"${`Modal.open('/api/CmsAdminToolbar', { width: '300px', noPadding: true, sidebar: true, sidebarPosition: 'left', title: 'Admin toolbar' })`}\">\r\n\t<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\"\r\n\t\ty=\"0px\" viewBox=\"0 0 409.6 409.6\" style=\"enable-background:new 0 0 409.6 409.6;\" height=\"16\" xml:space=\"preserve\">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M392.533,17.067H17.067C7.641,17.067,0,24.708,0,34.133S7.641,51.2,17.067,51.2h375.467    c9.426,0,17.067-7.641,17.067-17.067S401.959,17.067,392.533,17.067z\" />\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M392.533,187.733H17.067C7.641,187.733,0,195.374,0,204.8s7.641,17.067,17.067,17.067h375.467    c9.426,0,17.067-7.641,17.067-17.067S401.959,187.733,392.533,187.733z\" />\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path\r\n\t\t\t\t\td=\"M392.533,358.4H17.067C7.641,358.4,0,366.041,0,375.467s7.641,17.067,17.067,17.067h375.467    c9.426,0,17.067-7.641,17.067-17.067S401.959,358.4,392.533,358.4z\" />\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t</svg>\r\n</a>",
    "Script": "",
    "isSystem": true
  },
  {
    "_id": "5f024f854ea8ab02f88b2479",
    "Name": "CmsCreateNewButtons",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <CmsCreateNewButtons />",
    "DemoJsxTranspiled": "export default executeAppBlock(CmsCreateNewButtons, null);",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, { buttons: serverData.buttons }),\n  executeAppBlock(This.style, null)\n);",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nexport default <div>\r\n  <This.html />\r\n  <This.script buttons={serverData.buttons}/>\r\n  <This.style />\r\n</div>",
    "Html": "<div id=\"XID_VUE\">\r\n\t<b-button block v-for=\"btn in buttons\" @click=\"eval(btn.jsToEval)\" variant=\"success\">{{btn.title}}</b-button>\r\n</div>",
    "Script": "new MarsVue('XID_VUE', data, {\r\n  data\r\n})",
    "BlockFunction": "function server() {\r\n  function getEditObjectUrl(collectionName, modelName, objectId = null, docTitle) {\r\n    const editUrl = `/mars/edit-data/${modelName}/${collectionName}?objectId=${objectId || ''}`;\r\n    return `Modal.open('/api/RenderFormByModel?Id=RenderDataByModel1&modelName=${modelName}&collectionName=${collectionName}&objectId=${objectId || ''}&iframeUrl=${encodeURIComponent(editUrl)}', {width: '785px', noPadding: true, title: '${docTitle}' })`\r\n  }\r\n\r\n  const collections = Mars.settings.CmsAdminToolbarSettings.createNewButtons\r\n\r\n  return {\r\n    buttons: collections.map(t => {\r\n      return {\r\n        title: t.title,\r\n        jsToEval: (t.entity && t.entity.collectionName) ? getEditObjectUrl(t.entity.collectionName, t.entity.defaultModelBlock, null, t.title)\r\n          : `Modal.open('/api/${t.blockName}', {width: '785px', noPadding: true, title: '${t.title}' })`\r\n      }\r\n    })\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f025dd74ea8ab02f88b247d",
    "Name": "SimplePageModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "title"
      },
      {
        "DataType": "string",
        "PropName": "slug",
        "NullAllowed": true,
        "Description": "If empty is auto generated from title"
      },
      {
        "DataType": "string",
        "PropName": "folder",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "export default <SimplePageModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(SimplePageModel, null);",
    "BlockFunction": "function getUrl(doc) {\r\n  return `pages/${doc.slug}`\r\n}\r\n\r\nfunction server() {\r\n  return {\r\n    triggers: {\r\n      async beforeUpdate(oldDoc, newDoc) {\r\n\r\n      },\r\n      async afterUpdate(oldDoc, newDoc) {\r\n\r\n      },\r\n      async beforeInsert(doc) {\r\n        if (!doc.slug) doc.slug = doc.slug = Mars.services.UrlHelper().slugify(doc.title)\r\n      },\r\n      async afterInsert(doc) {\r\n\r\n      },\r\n      async beforeDelete(doc) {\r\n\r\n      },\r\n      async afterDelete(doc) {\r\n\r\n      },\r\n      redirectAfterSave(doc) {\r\n        return getUrl(doc)\r\n      }\r\n    },\r\n    contextMenu(doc) {\r\n      return [\r\n        {\r\n          title: 'View page', onClick: `window.open('${getUrl(doc)}')`\r\n        },\r\n        {\r\n          title: 'View page model', onClick: `goTo('/mars/ide/SimplePageModel')`\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f025ef44ea8ab02f88b247f",
    "Name": "SimplePageFactory",
    "Type": "page",
    "Apps": [],
    "Folder": "page factories",
    "DataArgs": [],
    "DemoJsx": "export default <SimplePageFactory />",
    "DemoJsxTranspiled": "export default executeAppBlock(SimplePageFactory, null);",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nasync function Block() {\n  const simplePage = await Mars.data.simple_pages.findOne({ slug: data.pageSlug });\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"container\" },\n      executeAppBlock(\n        \"h1\",\n        null,\n        simplePage.title\n      ),\n      executeAppBlock(Wysiwyg, { collection: \"simple_pages\", objectId: simplePage._id, path: \"content\" }),\n      executeAppBlock(PageAdminToolbar, { collection: \"simple_pages\", objectId: simplePage._id, modelName: \"SimplePageModel\" })\n    )\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "async function Block() {\r\n  const simplePage = await Mars.data.simple_pages.findOne({ slug: data.pageSlug })\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <div class=\"container\">\r\n      <h1>{simplePage.title}</h1>\r\n      <Wysiwyg collection=\"simple_pages\" objectId={simplePage._id} path=\"content\" />\r\n      <PageAdminToolbar collection=\"simple_pages\" objectId={simplePage._id} modelName=\"SimplePageModel\" />\r\n    </div>\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "Page": {
      "settings": {
        "url": "/pages/:pageSlug",
        "title": "Simple page",
        "master": "MasterBasePage",
        "group": "page factory",
        "icon": ""
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f0261004ea8ab02f88b2480",
    "Name": "CmsSearchTree",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <CmsSearchTree />",
    "DemoJsxTranspiled": "export default executeAppBlock(CmsSearchTree, null);",
    "BlockFunction": "async function server() {\r\n  function getMenu(bName) {\r\n    return [{\r\n      title: 'Edit page', onClick: `location.href='/${bName}?edit=true'`\r\n    }]\r\n  }\r\n\r\n  let collections = Mars.settings.CmsAdminToolbarSettings.browseSettings;\r\n\r\n  async function getCollectionItems(c) {\r\n    const items = await Mars.data[c.name].find();\r\n    return items.map(t => {\r\n      return {\r\n        OnClick: `window.open('${t.slug}')`,\r\n        contextMenuActions: getMenu(t.slug),\r\n        name: t.title,\r\n        folder: t.folder || 'default'\r\n      }\r\n    })\r\n  }\r\n\r\n  return await Promise.all(collections.map(async (t) => {\r\n    const items = await getCollectionItems(t)\r\n    console.log(items)\r\n    const children = await Mars.services.GenereateNestedTree({\r\n      items\r\n    });\r\n    return {\r\n      name: t.name,\r\n      children\r\n    }\r\n  }))\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"data-table-tree px-2\" },\n    executeAppBlock(This.html, null),\n    executeAppBlock(NestedTree, { Id: \"NestedTreeDataCmsSearch\", Searchable: true, Tree: s })\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div id={data.Id} class=\"data-table-tree px-2\">\r\n      <This.html />\r\n      <NestedTree Id=\"NestedTreeDataCmsSearch\" Searchable Tree={s} />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "isSystem": true
  },
  {
    "_id": "5ed8e244baf8476d42b5324b",
    "Name": "MasterBasePage",
    "Title": "MasterBasePage",
    "Type": "page",
    "Apps": [],
    "Folder": "pages/master",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "url"
      },
      {
        "DataType": "string",
        "PropName": "title"
      },
      {
        "DataType": "string",
        "PropName": "head",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "scripts",
        "NullAllowed": true
      },
      {
        "DataType": "string",
        "PropName": "children",
        "NullAllowed": true
      }
    ],
    "Page": {
      "settings": {
        "url": "/master-base-page",
        "title": "MasterBasePage"
      }
    },
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nconst url = data.url || thisBlock.Page.settings.url;\nconst title = data.title || thisBlock.Page.settings.title;\n\n// <link href=\"https://unpkg.com/bootstrap/dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\nconst { head, scripts } = data;\nconst masterHead = executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" }),\n  executeAppBlock(\"link\", { href: \"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap\", rel: \"stylesheet\" }),\n  executeAppBlock(\"link\", { href: \"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\", rel: \"stylesheet\" }),\n  executeAppBlock(\"link\", { href: \"/assets/css/theme.css\", rel: \"stylesheet\" }),\n  executeAppBlock(This.style, null),\n  head\n);\n\nexport default executeAppBlock(\n  Page,\n  { url: url, title: title, head: masterHead },\n  executeAppBlock(Modal, null),\n  executeAppBlock(SearchModal, null),\n  executeAppBlock(\n    \"div\",\n    { \"class\": \"container\" },\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"row\" },\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"col-12 p-0\" },\n        executeAppBlock(\n          \"div\",\n          { id: \"PageContent\" },\n          This.children()\n        )\n      )\n    )\n  ),\n  executeAppBlock(CmsAdminBtn, null),\n  scripts\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nconst url = data.url || thisBlock.Page.settings.url;\nconst title = data.title || thisBlock.Page.settings.title;\n\n// <link href=\"https://unpkg.com/bootstrap/dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\nconst { head, scripts } = data;\nconst masterHead = (\n  <Fragment>\n    <script src=\"/api/MarsJs\" type=\"module\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap\" rel=\"stylesheet\" />\n    <link href=\"https://holidada.s3.eu-north-1.amazonaws.com/assets/fonts/hdd/style.css\" rel=\"stylesheet\" />\n    <link href=\"/assets/css/theme.css\" rel=\"stylesheet\" />\n    <This.style />\n    {head}\n  </Fragment>\n);\n\nexport default (\n  <Page url={url} title={title} head={masterHead}>\n    <Modal />\n    <SearchModal />\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-12 p-0\">\n          <div id=\"PageContent\">{This.children()}</div>\n        </div>\n      </div>\n    </div>\n    <CmsAdminBtn />\n    {scripts}\n  </Page>\n);\n\n\n",
    "JsxName": "Deleted",
    "cloned": {
      "timestamp": "2020-07-05T23:59:10.407Z"
    },
    "Css": "body { overflow-x: hidden; font-family: Roboto,-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"; }\nbody.noscroll { position: fixed; width: 100%; height: 100%; overflow-y: hidden; }\nul { list-style: none; padding: 0; margin: 0; }\n[v-cloak], [x-cloak] { display: none !important; }\n.lines-limited { display: -webkit-box; overflow: hidden; text-overflow: ellipsis; -webkit-box-orient: vertical; }",
    "isSystem": true
  },
  {
    "_id": "5f0272a34ea8ab02f88b2482",
    "Name": "AssetImageModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "name"
      },
      {
        "DataType": "image",
        "PropName": "imageUrl",
        "RegExp": ""
      },
      {
        "DataType": "string",
        "PropName": "folder",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "const d = { imageUrl: 'https://cdn-dev.filmgrail.com/web-files/20/image/test%20it%20(--19191f--)%20(852x600)', title: 'image1' }\r\nexport default <div>\r\n  <AssetImageModel preview {...d} />\r\n  <AssetImageModel {...d} />\r\n</div>",
    "DemoJsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst d = { imageUrl: 'https://cdn-dev.filmgrail.com/web-files/20/image/test%20it%20(--19191f--)%20(852x600)', title: 'image1' };\nexport default executeAppBlock(\n  'div',\n  null,\n  executeAppBlock(AssetImageModel, _extends({ preview: true }, d)),\n  executeAppBlock(AssetImageModel, d)\n);",
    "updatedAt": "2020-07-06T00:45:47.752Z",
    "BlockFunction": "function server() {\r\n  return {\r\n    triggers: {\r\n    },\r\n    contextMenu(doc) {\r\n      return [\r\n        {\r\n          title: 'Get image url', onClick: `window.open('${doc.imageUrl}')`\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}",
    "JsxTranspiled": "export default data.preview ? `<div class=\"media\"><img style=\"width: 50px\" class=\"mr-1\" src=\"${data.imageUrl}\"><div class=\"media-body\">${data.name}</div></div>` : executeAppBlock(\"img\", { src: data.imageUrl });",
    "Jsx": "export default data.preview ?\r\n  `<div class=\"media\"><img style=\"width: 50px\" class=\"mr-1\" src=\"${data.imageUrl}\"><div class=\"media-body\">${data.name}</div></div>`\r\n  : <img src={data.imageUrl} />",
    "isSystem": true
  },
  {
    "_id": "5f0275004ea8ab02f88b2484",
    "Name": "AssetsPage",
    "Type": "page",
    "Apps": [],
    "Folder": "pages",
    "DataArgs": [],
    "DemoJsx": "export default <AssetsPage />",
    "DemoJsxTranspiled": "export default executeAppBlock(AssetsPage, null);",
    "Page": {
      "settings": {
        "url": "/mars/assets/:assetType",
        "title": "mars assets",
        "master": "MarsIdeMasterPage"
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nasync function Block() {\n  if (!Req.user) return executeAppBlock(\n    \"div\",\n    null,\n    \"You are not logged in. Please \",\n    executeAppBlock(\n      \"a\",\n      { href: \"/mars/auth\" },\n      \"Log In or Register\"\n    )\n  );\n\n  return executeAppBlock(\n    Page,\n    _extends({}, Req, thisBlock.Page.settings),\n    executeAppBlock(MongoCollectionTree, { Id: \"MongoCollectionTree1\", title: data.assetType })\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nasync function Block() {\r\n  if (!Req.user) return <div>You are not logged in. Please <a href=\"/mars/auth\">Log In or Register</a></div>\r\n\r\n  return <Page {...Req} {...thisBlock.Page.settings}>\r\n    <MongoCollectionTree Id=\"MongoCollectionTree1\" title={data.assetType} />\r\n  </Page>\r\n}\r\n\r\nexport default <Block />",
    "isSystem": true
  },
  {
    "_id": "5f035a23e11ae12b38811ad4",
    "Name": "AssetFileModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "name"
      },
      {
        "DataType": "file",
        "PropName": "fileUrl",
        "RegExp": ""
      },
      {
        "DataType": "string",
        "PropName": "folder",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "export default <AssetFileModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(AssetFileModel, null);",
    "JsxTranspiled": "",
    "Jsx": "",
    "isSystem": true
  },
  {
    "_id": "5f04696237b5e21f4cd3228d",
    "Name": "MyMasterPage",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div>\r\n      <div class=\"card\" style=\"width: 18rem;\">\r\n        <div class=\"card-body\">\r\n          <h5 class=\"card-title\">Card title</h5>\r\n          <h6 class=\"card-subtitle mb-2 text-muted\">Card subtitle</h6>\r\n          <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\r\n          <a href=\"#\" class=\"card-link\">Card link</a>\r\n          <a href=\"#\" class=\"card-link\">Another link</a>\r\n        </div>\r\n      </div>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default <Page {...Req} master=\"MyMasterPage\">\r\n  <Block />\r\n</Page>",
    "DemoJsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nasync function Block() {\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"card\", style: \"width: 18rem;\" },\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"card-body\" },\n        executeAppBlock(\n          \"h5\",\n          { \"class\": \"card-title\" },\n          \"Card title\"\n        ),\n        executeAppBlock(\n          \"h6\",\n          { \"class\": \"card-subtitle mb-2 text-muted\" },\n          \"Card subtitle\"\n        ),\n        executeAppBlock(\n          \"p\",\n          { \"class\": \"card-text\" },\n          \"Some quick example text to build on the card title and make up the bulk of the card's content.\"\n        ),\n        executeAppBlock(\n          \"a\",\n          { href: \"#\", \"class\": \"card-link\" },\n          \"Card link\"\n        ),\n        executeAppBlock(\n          \"a\",\n          { href: \"#\", \"class\": \"card-link\" },\n          \"Another link\"\n        )\n      )\n    )\n  );\n}\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, { master: \"MyMasterPage\" }),\n  executeAppBlock(Block, null)\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nconst head = executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(\"script\", { src: \"/api/MarsJs\", type: \"module\" }),\n  executeAppBlock(\"link\", { href: \"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap\", rel: \"stylesheet\" }),\n  executeAppBlock(\"link\", { href: \"https://unpkg.com/bootstrap/dist/css/bootstrap.min.css\", rel: \"stylesheet\", type: \"text/css\" }),\n  executeAppBlock(This.style, null),\n  data.head\n);\n\nexport default executeAppBlock(\n  Page,\n  { head: head },\n  executeAppBlock(\n    \"div\",\n    { \"class\": \"container\" },\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"row\" },\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"col-12 p-0\" },\n        executeAppBlock(\n          \"div\",\n          { id: \"PageContent\" },\n          This.children()\n        )\n      )\n    )\n  ),\n  executeAppBlock(Modal, null),\n  executeAppBlock(CmsAdminBtn, null),\n  data.scripts\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nconst head = (\r\n  <Fragment>\r\n    <script src=\"/api/MarsJs\" type=\"module\"></script>\r\n    <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&amp;display=swap\" rel=\"stylesheet\" />\r\n    <link href=\"https://unpkg.com/bootstrap/dist/css/bootstrap.min.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n    <This.style/>\r\n    {data.head}\r\n  </Fragment>\r\n);\r\n\r\nexport default (\r\n  <Page head={head}>\r\n    <div class=\"container\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12 p-0\">\r\n          <div id=\"PageContent\">{This.children()}</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <Modal />\r\n    <CmsAdminBtn />\r\n    {data.scripts}\r\n  </Page>\r\n);\r\n\r\n\r\n",
    "isSystem": true
  },
  {
    "_id": "5f046db65b43561650ff6389",
    "Name": "TestPageWithMaster",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestPageWithMaster />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestPageWithMaster, null);",
    "updatedAt": "2020-08-28T13:03:01.213Z",
    "Page": {
      "settings": {
        "url": "test-page-with-master",
        "title": "Test page with master",
        "master": "MyMasterPage",
        "group": "",
        "icon": ""
      }
    },
    "blocks": {
      "TestCmsBlocks1111111": {
        "prop1": "hey from prop122"
      },
      "undefined": {
        "prop1": "5555"
      },
      "RenderEditorJs1": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "sdfsdfdsfssdfsdfssdfssss112",
              "level": 2
            }
          },
          {
            "type": "table",
            "data": {
              "content": [
                [
                  "sdf",
                  "s"
                ],
                [
                  "sdf",
                  "ss"
                ]
              ]
            }
          }
        ]
      },
      "Wysiwyg1": {
        "content": [
          {
            "type": "paragraph",
            "data": {
              "text": "dfsfsdfsdf"
            }
          },
          {
            "type": "list",
            "data": {
              "style": "ordered",
              "items": [
                "sdf",
                "sdf",
                "sd",
                "df",
                "s",
                "s",
                "s",
                "ss"
              ]
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "sdf"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          },
          {
            "type": "paragraph",
            "data": {
              "text": "s"
            }
          }
        ]
      }
    },
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  Page,\n  _extends({}, Req, thisBlock.Page.settings),\n  executeAppBlock(Wysiwyg, { Id: \"Wysiwyg1\" }),\n  executeAppBlock(TestCmsBlocks1, { Id: \"TestCmsBlocks1111111\" }),\n  executeAppBlock(PageAdminActions, { actions: [{\n      title: 'edit block1',\n      blockId: 'TestCmsBlocks1111111',\n      modelName: 'TestCmsBlocks1'\n    }, {\n      title: 'edit wisywig block',\n      blockId: 'Wysiwyg1'\n    }] }),\n  executeAppBlock(This.html, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\r\n\r\nexport default <Page {...Req} {...thisBlock.Page.settings}>\r\n  <Wysiwyg Id=\"Wysiwyg1\" />\r\n\r\n  <TestCmsBlocks1 Id=\"TestCmsBlocks1111111\" />\r\n  <PageAdminActions actions={[{\r\n    title: 'edit block1',\r\n    blockId: 'TestCmsBlocks1111111',\r\n    modelName: 'TestCmsBlocks1'\r\n  }, {\r\n    title: 'edit wisywig block',\r\n    blockId: 'Wysiwyg1'\r\n  }]} />\r\n  <This.html />\r\n</Page>",
    "Html": "<div>\r\n\t<div class=\"card\" style=\"width: 18rem;\">\r\n\t\t<div class=\"card-body\">\r\n\t\t\t<h5 class=\"card-title\">Card title</h5>\r\n\t\t\t<h6 class=\"card-subtitle mb-2 text-muted\">Card subtitle</h6>\r\n\t\t\t<p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's\r\n\t\t\t\tcontent.</p>\r\n\t\t\t<a href=\"#\" class=\"card-link\">Card link</a>\r\n\t\t\t<a href=\"#\" class=\"card-link\">Another link</a>\r\n\t\t</div>\r\n\t</div>\r\n</div>.",
    "isSystem": true
  },
  {
    "_id": "5ef3cd31acabbb2318176e5c",
    "Name": "CacheConfig",
    "Title": "CacheConfig",
    "Type": "settings",
    "Apps": [],
    "Folder": "general",
    "DataArgs": [
      {
        "DataType": "int",
        "PropName": "ttl",
        "Description": "Cache TTL in seconds"
      },
      {
        "DataType": "string",
        "PropName": "dynamoDbTableName",
        "Description": "Cache table name in DynamoDB"
      },
      {
        "DataType": "string",
        "PropName": "s3BucketName",
        "Description": "Cache bucket name in Amazon S3"
      },
      {
        "DataType": "string",
        "PropName": "s3BucketPathPrefix",
        "Description": "Path prefix in Amazon S3 bucket"
      }
    ],
    "DemoJsx": "export default <CacheConfig />",
    "DemoJsxTranspiled": "export default executeAppBlock(CacheConfig, null);",
    "updatedAt": "2020-06-24T22:23:06.706Z",
    "Config": {
      "ttl": 1800,
      "dynamoDbTableName": "mars-cache",
      "s3BucketName": "marscode",
      "s3BucketPathPrefix": "mars/cache/"
    },
    "isSystem": true
  },
  {
    "_id": "5ef486fd99a3d437e427a96b",
    "Name": "SessionService",
    "Title": "SessionService",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [],
    "DemoJsx": "",
    "DemoJsxTranspiled": "",
    "BlockFunction": "const AWS = require('aws-sdk');\nfunction getTtl(maxAge) {\n  return (new Date()).getTime() + maxAge * 1000;\n}\n\nclass MemoryCache {\n  constructor(ttl = 60, checkInterval = 5) {\n    this.ttl = ttl;\n    this.sessions = new Map();\n\n    const self = this;\n    this.timer = setInterval(() => {\n      const timestamp = (new Date()).getTime();\n      for (let key of self.sessions.keys()) {\n        if (self.sessions.get(key).ttl <= timestamp) {\n          self.destroy.call(self, key);\n        }\n      }\n    }, checkInterval * 1000);\n  }\n\n  get(sessionId, version) {\n    if (!this.sessions.has(sessionId)) {\n      return undefined;\n    }\n\n    const session = this.sessions.get(sessionId);\n    if (session) {\n      if (session.version === version) {\n        session.ttl = getTtl(this.ttl);\n        return session.data;\n      }\n\n      this.destroy(sessionId);\n    }\n\n    return undefined;\n  }\n\n  set(sessionId, version, data) {\n    this.sessions.set(sessionId, {\n      ttl: getTtl(this.ttl),\n      version,\n      data,\n    });\n  }\n\n  destroy(sessionId) {\n    this.sessions.delete(sessionId);\n  }\n}\n\nclass MemorySessionStore {\n  constructor(maxAge, checkInterval = 5) {\n    this.maxAge = maxAge;\n    this.sessions = new Map();\n\n    const self = this;\n    this.timer = setInterval(() => {\n      const timestamp = (new Date()).getTime();\n      for (let key of self.sessions.keys()) {\n        if (self.sessions.get(key).ttl <= timestamp) {\n          self.destroy.call(self, key);\n        }\n      }\n\n    }, checkInterval * 1000);\n  }\n\n  touch(sessionId) {\n    const session = this.get(sessionId);\n    if (!session) {\n      return;\n    }\n\n    session.ttl = getTtl(this.maxAge);\n  }\n\n  get(sessionId) {\n    if (!this.sessions.has(sessionId)) {\n      return undefined;\n    }\n\n    const session = this.sessions.get(sessionId);\n    return session ? [session.data, session.version] : [{}, 1];\n  }\n\n  set(sessionId, version, data) {\n    this.sessions.set(sessionId, {\n      ttl: getTtl(this.maxAge),\n      version,\n      data,\n    });\n  }\n\n  destroy(sessionId) {\n    this.sessions.delete(sessionId);\n  }\n}\n\nclass DynamodbSessionStore {\n  constructor(maxAge, tableName, partitionKey, sortKey, ttlColumn, versionColumn, dataColumn) {\n    this.maxAge = maxAge;\n    this.tableName = tableName;\n    this.partitionKey = partitionKey;\n    this.sortKey = sortKey;\n    this.ttlColumn = ttlColumn;\n    this.versionColumn = versionColumn;\n    this.dataColumn = dataColumn;\n    this.db = new AWS.DynamoDB.DocumentClient();\n  }\n\n  touch(sessionId) {\n    return;\n    /*\n    const key = {};\n    key[`${this.partitionKey}`] = 'session';\n    key[`${this.sortKey}`] = sessionId;\n\n    this.db.update({\n      TableName: this.tableName,\n      Key: key,\n      UpdateExpression: `set #ttl = :ttl`,\n      ExpressionAttributeValues: { ':ttl': getTtl(this.maxAge) },\n      ExpressionAttributeNames: { '#ttl': this.ttlColumn, '#sortKey': this.sortKey },\n      ConditionExpression: 'attribute_exists(#sortKey)',\n    }).promise()\n      .catch(ex => {});\n    */\n  }\n\n  async get(sessionId) {\n    const key = {};\n    key[this.partitionKey] = 'session';\n    key[this.sortKey] = sessionId;\n\n    const data = await this.db.get({ TableName: this.tableName, Key: key }).promise();\n    let value = [{}, 1];\n    if (data.Item && data.Item[this.dataColumn]) {\n      value = [JSON.parse(data.Item[this.dataColumn].toString('utf-8')), parseInt(data.Item[this.versionColumn]) || 1];\n    }\n\n    return value;\n  }\n\n  async set(sessionId, version, data) {\n    const item = {};\n    item[this.partitionKey] = 'session';\n    item[this.sortKey] = sessionId;\n    item[this.ttlColumn] = getTtl(this.maxAge);\n    item[this.versionColumn] = version;\n    item[this.dataColumn] = Buffer.from(JSON.stringify(data));\n\n    await this.db.put({ TableName: this.tableName, Item: item }).promise();\n  }\n\n  async destroy(sessionId) {\n    const key = {};\n    key[this.partitionKey] = 'session';\n    key[this.sortKey] = sessionId;\n\n    await this.db.delete({ TableName: this.tableName, Key: key }).promise();\n  }\n}\n\nclass Session {\n  constructor(sessionId, version, ttl, store, cache = null) {\n    this.sessionId = sessionId;\n    this.version = version;\n    this.data = {};\n\n    this.ttl = ttl;\n    this.store = store;\n    this.cache = cache;\n    this.changed = false;\n  }\n\n  /** Updates the cookie TTL */\n  async touch() {\n    return this.store.touch(this.sessionId);\n  }\n\n  /** Destroys the session and unsets session cookie. Usually used for logout. Generates a new sessionId and empty session data */\n  async destroy() {\n    if (this.cache) {\n      this.cache.destroy(this.sessionId);\n    }\n\n    await this.store.destroy(this.sessionId);\n    this.sessionId = Mars.libs.uuid();\n    this.version = 1;\n    this.data = {};\n  }\n\n  /** Loads session data from the store and populates the session object */\n  async load() {\n    if (this.cache) {\n      this.data = this.cache.get(this.sessionId, this.version);\n      if (this.data) {\n        return;\n      }\n    }\n\n    [this.data, this.version] = (await this.store.get(this.sessionId)) || {};\n    if (this.cache) {\n      this.cache.set(this.sessionId, this.version, this.data);\n    }\n  }\n\n  /** Save the session back to the store, replacing the contents on the store with the contents in memory in case if changes exist */\n  async save() {\n    if (!this.changed) {\n      return;\n    }\n\n    if (this.cache) {\n      this.cache.set(this.sessionId, this.version, this.data);\n    }\n\n    return this.store.set(this.sessionId, this.version, this.data);\n  }\n}\n\nclass SessionService {\n  constructor(\n    sessionCookieName,\n    sessionVersionCookieName,\n    maxAge = 24 * 60 * 60,\n    storeType = 'memory',\n    disableForGuests = false,\n    cacheConfig = { ttl: 60, checkInterval: 5 },\n    memoryConfig = null,\n    dynamodbConfig = null,\n  ) {\n    this.sessionCookieName = sessionCookieName;\n    this.sessionVersionCookieName = sessionVersionCookieName;\n    this.maxAge = maxAge;\n    this.storeType = storeType;\n    this.disableForGuests = disableForGuests;\n    this.cacheConfig = cacheConfig;\n    this.memoryConfig = memoryConfig;\n    this.dynamodbConfig = dynamodbConfig;\n    this.store = this._getStore();\n    console.log(`### Init SessionService. StoreType: ${this.storeType}, cacheConfig.ttl: ${this.cacheConfig.ttl}, cacheConfig.checkInterval: ${this.cacheConfig.checkInterval}`);\n    this.cache = this.storeType === 'memory' ? undefined : new MemoryCache(this.cacheConfig.ttl, this.cacheConfig.checkInterval);\n  }\n\n  _getStore() {\n    switch (this.storeType) {\n      case 'memory':\n        return new MemorySessionStore(this.maxAge, this.memoryConfig && this.memoryConfig.checkInterval ? this.memoryConfig.checkInterval : 5);\n      case 'dynamodb':\n        if (this.dynamodbConfig) {\n          return new DynamodbSessionStore(\n            this.dynamodbConfig.maxAge || 86400,\n            this.dynamodbConfig.tableName || 'sessions',\n            this.dynamodbConfig.partitionKey || 'pk',\n            this.dynamodbConfig.sortKey || 'sessionId',\n            this.dynamodbConfig.ttlColumn || 'ttl',\n            this.dynamodbConfig.versionColumn || 'version',\n            this.dynamodbConfig.dataColumn || 'data',\n          );\n        }\n\n        throw new Error('Setup session dynamodb config in \"SessionConfig\"');\n      default:\n        throw new Error('Unknown session storeType');\n    }\n  }\n\n  async openSession(request) {\n    if (this.disableForGuests && !request.user) {\n      return;\n    }\n\n    // get from cookie or generate new Id\n    let sessionId;\n    let sessionVersion;\n    if (request && request.cookies) {\n      sessionId = request.cookies[this.sessionCookieName] || Mars.libs.uuid();\n      sessionVersion = parseInt(request.cookies[this.sessionVersionCookieName]) || 1;\n    }\n\n    const sessionObj = new Session(sessionId || Mars.libs.uuid(), sessionVersion || 1, getTtl(this.maxAge), this.store, this.cache);\n    await sessionObj.load();\n    await sessionObj.touch();\n\n    const sessionProxy = new Proxy(sessionObj, {\n      get(target, propertyKey, receiver) {\n        if (\n          propertyKey in target &&\n          (typeof target[propertyKey] === 'function' || ['changed', 'data', 'store', 'sessionId', 'version'].includes(propertyKey))\n        ) {\n          return Reflect.get(target, propertyKey, receiver);\n        }\n\n        return target.data[propertyKey];\n      },\n      set(target, propertyKey, value, receiver) {\n        target.changed = true;\n        target.version++;\n        target.data[propertyKey] = value;\n        // Reflect.set(target, propertyKey, value, receiver);\n        return true;\n      },\n      deleteProperty(target, propertyKey) {\n        target.changed = true;\n        return Reflect.deleteProperty(target.data, propertyKey);\n      },\n      ownKeys: function (target) {\n        return Reflect.ownKeys(target.data);\n      },\n      has: function (target, propertyKey) {\n        return Reflect.has(target.data, propertyKey);\n      },\n      defineProperty: function (target, propertyKey, descriptor) {\n        target.changed = true;\n        return Reflect.defineProperty(target.data, propertyKey, descriptor);\n      },\n    });\n\n    Object.defineProperty(request, 'session', {\n      value: sessionProxy,\n      writable: false,\n    });\n  }\n\n  async closeSession(request) {\n    if (!request || !request.session) {\n      return;\n    }\n\n    await request.session.save();\n    request.response.cookie(this.sessionCookieName, request.session.sessionId, this.maxAge);\n    request.response.cookie(this.sessionVersionCookieName, request.session.version, this.maxAge);\n  }\n}\n\nfunction server() {\n  const appConfig = Mars.settings.AppSettings;\n  if (!appConfig || !appConfig.enableSessions) {\n    return undefined;\n  }\n\n  const sessionConfig = Mars.settings.SessionConfig;\n  if (!sessionConfig) {\n    return undefined;\n  }\n\n  return new SessionService(\n    sessionConfig.sessionCookieName || 'sessionId',\n    sessionConfig.sessionVersionCookieName || 'sessionVersion',\n    sessionConfig.maxAge || 86400,\n    sessionConfig.storeType || 'memory',\n    sessionConfig.disableForGuests || false,\n    sessionConfig.cache || { ttl: 60, checkInterval: 5 },\n    sessionConfig.memory,\n    sessionConfig.dynamodb,\n  );\n}\n",
    "TestCode": "test('session test', async () => {\n  const item1 = { a: 1, b: 4 };\n  // const item2 = { x: 'x', y: 100, z: 'z' };\n  // const item3 = { q: 'qqq', w: 'www' };\n\n  console.log(Req.session);\n  Req.session.aaa = item1;\n  // console.log(Req.session);\n  // await Req.session.save();\n  // console.log(Req.session);\n  // // delete Req.session.aaa;\n  // console.log(Req.session.aaa);\n  // expect(Req.session.aaa).toEqual(item1);\n});\n",
    "isSystem": true
  },
  {
    "_id": "5f04944fe57ac2146dad2df6",
    "Name": "HandleRequest",
    "Title": "HandleRequest",
    "Type": "service",
    "Apps": [],
    "Folder": "mars engine",
    "DataArgs": [],
    "DemoJsx": "export default Req.cookies",
    "DemoJsxTranspiled": "export default Req.cookies;",
    "BlockFunction": "function getCookiesFromHeader(cookies) {\r\n  if (cookies === null || cookies === undefined || !cookies) {\r\n    return {};\r\n  }\r\n\r\n  const list = {}, rc = cookies;\r\n\r\n  rc && rc.split(';').forEach(function (cookie) {\r\n    const parts = cookie.split('=');\r\n    const key = parts.shift().trim();\r\n    const value = decodeURIComponent(parts.join('='));\r\n    if (key != '') {\r\n      list[key] = value;\r\n    }\r\n  });\r\n\r\n  return list;\r\n};\r\n\r\nclass Response {\r\n  statusCode = 200;\r\n  get headers() {\r\n    return this._headers;\r\n  }\r\n\r\n  constructor() {\r\n    Object.defineProperty(this, '_headers', {\r\n      value: {},\r\n      writable: false,\r\n    });\r\n  }\r\n\r\n  cookie(key, value, maxAge) {\r\n    this._headers['Set-Cookie'] = this._headers['Set-Cookie'] || [];\r\n    this._headers['Set-Cookie'].push(`${key}=${value}; Path=/; Max-Age=${maxAge || '365000'};`);\r\n  }\r\n\r\n  header(key, value) {\r\n    this._headers[key] = this._headers[key] || [];\r\n    this._headers[key].push(value);\r\n  }\r\n\r\n  contentType(type) {\r\n    this._headers['Content-Type'] = type;\r\n  }\r\n}\r\n\r\nasync function server() {\r\n  const { event } = data;\r\n  Object.defineProperty(event, 'response', {\r\n    value: new Response(),\r\n    writable: false,\r\n  });\r\n\r\n  // parse cookies\r\n  event.cookies = getCookiesFromHeader(event.headers.cookie || event.headers.Cookie);\r\n\r\n  if (event.headers['CloudFront-Is-Mobile-Viewer'] === \"true\")\r\n    event.device = 'mobile';\r\n  else if (event.headers['CloudFront-Is-Tablet-Viewer'] === \"true\")\r\n    event.device = 'tablet';\r\n\r\n  if (!event.device) {\r\n    event.device = 'desktop';\r\n  }\r\n\r\n  // add query string to path\r\n  if (event.queryStringParameters && JSON.stringify(event.queryStringParameters).length > 4) {\r\n    const qs = Object.keys(event.queryStringParameters).map(t => `${t}=${event.queryStringParameters[t]}`).join('&')\r\n    event.path += `?${qs}`\r\n  }\r\n\r\n  // inject user into request\r\n  const token = event.cookies.mars_token;\r\n  if (token) {\r\n    event.user = await Mars.services.GetUserByToken({ token });\r\n  }\r\n\r\n  // open session\r\n  if (Mars.sessionService) {\r\n    await Mars.sessionService.openSession(event);\r\n  }\r\n}",
    "isSystem": true
  },
  {
    "_id": "5ef4f18e4ab55f5306f45760",
    "Name": "SessionConfig",
    "Title": "SessionConfig",
    "Type": "settings",
    "Apps": [],
    "Folder": "general",
    "DataArgs": [
      {
        "DataType": "boolean",
        "PropName": "disableForGuests",
        "DefaultValue": false,
        "RegExp": "",
        "Description": "Disable session if user is not logged in",
        "SuggestOptions": false
      },
      {
        "DataType": "int",
        "PropName": "maxAge",
        "RegExp": "",
        "Description": "Number of seconds until the session cookie expires",
        "DefaultValue": "86400"
      },
      {
        "DataType": "string",
        "PropName": "storeType",
        "SuggestOptions": true,
        "Options": [
          {
            "Key": "memory",
            "Value": "memory"
          },
          {
            "Key": "dynamodb",
            "Value": "dynamodb"
          }
        ],
        "DefaultValue": "memory"
      },
      {
        "DataType": "string",
        "PropName": "sessionCookieName",
        "DefaultValue": "sessionId",
        "Description": "Cookie name for session key"
      },
      {
        "DataType": "string",
        "PropName": "sessionVersionCookieName",
        "Description": "Name of cookie for session version. Used to resolve pre-cached session versions between application instances.",
        "DefaultValue": "sessionVersion"
      },
      {
        "DataType": "object",
        "PropName": "cache",
        "Description": "Memory cache with short TTL, used to reduce remote store calls (not applicable for memory cache).",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "ttl",
            "RegExp": "Amount of seconds to keep session pre-cached. Don't set up a high value to avoid memory overload. Use 0 to disable the feature.",
            "DefaultValue": "60",
            "Description": "TTL (in seconds) to keep session in memory cache"
          },
          {
            "DataType": "int",
            "PropName": "checkInterval",
            "DefaultValue": "5",
            "Description": "Interval (in seconds) to check and remove sessions with expired TTL. The value must be less than TTL.",
            "RegExp": ""
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "memory",
        "Description": "Memory store config.",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "checkInterval",
            "DefaultValue": "5",
            "Description": "Interval (in seconds) to check and remove expired sessions. The value must be less than maxAge.",
            "RegExp": ""
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "dynamodb",
        "RegExp": "",
        "Description": "DynamoDB store config. Don't forget to create index by Primary Key and TTL column",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "tableName",
            "Description": "Session table name"
          },
          {
            "DataType": "string",
            "PropName": "partitionKey",
            "Description": "Table Partition Key name (will be used filled with the static value \"session\")",
            "DefaultValue": "pk"
          },
          {
            "DataType": "string",
            "PropName": "sortKey",
            "Description": "Table Sort Key name (will be used for sessionId values)",
            "DefaultValue": "sessionId"
          },
          {
            "DataType": "string",
            "PropName": "ttlColumn",
            "Description": "Table TTL column name (to store session expiration date)",
            "DefaultValue": "ttl"
          },
          {
            "DataType": "string",
            "PropName": "versionColumn",
            "Description": "Table version column name (to store session version number)",
            "DefaultValue": "ttl"
          },
          {
            "DataType": "string",
            "PropName": "dataColumn",
            "Description": "Table data column name (to store session data)",
            "DefaultValue": "data"
          }
        ]
      }
    ],
    "DemoJsx": "export default <SessionConfig />",
    "DemoJsxTranspiled": "export default executeAppBlock(SessionConfig, null);",
    "Config": {
      "disableForGuests": true,
      "maxAge": 86400,
      "storeType": "dynamodb",
      "sessionCookieName": "sessionId",
      "sessionVersionCookieName": "sessionVersion",
      "cache": {
        "ttl": 60,
        "checkInterval": 5
      },
      "memory": {
        "checkInterval": 5
      },
      "dynamodb": {
        "tableName": "mars-sessions",
        "partitionKey": "pk",
        "sortKey": "sessionId",
        "ttlColumn": "ttl",
        "versionColumn": "version",
        "dataColumn": "data"
      }
    },
    "updatedAt": "2020-06-27T15:02:08.380Z",
    "isSystem": true
  },
  {
    "_id": "5f049476e57ac2146dad2df7",
    "Name": "AfterCacheInit",
    "Title": "AfterCacheInit",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [],
    "DemoJsx": "export default <AfterCacheInit />",
    "DemoJsxTranspiled": "export default executeAppBlock(AfterCacheInit, null);",
    "BlockFunction": "async function server() {\r\n  await Mars.services.LoadExternalAppBlocks({ blocks:Mars.blocks, pages:Mars.pages });\r\n\r\n  return {\r\n    data: await Mars.services.MongoDb(),\r\n    cache: Mars.services.CacheService(),\r\n    helpers: Mars.services.Helpers(),\r\n    sessionService: Mars.services.SessionService(),\r\n  };\r\n}\r\n",
    "isSystem": true,
    "cloned": {
      "timestamp": "2020-06-26T15:41:59.029Z"
    }
  },
  {
    "_id": "5ef620996d1dd487797fddeb",
    "Name": "HandleResponse",
    "Type": "service",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [],
    "DemoJsx": "export default <HandleResponse />",
    "DemoJsxTranspiled": "export default executeAppBlock(HandleResponse, null);",
    "BlockFunction": "async function server() {\n  const { request } = data;\n\n  if (Mars.sessionService) {\n    await Mars.sessionService.closeSession(request);  // close session\n  }\n}",
    "isSystem": true
  },
  {
    "_id": "5f073701a15658333c318c92",
    "Name": "DeletedDocumentModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [],
    "DemoJsx": "export default <DeletedDocumentModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(DeletedDocumentModel, null);",
    "JsxTranspiled": "let title;\nconst tableConfig = Mars.settings.MongoConfig.collections.find(t => t.name === data._originalCollection);\n\nexport default data.preview ? `${data[tableConfig.titleField]} <small class=\"pl-1 text-muted\">${Mars.libs.moment(data._deletedAt).fromNow()}</small>` : executeAppBlock(\n  \"pre\",\n  null,\n  executeAppBlock(\n    \"code\",\n    null,\n    JSON.stringify(data, null, 2)\n  )\n);",
    "Jsx": "let title;\r\nconst tableConfig = Mars.settings.MongoConfig.collections.find(t => t.name === data._originalCollection);\r\n\r\nexport default data.preview ?\r\n  `${data[tableConfig.titleField]} <small class=\"pl-1 text-muted\">${Mars.libs.moment(data._deletedAt).fromNow()}</small>`\r\n  : <pre><code>{JSON.stringify(data, null, 2)}</code></pre>",
    "isSystem": true
  },
  {
    "_id": "5f073a93a15658333c318c93",
    "Name": "IncrementModel",
    "Type": "model",
    "Apps": [],
    "Folder": "models",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "_id"
      },
      {
        "DataType": "int",
        "PropName": "sequence_value",
        "RegExp": ""
      }
    ],
    "DemoJsx": "export default <IncrementModel />",
    "DemoJsxTranspiled": "export default executeAppBlock(IncrementModel, null);",
    "updatedAt": "2020-07-09T15:41:32.224Z",
    "isSystem": true
  },
  {
    "_id": "5f0f100c61f2b62ccc59df3f",
    "Name": "TestPuppeteer",
    "Type": "service",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  await Mars.services.TestPuppeteer()\r\n}\r\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n  await Mars.services.TestPuppeteer();\n}\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "async function server() {\r\n  const puppeteer = require('puppeteer')\r\n  const expect = require('expect-puppeteer')\r\n  const browser = await puppeteer.launch({ headless: false })\r\n  const page = await browser.newPage()\r\n  await page.setViewport({ width: 1366, height: 768 });\r\n  await page.goto('http://localhost:8888/mars/ide/TestPuppeteer')\r\n  await expect(page).toMatch('MARS')\r\n  await expect(page).toClick('#MarsIdeNavPanel_vue > div > div > button')\r\n  await expect(page).toFill('#MarsIdeNavPanel_vue > div > div > ul > li > form > fieldset:nth-child(1) > div > input', 'Test555511111111')\r\n  await page.screenshot({ path: 'example1.png' });\r\n  await expect(page).toClick('button', { text: 'Create' })\r\n  await page.waitFor(2000);\r\n  await expect(page).toClick('#NestedTree1 > ul > li:nth-child(1) > ul > li:nth-child(1) > div > a')\r\n  await page.waitFor(2000);\r\n  await expect(page).toMatch('Test55551111111')\r\n  await page.screenshot({ path: 'example2.png' });\r\n\r\n  await page.goto('http://localhost:8888/mars/ide/TestPuppeteer')\r\n  await expect(page).toMatch('MARS')\r\n  await expect(page).toClick('#MarsIdeNavPanel_vue > div > div > button')\r\n  await expect(page).toFill('#MarsIdeNavPanel_vue > div > div > ul > li > form > fieldset:nth-child(1) > div > input', 'Test555511111122')\r\n  await page.screenshot({ path: 'example1.png' });\r\n  await expect(page).toClick('button', { text: 'Create' })\r\n  await page.waitFor(2000);\r\n  await expect(page).toClick('#NestedTree1 > ul > li:nth-child(1) > ul > li:nth-child(1) > div > a')\r\n  await page.waitFor(2000);\r\n  await expect(page).toMatch('Test55551111112')\r\n  await page.screenshot({ path: 'example2.png' });\r\n\r\n\r\n  //await browser.close()\r\n  console.log('done')\r\n}",
    "TestCode": "test('test puppeteer', async () => {\r\n  const puppeteer = require('puppeteer')\r\n  const expect = require('expect-puppeteer')\r\n  const browser = await puppeteer.launch({ headless: false })\r\n  const page = await browser.newPage()\r\n  await page.setViewport({ width: 1366, height: 768 });\r\n  await page.goto('http://localhost:8888/mars/ide/TestPuppeteer')\r\n  await expect(page).toMatch('MARS')\r\n  await expect(page).toClick('#MarsIdeNavPanel_vue > div > div > button')\r\n  await expect(page).toFill('#MarsIdeNavPanel_vue > div > div > ul > li > form > fieldset:nth-child(1) > div > input', 'Test555511111111')\r\n  await page.screenshot({ path: 'example1.png' });\r\n  await expect(page).toClick('button', { text: 'Create' })\r\n  await page.waitFor(2000);\r\n  await expect(page).toClick('#NestedTree1 > ul > li:nth-child(1) > ul > li:nth-child(1) > div > a')\r\n  await page.waitFor(2000);\r\n  await expect(page).toMatch('Test55551111111')\r\n  await page.screenshot({ path: 'example2.png' });\r\n\r\n  await page.goto('http://localhost:8888/mars/ide/TestPuppeteer')\r\n  await expect(page).toMatch('MARS')\r\n  await expect(page).toClick('#MarsIdeNavPanel_vue > div > div > button')\r\n  await expect(page).toFill('#MarsIdeNavPanel_vue > div > div > ul > li > form > fieldset:nth-child(1) > div > input', 'Test555511111122')\r\n  await page.screenshot({ path: 'example1.png' });\r\n  await expect(page).toClick('button', { text: 'Create' })\r\n  await page.waitFor(2000);\r\n  await expect(page).toClick('#NestedTree1 > ul > li:nth-child(1) > ul > li:nth-child(1) > div > a')\r\n  await page.waitFor(2000);\r\n  await expect(page).toMatch('Test55551111112')\r\n  await page.screenshot({ path: 'example2.png' });\r\n\r\n})",
    "isSystem": true
  },
  {
    "_id": "5f0f224e1e518036e4a9c6ab",
    "Name": "TestEmptyBlock2",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestEmptyBlock />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestEmptyBlock, null);",
    "BlockFunction": "function server() {\r\n  return {d:3}\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nexport default executeAppBlock(This.script, null);",
    "Jsx": "const { serverData, This} = Mars.initJsx()\r\nexport default <This.script />",
    "Script": "window.ttt = 32\r\n\r\nexport let tt = 123;",
    "isSystem": true
  },
  {
    "_id": "5f196516aede720b68076811",
    "Name": "ImportedAppsSettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "general",
    "DataArgs": [
      {
        "DataType": "array",
        "PropName": "Apps",
        "RegExp": "",
        "CollapseField": "name",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "string",
            "PropName": "api_key",
            "NullAllowed": true
          },
          {
            "DataType": "text",
            "PropName": "blocks",
            "RegExp": "",
            "Description": "enter each block name on a new line",
            "NullAllowed": true
          },
          {
            "DataType": "string",
            "PropName": "url"
          }
        ]
      }
    ],
    "DemoJsx": "export default <ImportedAppsSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(ImportedAppsSettings, null);",
    "updatedAt": "2020-07-23T17:00:14.949Z",
    "Config": {
      "Apps": []
    },
    "isSystem": true
  },
  {
    "_id": "5f1966cdaede720b68076812",
    "Name": "GetExternalAppBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "import \\ export",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "app_name"
      },
      {
        "DataType": "string",
        "PropName": "api_key",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "export default <GetExternalAppBlocks />",
    "DemoJsxTranspiled": "export default executeAppBlock(GetExternalAppBlocks, null);",
    "updatedAt": "2020-07-23T10:31:13.278Z",
    "BlockFunction": "async function server() {\r\n  return [\r\n    { Key: 'block' + data.app_name, Value: 'block' + data.app_name },\r\n    { Key: 'block1', Value: 'block 1' },\r\n    { Key: 'block2', Value: 'block 2' },\r\n  ]\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f19779daede720b68076813",
    "Name": "SecuritySettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "core",
    "DataArgs": [
      {
        "DataType": "object",
        "PropName": "export",
        "NullAllowed": true,
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "api_key",
            "NullAllowed": true
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "ide",
        "RegExp": "",
        "SubArgs": [
          {
            "DataType": "boolean",
            "PropName": "protected",
            "RegExp": ""
          }
        ]
      }
    ],
    "DemoJsx": "export default <AppExportSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(AppExportSettings, null);",
    "updatedAt": "2020-07-23T11:56:40.644Z",
    "Config": {
      "export": {
        "api_key": "sdfsd45sdf45sdf45sdf"
      },
      "ide": {
        "protected": true
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f197bc2aede720b68076814",
    "Name": "GetExportedAppBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "import \\ export",
    "DataArgs": [],
    "DemoJsx": "export default <GetExportedAppBlocks />",
    "DemoJsxTranspiled": "export default executeAppBlock(GetExportedAppBlocks, null);",
    "BlockFunction": "function server() {\r\n  if (data.api_key !== Mars.settings.SecuritySettings.export.api_key) throw new Error('You must supply valid api_key')\r\n  return Mars.allBlocks.filter(t => !t.isSystem);\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f197fe5faa0b706504182cf",
    "Name": "LoadExternalAppBlocks",
    "Type": "service",
    "Apps": [],
    "Folder": "import \\ export",
    "DataArgs": [],
    "DemoJsx": "export default <LoadExternalAppBlocks />",
    "DemoJsxTranspiled": "export default executeAppBlock(LoadExternalAppBlocks, null);",
    "BlockFunction": "async function server() {\r\n  if (Mars.allBlocks.find(t => t.Name === 'ImportedAppsSettings').isSystem) return true;\r\n  const externalApps = Mars.settings.ImportedAppsSettings.Apps\r\n  for (const externalApp of externalApps) {\r\n    try {\r\n      const externalAppBlocks = (await Mars.libs.axios(`${externalApp.url}/api/GetExportedAppBlocks?api_key=${externalApp.api_key || ''}`)).data;\r\n\r\n      externalAppBlocks.forEach(t => t.Folder = `_external/${externalApp.name}/${t.Folder}`)\r\n\r\n      await Mars.services.InitBlocks({ blocksArr: externalAppBlocks, blocks: data.blocks, pages: data.pages });\r\n      Mars.allBlocks.push(...externalAppBlocks)\r\n    } catch (e) {\r\n      console.error(e.message || e)\r\n    }\r\n  }\r\n  return true\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f24197ef95b1d1e2cbed788",
    "Name": "TestCmsBlocks1",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [
      {
        "DataType": "string",
        "PropName": "prop1"
      }
    ],
    "DemoJsx": "export default <TestCmsBlocks1 />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestCmsBlocks1, null);",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction Block() {\n  return executeAppBlock(\n    'div',\n    { id: data.Id },\n    executeAppBlock(\n      'p',\n      null,\n      'hey from test cms block ',\n      data['admin-actions']\n    ),\n    executeAppBlock(\n      'h1',\n      null,\n      'Prop1: ',\n      data.prop1\n    ),\n    executeAppBlock(This.script, null)\n  );\n}\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nfunction Block() {\r\n  return (<div id={data.Id}>\r\n    <p>hey from test cms block {data['admin-actions']}</p>\r\n    <h1>Prop1: {data.prop1}</h1>\r\n    <This.script />\r\n  </div>);\r\n}\r\nexport default <Block />;\r\n",
    "updatedAt": "2020-08-04T12:34:40.969Z",
    "Script": "new MarsBlock('XID', data, {})",
    "isSystem": true
  },
  {
    "_id": "5f2954f95ed6eb3cd4269309",
    "Name": "PageAdminActions",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <PageAdminActions />",
    "DemoJsxTranspiled": "export default executeAppBlock(PageAdminActions, null);",
    "JsxTranspiled": "if (!Req.user) Mars.render;\n\nconst { This } = Mars.initJsx();\nfunction getObjectId(t) {\n  return t.objectId || (Req.Page.Props && Req.Page.Props.currentBlockName ? Mars.allBlocks.find(t => t.Name === Req.Page.Props.currentBlockName)._id : Req.Page._id);\n}\n\nfunction getOnClick(t) {\n  const path = `blocks.${t.blockId}.content`;\n  // if no modelname it means it is RenderJs block and we show wysiwyg\n  if (!t.modelName) return `Modal.open('/api/EditorJs?afterSave=${t.blockId}.api.reload()&collection=blocks&path=${t.path || path}&objectId=${getObjectId(t)}', { hideModalHeader: true }); event.preventDefault()`;\n  return `Modal.open('/api/EditBlockDataOnPage?collection=blocks&modelName=${t.modelName}&objectId=${getObjectId(t)}&path=blocks.${t.blockId}', {title: 'Edit block'})`;\n}\n\nexport default executeAppBlock(\n  \"div\",\n  { \"class\": \"page-admin-actions\" },\n  executeAppBlock(\n    This.html,\n    null,\n    data.actions.map(t => executeAppBlock(\n      \"button\",\n      { \"class\": \"page-admin-actions btn btn-light btn-block\", onmouseover: `highlightBlock('${t.blockId}')`, onmouseout: \"resetHighlightBlock()\", onclick: getOnClick(t) },\n      \" \",\n      t.title\n    ))\n  ),\n  executeAppBlock(This.style, null),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "if (!Req.user) Mars.render\r\n\r\nconst { This } = Mars.initJsx();\r\nfunction getObjectId(t) {\r\n  return t.objectId || (\r\n    Req.Page.Props && Req.Page.Props.currentBlockName ? Mars.allBlocks.find(t => t.Name === Req.Page.Props.currentBlockName)._id : Req.Page._id\r\n  )\r\n}\r\n\r\nfunction getOnClick(t) {\r\n  const path = `blocks.${t.blockId}.content`;\r\n  // if no modelname it means it is RenderJs block and we show wysiwyg\r\n  if (!t.modelName) return `Modal.open('/api/EditorJs?afterSave=${t.blockId}.api.reload()&collection=blocks&path=${t.path || path}&objectId=${getObjectId(t)}', { hideModalHeader: true }); event.preventDefault()`;\r\n  return `Modal.open('/api/EditBlockDataOnPage?collection=blocks&modelName=${t.modelName}&objectId=${getObjectId(t)}&path=blocks.${t.blockId}', {title: 'Edit block'})`\r\n}\r\n\r\nexport default <div class=\"page-admin-actions\">\r\n  <This.html>\r\n    {data.actions.map(t => <button class=\"page-admin-actions btn btn-light btn-block\" onmouseover={`highlightBlock('${t.blockId}')`} onmouseout=\"resetHighlightBlock()\" onclick={getOnClick(t)}> {t.title}</button >)}\r\n  </This.html>\r\n  <This.style />\r\n  <This.script />\r\n\r\n</div>",
    "Css": ".float{\r\n\tposition:fixed;\r\n\twidth:50px;\r\n\theight: 50px;\r\n\tbottom:130px;\r\n\tright:10px;\r\n\tbackground-color:#0C9;\r\n\tcolor:#FFF;\r\n\tborder-radius:50px;\r\n\ttext-align:center;\r\n\tbox-shadow: 2px 2px 3px #999;\r\n  cursor: pointer;\r\n}\r\n\r\n.my-float{\r\n\tmargin-top:17px;\r\n}\r\n\r\n#pageAdminActionsModalContent button {\r\n  background-color: #4CAF50;\r\n  border: 1px solid #48ac4c;\r\n  color: white;\r\n  padding: 10px 24px;\r\n  cursor: pointer;\r\n  width: 100%;\r\n  display: block;\r\n  margin-bottom: 7px;\r\n}\r\n\r\n#pageAdminActionsModalContent button:not(:last-child) {\r\n  border-bottom: none; /* Prevent double borders */\r\n}\r\n\r\n/* Add a background color on hover */\r\n#pageAdminActionsModalContent button:hover {\r\n  background-color: #3e8e41;\r\n}\r\n\r\n.block--active{\r\n  background-color: yellow!important;\r\n}",
    "Html": "<div style=\"display:none\">\r\n\t<div id=\"pageAdminActionsModalContent\">\r\n\t\t${data.children.join('')}\r\n\t</div>\r\n</div>",
    "Script": "window.highlightBlock = (blockId) => {\r\n  console.log(blockId)\r\n  let elmnt = document.getElementById(blockId);\r\n  elmnt.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n  elmnt.classList.add(\"mars--block\");\r\n  elmnt.classList.add(\"block--active\");\r\n}\r\n\r\nwindow.resetHighlightBlock = () => {\r\n  $(\".mars--block\").removeClass(\"block--active\");\r\n}",
    "isSystem": true
  },
  {
    "_id": "5f2d1f00e4361013bcb5c46a",
    "Name": "TestServiceWithRoute",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestServiceWithRoute />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestServiceWithRoute, null);",
    "BlockFunction": "async function server() {\r\n  return {\r\n    prop1: 555,\r\n    data: data\r\n  }\r\n}",
    "JsxTranspiled": "const { serverData } = Mars.initJsx();\n\nexport default serverData;",
    "Jsx": "const { serverData } = Mars.initJsx();\r\n\r\nexport default serverData",
    "updatedAt": "2020-08-07T09:40:33.909Z",
    "Page": {
      "settings": {
        "url": "/my_api/my_service/:country/:city",
        "title": "/my_api/my_service/:country/:city",
        "master": "",
        "icon": "",
        "cache": {
          "ttl": 0
        }
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f36679bcfff7800078de0b8",
    "Name": "TestShortContent",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestShortContent />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestShortContent, null);",
    "JsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"button\",\n    { onclick: \"Modal.open('/api/TestLongContent', { width: '40%' })\" },\n    \"Modal LongContent\"\n  ),\n  executeAppBlock(\n    \"button\",\n    { onclick: \"Modal.open('/api/TestShortContent')\" },\n    \"Modal ShortContent\"\n  ),\n  executeAppBlock(\n    \"button\",\n    { onclick: \"Modal.open('/api/TestLongContent', { width: '450px', buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\" },\n    \"Modal width + footer\"\n  ),\n  executeAppBlock(\n    \"ul\",\n    null,\n    new Array(20).fill(0).map((i, ix) => executeAppBlock(\n      \"li\",\n      null,\n      ix + 1\n    ))\n  )\n);",
    "Jsx": "export default (\n  <div>\n    <button onclick=\"Modal.open('/api/TestLongContent', { width: '40%' })\">Modal LongContent</button>\n    <button onclick=\"Modal.open('/api/TestShortContent')\">Modal ShortContent</button>\n    <button onclick=\"Modal.open('/api/TestLongContent', { width: '450px', buttons: [{ label: 'Confirm', className: 'btn btn-primary' }, { label: 'Cancel', className: 'btn' }] })\">Modal width + footer</button>\n    <ul>\n      {(new Array(20)).fill(0).map((i, ix) => (<li>{ix + 1}</li>))}\n    </ul>\n  </div>\n);",
    "isSystem": true
  },
  {
    "_id": "5f3667bacfff7800078de0b9",
    "Name": "TestLongContent",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <TestLongContent />",
    "DemoJsxTranspiled": "export default executeAppBlock(TestLongContent, null);",
    "JsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\n    \"button\",\n    { onclick: \"Modal.open('/api/TestLongContent', { width: '350px' })\" },\n    \"Modal LongContent\"\n  ),\n  executeAppBlock(\n    \"button\",\n    { onclick: \"Modal.open('/api/TestShortContent', { width: '600px' })\" },\n    \"Modal ShortContent\"\n  ),\n  executeAppBlock(\n    \"ul\",\n    null,\n    new Array(100).fill(0).map((i, ix) => executeAppBlock(\n      \"li\",\n      null,\n      ix + 1\n    ))\n  )\n);",
    "Jsx": "export default (\n  <div>\n    <button onclick=\"Modal.open('/api/TestLongContent', { width: '350px' })\">Modal LongContent</button>\n    <button onclick=\"Modal.open('/api/TestShortContent', { width: '600px' })\">Modal ShortContent</button>\n    <ul>\n      {(new Array(100)).fill(0).map((i, ix) => (<li>{ix + 1}</li>))}\n    </ul>\n  </div>\n);\n",
    "isSystem": true
  },
  {
    "_id": "5f3a3f1428874700088570cf",
    "Name": "MaryTest",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <div>\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\n  <MaryTest />\n</div>",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  \"div\",\n  null,\n  executeAppBlock(\"script\", { src: \"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\" }),\n  executeAppBlock(MaryTest, null)\n);",
    "JsxTranspiled": "function iloveyou(name) {\n  return 'i love you darling ' + name;\n}\n\nfunction iloveyouToo(name1) {\n  return 'i love you too' + name1;\n}\n\nfunction Block() {\n  return executeAppBlock(\n    'div',\n    null,\n    executeAppBlock('script', { src: 'https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js' }),\n    executeAppBlock(\n      'h3',\n      { id: 'a111', style: 'padding-left:50px;padding-top:15px' },\n      iloveyou('mary')\n    ),\n    executeAppBlock('br', null),\n    executeAppBlock(\n      'h5',\n      { style: 'color:red' },\n      iloveyouToo(', John')\n    ),\n    executeAppBlock(\n      'button',\n      { onclick: 'alert(\\'Yes\\'); $(\\'a111\\').text(\\'II want babies\\')' },\n      ' Thats true '\n    )\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "function iloveyou(name) {\n  return 'i love you darling ' + name\n}\n\nfunction iloveyouToo(name1) {\n  return 'i love you too' + name1\n}\n\nfunction Block() {\n  return <div>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js\"></script>\n    <h3 id=\"a111\" style=\"padding-left:50px;padding-top:15px\">{iloveyou('mary')}</h3>\n    <br />\n    <h5 style=\"color:red\">\n      {iloveyouToo(', John')}\n    </h5>\n    <button onclick=\"alert('Yes'); $('a111').text('II want babies')\"> Thats true </button>\n  </div>\n}\n\nexport default <Block />",
    "isSystem": true
  },
  {
    "_id": "5f3a474528874700088570d0",
    "Name": "MsSql",
    "Type": "service",
    "Apps": [],
    "Folder": "data storage",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\n\n  // define connection string settings here /mars/ide/MsSqlSettings\n\n  const pool = await Mars.services.MsSql();\n\n  const res = await pool.request()\n    .query('select top 10 * from Movies');\n\n  return res.recordset\n}\n\nexport default <Block />",
    "DemoJsxTranspiled": "async function Block() {\n\n  // define connection string settings here /mars/ide/MsSqlSettings\n\n  const pool = await Mars.services.MsSql();\n\n  const res = await pool.request().query('select top 10 * from Movies');\n\n  return res.recordset;\n}\n\nexport default executeAppBlock(Block, null);",
    "BlockFunction": "function server() {\n  const sql = require('mssql');\n\n  const poolPromise = Mars.cache.msSqlPoolPromise || new sql.ConnectionPool(Mars.settings.MsSqlSettings)\n    .connect()\n    .then((pool) => {\n      console.log('Connected to MSSQL');\n      return pool;\n    })\n    .catch((err) => {\n      console.log(err);\n      throw new Error(err);\n    });\n\n  Mars.cache.msSqlPoolPromise = poolPromise;\n\n  return Mars.cache.msSqlPoolPromise;\n}",
    "isSystem": true
  },
  {
    "_id": "5f3b99a3b35ad831f5f5d8b4",
    "Name": "MsSqlSettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "data storage",
    "DataArgs": [],
    "DemoJsx": "export default <MsSqlSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(MsSqlSettings, null);",
    "Config": {
      "user": "some user",
      "password": "some password",
      "server": "111.111.111.111",
      "port": 60645,
      "database": "my-db",
      "connectionTimeout": 60000,
      "options": {
        "encrypt": false
      },
      "pool": {
        "max": 10,
        "min": 0,
        "idleTimeoutMillis": 60000,
        "connectionTimeout": 60000
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f56a7f41d2642292c55057a",
    "Name": "CmsAppSettingsTree",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms/toolbar",
    "DataArgs": [],
    "DemoJsx": "async function Block() {\r\n  return (\r\n    <div style=\"background: black;padding: 10px;color:white\">\r\n      <div style=\"display:none\">\r\n        <MarsIdeMasterPage url=\"someurl\" />\r\n      </div>\r\n      <CmsAppSettingsTree Id=\"CmsAppSettingsTree\"  />\r\n    </div >\r\n  )\r\n}\r\nMars.render(<Block />)\r\n",
    "DemoJsxTranspiled": "async function Block() {\n  return executeAppBlock(\n    \"div\",\n    { style: \"background: black;padding: 10px;color:white\" },\n    executeAppBlock(\n      \"div\",\n      { style: \"display:none\" },\n      executeAppBlock(MarsIdeMasterPage, { url: \"someurl\" })\n    ),\n    executeAppBlock(CmsAppSettingsTree, { Id: \"CmsAppSettingsTree\" })\n  );\n}\nMars.render(executeAppBlock(Block, null));",
    "BlockFunction": "const { _ } = Mars.libs;\r\n\r\nfunction getTree(items) {\r\n  const sections = items.map(t => {\r\n\r\n    const editUrl = `/mars/edit-data/${t.Name}/blocks?objectId=${t._id || ''}&path=Config`;\r\n    let url = `/api/RenderFormByModel?Id=RenderDataByModel1&modelName=${t.Name}&path=Config&collectionName=blocks&objectId=${t._id || ''}&iframeUrl=${encodeURIComponent(editUrl)}`\r\n\r\n    let icon = 'mars-icon settings';\r\n    let name = t.Name;\r\n    if (t.Page && t.Page.settings) {\r\n      url = t.Page.settings.url;\r\n      icon = t.Page.settings.icon;\r\n      name = t.Page.settings.title;\r\n    }\r\n    return {\r\n      name,\r\n      OnClick: `Modal.open(\"${url}\", {title: \"${name}\"})`,\r\n      icon,\r\n      folder: t.Folder\r\n    }\r\n  })\r\n\r\n  return Mars.services.GenereateNestedTree({\r\n    items: _.orderBy(sections, [ss => ss.name], ['asc'])\r\n  })\r\n}\r\n\r\nconst allowed = Mars.settings.CmsAdminToolbarSettings.settingsArray.map(t => t.blockName)\r\n\r\nasync function server() {\r\n  return {\r\n    tree: getTree(Mars.allBlocks.filter(t => allowed.includes(t.Name)))\r\n  }\r\n}",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\nasync function Block() {\n  const s = await serverData;\n  return executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(NestedTree, { Id: \"CmsTreeSetting\", Searchable: true, Tree: s.tree }),\n    executeAppBlock(This.style, null)\n  );\n}\nexport default Block();",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\nasync function Block() {\r\n  const s = await serverData;\r\n  return (\r\n    <div>\r\n      <NestedTree Id=\"CmsTreeSetting\" Searchable Tree={s.tree} />\r\n      <This.style />\r\n    </div>);\r\n}\r\nexport default Block();\r\n",
    "isSystem": true
  },
  {
    "_id": "5f56a9a51d2642292c55057b",
    "Name": "CmsAdminToolbarSettings",
    "Type": "settings",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [
      {
        "DataType": "array",
        "RegExp": "",
        "PropName": "settingsArray",
        "CollapseField": "blockName",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "blockName"
          },
          {
            "DataType": "string",
            "PropName": "roles",
            "SuggestOptions": true,
            "AllowMultipleSelect": true,
            "Options": [
              {
                "Key": "admin",
                "Value": "admin"
              },
              {
                "Key": "editor",
                "Value": "editor"
              },
              {
                "Key": "super-admin",
                "Value": "super-admin"
              }
            ]
          }
        ],
        "Title": "Available settings"
      },
      {
        "DataType": "array",
        "PropName": "toolbarSections",
        "RegExp": "",
        "CollapseField": "title",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "blockName"
          },
          {
            "DataType": "string",
            "PropName": "roles",
            "SuggestOptions": true,
            "Options": [
              {
                "Key": "editor",
                "Value": "editor"
              },
              {
                "Key": "admin",
                "Value": "admin"
              },
              {
                "Key": "super-admin",
                "Value": "super-admin"
              }
            ],
            "AllowMultipleSelect": true
          },
          {
            "DataType": "string",
            "PropName": "title"
          },
          {
            "DataType": "string",
            "PropName": "icon",
            "SampleValue": "fas fa-question-circle"
          }
        ],
        "Title": "Toolbar sections"
      },
      {
        "DataType": "array",
        "PropName": "browseSettings",
        "Title": "Browse",
        "RegExp": "",
        "CollapseField": "name",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "name"
          },
          {
            "DataType": "string",
            "PropName": "roles",
            "SuggestOptions": true,
            "Options": [
              {
                "Key": "editor",
                "Value": "editor"
              },
              {
                "Key": "admin",
                "Value": "admin"
              },
              {
                "Key": "super-admin",
                "Value": "super-admin"
              }
            ],
            "AllowMultipleSelect": true
          }
        ]
      },
      {
        "DataType": "array",
        "PropName": "createNewButtons",
        "RegExp": "",
        "CollapseField": "title",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "title"
          },
          {
            "DataType": "string",
            "PropName": "roles",
            "SuggestOptions": true,
            "Options": [
              {
                "Key": "editor",
                "Value": "editor"
              },
              {
                "Key": "admin",
                "Value": "admin"
              },
              {
                "Key": "super-admin",
                "Value": "super-admin"
              }
            ],
            "AllowMultipleSelect": true
          },
          {
            "DataType": "object",
            "PropName": "entity",
            "RegExp": "",
            "NullAllowed": true,
            "SubArgs": [
              {
                "DataType": "string",
                "PropName": "collectionName",
                "NullAllowed": true
              },
              {
                "DataType": "string",
                "PropName": "defaultModelBlock",
                "NullAllowed": true
              }
            ]
          },
          {
            "DataType": "string",
            "PropName": "blockName",
            "NullAllowed": true
          }
        ],
        "Title": "Create new buttons"
      }
    ],
    "DemoJsx": "export default <CmsAvailableSettings />",
    "DemoJsxTranspiled": "export default executeAppBlock(CmsAvailableSettings, null);",
    "updatedAt": "2020-09-07T23:39:22.437Z",
    "Config": {
      "settingsArray": [
        {
          "blockName": "ReviewSettings",
          "roles": [
            "admin",
            "editor",
            "super-admin"
          ]
        },
        {
          "blockName": "CreateMarsAppPage",
          "roles": [
            "admin",
            "editor",
            "super-admin"
          ]
        }
      ],
      "toolbarSections": [
        {
          "blockName": "EditPageSection",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "Edit page",
          "icon": "fas fa-edit"
        },
        {
          "blockName": "CmsCreateNewButtons",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "Create new",
          "icon": "fas fa-plus"
        },
        {
          "blockName": "CmsSearchTree",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "Browse data",
          "icon": "fas fa-search"
        },
        {
          "blockName": "NavData",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "NavData",
          "icon": "fas fa-database"
        },
        {
          "blockName": "CmsAppSettingsTree",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "Settings",
          "icon": "fas fa-cog"
        },
        {
          "blockName": "NavDocumentation",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "title": "Help",
          "icon": "fas fa-question-circle"
        }
      ],
      "browseSettings": [
        {
          "name": "blog_posts",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ]
        }
      ],
      "createNewButtons": [
        {
          "title": "New post",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "entity": {
            "collectionName": "blog_posts",
            "defaultModelBlock": "BlogPostModel"
          },
          "blockName": ""
        },
        {
          "title": "New app",
          "roles": [
            "editor",
            "admin",
            "super-admin"
          ],
          "entity": {
            "collectionName": "",
            "defaultModelBlock": ""
          },
          "blockName": "CreateMarsAppPage"
        }
      ]
    },
    "isSystem": true
  },
  {
    "_id": "5f56b96d0e9b6c3174c864e1",
    "Name": "EditPageSection",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <EditPageSection />",
    "DemoJsxTranspiled": "export default executeAppBlock(EditPageSection, null);",
    "Script": "$('#pageAdminActionsContainer').html($('#pageAdminActionsModalContent').html())",
    "JsxTranspiled": "const { serverData, This } = Mars.initJsx();\n\nfunction Block() {\n\n  return executeAppBlock(\n    Fragment,\n    null,\n    executeAppBlock(This.script, data),\n    executeAppBlock(This.style, null),\n    executeAppBlock(\n      \"button\",\n      { \"class\": \"btn btn-light btn-block mb-2\", onclick: \"editPageProps()\" },\n      \"Edit page properties\"\n    ),\n    executeAppBlock(\"div\", { id: \"pageAdminActionsContainer\" })\n  );\n}\n\nexport default executeAppBlock(Block, null);",
    "Jsx": "const { serverData, This } = Mars.initJsx();\r\n\r\nfunction Block() {\r\n\r\n  return <Fragment>\r\n    <This.script {...data} />\r\n    <This.style />\r\n    <button class=\"btn btn-light btn-block mb-2\" onclick=\"editPageProps()\">Edit page properties</button>\r\n    <div id=\"pageAdminActionsContainer\"></div>\r\n  </Fragment>\r\n}\r\n\r\nexport default <Block />",
    "isSystem": true
  },
  {
    "_id": "5f58960ac6de480008246479",
    "Name": "Theme",
    "Type": "settings",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [
      {
        "DataType": "object",
        "PropName": "spacing",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "spacer"
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "fonts",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "fontFamily"
          },
          {
            "DataType": "string",
            "PropName": "title"
          },
          {
            "DataType": "string",
            "PropName": "subtitle"
          },
          {
            "DataType": "string",
            "PropName": "default"
          },
          {
            "DataType": "string",
            "PropName": "small"
          },
          {
            "DataType": "string",
            "PropName": "extrasmall"
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "headings",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "fontWeight"
          },
          {
            "DataType": "string",
            "PropName": "lineHeight"
          },
          {
            "DataType": "string",
            "PropName": "marginBottom"
          },
          {
            "DataType": "string",
            "PropName": "h1FontSize"
          },
          {
            "DataType": "string",
            "PropName": "h2FontSize"
          },
          {
            "DataType": "string",
            "PropName": "h3FontSize"
          },
          {
            "DataType": "string",
            "PropName": "h4FontSize"
          },
          {
            "DataType": "string",
            "PropName": "h5FontSize"
          },
          {
            "DataType": "string",
            "PropName": "h6FontSize"
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "buttons",
        "SubArgs": [
          {
            "DataType": "string",
            "PropName": "borderRadius"
          },
          {
            "DataType": "string",
            "PropName": "paddingHorizontal"
          },
          {
            "DataType": "string",
            "PropName": "paddingVertical"
          },
          {
            "DataType": "string",
            "PropName": "lineHeight"
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "colors",
        "SubArgs": [
          {
            "DataType": "color",
            "PropName": "primary"
          },
          {
            "DataType": "color",
            "PropName": "primary100"
          },
          {
            "DataType": "color",
            "PropName": "primary200"
          },
          {
            "DataType": "color",
            "PropName": "primary300"
          },
          {
            "DataType": "color",
            "PropName": "primary400"
          },
          {
            "DataType": "color",
            "PropName": "primary500"
          },
          {
            "DataType": "color",
            "PropName": "primary600"
          },
          {
            "DataType": "color",
            "PropName": "primary700"
          },
          {
            "DataType": "color",
            "PropName": "primary800"
          },
          {
            "DataType": "color",
            "PropName": "primary900"
          },
          {
            "DataType": "color",
            "PropName": "secondary"
          },
          {
            "DataType": "color",
            "PropName": "secondary100"
          },
          {
            "DataType": "color",
            "PropName": "secondary200"
          },
          {
            "DataType": "color",
            "PropName": "secondary300"
          },
          {
            "DataType": "color",
            "PropName": "secondary400"
          },
          {
            "DataType": "color",
            "PropName": "secondary500"
          },
          {
            "DataType": "color",
            "PropName": "secondary600"
          },
          {
            "DataType": "color",
            "PropName": "secondary700"
          },
          {
            "DataType": "color",
            "PropName": "secondary800"
          },
          {
            "DataType": "color",
            "PropName": "secondary900"
          },
          {
            "DataType": "color",
            "PropName": "success"
          },
          {
            "DataType": "color",
            "PropName": "success100"
          },
          {
            "DataType": "color",
            "PropName": "success200"
          },
          {
            "DataType": "color",
            "PropName": "success300"
          },
          {
            "DataType": "color",
            "PropName": "success400"
          },
          {
            "DataType": "color",
            "PropName": "success500"
          },
          {
            "DataType": "color",
            "PropName": "success600"
          },
          {
            "DataType": "color",
            "PropName": "success700"
          },
          {
            "DataType": "color",
            "PropName": "success800"
          },
          {
            "DataType": "color",
            "PropName": "success900"
          },
          {
            "DataType": "color",
            "PropName": "danger"
          },
          {
            "DataType": "color",
            "PropName": "danger100"
          },
          {
            "DataType": "color",
            "PropName": "danger200"
          },
          {
            "DataType": "color",
            "PropName": "danger300"
          },
          {
            "DataType": "color",
            "PropName": "danger400"
          },
          {
            "DataType": "color",
            "PropName": "danger500"
          },
          {
            "DataType": "color",
            "PropName": "danger600"
          },
          {
            "DataType": "color",
            "PropName": "danger700"
          },
          {
            "DataType": "color",
            "PropName": "danger800"
          },
          {
            "DataType": "color",
            "PropName": "danger900"
          },
          {
            "DataType": "color",
            "PropName": "warning"
          },
          {
            "DataType": "color",
            "PropName": "warning100"
          },
          {
            "DataType": "color",
            "PropName": "warning200"
          },
          {
            "DataType": "color",
            "PropName": "warning300"
          },
          {
            "DataType": "color",
            "PropName": "warning400"
          },
          {
            "DataType": "color",
            "PropName": "warning500"
          },
          {
            "DataType": "color",
            "PropName": "warning600"
          },
          {
            "DataType": "color",
            "PropName": "warning700"
          },
          {
            "DataType": "color",
            "PropName": "warning800"
          },
          {
            "DataType": "color",
            "PropName": "warning900"
          },
          {
            "DataType": "color",
            "PropName": "info"
          },
          {
            "DataType": "color",
            "PropName": "info100"
          },
          {
            "DataType": "color",
            "PropName": "info200"
          },
          {
            "DataType": "color",
            "PropName": "info300"
          },
          {
            "DataType": "color",
            "PropName": "info400"
          },
          {
            "DataType": "color",
            "PropName": "info500"
          },
          {
            "DataType": "color",
            "PropName": "info600"
          },
          {
            "DataType": "color",
            "PropName": "info700"
          },
          {
            "DataType": "color",
            "PropName": "info800"
          },
          {
            "DataType": "color",
            "PropName": "info900"
          },
          {
            "DataType": "color",
            "PropName": "grey"
          },
          {
            "DataType": "color",
            "PropName": "gray100"
          },
          {
            "DataType": "color",
            "PropName": "gray200"
          },
          {
            "DataType": "color",
            "PropName": "gray300"
          },
          {
            "DataType": "color",
            "PropName": "gray400"
          },
          {
            "DataType": "color",
            "PropName": "gray500"
          },
          {
            "DataType": "color",
            "PropName": "gray600"
          },
          {
            "DataType": "color",
            "PropName": "gray700"
          },
          {
            "DataType": "color",
            "PropName": "gray800"
          },
          {
            "DataType": "color",
            "PropName": "gray900"
          }
        ]
      }
    ],
    "DemoJsx": "export default <Theme />",
    "DemoJsxTranspiled": "export default executeAppBlock(Theme, null);",
    "Config": {
      "spacing": {
        "spacer": "1rem"
      },
      "fonts": {
        "fontFamily": "Roboto,-apple-system,BlinkMacSystemFont,\"Segoe UI\",\"Helvetica Neue\",Arial,\"Noto Sans\",sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\"",
        "title": "32px",
        "subtitle": "18px",
        "default": "16px",
        "small": "13px",
        "extrasmall": "12px"
      },
      "headings": {
        "fontWeight": 500,
        "lineHeight": "1.2",
        "marginBottom": ".5rem",
        "h1FontSize": "2.5rem",
        "h2FontSize": "2rem",
        "h3FontSize": "1.75rem",
        "h4FontSize": "1.5rem",
        "h5FontSize": "1.25rem",
        "h6FontSize": "1rem"
      },
      "buttons": {
        "borderRadius": "50rem",
        "paddingHorizontal": ".75rem",
        "paddingVertical": ".375rem",
        "lineHeight": "1.5"
      },
      "colors": {
        "primary": "#fdd561",
        "primary100": "#fff9e9",
        "primary200": "#feefc2",
        "primary300": "#fee49b",
        "primary400": "#fdda74",
        "primary500": "#fdd561",
        "primary600": "#fcc014",
        "primary700": "#e5ab03",
        "primary800": "#ab8002",
        "primary900": "#5e4601",
        "secondary": "#6175de",
        "secondary100": "#f0f4fe",
        "secondary200": "#d4dff8",
        "secondary300": "#95aded",
        "secondary400": "#768be0",
        "secondary500": "#6175de",
        "secondary600": "#495cc6",
        "secondary700": "#144ffc",
        "secondary800": "#3647a3",
        "secondary900": "#202d6c",
        "success": "#39c071",
        "success100": "#e3fcec",
        "success200": "#a8eec0",
        "success300": "#73da9f",
        "success400": "#3ec795",
        "success500": "#39c071",
        "success600": "#32bb49",
        "success700": "#239e58",
        "success800": "#197740",
        "success900": "#155239",
        "danger": "#ff5166",
        "danger100": "#ffdce0",
        "danger200": "#ffb9c2",
        "danger300": "#ff97a3",
        "danger400": "#ff5166",
        "danger500": "#d74456",
        "danger600": "#c34151",
        "danger700": "#aa3947",
        "danger800": "#90303c",
        "danger900": "#6f252e",
        "warning": "#ffa040",
        "warning100": "#fff6ec",
        "warning200": "#ffe3c6",
        "warning300": "#ffc68c",
        "warning400": "#ffb950",
        "warning500": "#ffa040",
        "warning600": "#e6903a",
        "warning700": "#ca7023",
        "warning800": "#805020",
        "warning900": "#4d3013",
        "info": "#3caea3",
        "info100": "#e8fefe",
        "info200": "#a8eeeb",
        "info300": "#6ed8d3",
        "info400": "#57d2cc",
        "info500": "#3caea3",
        "info600": "#26a3a9",
        "info700": "#299187",
        "info800": "#1b655e",
        "info900": "#114544",
        "gray": "#aebecc",
        "gray100": "#f8f9fa",
        "gray200": "#e1e7eb",
        "gray300": "#d4dde5",
        "gray400": "#cbd4db",
        "gray500": "#aebecc",
        "gray600": "#91a0b0",
        "gray700": "#6d7b8a",
        "gray800": "#3f4c5a",
        "gray900": "#212933",
        "grey": "#aebecc"
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f589643c6de48000824647a",
    "Name": "ThemeStyles",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "const colors = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'gray'];\nconst colorScheme = [];\ncolors.forEach(i => {\n  const colorTints = [];\n  for (let x = 900; x >= 100; x -= 100) {\n    colorTints.push({ name: i, color: `var(--color-${i}${x})`, weight: x });\n  }\n\n  colorScheme.push(colorTints);\n});\n\nconst colorBlocks = colorScheme.map(i => {\n  return (\n    <div style=\"width: 100%; display: flex; flex-direction: row;align-items:center;\" class=\"m-1\">\n      <span style=\"max-width:80px;min-width:80px\">{i[0].name}</span>\n      {i.map(x => {\n        const style = `display: flex; align-items: center; justify-content: center; width:50px; height:50px; text-align: center; vertical-align: middle; background-color:${x.color}`;\n        return (\n          <div style={style} class=\"m-1 rounded\">\n            <span style=\"color: #fff\">{x.weight}</span>\n          </div>\n        );\n      })}\n    </div>\n  );\n});\n\nexport default (\n  <Page master=\"MasterBasePage\">\n    <h1>Heading</h1>\n    <h1>h1. Heading</h1>\n    <h2>h2. Heading</h2>\n    <h3>h3. Heading</h3>\n    <h4>h4. Heading</h4>\n    <h5>h5. Heading</h5>\n    <h6>h6. Heading</h6>\n    <h1>Color palette</h1>\n    {colorBlocks}\n    <h1>Buttons</h1>\n    <button type=\"button\" class=\"btn btn-sm\">Default</button>\n    <button type=\"button\" class=\"btn btn-primary btn-sm\">Primary</button>\n    <button type=\"button\" class=\"btn btn-secondary btn-sm\">Secondary</button>\n    <button type=\"button\" class=\"btn btn-success btn-sm\">Success</button>\n    <button type=\"button\" class=\"btn btn-danger btn-sm\">Danger</button>\n    <button type=\"button\" class=\"btn btn-warning btn-sm\">Warning</button>\n    <button type=\"button\" class=\"btn btn-info btn-sm\">Info</button>\n    <br />\n    <button type=\"button\" class=\"btn\">Default</button>\n    <button type=\"button\" class=\"btn btn-primary\">Primary</button>\n    <button type=\"button\" class=\"btn btn-secondary\">Secondary</button>\n    <button type=\"button\" class=\"btn btn-success\">Success</button>\n    <button type=\"button\" class=\"btn btn-danger\">Danger</button>\n    <button type=\"button\" class=\"btn btn-warning\">Warning</button>\n    <button type=\"button\" class=\"btn btn-info\">Info</button>\n    <br />\n    <button type=\"button\" class=\"btn btn-lg\">Default</button>\n    <button type=\"button\" class=\"btn btn-primary btn-lg\">Primary</button>\n    <button type=\"button\" class=\"btn btn-secondary btn-lg\">Secondary</button>\n    <button type=\"button\" class=\"btn btn-success btn-lg\">Success</button>\n    <button type=\"button\" class=\"btn btn-danger btn-lg\">Danger</button>\n    <button type=\"button\" class=\"btn btn-warning btn-lg\">Warning</button>\n    <button type=\"button\" class=\"btn btn-info btn-lg\">Info</button>\n    <br />\n    <button type=\"button\" class=\"btn\" disabled>Default</button>\n    <button type=\"button\" class=\"btn btn-primary\" disabled>Primary</button>\n    <button type=\"button\" class=\"btn btn-secondary\" disabled>Secondary</button>\n    <button type=\"button\" class=\"btn btn-success\" disabled>Success</button>\n    <button type=\"button\" class=\"btn btn-danger\" disabled>Danger</button>\n    <button type=\"button\" class=\"btn btn-warning\" disabled>Warning</button>\n    <button type=\"button\" class=\"btn btn-info\" disabled>Info</button>\n    <br />\n    <div style=\"display: flex;\">\n      <div class=\"bg-secondary rounded-sm p-1\" style=\"width: 120px; height: 50px;\">\n        .rounded-sm\n      </div>\n      <div class=\"bg-primary rounded p-1\" style=\"width: 120px; height: 50px;\">\n        .rounded\n      </div>\n      <div class=\"bg-success rounded-lg p-1\" style=\"width: 120px; height: 50px;\">\n        .rounded-lg\n      </div>\n      <div class=\"bg-warning rounded-pill p-1\" style=\"width: 120px; height: 50px;\">\n        .rounded-pill\n      </div>\n      <div class=\"bg-danger rounded-circle p-1\" style=\"width: 120px; height: 50px;\">\n        .rounded-circle\n      </div>\n    </div>\n  </Page>\n);",
    "DemoJsxTranspiled": "const colors = ['primary', 'secondary', 'success', 'danger', 'warning', 'info', 'gray'];\nconst colorScheme = [];\ncolors.forEach(i => {\n  const colorTints = [];\n  for (let x = 900; x >= 100; x -= 100) {\n    colorTints.push({ name: i, color: `var(--color-${i}${x})`, weight: x });\n  }\n\n  colorScheme.push(colorTints);\n});\n\nconst colorBlocks = colorScheme.map(i => {\n  return executeAppBlock(\n    'div',\n    { style: 'width: 100%; display: flex; flex-direction: row;align-items:center;', 'class': 'm-1' },\n    executeAppBlock(\n      'span',\n      { style: 'max-width:80px;min-width:80px' },\n      i[0].name\n    ),\n    i.map(x => {\n      const style = `display: flex; align-items: center; justify-content: center; width:50px; height:50px; text-align: center; vertical-align: middle; background-color:${x.color}`;\n      return executeAppBlock(\n        'div',\n        { style: style, 'class': 'm-1 rounded' },\n        executeAppBlock(\n          'span',\n          { style: 'color: #fff' },\n          x.weight\n        )\n      );\n    })\n  );\n});\n\nexport default executeAppBlock(\n  Page,\n  { master: 'MasterBasePage' },\n  executeAppBlock(\n    'h1',\n    null,\n    'Heading'\n  ),\n  executeAppBlock(\n    'h1',\n    null,\n    'h1. Heading'\n  ),\n  executeAppBlock(\n    'h2',\n    null,\n    'h2. Heading'\n  ),\n  executeAppBlock(\n    'h3',\n    null,\n    'h3. Heading'\n  ),\n  executeAppBlock(\n    'h4',\n    null,\n    'h4. Heading'\n  ),\n  executeAppBlock(\n    'h5',\n    null,\n    'h5. Heading'\n  ),\n  executeAppBlock(\n    'h6',\n    null,\n    'h6. Heading'\n  ),\n  executeAppBlock(\n    'h1',\n    null,\n    'Color palette'\n  ),\n  colorBlocks,\n  executeAppBlock(\n    'h1',\n    null,\n    'Buttons'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-sm' },\n    'Default'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-primary btn-sm' },\n    'Primary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-secondary btn-sm' },\n    'Secondary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-success btn-sm' },\n    'Success'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-danger btn-sm' },\n    'Danger'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-warning btn-sm' },\n    'Warning'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-info btn-sm' },\n    'Info'\n  ),\n  executeAppBlock('br', null),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn' },\n    'Default'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-primary' },\n    'Primary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-secondary' },\n    'Secondary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-success' },\n    'Success'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-danger' },\n    'Danger'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-warning' },\n    'Warning'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-info' },\n    'Info'\n  ),\n  executeAppBlock('br', null),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-lg' },\n    'Default'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-primary btn-lg' },\n    'Primary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-secondary btn-lg' },\n    'Secondary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-success btn-lg' },\n    'Success'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-danger btn-lg' },\n    'Danger'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-warning btn-lg' },\n    'Warning'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-info btn-lg' },\n    'Info'\n  ),\n  executeAppBlock('br', null),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn', disabled: true },\n    'Default'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-primary', disabled: true },\n    'Primary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-secondary', disabled: true },\n    'Secondary'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-success', disabled: true },\n    'Success'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-danger', disabled: true },\n    'Danger'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-warning', disabled: true },\n    'Warning'\n  ),\n  executeAppBlock(\n    'button',\n    { type: 'button', 'class': 'btn btn-info', disabled: true },\n    'Info'\n  ),\n  executeAppBlock('br', null),\n  executeAppBlock(\n    'div',\n    { style: 'display: flex;' },\n    executeAppBlock(\n      'div',\n      { 'class': 'bg-secondary rounded-sm p-1', style: 'width: 120px; height: 50px;' },\n      '.rounded-sm'\n    ),\n    executeAppBlock(\n      'div',\n      { 'class': 'bg-primary rounded p-1', style: 'width: 120px; height: 50px;' },\n      '.rounded'\n    ),\n    executeAppBlock(\n      'div',\n      { 'class': 'bg-success rounded-lg p-1', style: 'width: 120px; height: 50px;' },\n      '.rounded-lg'\n    ),\n    executeAppBlock(\n      'div',\n      { 'class': 'bg-warning rounded-pill p-1', style: 'width: 120px; height: 50px;' },\n      '.rounded-pill'\n    ),\n    executeAppBlock(\n      'div',\n      { 'class': 'bg-danger rounded-circle p-1', style: 'width: 120px; height: 50px;' },\n      '.rounded-circle'\n    )\n  )\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nexport default executeAppBlock(This.style, { plainCss: true });",
    "Jsx": "const { This } = Mars.initJsx();\nexport default <This.style plainCss />;",
    "Css": "*, *::before, *::after { box-sizing: border-box; }\nhtml { line-height: 1.15; -webkit-text-size-adjust: 100%; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }\narticle, aside, figcaption, figure, footer, header, hgroup, main, nav, section { display: block; }\nbody {\n  overflow-x: hidden;\n  font-family: var(--font-family);\n  font-size: var(--font-default);\n  margin: 0;\n  text-align: left;\n  line-height: 1.5;\n}\n\nh1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 { margin-top: 0; margin-bottom: var(--heading-margin-bottom); line-height: var(--heading-line-height); font-weight: var(--heading-font-weight); }\nh1, .h1 { font-size: var(--heading-h1-font-size); }\nh2, .h2 { font-size: var(--heading-h2-font-size); }\nh3, .h3 { font-size: var(--heading-h3-font-size); }\nh4, .h4 { font-size: var(--heading-h4-font-size); }\nh5, .h5 { font-size: var(--heading-h5-font-size); }\nh6, .h6 { font-size: var(--heading-h6-font-size); }\n\np { margin-top: 0; margin-bottom: 1rem; }\nol, ul, dl { margin-top: 0; margin-bottom: 1rem; }\nol ol, ul ul, ol ul, ul ol { margin-bottom: 0; }\nimg { vertical-align: middle; border-style: none; }\ntable { border-collapse: collapse; }\n\ncaption {\n  padding-top: .75rem;\n  padding-bottom: .75rem;\n  color: var(--color-gray300);\n  text-align: left;\n  caption-side: bottom;\n}\n\nth { text-align: inherit; }\nlabel { display: inline-block; margin-bottom: .5rem; }\ninput, button, select, optgroup, textarea { margin: 0; font-family: inherit; line-height: inherit; }\nbutton, input { overflow: visible; }\nbutton, select { text-transform: none; }\nselect { word-wrap: normal; }\n[role=\"button\"] { cursor: pointer; }\nbutton, [type=\"button\"], [type=\"reset\"], [type=\"submit\"] { -webkit-appearance: button; }\n\n/* BUTTON */\n.btn {\n  display: inline-block;\n  font-size: var(--font-default);\n  font-weight: 400;\n  color: #fff;\n  text-align: center;\n  text-decoration: none;\n  white-space: none;\n  vertical-align: middle;\n  user-select: none;\n  background-color: var(--color-gray);\n  border: 1px solid transparent;\n  padding: var(--button-padding-vertical) var(--button-padding-horizontal);\n  line-height: var(--button-line-height);\n  border-radius: var(--button-border-radius);\n  transition: color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;\n}\n\n.btn:hover {\n  color: #fff;\n  text-decoration: none;\n  background-color: var(--color-gray600);\n}\n\n.btn:focus,\n.btn.focus {\n  outline: 0;\n  box-shadow: 0 0 0 .2rem var(--color-gray200);\n}\n\n.btn:disabled,\n.btn.disabled {\n  opacity: .65;\n  box-shadow: none;\n  background-color: var(--color-gray);\n}\n\n.btn:not(:disabled):not(.disabled):active,\n.btn:not(:disabled):not(.disabled).active {\n  background-color: var(--color-gray600);\n  border-color: transparent;\n}\n\n.btn:not(:disabled):not(.disabled).active:focus,\n.btn:not(:disabled):not(.disabled):active:focus {\n  box-shadow: 0 0 0 .2rem var(--color-gray300);\n}\n\na.btn.disabled,\nfieldset:disabled a.btn {\n  pointer-events: none;\n}\n\n/* btn-primary */\n.btn-primary {\n  color: #000;\n  background-color: var(--color-primary);\n  border-color: transparent;\n}\n\n.btn-primary:hover {\n  color: #000;\n  background-color: var(--color-primary600);\n  border-color: transparent;\n}\n\n.btn-primary:focus,\n.btn-primary.focus {\n  color: #000;\n  background-color: var(--color-primary600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-primary200);\n}\n\n.btn-primary:disabled,\n.btn-primary.disabled {\n  color: #000;\n  background-color: var(--color-primary);\n  border-color: transparent;\n}\n\n.btn-primary:not(:disabled):not(.disabled):active,\n.btn-primary:not(:disabled):not(.disabled).active {\n  color: #000;\n  background-color: var(--color-primary600);\n  border-color: transparent;\n}\n\n.btn-primary:not(:disabled):not(.disabled).active:focus,\n.btn-primary:not(:disabled):not(.disabled):active:focus {\n  color: #000;\n  box-shadow: 0 0 0 .2rem var(--color-primary300);\n}\n\n/* btn-secondary */\n.btn-secondary {\n  color: #fff;\n  background-color: var(--color-secondary);\n  border-color: transparent;\n}\n\n.btn-secondary:hover {\n  color: #fff;\n  background-color: var(--color-secondary600);\n  border-color: transparent;\n}\n\n.btn-secondary:focus,\n.btn-secondary.focus {\n  color: #fff;\n  background-color: var(--color-secondary600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-secondary200);\n}\n\n.btn-secondary:disabled,\n.btn-secondary.disabled {\n  color: #fff;\n  background-color: var(--color-secondary);\n  border-color: transparent;\n}\n\n.btn-secondary:not(:disabled):not(.disabled):active,\n.btn-secondary:not(:disabled):not(.disabled).active {\n  color: #fff;\n  background-color: var(--color-secondary600);\n  border-color: transparent;\n}\n\n.btn-secondary:not(:disabled):not(.disabled).active:focus,\n.btn-secondary:not(:disabled):not(.disabled):active:focus {\n  color: #fff;\n  box-shadow: 0 0 0 .2rem var(--color-secondary300);\n}\n\n/* btn-success */\n.btn-success {\n  color: #fff;\n  background-color: var(--color-success);\n  border-color: transparent;\n}\n\n.btn-success:hover {\n  color: #fff;\n  background-color: var(--color-success600);\n  border-color: transparent;\n}\n\n.btn-success:focus,\n.btn-success.focus {\n  color: #fff;\n  background-color: var(--color-success600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-success200);\n}\n\n.btn-success:disabled,\n.btn-success.disabled {\n  color: #fff;\n  background-color: var(--color-success);\n  border-color: transparent;\n}\n\n.btn-success:not(:disabled):not(.disabled):active,\n.btn-success:not(:disabled):not(.disabled).active {\n  color: #fff;\n  background-color: var(--color-success600);\n  border-color: transparent;\n}\n\n.btn-success:not(:disabled):not(.disabled).active:focus,\n.btn-success:not(:disabled):not(.disabled):active:focus {\n  color: #fff;\n  box-shadow: 0 0 0 .2rem var(--color-success300);\n}\n\n/* btn-danger */\n.btn-danger {\n  color: #fff;\n  background-color: var(--color-danger);\n  border-color: transparent;\n}\n\n.btn-danger:hover {\n  color: #fff;\n  background-color: var(--color-danger600);\n  border-color: transparent;\n}\n\n.btn-danger:focus,\n.btn-danger.focus {\n  color: #fff;\n  background-color: var(--color-danger600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-danger200);\n}\n\n.btn-danger:disabled,\n.btn-danger.disabled {\n  color: #fff;\n  background-color: var(--color-danger);\n  border-color: transparent;\n}\n\n.btn-danger:not(:disabled):not(.disabled):active,\n.btn-danger:not(:disabled):not(.disabled).active {\n  color: #fff;\n  background-color: var(--color-danger600);\n  border-color: transparent;\n}\n\n.btn-danger:not(:disabled):not(.disabled).active:focus,\n.btn-danger:not(:disabled):not(.disabled):active:focus {\n  color: #fff;\n  box-shadow: 0 0 0 .2rem var(--color-danger300);\n}\n\n/* btn-warning */\n.btn-warning {\n  color: #fff;\n  background-color: var(--color-warning);\n  border-color: transparent;\n}\n\n.btn-warning:hover {\n  color: #fff;\n  background-color: var(--color-warning600);\n  border-color: transparent;\n}\n\n.btn-warning:focus,\n.btn-warning.focus {\n  color: #fff;\n  background-color: var(--color-warning600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-warning200);\n}\n\n.btn-warning:disabled,\n.btn-warning.disabled {\n  color: #fff;\n  background-color: var(--color-warning);\n  border-color: transparent;\n}\n\n.btn-warning:not(:disabled):not(.disabled):active,\n.btn-warning:not(:disabled):not(.disabled).active {\n  color: #fff;\n  background-color: var(--color-warning600);\n  border-color: transparent;\n}\n\n.btn-warning:not(:disabled):not(.disabled).active:focus,\n.btn-warning:not(:disabled):not(.disabled):active:focus {\n  color: #fff;\n  box-shadow: 0 0 0 .2rem var(--color-warning300);\n}\n\n/* btn-info */\n.btn-info {\n  color: #fff;\n  background-color: var(--color-info);\n  border-color: transparent;\n}\n\n.btn-info:hover {\n  color: #fff;\n  background-color: var(--color-info600);\n  border-color: transparent;\n}\n\n.btn-info:focus,\n.btn-info.focus {\n  color: #fff;\n  background-color: var(--color-info600);\n  border-color: transparent;\n  box-shadow: 0 0 0 .2rem var(--color-info200);\n}\n\n.btn-info:disabled,\n.btn-info.disabled {\n  color: #fff;\n  background-color: var(--color-info);\n  border-color: transparent;\n}\n\n.btn-info:not(:disabled):not(.disabled):active,\n.btn-info:not(:disabled):not(.disabled).active {\n  color: #fff;\n  background-color: var(--color-info600);\n  border-color: transparent;\n}\n\n.btn-info:not(:disabled):not(.disabled).active:focus,\n.btn-info:not(:disabled):not(.disabled):active:focus {\n  color: #fff;\n  box-shadow: 0 0 0 .2rem var(--color-info300);\n}\n\n/* Button sizes */\n.btn-lg {\n  font-size: var(--font-subtitle);\n  padding: .5rem 1rem;\n  line-height: 1.5;\n  /* border-radius: 1rem; */\n}\n\n.btn-sm {\n  font-size: var(--font-small);\n  padding: .25rem .5rem;\n  line-height: 1.5;\n  /* border-radius: 1rem; */\n}\n\n.btn-block {\n  display: block;\n  width: 100%;\n}\n\n/* BADGE */\n.badge {\n  color: #fff;\n  display: inline-block;\n  padding: .25em .4em;\n  font-size: 75%;\n  font-weight: 700;\n  line-height: 1;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: baseline;\n  border-radius: .25rem;\n}\n\n.badge-pill {\n  padding-right: .6em;\n  padding-left: .6em;\n  border-radius: 10rem;\n}\n\n.badge-primary { background-color: var(--color-primary); }\n.badge-secondary { background-color: var(--color-secondary); }\n.badge-success { background-color: var(--color-success); }\n.badge-danger { background-color: var(--color-danger); }\n.badge-warning { background-color: var(--color-warning); }\n.badge-info { background-color: var(--color-info); }\n\ninput[type=\"submit\"].btn-block, input[type=\"reset\"].btn-block, input[type=\"button\"].btn-block { width: 100%; }\n\n/* TEXT */\n.text-primary { color: var(--color-primary)!important; }\n.text-secondary { color: var(--color-secondary)!important; }\n.text-success { color: var(--color-success)!important; }\n.text-danger { color: var(--color-danger)!important; }\n.text-warning { color: var(--color-warning)!important; }\n.text-info { color: var(--color-info)!important; }\n\n/* BACKGROUND */\n.bg-primary { background-color: var(--color-primary)!important; }\n.bg-secondary { background-color: var(--color-secondary)!important; }\n.bg-success { background-color: var(--color-success)!important; }\n.bg-danger { background-color: var(--color-danger)!important; }\n.bg-warning { background-color: var(--color-warning)!important; }\n.bg-info { background-color: var(--color-info)!important; }\n\n/* BORDER-RADIUS */\n.rounded { border-radius: .6rem!important; }\n.rounded-sm { border-radius: .4rem!important; }\n.rounded-lg { border-radius: .9rem!important; }\n.rounded-circle { border-radius: 50%!important; }\n.rounded-pill { border-radius: 50rem!important; }\n\n/* PADDING */\n.p-auto { padding: auto!important; }\n.p-0 { padding: 0!important; }\n.p-1 { padding: calc(var(--spacer) * .25)!important; }\n.p-2 { padding: calc(var(--spacer) * .5)!important; }\n.p-3 { padding: var(--spacer)!important; }\n.p-4 { padding: calc(var(--spacer) * 1.5)!important; }\n.p-5 { padding: calc(var(--spacer) * 3)!important; }\n/* padding-top */\n.pt-auto { padding-top: auto!important; }\n.pt-0 { padding-top: 0!important; }\n.pt-1 { padding-top: calc(var(--spacer) * .25)!important; }\n.pt-2 { padding-top: calc(var(--spacer) * .5)!important; }\n.pt-3 { padding-top: var(--spacer)!important; }\n.pt-4 { padding-top: calc(var(--spacer) * 1.5)!important; }\n.pt-5 { padding-top: calc(var(--spacer) * 3)!important; }\n/* padding-bottom */\n.pb-auto { padding-bottom: auto!important; }\n.pb-0 { padding-bottom: 0!important; }\n.pb-1 { padding-bottom: calc(var(--spacer) * .25)!important; }\n.pb-2 { padding-bottom: calc(var(--spacer) * .5)!important; }\n.pb-3 { padding-bottom: var(--spacer)!important; }\n.pb-4 { padding-bottom: calc(var(--spacer) * 1.5)!important; }\n.pb-5 { padding-bottom: calc(var(--spacer) * 3)!important; }\n/* padding-left */\n.pl-auto { padding-left: auto!important; }\n.pl-0 { padding-left: 0!important; }\n.pl-1 { padding-left: calc(var(--spacer) * .25)!important; }\n.pl-2 { padding-left: calc(var(--spacer) * .5)!important; }\n.pl-3 { padding-left: var(--spacer)!important; }\n.pl-4 { padding-left: calc(var(--spacer) * 1.5)!important; }\n.pl-5 { padding-left: calc(var(--spacer) * 3)!important; }\n/* padding-right */\n.pr-auto { padding-right: auto!important; }\n.pr-0 { padding-right: 0!important; }\n.pr-1 { padding-right: calc(var(--spacer) * .25)!important; }\n.pr-2 { padding-right: calc(var(--spacer) * .5)!important; }\n.pr-3 { padding-right: var(--spacer)!important; }\n.pr-4 { padding-right: calc(var(--spacer) * 1.5)!important; }\n.pr-5 { padding-right: calc(var(--spacer) * 3)!important; }\n/* padding-x */\n.px-auto { padding-left: auto!important; padding-right: auto!important; }\n.px-0 { padding-left: 0!important; padding-right: 0!important; }\n.px-1 { padding-left: calc(var(--spacer) * .25)!important; padding-right: calc(var(--spacer) * .25)!important; }\n.px-2 { padding-left: calc(var(--spacer) * .5)!important; padding-right: calc(var(--spacer) * .5)!important; }\n.px-3 { padding-left: var(--spacer)!important; padding-right: var(--spacer)!important; }\n.px-4 { padding-left: calc(var(--spacer) * 1.5)!important; padding-right: calc(var(--spacer) * 1.5)!important; }\n.px-5 { padding-left: calc(var(--spacer) * 3)!important; padding-right: calc(var(--spacer) * 3)!important; }\n/* padding-y */\n.py-auto { padding-top: auto!important; padding-bottom: auto!important; }\n.py-0 { padding-top: 0!important; padding-bottom: 0!important; }\n.py-1 { padding-top: calc(var(--spacer) * .25)!important; padding-bottom: calc(var(--spacer) * .25)!important; }\n.py-2 { padding-top: calc(var(--spacer) * .5)!important; padding-bottom: calc(var(--spacer) * .5)!important; }\n.py-3 { padding-top: var(--spacer)!important; padding-bottom: var(--spacer)!important; }\n.py-4 { padding-top: calc(var(--spacer) * 1.5)!important; padding-bottom: calc(var(--spacer) * 1.5)!important; }\n.py-5 { padding-top: calc(var(--spacer) * 3)!important; padding-bottom: calc(var(--spacer) * 3)!important; }\n\n/* MARGIN */\n.m-auto { margin: auto!important; }\n.m-0 { margin: 0!important; }\n.m-1 { margin: calc(var(--spacer) * .25)!important; }\n.m-2 { margin: calc(var(--spacer) * .5)!important; }\n.m-3 { margin: var(--spacer)!important; }\n.m-4 { margin: calc(var(--spacer) * 1.5)!important; }\n.m-5 { margin: calc(var(--spacer) * 3)!important; }\n/* margin-top */\n.mt-auto { margin-top: auto!important; }\n.mt-0 { margin-top: 0!important; }\n.mt-1 { margin-top: calc(var(--spacer) * .25)!important; }\n.mt-2 { margin-top: calc(var(--spacer) * .5)!important; }\n.mt-3 { margin-top: var(--spacer)!important; }\n.mt-4 { margin-top: calc(var(--spacer) * 1.5)!important; }\n.mt-5 { margin-top: calc(var(--spacer) * 3)!important; }\n/* margin-bottom */\n.mb-auto { margin-bottom: auto!important; }\n.mb-0 { margin-bottom: 0!important; }\n.mb-1 { margin-bottom: calc(var(--spacer) * .25)!important; }\n.mb-2 { margin-bottom: calc(var(--spacer) * .5)!important; }\n.mb-3 { margin-bottom: var(--spacer)!important; }\n.mb-4 { margin-bottom: calc(var(--spacer) * 1.5)!important; }\n.mb-5 { margin-bottom: calc(var(--spacer) * 3)!important; }\n/* margin-left */\n.ml-auto { margin-left: auto!important; }\n.ml-0 { margin-left: 0!important; }\n.ml-1 { margin-left: calc(var(--spacer) * .25)!important; }\n.ml-2 { margin-left: calc(var(--spacer) * .5)!important; }\n.ml-3 { margin-left: var(--spacer)!important; }\n.ml-4 { margin-left: calc(var(--spacer) * 1.5)!important; }\n.ml-5 { margin-left: calc(var(--spacer) * 3)!important; }\n/* margin-right */\n.mr-auto { margin-right: auto!important; }\n.mr-0 { margin-right: 0!important; }\n.mr-1 { margin-right: calc(var(--spacer) * .25)!important; }\n.mr-2 { margin-right: calc(var(--spacer) * .5)!important; }\n.mr-3 { margin-right: var(--spacer)!important; }\n.mr-4 { margin-right: calc(var(--spacer) * 1.5)!important; }\n.mr-5 { margin-right: calc(var(--spacer) * 3)!important; }\n/* margin-x */\n.mx-auto { margin-left: auto!important; margin-right: auto!important; }\n.mx-0 { margin-left: 0!important; margin-right: 0!important; }\n.mx-1 { margin-left: calc(var(--spacer) * .25)!important; margin-right: calc(var(--spacer) * .25)!important; }\n.mx-2 { margin-left: calc(var(--spacer) * .5)!important; margin-right: calc(var(--spacer) * .5)!important; }\n.mx-3 { margin-left: var(--spacer)!important; margin-right: var(--spacer)!important; }\n.mx-4 { margin-left: calc(var(--spacer) * 1.5)!important; margin-right: calc(var(--spacer) * 1.5)!important; }\n.mx-5 { margin-left: calc(var(--spacer) * 3)!important; margin-right: calc(var(--spacer) * 3)!important; }\n/* margin-y */\n.my-auto { margin-top: auto!important; margin-bottom: auto!important; }\n.my-0 { margin-top: 0!important; margin-bottom: 0!important; }\n.my-1 { margin-top: calc(var(--spacer) * .25)!important; margin-bottom: calc(var(--spacer) * .25)!important; }\n.my-2 { margin-top: calc(var(--spacer) * .5)!important; margin-bottom: calc(var(--spacer) * .5)!important; }\n.my-3 { margin-top: var(--spacer)!important; margin-bottom: var(--spacer)!important; }\n.my-4 { margin-top: calc(var(--spacer) * 1.5)!important; margin-bottom: calc(var(--spacer) * 1.5)!important; }\n.my-5 { margin-top: calc(var(--spacer) * 3)!important; margin-bottom: calc(var(--spacer) * 3)!important; }\n\n/* DISPLAY */\n.d-none { display: none !important; }\n.d-inline { display: inline !important; }\n.d-inline-block { display: inline-block !important; }\n.d-block { display: block !important; }\n.d-table { display: table !important; }\n.d-table-row { display: table-row !important; }\n.d-table-cell { display: table-cell !important; }\n.d-flex { display: flex !important; }\n.d-inline-flex { display: inline-flex !important; }\n\n/* POSITION */\n.position-static { position: static!important; }\n.position-relative { position: relative!important; }\n.position-absolute { position: absolute!important; }\n.position-fixed { position: fixed!important; }\n.position-sticky { position: sticky!important; }\n\n.fixed-top {\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  z-index: 1030;\n}\n\n.fixed-bottom {\n  position: fixed;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1030;\n}\n\n/* FLEX */\n.flex-row { flex-direction: row !important; }\n.flex-column { flex-direction: column !important; }\n.flex-row-reverse { flex-direction: row-reverse !important; }\n.flex-column-reverse { flex-direction: column-reverse !important; }\n\n.flex-wrap { flex-wrap: wrap !important; }\n.flex-nowrap { flex-wrap: nowrap !important; }\n.flex-wrap-reverse { flex-wrap: wrap-reverse !important; }\n.flex-fill { flex: 1 1 auto !important; }\n.flex-grow-0 { flex-grow: 0 !important; }\n.flex-grow-1 { flex-grow: 1 !important; }\n.flex-grow-2 { flex-grow: 2 !important; }\n.flex-grow-3 { flex-grow: 3 !important; }\n.flex-grow-4 { flex-grow: 4 !important; }\n.flex-grow-5 { flex-grow: 5 !important; }\n.flex-shrink-0 { flex-shrink: 0 !important; }\n.flex-shrink-1 { flex-shrink: 1 !important; }\n\n/* ALIGN */\n.align-items-start { align-items: flex-start !important; }\n.align-items-end { align-items: flex-end !important; }\n.align-items-center { align-items: center !important; }\n.align-items-baseline { align-items: baseline !important; }\n.align-items-stretch { align-items: stretch !important; }\n\n.align-self-auto { align-self: auto !important; }\n.align-self-start { align-self: flex-start !important; }\n.align-self-end { align-self: flex-end !important; }\n.align-self-center { align-self: center !important; }\n.align-self-baseline { align-self: baseline !important; }\n.align-self-stretch { align-self: stretch !important; }\n\n/* JUSTIFY */\n.justify-content-start { justify-content: flex-start !important; }\n.justify-content-end { justify-content: flex-end !important; }\n.justify-content-center { justify-content: center !important; }\n.justify-content-between { justify-content: space-between !important; }\n.justify-content-around { justify-content: space-around !important; }\n.justify-content-evenly { justify-content: space-evenly !important; }\n\n/* GRID */\n.container, .container-fluid, .container-lg, .container-md, .container-sm, .container-xl { width: 100%; padding-right: 15px; padding-left: 15px; margin-right: auto; margin-left: auto; }\n.row { display: -ms-flexbox; display: flex; -ms-flex-wrap: wrap; flex-wrap: wrap; margin-right: -15px; margin-left: -15px; }\n.col-1, .col-2, .col-3, .col-4, .col-5, .col-6, .col-7, .col-8, .col-9, .col-10, .col-11, .col-12, .col,\n.col-auto, .col-sm-1, .col-sm-2, .col-sm-3, .col-sm-4, .col-sm-5, .col-sm-6, .col-sm-7, .col-sm-8, .col-sm-9, .col-sm-10, .col-sm-11, .col-sm-12, .col-sm,\n.col-sm-auto, .col-md-1, .col-md-2, .col-md-3, .col-md-4, .col-md-5, .col-md-6, .col-md-7, .col-md-8, .col-md-9, .col-md-10, .col-md-11, .col-md-12, .col-md,\n.col-md-auto, .col-lg-1, .col-lg-2, .col-lg-3, .col-lg-4, .col-lg-5, .col-lg-6, .col-lg-7, .col-lg-8, .col-lg-9, .col-lg-10, .col-lg-11, .col-lg-12, .col-lg,\n.col-lg-auto, .col-xl-1, .col-xl-2, .col-xl-3, .col-xl-4, .col-xl-5, .col-xl-6, .col-xl-7, .col-xl-8, .col-xl-9, .col-xl-10, .col-xl-11, .col-xl-12, .col-xl,\n.col-xl-auto { position: relative; width: 100%; padding-right: 15px; padding-left: 15px; }\n.col { -ms-flex-preferred-size: 0; flex-basis: 0; -ms-flex-positive: 1; flex-grow: 1; max-width: 100%; }\n.row-cols-1 > * { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n.row-cols-2 > * { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n.row-cols-3 > * { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n.row-cols-4 > * { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n.row-cols-5 > * { -ms-flex: 0 0 20%; flex: 0 0 20%; max-width: 20%; }\n.row-cols-6 > * { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n.col-auto { -ms-flex: 0 0 auto; flex: 0 0 auto; width: auto; max-width: 100%; }\n.col-1 { -ms-flex: 0 0 8.333333%; flex: 0 0 8.333333%; max-width: 8.333333%; }\n.col-2 { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n.col-3 { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n.col-4 { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n.col-5 { -ms-flex: 0 0 41.666667%; flex: 0 0 41.666667%; max-width: 41.666667%; }\n.col-6 { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n.col-7 { -ms-flex: 0 0 58.333333%; flex: 0 0 58.333333%; max-width: 58.333333%; }\n.col-8 { -ms-flex: 0 0 66.666667%; flex: 0 0 66.666667%; max-width: 66.666667%; }\n.col-9 { -ms-flex: 0 0 75%; flex: 0 0 75%; max-width: 75%; }\n.col-10 { -ms-flex: 0 0 83.333333%; flex: 0 0 83.333333%; max-width: 83.333333%; }\n.col-11 { -ms-flex: 0 0 91.666667%; flex: 0 0 91.666667%; max-width: 91.666667%; }\n.col-12 { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n.no-gutters { margin-right: 0; margin-left: 0; }\n.no-gutters > .col,.no-gutters > [class*=\"col-\"] { padding-right: 0; padding-left: 0; }\n\n @media (min-width: 576px) {\n  .container, .container-sm { max-width: 540px; }\n  .col-sm { -ms-flex-preferred-size: 0; flex-basis: 0; -ms-flex-positive: 1; flex-grow: 1; max-width: 100%; }\n  .row-cols-sm-1 > * { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n  .row-cols-sm-2 > * { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .row-cols-sm-3 > * { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .row-cols-sm-4 > * { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .row-cols-sm-5 > * { -ms-flex: 0 0 20%; flex: 0 0 20%; max-width: 20%; }\n  .row-cols-sm-6 > * { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-sm-auto { -ms-flex: 0 0 auto; flex: 0 0 auto; width: auto; max-width: 100%; }\n  .col-sm-1 { -ms-flex: 0 0 8.333333%; flex: 0 0 8.333333%; max-width: 8.333333%; }\n  .col-sm-2 { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-sm-3 { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .col-sm-4 { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .col-sm-5 { -ms-flex: 0 0 41.666667%; flex: 0 0 41.666667%; max-width: 41.666667%; }\n  .col-sm-6 { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .col-sm-7 { -ms-flex: 0 0 58.333333%; flex: 0 0 58.333333%; max-width: 58.333333%; }\n  .col-sm-8 { -ms-flex: 0 0 66.666667%; flex: 0 0 66.666667%; max-width: 66.666667%; }\n  .col-sm-9 { -ms-flex: 0 0 75%; flex: 0 0 75%; max-width: 75%; }\n  .col-sm-10 { -ms-flex: 0 0 83.333333%; flex: 0 0 83.333333%; max-width: 83.333333%; }\n  .col-sm-11 { -ms-flex: 0 0 91.666667%; flex: 0 0 91.666667%; max-width: 91.666667%; }\n  .col-sm-12 { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n}\n\n@media (min-width: 768px) {\n  .container, .container-sm, .container-md { max-width: 720px; }\n  .col-md { -ms-flex-preferred-size: 0; flex-basis: 0; -ms-flex-positive: 1; flex-grow: 1; max-width: 100%; }\n  .row-cols-md-1 > * { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n  .row-cols-md-2 > * { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .row-cols-md-3 > * { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .row-cols-md-4 > * { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .row-cols-md-5 > * { -ms-flex: 0 0 20%; flex: 0 0 20%; max-width: 20%; }\n  .row-cols-md-6 > * { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-md-auto { -ms-flex: 0 0 auto; flex: 0 0 auto; width: auto; max-width: 100%; }\n  .col-md-1 { -ms-flex: 0 0 8.333333%; flex: 0 0 8.333333%; max-width: 8.333333%; }\n  .col-md-2 { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-md-3 { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .col-md-4 { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .col-md-5 { -ms-flex: 0 0 41.666667%; flex: 0 0 41.666667%; max-width: 41.666667%; }\n  .col-md-6 { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .col-md-7 { -ms-flex: 0 0 58.333333%; flex: 0 0 58.333333%; max-width: 58.333333%; }\n  .col-md-8 { -ms-flex: 0 0 66.666667%; flex: 0 0 66.666667%; max-width: 66.666667%; }\n  .col-md-9 { -ms-flex: 0 0 75%; flex: 0 0 75%; max-width: 75%; }\n  .col-md-10 { -ms-flex: 0 0 83.333333%; flex: 0 0 83.333333%; max-width: 83.333333%; }\n  .col-md-11 { -ms-flex: 0 0 91.666667%; flex: 0 0 91.666667%; max-width: 91.666667%; }\n  .col-md-12 { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n}\n\n@media (min-width: 992px) {\n  .container, .container-sm, .container-md, .container-lg { max-width: 960px; }\n  .col-lg { -ms-flex-preferred-size: 0; flex-basis: 0; -ms-flex-positive: 1; flex-grow: 1; max-width: 100%; }\n  .row-cols-lg-1 > * { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n  .row-cols-lg-2 > * { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .row-cols-lg-3 > * { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .row-cols-lg-4 > * { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .row-cols-lg-5 > * { -ms-flex: 0 0 20%; flex: 0 0 20%; max-width: 20%; }\n  .row-cols-lg-6 > * { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-lg-auto { -ms-flex: 0 0 auto; flex: 0 0 auto; width: auto; max-width: 100%; }\n  .col-lg-1 { -ms-flex: 0 0 8.333333%; flex: 0 0 8.333333%; max-width: 8.333333%; }\n  .col-lg-2 { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-lg-3 { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .col-lg-4 { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .col-lg-5 { -ms-flex: 0 0 41.666667%; flex: 0 0 41.666667%; max-width: 41.666667%; }\n  .col-lg-6 { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .col-lg-7 { -ms-flex: 0 0 58.333333%; flex: 0 0 58.333333%; max-width: 58.333333%; }\n  .col-lg-8 { -ms-flex: 0 0 66.666667%; flex: 0 0 66.666667%; max-width: 66.666667%; }\n  .col-lg-9 { -ms-flex: 0 0 75%; flex: 0 0 75%; max-width: 75%; }\n  .col-lg-10 { -ms-flex: 0 0 83.333333%; flex: 0 0 83.333333%; max-width: 83.333333%; }\n  .col-lg-11 { -ms-flex: 0 0 91.666667%; flex: 0 0 91.666667%; max-width: 91.666667%; }\n  .col-lg-12 { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n}\n\n@media (min-width: 1200px) {\n  .container, .container-sm, .container-md, .container-lg, .container-xl { max-width: 1140px; }\n  .col-xl { -ms-flex-preferred-size: 0; flex-basis: 0; -ms-flex-positive: 1; flex-grow: 1; max-width: 100%; }\n  .row-cols-xl-1 > * { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n  .row-cols-xl-2 > * { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .row-cols-xl-3 > * { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .row-cols-xl-4 > * { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .row-cols-xl-5 > * { -ms-flex: 0 0 20%; flex: 0 0 20%; max-width: 20%; }\n  .row-cols-xl-6 > * { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-xl-auto { -ms-flex: 0 0 auto; flex: 0 0 auto; width: auto; max-width: 100%; }\n  .col-xl-1 { -ms-flex: 0 0 8.333333%; flex: 0 0 8.333333%; max-width: 8.333333%; }\n  .col-xl-2 { -ms-flex: 0 0 16.666667%; flex: 0 0 16.666667%; max-width: 16.666667%; }\n  .col-xl-3 { -ms-flex: 0 0 25%; flex: 0 0 25%; max-width: 25%; }\n  .col-xl-4 { -ms-flex: 0 0 33.333333%; flex: 0 0 33.333333%; max-width: 33.333333%; }\n  .col-xl-5 { -ms-flex: 0 0 41.666667%; flex: 0 0 41.666667%; max-width: 41.666667%; }\n  .col-xl-6 { -ms-flex: 0 0 50%; flex: 0 0 50%; max-width: 50%; }\n  .col-xl-7 { -ms-flex: 0 0 58.333333%; flex: 0 0 58.333333%; max-width: 58.333333%; }\n  .col-xl-8 { -ms-flex: 0 0 66.666667%; flex: 0 0 66.666667%; max-width: 66.666667%; }\n  .col-xl-9 { -ms-flex: 0 0 75%; flex: 0 0 75%; max-width: 75%; }\n  .col-xl-10 { -ms-flex: 0 0 83.333333%; flex: 0 0 83.333333%; max-width: 83.333333%; }\n  .col-xl-11 { -ms-flex: 0 0 91.666667%; flex: 0 0 91.666667%; max-width: 91.666667%; }\n  .col-xl-12 { -ms-flex: 0 0 100%; flex: 0 0 100%; max-width: 100%; }\n}\n\n/* SIZING */\n.w-25 { width: 25%!important; }\n.w-50 { width: 50%!important; }\n.w-75 { width: 75%!important; }\n.w-100 { width: 100%!important; }\n.h-25 { height: 25%!important; }\n.h-50 { height: 50%!important; }\n.h-75 { height: 75%!important; }\n.h-100 { height: 100%!important; }\n.mw-100 { max-width: 100%!important; }\n.mh-100 { max-height: 100%!important; }\n\n/* BORDERS */\n.border { border: 1px solid var(--color-gray) !important; }\n.border-top { border-top: 1px solid var(--color-gray) !important; }\n.border-right { border-right: 1px solid var(--color-gray) !important; }\n.border-bottom { border-bottom: 1px solid var(--color-gray) !important; }\n.border-left { border-left: 1px solid var(--color-gray) !important; }\n\n.border-0 { border: 0 !important; }\n.border-top-0 { border-top: 0 !important; }\n.border-right-0 { border-right: 0 !important; }\n.border-bottom-0 { border-bottom: 0 !important; }\n.border-left-0 { border-left: 0 !important; }\n\n/* INPUT GROUP */\n.input-group {\n  position: relative;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: stretch;\n  width: 100%;\n}\n\n.form-control {\n  display: block;\n  width: 100%;\n  background-clip: padding-box;\n}\n\n.input-group > .form-control {\n  position: relative;\n  flex: 1 1 auto;\n  width: 1%;\n  margin-bottom: 0;\n}\n\n.input-group > .form-control:focus {\n  z-index: 3;\n}\n\n.input-group-prepend, .input-group-append {\n  display: flex;\n}\n\n.input-group-text {\n  display: flex;\n  align-items: center;\n  margin-bottom: 0;\n  text-align: center;\n  white-space: nowrap;\n}\n\n/* SPINNER */\n@keyframes spinner-border { to { transform: rotate(360deg); } }\n.spinner-border { display: inline-block; width: 2rem; height: 2rem; vertical-align: text-bottom; border: .2em solid var(--color-gray600); border-right-color: transparent; border-radius: 50%; -webkit-animation: spinner-border .75s linear infinite; animation: spinner-border .75s linear infinite; }\n.spinner-border-sm { width: 1rem; height: 1rem; border-width: .1em;}\n.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }",
    "isSystem": true
  },
  {
    "_id": "5f58967ac6de48000824647b",
    "Name": "ThemeVariables",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <ThemeVariables />",
    "DemoJsxTranspiled": "export default executeAppBlock(ThemeVariables, null);",
    "JsxTranspiled": "var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nconst { This } = Mars.initJsx();\nexport default executeAppBlock(This.style, _extends({ plainCss: true }, Mars.settings.Theme));",
    "Jsx": "const { This } = Mars.initJsx();\nexport default <This.style plainCss {...Mars.settings.Theme} />;",
    "Css": ":root {\n  --spacer: '${data.spacing.spacer}';\n\n  --font-family: '${data.fonts.fontFamily}';\n  --font-title: '${data.fonts.title}';\n  --font-subtitle: '${data.fonts.subtitle}';\n  --font-default: '${data.fonts.default}';\n  --font-small: '${data.fonts.small}';\n  --font-extrasmall: '${data.fonts.extrasmall}';\n\n  --heading-font-weight: '${data.headings.fontWeight}';\n  --heading-line-height: '${data.headings.lineHeight}';\n  --heading-margin-bottom: '${data.headings.marginBottom}';\n  --heading-h1-font-size: '${data.headings.h1FontSize}';\n  --heading-h2-font-size: '${data.headings.h2FontSize}';\n  --heading-h3-font-size: '${data.headings.h3FontSize}';\n  --heading-h4-font-size: '${data.headings.h4FontSize}';\n  --heading-h5-font-size: '${data.headings.h5FontSize}';\n  --heading-h6-font-size: '${data.headings.h6FontSize}';\n\n  --button-border-radius: '${data.buttons.borderRadius}';\n  --button-padding-horizontal: '${data.buttons.paddingHorizontal}';\n  --button-padding-vertical: '${data.buttons.paddingVertical}';\n  --button-line-height: '${data.buttons.lineHeight}';\n  \n  --color-primary: '${data.colors.primary}';\n  --color-primary100: '${data.colors.primary100}';\n  --color-primary200: '${data.colors.primary200}';\n  --color-primary300: '${data.colors.primary300}';\n  --color-primary400: '${data.colors.primary400}';\n  --color-primary500: '${data.colors.primary500}';\n  --color-primary600: '${data.colors.primary600}';\n  --color-primary700: '${data.colors.primary700}';\n  --color-primary800: '${data.colors.primary800}';\n  --color-primary900: '${data.colors.primary900}';\n  --color-secondary: '${data.colors.secondary}';\n  --color-secondary100: '${data.colors.secondary100}';\n  --color-secondary200: '${data.colors.secondary200}';\n  --color-secondary300: '${data.colors.secondary300}';\n  --color-secondary400: '${data.colors.secondary400}';\n  --color-secondary500: '${data.colors.secondary500}';\n  --color-secondary600: '${data.colors.secondary600}';\n  --color-secondary700: '${data.colors.secondary700}';\n  --color-secondary800: '${data.colors.secondary800}';\n  --color-secondary900: '${data.colors.secondary900}';\n  --color-success: '${data.colors.success}';\n  --color-success100: '${data.colors.success100}';\n  --color-success200: '${data.colors.success200}';\n  --color-success300: '${data.colors.success300}';\n  --color-success400: '${data.colors.success400}';\n  --color-success500: '${data.colors.success500}';\n  --color-success600: '${data.colors.success600}';\n  --color-success700: '${data.colors.success700}';\n  --color-success800: '${data.colors.success800}';\n  --color-success900: '${data.colors.success900}';\n  --color-danger: '${data.colors.danger}';\n  --color-danger100: '${data.colors.danger100}';\n  --color-danger200: '${data.colors.danger200}';\n  --color-danger300: '${data.colors.danger300}';\n  --color-danger400: '${data.colors.danger400}';\n  --color-danger500: '${data.colors.danger500}';\n  --color-danger600: '${data.colors.danger600}';\n  --color-danger700: '${data.colors.danger700}';\n  --color-danger800: '${data.colors.danger800}';\n  --color-danger900: '${data.colors.danger900}';\n  --color-warning: '${data.colors.warning}';\n  --color-warning100: '${data.colors.warning100}';\n  --color-warning200: '${data.colors.warning200}';\n  --color-warning300: '${data.colors.warning300}';\n  --color-warning400: '${data.colors.warning400}';\n  --color-warning500: '${data.colors.warning500}';\n  --color-warning600: '${data.colors.warning600}';\n  --color-warning700: '${data.colors.warning700}';\n  --color-warning800: '${data.colors.warning800}';\n  --color-warning900: '${data.colors.warning900}';\n  --color-info: '${data.colors.info}';\n  --color-info100: '${data.colors.info100}';\n  --color-info200: '${data.colors.info200}';\n  --color-info300: '${data.colors.info300}';\n  --color-info400: '${data.colors.info400}';\n  --color-info500: '${data.colors.info500}';\n  --color-info600: '${data.colors.info600}';\n  --color-info700: '${data.colors.info700}';\n  --color-info800: '${data.colors.info800}';\n  --color-info900: '${data.colors.info900}';\n  --color-gray: '${data.colors.gray}';\n  --color-gray100: '${data.colors.gray100}';\n  --color-gray200: '${data.colors.gray200}';\n  --color-gray300: '${data.colors.gray300}';\n  --color-gray400: '${data.colors.gray400}';\n  --color-gray500: '${data.colors.gray500}';\n  --color-gray600: '${data.colors.gray600}';\n  --color-gray700: '${data.colors.gray700}';\n  --color-gray800: '${data.colors.gray800}';\n  --color-gray900: '${data.colors.gray900}';\n}\n",
    "isSystem": true
  },
  {
    "_id": "5f5896b6c6de48000824647c",
    "Name": "SearchBlockService",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <SearchBlockService />",
    "DemoJsxTranspiled": "export default executeAppBlock(SearchBlockService, null);",
    "BlockFunction": "const { _ } = Mars.libs;\n\nfunction search(query, blockType) {\n  if (!query) {\n    return {};\n  }\n\n  const name = query.toLowerCase().trim();\n  const blocks = Mars.allBlocks\n    .filter(i => i.Name.toLowerCase().indexOf(name) > -1 && i.Type === (blockType ? blockType : i.Type))\n    .slice(0, 20)\n    .map(i => ({ id: i._id, title: i.Name, folder: i.Folder }));;\n\n  return _.chain(blocks)\n    .groupBy('folder')\n    .map((value, key) => ({ title: key, items: value.map(i => ({ id: i.id, title: i.title })) }))\n    .value();\n}\n\nasync function server() {\n  return {};\n}\n\nasync function api() {\n  return {\n    search,\n  };\n}",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nexport default executeAppBlock(This.script, null);",
    "Jsx": "const { This } = Mars.initJsx();\nexport default <This.script />;",
    "Script": "new MarsBlock(data.Id, {\n  ...data,\n  methods: [\n    {\n      name: 'search',\n      block: 'SearchBlockService'\n    },\n  ],\n}, {});\n",
    "isSystem": true
  },
  {
    "_id": "5f5896e7c6de48000824647d",
    "Name": "SearchPanel",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default (\n  <MasterBasePage>\n    <SearchPanel placeholder=\"Search...\" />\n  </MasterBasePage>\n);",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  MasterBasePage,\n  null,\n  executeAppBlock(SearchPanel, { placeholder: \"Search...\" })\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.style, null),\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nexport default (\n  <Fragment>\n    <This.style />\n    <This.html />\n    <This.script />\n  </Fragment>\n);\n",
    "Html": "<div v-cloak id=\"XID\" class=\"p-1\">\n\t<div class=\"input-group\">\n\t\t<div class=\"input-group-prepend\">\n\t\t\t<span class=\"input-group-text search-panel-icons\" v-if=\"!IsLoading\">\n        <span class=\"search-panel-search-icon\"></span>\n\t\t\t</span>\n\t\t\t<div class=\"input-group-text search-panel-icons\" v-else>\n\t\t\t\t<div class=\"spinner-border spinner-border-sm\" role=\"status\">\n\t\t\t\t\t<span class=\"sr-only\">{{loaderText}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<input\n\t\t\tref=\"queryInput\"\n\t\t\ttype=\"text\"\n\t\t\tclass=\"form-control pl-0 m-2 ml-1 border-0 search-panel-input\"\n\t\t\t:placeholder=\"placeholder\"\n\t\t\t:aria-label=\"placeholder\"\n\t\t\tv-model=\"query\"\n\t\t\t@input=\"onQueryChange\" />\n\t\t<div class=\"input-group-append\">\n\t\t\t<a class=\"input-group-text search-panel-icons\" href=\"javascript:;\" @click=\"clearQuery\">\n\t\t\t\t<span class=\"search-panel-clear-icon\" aria-hidden=\"true\"></span>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\n\t<div v-if=\"results.length > 0 || noResults\" class=\"pb-2 px-4\">\n\t\t<span v-if=\"noResults\">{{fallbackMessage}}</span>\n\t\t<ul>\n\t\t\t<li v-for=\"rootItem in results\">\n\t\t\t\t<span v-if=\"rootItem.isGroup\" class=\"mt-1 search-panel-group-title\">{{rootItem.title}}</span>\n\t\t\t\t<span v-else class=\"py-1 search-panel-item-title\" @click=\"onClick(rootItem.payload)\">{{rootItem.title}}</span>\n\t\t\t\t<ul v-if=\"rootItem.isGroup && rootItem.items && rootItem.items.length\">\n\t\t\t\t\t<li v-for=\"item in rootItem.items\">\n\t\t\t\t\t\t<span class=\"search-panel-item-title\" @click=\"onClick(item.payload)\">{{item.title}}</span>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\t</div>\n</div>",
    "Script": "if (!window.SearchPanel) {\n  window.SearchPanel = {\n    init: (settings) => {\n      return new MarsVue(settings.Id, settings, {\n        data: {\n          placeholder: settings.placeholder || 'Search...',\n          results: settings.results || [],\n          loaderText: settings.loaderText || '',\n          fallbackMessage: settings.fallbackMessage || 'An error occured',\n          query: '',\n          IsLoading: false,\n        },\n        events: {\n          OnChange: {\n            query: 'string',\n          },\n          OnClear: {},\n          OnClick: {\n            payload: 'string',\n          },\n        },\n        mounted: function () {\n          this.$nextTick(() => {\n            if (this.$refs && this.$refs.queryInput) {\n              setTimeout(() => { this.$refs.queryInput.focus(); }, 250);\n            }\n          });\n        },\n        methods: {\n          clearQuery: function () {\n            this.query = '';\n            this.IsLoading = false;\n\n            this.$nextTick(() => {\n              if (this.$refs && this.$refs.queryInput) {\n                setTimeout(() => { this.$refs.queryInput.focus(); }, 250);\n              }\n            });\n\n            this.fire.OnClear();\n          },\n          onQueryChange: window.debounce(function () {\n            this.IsLoading = true;\n            this.fire.OnChange(this.query);\n\n            if (!this.query) {\n              this.clearQuery();\n            }\n          }, settings.debounce || 300),\n          setResults: function (items) {\n            this.IsLoading = false;\n            this.results = items;\n          },\n          onClick: function (payload) {\n            console.log(payload);\n            this.fire.OnClick(payload);\n          },\n        },\n        computed: {\n          noResults: function () {\n            return this.query && !(this.results && this.results.length > 0);\n          },\n        },\n      });\n    }\n  };\n}\n",
    "Css": ".search-panel-icons {\n  width: 24px;\n  justify-content: center;\n}\n\n.search-panel-input:focus {\n  outline: 0;\n}\n\n.search-panel-search-icon {\n  content: \"\";\n  width: 20px;\n  height: 20px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAB9UlEQVQ4T73UsWsTURgA8O979+BKbZpQBIO46GZdRa1oB0E6xIJTFqe4ZMm7y2WJ/4FO5u5dImTKJGJE6OJQh4IUxOLiIh1dgkTaqhBI5C7vffIGocZLrrTFW9/3/fi+7737EE75w1P24P+CrVZrIY7jK5xzFsfxrud5P9M6SqxQSrkIAE8A4CEA2AbRWitEfElEtWq1+m0a/A9oMER8R0QLiPhoOBy+zeVyKoqi20T0WCm1xDm/KYT4moQmgc8A4C5j7EalUjk4nNRut+ejKNrSWu+5rrueCpqZKaX2EfGBEOJ1UoKU8hoA7CDiJSHEl8mYvyr0ff86Y+zDaDRarNfrgySQiDAIggPLsspCiFczwWazuaK1fm/b9plyuTycNngp5R4AOI7jvJgJNhqNHCLuW5ZVEEJsTml5GQA+K6WWPc/bnQmawyAIniPiZdu2b01W2e12rX6//4aI5l3XXU29FBPg+/45ItrhnPeJyBFCfEREklKayp4CwJrWeiubzRZKpdKv1ApNQBiG57XWbUS8p7X+wRhTAHCWiLaJKGaM3QGAzUwmc38Snfkvh2F4EQCuEhFXSn0yM+t0OnODwWDDVJqEHms5TKL5fL5QLBZNF8ffNofQ1fF4fKFWq30/EWiSza33er3sH+zE4JGeTdq+Szv/Daof4BVX1BqfAAAAAElFTkSuQmCC);\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.search-panel-clear-icon {\n  content: \"\";\n  width: 16px;\n  height: 16px;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAApUlEQVQ4T+3UsQ7BUBQG4E8iPJbJRCzCwPMxkBgIg8VrkRjkJNpUU23J3bjzPV9Pz/lzOxKfTmLPH8wn2sMAF9xLc+5ighOu5R28m+EQZ2ywLKCBrTDHFLu2YLEwQ6M2w8ofyt26LRfR7bNiVtH1S5NNsQl0jYDiBLyomGurDuNSUjDpLydfyhiHhtjEnWPb2PQxwr4m2IHd2oJfP0JNsfkY/kHwATxWKhU36LC1AAAAAElFTkSuQmCC);\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: .5;\n}\n\n.search-panel-clear-icon:hover {\n  opacity: 1;\n}\n\n.search-panel-group-title {\n  display: block;\n  font-weight: 600;\n  font-size: .85rem;\n  cursor: pointer;\n}\n\n.search-panel-item-title {\n  display: block;\n  font-size: .8rem;\n  cursor: pointer;\n}",
    "isSystem": true
  },
  {
    "_id": "5f589723c6de48000824647e",
    "Name": "SearchModal",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default (\n  <MasterBasePage>\n    <SearchModal />\n    <SearchBlockService Id=\"searchBlockService\" />\n    <script>\n      window.searchDemoHandler = async (value) => searchBlockService.api.search(value)\n    </script>\n    <button onclick=\"SearchModal.open({ placeholder: 'Search demo...', debounce: 300 }, window.searchDemoHandler)\">Open</button>\n  </MasterBasePage>\n);",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  MasterBasePage,\n  null,\n  executeAppBlock(SearchModal, null),\n  executeAppBlock(SearchBlockService, { Id: \"searchBlockService\" }),\n  executeAppBlock(\n    \"script\",\n    null,\n    \"window.searchDemoHandler = async (value) => searchBlockService.api.search(value)\"\n  ),\n  executeAppBlock(\n    \"button\",\n    { onclick: \"SearchModal.open({ placeholder: 'Search demo...', debounce: 300 }, window.searchDemoHandler)\" },\n    \"Open\"\n  )\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(SearchPanel, { Id: \"search-panel-template\" }),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nexport default (\n  <Fragment>\n    <SearchPanel Id=\"search-panel-template\" />\n    <This.script />\n  </Fragment>\n);\n",
    "Script": "if (!window.SearchModal) {\n  const mars = new MarsBlock('searchmodal', data, {\n    _getRandomId(max) {\n      return Math.floor(Math.random() * Math.floor(max));\n    },\n    open: function (options, inputHandler, clickHandler) {\n      const settings = options || {\n        placeholder: 'Search...',\n        debounce: 300,\n        minLength: 3,\n        errorMsg: \"An error occured\",\n      };\n\n      settings.Id = 'search_panel_' + this._getRandomId(9999);\n\n      const template = document.getElementById('search-panel-template').cloneNode(true);\n      template.setAttribute('id', settings.Id);\n      Modal.open(template, { hideModalHeader: true, hideCloseButton: true, noPadding: true, width: '400px', position: 'top' });\n      const panel = SearchPanel.init(settings);\n      panel.OnChange = async (query) => {\n        if (!inputHandler) {\n          return;\n        }\n\n        const results = await inputHandler(query);\n        panel.vue.setResults(results);\n      };\n\n      panel.OnClick = (payload) => {\n        if (!clickHandler) {\n          return;\n        }\n\n        clickHandler(payload);\n      };\n\n      return panel;\n    },\n  });\n\n  window.SearchModal = window.SearchModal || mars;\n}",
    "isSystem": true
  },
  {
    "_id": "5f589ad9f4b57800070873bf",
    "Name": "WysiwygTestPage",
    "Type": "page",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default <WysiwygTestPage />",
    "DemoJsxTranspiled": "export default executeAppBlock(WysiwygTestPage, null);",
    "Page": {
      "settings": {
        "url": "/WysiwygTestPage",
        "title": "WysiwygTestPage",
        "master": "MasterBasePage",
        "icon": "",
        "cache": {
          "ttl": 0
        }
      }
    },
    "JsxTranspiled": "export default executeAppBlock(\n  Page,\n  { master: \"MasterBasePage\", title: \"WysiwygTestPage\" },\n  executeAppBlock(Wysiwyg, { Id: \"WysiwygTest\" }),\n  executeAppBlock(PageAdminActions, { actions: [{\n      title: 'Edit page content',\n      blockId: 'WysiwygTest'\n    }] }),\n  executeAppBlock(CmsAdminBtn, null)\n);",
    "Jsx": "export default (\n  <Page master=\"MasterBasePage\" title=\"WysiwygTestPage\">\n    <Wysiwyg Id=\"WysiwygTest\" />\n    <PageAdminActions actions={[\n      {\n        title: 'Edit page content',\n        blockId: 'WysiwygTest',\n      }\n    ]} />\n    <CmsAdminBtn />\n  </Page>\n);\n",
    "blocks": {
      "WysiwygTest": {
        "content": [
          {
            "type": "header",
            "data": {
              "text": "Title",
              "level": 2
            }
          },
          {
            "type": "marsBlock",
            "data": {
              "id": "block_1599647067986",
              "settings": {
                "justify": "justify-content-center",
                "margin": {
                  "top": 3,
                  "right": 0,
                  "bottom": 3,
                  "left": 0
                },
                "padding": {
                  "top": 0,
                  "right": 0,
                  "bottom": 0,
                  "left": 0
                }
              },
              "block": "ReviewLikeButton"
            }
          },
          {
            "type": "row",
            "data": {
              "settings": {
                "justify": "justify-content-between",
                "align": "align-items-center",
                "margin": {
                  "top": 0,
                  "right": 0,
                  "bottom": 0,
                  "left": 0
                },
                "padding": {
                  "top": 0,
                  "right": 0,
                  "bottom": 0,
                  "left": 0
                },
                "wrap": false
              },
              "blocks": [
                {
                  "id": "block_1599647211272",
                  "block": "ReviewLikeButton",
                  "settings": {
                    "flexGrow": 0,
                    "flexFill": false
                  }
                },
                {
                  "id": "block_1599647710815",
                  "block": "TestButton",
                  "settings": {
                    "flexGrow": 0,
                    "flexFill": false
                  }
                },
                {
                  "id": "block_1599647720039",
                  "block": "ReviewLikeButton",
                  "settings": {
                    "flexGrow": 0,
                    "flexFill": false
                  }
                }
              ]
            }
          },
          {
            "type": "marsBlock",
            "data": {
              "id": "block_1599647884931",
              "settings": {
                "justify": "justify-content-center",
                "margin": {
                  "top": 3,
                  "right": 0,
                  "bottom": 3,
                  "left": 0
                },
                "padding": {
                  "top": 0,
                  "right": 0,
                  "bottom": 0,
                  "left": 0
                }
              },
              "block": "ReviewLikeButton"
            }
          },
          {
            "type": "image",
            "data": {
              "file": {
                "url": "https://marscode.s3.eu-north-1.amazonaws.com/assets/img/img-1599653092221.png",
                "name": "img-1599653092221.png"
              },
              "caption": "",
              "withBorder": false,
              "stretched": true,
              "withBackground": false
            }
          }
        ]
      }
    },
    "isSystem": true
  },
  {
    "_id": "5f589b79f4b57800070873c0",
    "Name": "ExecuteBlocksArray",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "wysiwyg",
    "DataArgs": [],
    "DemoJsx": "export default <ExecuteBlocksArray />",
    "DemoJsxTranspiled": "export default executeAppBlock(ExecuteBlocksArray, null);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nexport default executeAppBlock(This.script, null);",
    "Jsx": "const { This } = Mars.initJsx();\nexport default <This.script />;",
    "BlockFunction": "function server() {\n  return {};\n}\n\nfunction api() {\n  return {\n    async execute(blocks) {\n      const results = await Promise.all(blocks.map(i => Mars.blocks[i.name](Mars, { Id: i.id }, Req)));\n      return blocks.reduce(function (res, block, ix) {\n        res[block.id] = results[ix];\n        return res;\n      }, {});\n    },\n  }\n}\n",
    "Script": "new MarsBlock(data.Id, {\n  ...data,\n  methods: [\n    { name: 'execute', block: 'ExecuteBlocksArray' },\n  ]\n}, {});",
    "isSystem": true
  },
  {
    "_id": "5f589c9389ed4841f8360c9f",
    "Name": "CssFile",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "css",
    "DataArgs": [],
    "DemoJsx": "export default <CssFile />",
    "DemoJsxTranspiled": "export default executeAppBlock(CssFile, null);",
    "JsxTranspiled": "Req.response.contentType('text/css; charset=UTF-8');\nexport default data.children.join('\\n');",
    "Jsx": "Req.response.contentType('text/css; charset=UTF-8')\r\nexport default data.children.join('\\n')",
    "isSystem": true
  },
  {
    "_id": "5f589d7989ed4841f8360ca0",
    "Name": "ThemeCss",
    "Type": "page",
    "Apps": [],
    "Folder": "cms",
    "DataArgs": [],
    "DemoJsx": "export default <ThemeCss />",
    "DemoJsxTranspiled": "export default executeAppBlock(ThemeCss, null);",
    "updatedAt": "2020-09-09T09:17:20.700Z",
    "Page": {
      "settings": {
        "url": "/assets/css/theme.css",
        "title": "theme css",
        "master": "",
        "icon": "",
        "cache": {
          "ttl": 60
        }
      }
    },
    "JsxTranspiled": "export default executeAppBlock(\n  CssFile,\n  null,\n  executeAppBlock(ThemeVariables, null),\n  executeAppBlock(ThemeStyles, null)\n);",
    "Jsx": "export default (\r\n  <CssFile>\r\n    <ThemeVariables />\r\n    <ThemeStyles />\r\n  </CssFile>\r\n);\r\n",
    "isSystem": true
  },
  {
    "_id": "5f58a3272e68290008385da2",
    "Name": "TestButton",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "test",
    "DataArgs": [],
    "DemoJsx": "export default (\n  <Page master=\"MasterBasePage\" title=\"Button Demo\">\n    <TestButton />\n  </Page>\n);",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  Page,\n  { master: \"MasterBasePage\", title: \"Button Demo\" },\n  executeAppBlock(TestButton, null)\n);",
    "Html": "<button class=\"btn btn-primary\">Hello world</button>\n<button class=\"btn btn-secondary ml-2\">Hello world 2</button>",
    "JsxTranspiled": "const { This } = Mars.initJsx();\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.html, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\nexport default (\n  <Fragment>\n    <This.html />\n  </Fragment>\n);\n",
    "isSystem": true
  },
  {
    "_id": "5f58b0e1a55e160008cc3bd6",
    "Name": "MarginPadding",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "wysiwyg",
    "DataArgs": [
      {
        "DataType": "object",
        "PropName": "margin",
        "Description": "Margins",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "top"
          },
          {
            "DataType": "int",
            "PropName": "right"
          },
          {
            "DataType": "int",
            "PropName": "bottom"
          },
          {
            "DataType": "int",
            "PropName": "left"
          }
        ]
      },
      {
        "DataType": "object",
        "PropName": "padding",
        "Description": "Paddings",
        "SubArgs": [
          {
            "DataType": "int",
            "PropName": "top"
          },
          {
            "DataType": "int",
            "PropName": "right"
          },
          {
            "DataType": "int",
            "PropName": "bottom"
          },
          {
            "DataType": "int",
            "PropName": "left"
          }
        ]
      }
    ],
    "DemoJsx": "export default (\n  <MasterBasePage>\n    <MarginPadding />\n  </MasterBasePage>\n);",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  MasterBasePage,\n  null,\n  executeAppBlock(MarginPadding, null)\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nconst margin = data.margin || { top: 0, right: 0, bottom: 0, left: 0 };\nconst padding = data.padding || { top: 0, right: 0, bottom: 0, left: 0 };\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.style, null),\n  executeAppBlock(\n    \"div\",\n    { id: data.Id, \"class\": \"margin-padding-container d-flex m-3\" },\n    executeAppBlock(\n      \"div\",\n      { \"class\": \"margin-area position-relative d-flex justify-content-around align-items-evenly\" },\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"margin-padding-title\" },\n        \"margin\"\n      ),\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n        executeAppBlock(InputSpinner, { Id: `${data.Id}_margin_left`, min: 0, max: 5, value: margin.left || 0 })\n      ),\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"margin-center d-flex flex-column justify-content-center align-items-center\" },\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n          executeAppBlock(InputSpinner, { Id: `${data.Id}_margin_top`, min: 0, max: 5, value: margin.top || 0 })\n        ),\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"padding-area position-relative d-flex justify-content-around align-items-evenly\" },\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"margin-padding-title\" },\n            \"padding\"\n          ),\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n            executeAppBlock(InputSpinner, { Id: `${data.Id}_padding_left`, min: 0, max: 5, value: padding.left || 0 })\n          ),\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"padding-center d-flex flex-column justify-content-center align-items-center\" },\n            executeAppBlock(\n              \"div\",\n              { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n              executeAppBlock(InputSpinner, { Id: `${data.Id}_padding_top`, min: 0, max: 5, value: padding.top || 0 })\n            ),\n            executeAppBlock(\n              \"div\",\n              { \"class\": \"padding-border\" },\n              executeAppBlock(\n                \"div\",\n                { \"class\": \"d-flex justify-content-center align-items-center content-area\" },\n                \"block content\"\n              )\n            ),\n            executeAppBlock(\n              \"div\",\n              { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n              executeAppBlock(InputSpinner, { Id: `${data.Id}_padding_bottom`, min: 0, max: 5, value: padding.bottom || 0 })\n            )\n          ),\n          executeAppBlock(\n            \"div\",\n            { \"class\": \"padding-right p-2 d-flex justify-content-center align-items-center\" },\n            executeAppBlock(InputSpinner, { Id: `${data.Id}_padding_right`, min: 0, max: 5, value: padding.right || 0 })\n          )\n        ),\n        executeAppBlock(\n          \"div\",\n          { \"class\": \"p-2 d-flex justify-content-center align-items-center\" },\n          executeAppBlock(InputSpinner, { Id: `${data.Id}_margin_bottom`, min: 0, max: 5, value: margin.bottom || 0 })\n        )\n      ),\n      executeAppBlock(\n        \"div\",\n        { \"class\": \"margin-right p-2 d-flex justify-content-center align-items-center\" },\n        executeAppBlock(InputSpinner, { Id: `${data.Id}_margin_right`, min: 0, max: 5, value: margin.right || 0 })\n      )\n    )\n  ),\n  executeAppBlock(This.script, null)\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nconst margin = data.margin || { top: 0, right: 0, bottom: 0, left: 0 };\nconst padding = data.padding || { top: 0, right: 0, bottom: 0, left: 0 };\n\nexport default (\n  <Fragment>\n    <This.style />\n    <div id={data.Id} class=\"margin-padding-container d-flex m-3\">\n      <div class=\"margin-area position-relative d-flex justify-content-around align-items-evenly\">\n        <div class=\"margin-padding-title\">margin</div>\n        <div class=\"p-2 d-flex justify-content-center align-items-center\">\n          <InputSpinner Id={`${data.Id}_margin_left`} min={0} max={5} value={margin.left || 0} />\n        </div>\n        <div class=\"margin-center d-flex flex-column justify-content-center align-items-center\">\n          <div class=\"p-2 d-flex justify-content-center align-items-center\">\n            <InputSpinner Id={`${data.Id}_margin_top`} min={0} max={5} value={margin.top || 0} />\n          </div>\n          <div class=\"padding-area position-relative d-flex justify-content-around align-items-evenly\">\n            <div class=\"margin-padding-title\">padding</div>\n            <div class=\"p-2 d-flex justify-content-center align-items-center\">\n              <InputSpinner Id={`${data.Id}_padding_left`} min={0} max={5} value={padding.left || 0} />\n            </div>\n            <div class=\"padding-center d-flex flex-column justify-content-center align-items-center\">\n              <div class=\"p-2 d-flex justify-content-center align-items-center\">\n                <InputSpinner Id={`${data.Id}_padding_top`} min={0} max={5} value={padding.top || 0} />\n              </div>\n              <div class=\"padding-border\">\n                <div class=\"d-flex justify-content-center align-items-center content-area\">\n                  block content\n                </div>\n              </div>\n              <div class=\"p-2 d-flex justify-content-center align-items-center\">\n                <InputSpinner Id={`${data.Id}_padding_bottom`} min={0} max={5} value={padding.bottom || 0} />\n              </div>\n            </div>\n            <div class=\"padding-right p-2 d-flex justify-content-center align-items-center\">\n              <InputSpinner Id={`${data.Id}_padding_right`} min={0} max={5} value={padding.right || 0} />\n            </div>\n          </div>\n          <div class=\"p-2 d-flex justify-content-center align-items-center\">\n            <InputSpinner Id={`${data.Id}_margin_bottom`} min={0} max={5} value={margin.bottom || 0} />\n          </div>\n        </div>\n        <div class=\"margin-right p-2 d-flex justify-content-center align-items-center\">\n          <InputSpinner Id={`${data.Id}_margin_right`} min={0} max={5} value={margin.right || 0} />\n        </div>\n      </div>\n    </div>\n    <This.script />\n  </Fragment>\n);\n",
    "Script": "new MarsBlock(data.Id, data, {\n  _mt: window[`${data.Id}_margin_top`],\n  _mr: window[`${data.Id}_margin_right`],\n  _mb: window[`${data.Id}_margin_bottom`],\n  _ml: window[`${data.Id}_margin_left`],\n  _pt: window[`${data.Id}_padding_top`],\n  _pr: window[`${data.Id}_padding_right`],\n  _pb: window[`${data.Id}_padding_bottom`],\n  _pl: window[`${data.Id}_padding_left`],\n  save: function () {\n    return {\n      margin: {\n        top: this._mt.value || 0,\n        right: this._mr.value || 0,\n        bottom: this._mb.value || 0,\n        left: this._ml.value || 0,\n      },\n      padding: {\n        top: this._pt.value || 0,\n        right: this._pr.value || 0,\n        bottom: this._pb.value || 0,\n        left: this._pl.value || 0,\n      },\n    };\n  },\n});\n\n",
    "Css": ".margin-padding-title {\n  position: absolute;\n  top: 4px;\n  left: 5px;\n  font-size: var(--font-extrasmall);\n  color: var(--color-gray);\n}\n\n.margin-area {\n  background-color: var(--color-danger100);\n  border: 1px dashed var(--color-gray600);\n}\n\n.padding-area {\n  background-color: var(--color-success100);\n  border: 1px dashed var(--color-gray600);\n}\n\n.content-area {\n  font-size: var(--font-small);\n  width: 140px;\n  height: 40px;\n  background-color: var(--color-primary300);\n  border: 1px dashed var(--color-gray600);\n}\n\n.margin-padding-container .qty-container {\n  width: 80px;\n  height: 26px;\n}\n\n.margin-padding-container .qty-icon {\n  font-size: 12px;\n  width: 26px;\n  height: 26px;\n  border-radius: 26px;\n  line-height: 26px;\n}",
    "isSystem": true
  },
  {
    "_id": "5f58b120a55e160008cc3bd7",
    "Name": "InputSpinner",
    "Type": "jsx3",
    "Apps": [],
    "Folder": "common/components",
    "DataArgs": [
      {
        "DataType": "number",
        "PropName": "value",
        "NullAllowed": true
      },
      {
        "DataType": "number",
        "PropName": "min",
        "NullAllowed": true
      },
      {
        "DataType": "number",
        "PropName": "max",
        "NullAllowed": true
      }
    ],
    "DemoJsx": "export default (\n  <Page master=\"MasterBasePage\" title=\"InputSpinner Demo\">\n    <div>\n      <MasterBasePage />\n      <table>\n        <tr>\n          <td>No params</td>\n          <td>\n            <InputSpinner Id=\"sp_1\" />\n          </td>\n        </tr>\n        <tr>\n          <td>Qty</td>\n          <td>\n            <InputSpinner Id=\"sp_2\" qty={2} />\n          </td>\n        </tr>\n        <tr>\n          <td>Min</td>\n          <td>\n            <InputSpinner Id=\"sp_3\" min={3} />\n          </td>\n        </tr>\n        <tr>\n          <td>Max</td>\n          <td>\n            <InputSpinner Id=\"sp_4\" max={4} />\n          </td>\n        </tr>\n        <tr>\n          <td>Min & Max</td>\n          <td>\n            <InputSpinner Id=\"sp_5\" min={2} max={4} />\n          </td>\n        </tr>\n        <tr>\n          <td>Qty & Min & Max</td>\n          <td>\n            <InputSpinner Id=\"sp_6\" qty={3} min={2} max={4} />\n          </td>\n        </tr>\n      </table>\n    </div>\n  </Page>\n);\n",
    "DemoJsxTranspiled": "export default executeAppBlock(\n  Page,\n  { master: \"MasterBasePage\", title: \"InputSpinner Demo\" },\n  executeAppBlock(\n    \"div\",\n    null,\n    executeAppBlock(MasterBasePage, null),\n    executeAppBlock(\n      \"table\",\n      null,\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"No params\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_1\" })\n        )\n      ),\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"Qty\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_2\", qty: 2 })\n        )\n      ),\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"Min\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_3\", min: 3 })\n        )\n      ),\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"Max\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_4\", max: 4 })\n        )\n      ),\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"Min & Max\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_5\", min: 2, max: 4 })\n        )\n      ),\n      executeAppBlock(\n        \"tr\",\n        null,\n        executeAppBlock(\n          \"td\",\n          null,\n          \"Qty & Min & Max\"\n        ),\n        executeAppBlock(\n          \"td\",\n          null,\n          executeAppBlock(InputSpinner, { Id: \"sp_6\", qty: 3, min: 2, max: 4 })\n        )\n      )\n    )\n  )\n);",
    "JsxTranspiled": "const { This } = Mars.initJsx();\n\nexport default executeAppBlock(\n  Fragment,\n  null,\n  executeAppBlock(This.style, null),\n  executeAppBlock(This.html, null),\n  executeAppBlock(This.script, data)\n);",
    "Jsx": "const { This } = Mars.initJsx();\n\nexport default (\n  <Fragment>\n    <This.style />\n    <This.html />\n    <This.script {...data} />\n  </Fragment>\n);\n",
    "Html": "<div id=\"XID\" class=\"qty-container\" v-cloak>\n\t<div v-on:click=\"dec()\" class=\"qty-icon-wrapper\">\n\t\t<span :class=\"['hdd-minus', 'qty-icon', canDec ? '' : 'qty-disabled']\"></span>\n\t</div>\n\t<div class=\"qty-text\">{{ value }}</div>\n\t<div v-on:click=\"inc()\" class=\"qty-icon-wrapper\">\n\t\t<span :class=\"['hdd-plus', 'qty-icon', canInc ? '' : 'qty-disabled']\"></span>\n\t</div>\n</div>",
    "Script": "new MarsVue(data.Id, data, {\n  data: {\n    ...data,\n    value: data.value || data.min || 0,\n    min: data.min || 0,\n  },\n  events: {\n    OnIncrease: { value: 'string' },\n    OnDecrease: { value: 'string' },\n  },\n  methods: {\n    inc() {\n      if (this.max !== undefined && this.max < (this.value + 1)) {\n        return;\n      }\n\n      this.value += 1;\n      this.fire.OnIncrease(this.value);\n    },\n    dec() {\n      if (this.min > (this.value - 1)) {\n        return;\n      }\n\n      this.value -= 1;\n      this.fire.OnDecrease(this.value);\n    },\n  },\n  computed: {\n    canDec: function () {\n      return this.value > this.min;\n    },\n    canInc: function () {\n      return this.max === undefined || this.max !== this.value;\n    },\n  },\n});\n",
    "Css": ".qty-container {\n  display: flex;\n  flex-direction: row;\n  width: 105px;\n  height: 32px;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.qty-text {\n  font-size: 18px;\n  font-weight: 400;\n  user-select: none;\n}\n\n.qty-icon-wrapper {\n  cursor: pointer;\n}\n\n.qty-icon {\n  display: block;\n  font-size: 20px;\n  width: 32px;\n  height: 32px; \n  border-radius: 32px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: white;\n  color: var(--color-gray900);\n  text-align: center;\n  line-height: 32px;\n  box-shadow: 0px 0px 3px 2px rgba(0, 0, 0, 0.095);\n}\n\n.qty-icon:hover {\n  background-color: var(--color-gray100);\n  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.1);\n}\n\n.qty-disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.qty-disabled:hover {\n  background-color: white;\n}",
    "isSystem": true
  }
]